function $y(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Ms=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ih(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function eb(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Pm={exports:{}},rh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tb=Symbol.for("react.transitional.element"),nb=Symbol.for("react.fragment");function Fm(e,t,n){var r=null;if(n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),"key"in t){n={};for(var s in t)s!=="key"&&(n[s]=t[s])}else n=t;return t=n.ref,{$$typeof:tb,type:e,key:r,ref:t!==void 0?t:null,props:n}}rh.Fragment=nb;rh.jsx=Fm;rh.jsxs=Fm;Pm.exports=rh;var h=Pm.exports,Um={exports:{}},Jt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V1=Symbol.for("react.transitional.element"),ib=Symbol.for("react.portal"),rb=Symbol.for("react.fragment"),ab=Symbol.for("react.strict_mode"),sb=Symbol.for("react.profiler"),ob=Symbol.for("react.consumer"),lb=Symbol.for("react.context"),cb=Symbol.for("react.forward_ref"),ub=Symbol.for("react.suspense"),fb=Symbol.for("react.memo"),zm=Symbol.for("react.lazy"),Cg=Symbol.iterator;function hb(e){return e===null||typeof e!="object"?null:(e=Cg&&e[Cg]||e["@@iterator"],typeof e=="function"?e:null)}var Hm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gm=Object.assign,qm={};function qc(e,t,n){this.props=e,this.context=t,this.refs=qm,this.updater=n||Hm}qc.prototype.isReactComponent={};qc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Vm(){}Vm.prototype=qc.prototype;function Y1(e,t,n){this.props=e,this.context=t,this.refs=qm,this.updater=n||Hm}var W1=Y1.prototype=new Vm;W1.constructor=Y1;Gm(W1,qc.prototype);W1.isPureReactComponent=!0;var Eg=Array.isArray,oi={H:null,A:null,T:null,S:null,V:null},Ym=Object.prototype.hasOwnProperty;function X1(e,t,n,r,s,o){return n=o.ref,{$$typeof:V1,type:e,key:t,ref:n!==void 0?n:null,props:o}}function db(e,t){return X1(e.type,t,void 0,void 0,void 0,e.props)}function Z1(e){return typeof e=="object"&&e!==null&&e.$$typeof===V1}function gb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Tg=/\/+/g;function qh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gb(""+e.key):t.toString(36)}function _g(){}function pb(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(_g,_g):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function ac(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(o){case"bigint":case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case V1:case ib:f=!0;break;case zm:return f=e._init,ac(f(e._payload),t,n,r,s)}}if(f)return s=s(e),f=r===""?"."+qh(e,0):r,Eg(s)?(n="",f!=null&&(n=f.replace(Tg,"$&/")+"/"),ac(s,t,n,"",function(y){return y})):s!=null&&(Z1(s)&&(s=db(s,n+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(Tg,"$&/")+"/")+f)),t.push(s)),1;f=0;var p=r===""?".":r+":";if(Eg(e))for(var m=0;m<e.length;m++)r=e[m],o=p+qh(r,m),f+=ac(r,t,n,o,s);else if(m=hb(e),typeof m=="function")for(e=m.call(e),m=0;!(r=e.next()).done;)r=r.value,o=p+qh(r,m++),f+=ac(r,t,n,o,s);else if(o==="object"){if(typeof e.then=="function")return ac(pb(e),t,n,r,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return f}function Vf(e,t,n){if(e==null)return e;var r=[],s=0;return ac(e,r,"","",function(o){return t.call(n,o,s++)}),r}function mb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ig=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function xb(){}Jt.Children={map:Vf,forEach:function(e,t,n){Vf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Vf(e,function(){t++}),t},toArray:function(e){return Vf(e,function(t){return t})||[]},only:function(e){if(!Z1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Jt.Component=qc;Jt.Fragment=rb;Jt.Profiler=sb;Jt.PureComponent=Y1;Jt.StrictMode=ab;Jt.Suspense=ub;Jt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oi;Jt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return oi.H.useMemoCache(e)}};Jt.cache=function(e){return function(){return e.apply(null,arguments)}};Jt.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var r=Gm({},e.props),s=e.key,o=void 0;if(t!=null)for(f in t.ref!==void 0&&(o=void 0),t.key!==void 0&&(s=""+t.key),t)!Ym.call(t,f)||f==="key"||f==="__self"||f==="__source"||f==="ref"&&t.ref===void 0||(r[f]=t[f]);var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){for(var p=Array(f),m=0;m<f;m++)p[m]=arguments[m+2];r.children=p}return X1(e.type,s,void 0,void 0,o,r)};Jt.createContext=function(e){return e={$$typeof:lb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:ob,_context:e},e};Jt.createElement=function(e,t,n){var r,s={},o=null;if(t!=null)for(r in t.key!==void 0&&(o=""+t.key),t)Ym.call(t,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(s[r]=t[r]);var f=arguments.length-2;if(f===1)s.children=n;else if(1<f){for(var p=Array(f),m=0;m<f;m++)p[m]=arguments[m+2];s.children=p}if(e&&e.defaultProps)for(r in f=e.defaultProps,f)s[r]===void 0&&(s[r]=f[r]);return X1(e,o,void 0,void 0,null,s)};Jt.createRef=function(){return{current:null}};Jt.forwardRef=function(e){return{$$typeof:cb,render:e}};Jt.isValidElement=Z1;Jt.lazy=function(e){return{$$typeof:zm,_payload:{_status:-1,_result:e},_init:mb}};Jt.memo=function(e,t){return{$$typeof:fb,type:e,compare:t===void 0?null:t}};Jt.startTransition=function(e){var t=oi.T,n={};oi.T=n;try{var r=e(),s=oi.S;s!==null&&s(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(xb,Ig)}catch(o){Ig(o)}finally{oi.T=t}};Jt.unstable_useCacheRefresh=function(){return oi.H.useCacheRefresh()};Jt.use=function(e){return oi.H.use(e)};Jt.useActionState=function(e,t,n){return oi.H.useActionState(e,t,n)};Jt.useCallback=function(e,t){return oi.H.useCallback(e,t)};Jt.useContext=function(e){return oi.H.useContext(e)};Jt.useDebugValue=function(){};Jt.useDeferredValue=function(e,t){return oi.H.useDeferredValue(e,t)};Jt.useEffect=function(e,t,n){var r=oi.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)};Jt.useId=function(){return oi.H.useId()};Jt.useImperativeHandle=function(e,t,n){return oi.H.useImperativeHandle(e,t,n)};Jt.useInsertionEffect=function(e,t){return oi.H.useInsertionEffect(e,t)};Jt.useLayoutEffect=function(e,t){return oi.H.useLayoutEffect(e,t)};Jt.useMemo=function(e,t){return oi.H.useMemo(e,t)};Jt.useOptimistic=function(e,t){return oi.H.useOptimistic(e,t)};Jt.useReducer=function(e,t,n){return oi.H.useReducer(e,t,n)};Jt.useRef=function(e){return oi.H.useRef(e)};Jt.useState=function(e){return oi.H.useState(e)};Jt.useSyncExternalStore=function(e,t,n){return oi.H.useSyncExternalStore(e,t,n)};Jt.useTransition=function(){return oi.H.useTransition()};Jt.version="19.1.1";Um.exports=Jt;var He=Um.exports;const Fl=ih(He);var Wm={exports:{}},ah={},Xm={exports:{}},Zm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Q,W){var ue=Q.length;Q.push(W);e:for(;0<ue;){var oe=ue-1>>>1,ye=Q[oe];if(0<s(ye,W))Q[oe]=W,Q[ue]=ye,ue=oe;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var W=Q[0],ue=Q.pop();if(ue!==W){Q[0]=ue;e:for(var oe=0,ye=Q.length,xe=ye>>>1;oe<xe;){var z=2*(oe+1)-1,G=Q[z],ie=z+1,fe=Q[ie];if(0>s(G,ue))ie<ye&&0>s(fe,G)?(Q[oe]=fe,Q[ie]=ue,oe=ie):(Q[oe]=G,Q[z]=ue,oe=z);else if(ie<ye&&0>s(fe,ue))Q[oe]=fe,Q[ie]=ue,oe=ie;else break e}}return W}function s(Q,W){var ue=Q.sortIndex-W.sortIndex;return ue!==0?ue:Q.id-W.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var f=Date,p=f.now();e.unstable_now=function(){return f.now()-p}}var m=[],y=[],S=1,w=null,E=3,A=!1,U=!1,O=!1,H=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function j(Q){for(var W=n(y);W!==null;){if(W.callback===null)r(y);else if(W.startTime<=Q)r(y),W.sortIndex=W.expirationTime,t(m,W);else break;W=n(y)}}function q(Q){if(O=!1,j(Q),!U)if(n(m)!==null)U=!0,K||(K=!0,L());else{var W=n(y);W!==null&&ne(q,W.startTime-Q)}}var K=!1,P=-1,R=5,M=-1;function J(){return H?!0:!(e.unstable_now()-M<R)}function F(){if(H=!1,K){var Q=e.unstable_now();M=Q;var W=!0;try{e:{U=!1,O&&(O=!1,T(P),P=-1),A=!0;var ue=E;try{t:{for(j(Q),w=n(m);w!==null&&!(w.expirationTime>Q&&J());){var oe=w.callback;if(typeof oe=="function"){w.callback=null,E=w.priorityLevel;var ye=oe(w.expirationTime<=Q);if(Q=e.unstable_now(),typeof ye=="function"){w.callback=ye,j(Q),W=!0;break t}w===n(m)&&r(m),j(Q)}else r(m);w=n(m)}if(w!==null)W=!0;else{var xe=n(y);xe!==null&&ne(q,xe.startTime-Q),W=!1}}break e}finally{w=null,E=ue,A=!1}W=void 0}}finally{W?L():K=!1}}}var L;if(typeof D=="function")L=function(){D(F)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ce=re.port2;re.port1.onmessage=F,L=function(){ce.postMessage(null)}}else L=function(){_(F,0)};function ne(Q,W){P=_(function(){Q(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_next=function(Q){switch(E){case 1:case 2:case 3:var W=3;break;default:W=E}var ue=E;E=W;try{return Q()}finally{E=ue}},e.unstable_requestPaint=function(){H=!0},e.unstable_runWithPriority=function(Q,W){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ue=E;E=Q;try{return W()}finally{E=ue}},e.unstable_scheduleCallback=function(Q,W,ue){var oe=e.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?oe+ue:oe):ue=oe,Q){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=ue+ye,Q={id:S++,callback:W,priorityLevel:Q,startTime:ue,expirationTime:ye,sortIndex:-1},ue>oe?(Q.sortIndex=ue,t(y,Q),n(m)===null&&Q===n(y)&&(O?(T(P),P=-1):O=!0,ne(q,ue-oe))):(Q.sortIndex=ye,t(m,Q),U||A||(U=!0,K||(K=!0,L()))),Q},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(Q){var W=E;return function(){var ue=E;E=W;try{return Q.apply(this,arguments)}finally{E=ue}}}})(Zm);Xm.exports=Zm;var yb=Xm.exports,Qm={exports:{}},jr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bb=He;function Km(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function go(){}var Mr={d:{f:go,r:function(){throw Error(Km(522))},D:go,C:go,L:go,m:go,X:go,S:go,M:go},p:0,findDOMNode:null},vb=Symbol.for("react.portal");function wb(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vb,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}var Au=bb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function sh(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}jr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Mr;jr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Km(299));return wb(e,t,null,n)};jr.flushSync=function(e){var t=Au.T,n=Mr.p;try{if(Au.T=null,Mr.p=2,e)return e()}finally{Au.T=t,Mr.p=n,Mr.d.f()}};jr.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Mr.d.C(e,t))};jr.prefetchDNS=function(e){typeof e=="string"&&Mr.d.D(e)};jr.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,r=sh(n,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,o=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Mr.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:o}):n==="script"&&Mr.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:o,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};jr.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=sh(t.as,t.crossOrigin);Mr.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Mr.d.M(e)};jr.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,r=sh(n,t.crossOrigin);Mr.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};jr.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=sh(t.as,t.crossOrigin);Mr.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Mr.d.m(e)};jr.requestFormReset=function(e){Mr.d.r(e)};jr.unstable_batchedUpdates=function(e,t){return e(t)};jr.useFormState=function(e,t,n){return Au.H.useFormState(e,t,n)};jr.useFormStatus=function(){return Au.H.useHostTransitionStatus()};jr.version="19.1.1";function Jm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jm)}catch(e){console.error(e)}}Jm(),Qm.exports=jr;var Ab=Qm.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yi=yb,$m=He,Nb=Ab;function et(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ex(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cf(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function tx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dg(e){if(cf(e)!==e)throw Error(et(188))}function Sb(e){var t=e.alternate;if(!t){if(t=cf(e),t===null)throw Error(et(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Dg(s),e;if(o===r)return Dg(s),t;o=o.sibling}throw Error(et(188))}if(n.return!==r.return)n=s,r=o;else{for(var f=!1,p=s.child;p;){if(p===n){f=!0,n=s,r=o;break}if(p===r){f=!0,r=s,n=o;break}p=p.sibling}if(!f){for(p=o.child;p;){if(p===n){f=!0,n=o,r=s;break}if(p===r){f=!0,r=o,n=s;break}p=p.sibling}if(!f)throw Error(et(189))}}if(n.alternate!==r)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?e:t}function nx(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=nx(e),t!==null)return t;e=e.sibling}return null}var ei=Object.assign,Cb=Symbol.for("react.element"),Yf=Symbol.for("react.transitional.element"),yu=Symbol.for("react.portal"),fc=Symbol.for("react.fragment"),ix=Symbol.for("react.strict_mode"),Md=Symbol.for("react.profiler"),Eb=Symbol.for("react.provider"),rx=Symbol.for("react.consumer"),ks=Symbol.for("react.context"),Q1=Symbol.for("react.forward_ref"),jd=Symbol.for("react.suspense"),kd=Symbol.for("react.suspense_list"),K1=Symbol.for("react.memo"),vo=Symbol.for("react.lazy"),Bd=Symbol.for("react.activity"),Tb=Symbol.for("react.memo_cache_sentinel"),Rg=Symbol.iterator;function ou(e){return e===null||typeof e!="object"?null:(e=Rg&&e[Rg]||e["@@iterator"],typeof e=="function"?e:null)}var _b=Symbol.for("react.client.reference");function Pd(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===_b?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fc:return"Fragment";case Md:return"Profiler";case ix:return"StrictMode";case jd:return"Suspense";case kd:return"SuspenseList";case Bd:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case yu:return"Portal";case ks:return(e.displayName||"Context")+".Provider";case rx:return(e._context.displayName||"Context")+".Consumer";case Q1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case K1:return t=e.displayName||null,t!==null?t:Pd(e.type)||"Memo";case vo:t=e._payload,e=e._init;try{return Pd(e(t))}catch{}}return null}var bu=Array.isArray,Ft=$m.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Sn=Nb.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,wl={pending:!1,data:null,method:null,action:null},Fd=[],hc=-1;function xs(e){return{current:e}}function ir(e){0>hc||(e.current=Fd[hc],Fd[hc]=null,hc--)}function li(e,t){hc++,Fd[hc]=e.current,e.current=t}var hs=xs(null),qu=xs(null),Lo=xs(null),N0=xs(null);function S0(e,t){switch(li(Lo,t),li(qu,e),li(hs,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?kp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=kp(t),e=w3(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ir(hs),li(hs,e)}function Lc(){ir(hs),ir(qu),ir(Lo)}function Ud(e){e.memoizedState!==null&&li(N0,e);var t=hs.current,n=w3(t,e.type);t!==n&&(li(qu,e),li(hs,n))}function C0(e){qu.current===e&&(ir(hs),ir(qu)),N0.current===e&&(ir(N0),ef._currentValue=wl)}var zd=Object.prototype.hasOwnProperty,J1=Yi.unstable_scheduleCallback,Vh=Yi.unstable_cancelCallback,Ib=Yi.unstable_shouldYield,Db=Yi.unstable_requestPaint,ds=Yi.unstable_now,Rb=Yi.unstable_getCurrentPriorityLevel,ax=Yi.unstable_ImmediatePriority,sx=Yi.unstable_UserBlockingPriority,E0=Yi.unstable_NormalPriority,Ob=Yi.unstable_LowPriority,ox=Yi.unstable_IdlePriority,Lb=Yi.log,Mb=Yi.unstable_setDisableYieldValue,uf=null,ua=null;function To(e){if(typeof Lb=="function"&&Mb(e),ua&&typeof ua.setStrictMode=="function")try{ua.setStrictMode(uf,e)}catch{}}var fa=Math.clz32?Math.clz32:Bb,jb=Math.log,kb=Math.LN2;function Bb(e){return e>>>=0,e===0?32:31-(jb(e)/kb|0)|0}var Wf=256,Xf=4194304;function ml(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function oh(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var s=0,o=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var p=r&134217727;return p!==0?(r=p&~o,r!==0?s=ml(r):(f&=p,f!==0?s=ml(f):n||(n=p&~e,n!==0&&(s=ml(n))))):(p=r&~o,p!==0?s=ml(p):f!==0?s=ml(f):n||(n=r&~e,n!==0&&(s=ml(n)))),s===0?0:t!==0&&t!==s&&!(t&o)&&(o=s&-s,n=t&-t,o>=n||o===32&&(n&4194048)!==0)?t:s}function ff(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Pb(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lx(){var e=Wf;return Wf<<=1,!(Wf&4194048)&&(Wf=256),e}function cx(){var e=Xf;return Xf<<=1,!(Xf&62914560)&&(Xf=4194304),e}function Yh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function hf(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Fb(e,t,n,r,s,o){var f=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var p=e.entanglements,m=e.expirationTimes,y=e.hiddenUpdates;for(n=f&~n;0<n;){var S=31-fa(n),w=1<<S;p[S]=0,m[S]=-1;var E=y[S];if(E!==null)for(y[S]=null,S=0;S<E.length;S++){var A=E[S];A!==null&&(A.lane&=-536870913)}n&=~w}r!==0&&ux(e,r,0),o!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=o&~(f&~t))}function ux(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fa(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&4194090}function fx(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fa(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function $1(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function e2(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function hx(){var e=Sn.p;return e!==0?e:(e=window.event,e===void 0?32:R3(e.type))}function Ub(e,t){var n=Sn.p;try{return Sn.p=e,t()}finally{Sn.p=n}}var Zo=Math.random().toString(36).slice(2),Sr="__reactFiber$"+Zo,Vr="__reactProps$"+Zo,Vc="__reactContainer$"+Zo,Hd="__reactEvents$"+Zo,zb="__reactListeners$"+Zo,Hb="__reactHandles$"+Zo,Og="__reactResources$"+Zo,df="__reactMarker$"+Zo;function t2(e){delete e[Sr],delete e[Vr],delete e[Hd],delete e[zb],delete e[Hb]}function dc(e){var t=e[Sr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vc]||n[Sr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Fp(e);e!==null;){if(n=e[Sr])return n;e=Fp(e)}return t}e=n,n=e.parentNode}return null}function Yc(e){if(e=e[Sr]||e[Vc]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function vu(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(et(33))}function Cc(e){var t=e[Og];return t||(t=e[Og]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function tr(e){e[df]=!0}var dx=new Set,gx={};function Ul(e,t){Mc(e,t),Mc(e+"Capture",t)}function Mc(e,t){for(gx[e]=t,e=0;e<t.length;e++)dx.add(t[e])}var Gb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lg={},Mg={};function qb(e){return zd.call(Mg,e)?!0:zd.call(Lg,e)?!1:Gb.test(e)?Mg[e]=!0:(Lg[e]=!0,!1)}function u0(e,t,n){if(qb(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Zf(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Ds(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}var Wh,jg;function sc(e){if(Wh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wh=t&&t[1]||"",jg=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wh+e+jg}var Xh=!1;function Zh(e,t){if(!e||Xh)return"";Xh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var w=function(){throw Error()};if(Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(A){var E=A}Reflect.construct(e,[],w)}else{try{w.call()}catch(A){E=A}e.call(w.prototype)}}else{try{throw Error()}catch(A){E=A}(w=e())&&typeof w.catch=="function"&&w.catch(function(){})}}catch(A){if(A&&E&&typeof A.stack=="string")return[A.stack,E.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),f=o[0],p=o[1];if(f&&p){var m=f.split(`
`),y=p.split(`
`);for(s=r=0;r<m.length&&!m[r].includes("DetermineComponentFrameRoot");)r++;for(;s<y.length&&!y[s].includes("DetermineComponentFrameRoot");)s++;if(r===m.length||s===y.length)for(r=m.length-1,s=y.length-1;1<=r&&0<=s&&m[r]!==y[s];)s--;for(;1<=r&&0<=s;r--,s--)if(m[r]!==y[s]){if(r!==1||s!==1)do if(r--,s--,0>s||m[r]!==y[s]){var S=`
`+m[r].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=r&&0<=s);break}}}finally{Xh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?sc(n):""}function Vb(e){switch(e.tag){case 26:case 27:case 5:return sc(e.type);case 16:return sc("Lazy");case 13:return sc("Suspense");case 19:return sc("SuspenseList");case 0:case 15:return Zh(e.type,!1);case 11:return Zh(e.type.render,!1);case 1:return Zh(e.type,!0);case 31:return sc("Activity");default:return""}}function kg(e){try{var t="";do t+=Vb(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Ea(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function px(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yb(e){var t=px(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(f){r=""+f,o.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(f){r=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function T0(e){e._valueTracker||(e._valueTracker=Yb(e))}function mx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=px(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function _0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Wb=/[\n"\\]/g;function Da(e){return e.replace(Wb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Gd(e,t,n,r,s,o,f,p){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ea(t)):e.value!==""+Ea(t)&&(e.value=""+Ea(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?qd(e,f,Ea(t)):n!=null?qd(e,f,Ea(n)):r!=null&&e.removeAttribute("value"),s==null&&o!=null&&(e.defaultChecked=!!o),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+Ea(p):e.removeAttribute("name")}function xx(e,t,n,r,s,o,f,p){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||t!=null))return;n=n!=null?""+Ea(n):"",t=t!=null?""+Ea(t):n,p||t===e.value||(e.value=t),e.defaultValue=t}r=r??s,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=p?e.checked:!!r,e.defaultChecked=!!r,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f)}function qd(e,t,n){t==="number"&&_0(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ec(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ea(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function yx(e,t,n){if(t!=null&&(t=""+Ea(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Ea(n):""}function bx(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(et(92));if(bu(r)){if(1<r.length)throw Error(et(93));r=r[0]}n=r}n==null&&(n=""),t=n}n=Ea(t),e.defaultValue=n,r=e.textContent,r===n&&r!==""&&r!==null&&(e.value=r)}function jc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Xb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bg(e,t,n){var r=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,n):typeof n!="number"||n===0||Xb.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function vx(e,t,n){if(t!=null&&typeof t!="object")throw Error(et(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&Bg(e,s,r)}else for(var o in t)t.hasOwnProperty(o)&&Bg(e,o,t[o])}function n2(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function f0(e){return Qb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Vd=null;function i2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gc=null,Tc=null;function Pg(e){var t=Yc(e);if(t&&(e=t.stateNode)){var n=e[Vr]||null;e:switch(e=t.stateNode,t.type){case"input":if(Gd(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Da(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Vr]||null;if(!s)throw Error(et(90));Gd(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&mx(r)}break e;case"textarea":yx(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ec(e,!!n.multiple,t,!1)}}}var Qh=!1;function wx(e,t,n){if(Qh)return e(t,n);Qh=!0;try{var r=e(t);return r}finally{if(Qh=!1,(gc!==null||Tc!==null)&&(xh(),gc&&(t=gc,e=Tc,Tc=gc=null,Pg(t),e)))for(t=0;t<e.length;t++)Pg(e[t])}}function Vu(e,t){var n=e.stateNode;if(n===null)return null;var r=n[Vr]||null;if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(et(231,t,typeof n));return n}var Vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yd=!1;if(Vs)try{var lu={};Object.defineProperty(lu,"passive",{get:function(){Yd=!0}}),window.addEventListener("test",lu,lu),window.removeEventListener("test",lu,lu)}catch{Yd=!1}var _o=null,r2=null,h0=null;function Ax(){if(h0)return h0;var e,t=r2,n=t.length,r,s="value"in _o?_o.value:_o.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var f=n-e;for(r=1;r<=f&&t[n-r]===s[o-r];r++);return h0=s.slice(e,1<r?1-r:void 0)}function d0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qf(){return!0}function Fg(){return!1}function Yr(e){function t(n,r,s,o,f){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=f,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(n=e[p],this[p]=n?n(o):o[p]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Qf:Fg,this.isPropagationStopped=Fg,this}return ei(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qf)},persist:function(){},isPersistent:Qf}),t}var zl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lh=Yr(zl),gf=ei({},zl,{view:0,detail:0}),Kb=Yr(gf),Kh,Jh,cu,ch=ei({},gf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:a2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cu&&(cu&&e.type==="mousemove"?(Kh=e.screenX-cu.screenX,Jh=e.screenY-cu.screenY):Jh=Kh=0,cu=e),Kh)},movementY:function(e){return"movementY"in e?e.movementY:Jh}}),Ug=Yr(ch),Jb=ei({},ch,{dataTransfer:0}),$b=Yr(Jb),ev=ei({},gf,{relatedTarget:0}),$h=Yr(ev),tv=ei({},zl,{animationName:0,elapsedTime:0,pseudoElement:0}),nv=Yr(tv),iv=ei({},zl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rv=Yr(iv),av=ei({},zl,{data:0}),zg=Yr(av),sv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ov={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lv[e])?!!t[e]:!1}function a2(){return cv}var uv=ei({},gf,{key:function(e){if(e.key){var t=sv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=d0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ov[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:a2,charCode:function(e){return e.type==="keypress"?d0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?d0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fv=Yr(uv),hv=ei({},ch,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hg=Yr(hv),dv=ei({},gf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:a2}),gv=Yr(dv),pv=ei({},zl,{propertyName:0,elapsedTime:0,pseudoElement:0}),mv=Yr(pv),xv=ei({},ch,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yv=Yr(xv),bv=ei({},zl,{newState:0,oldState:0}),vv=Yr(bv),wv=[9,13,27,32],s2=Vs&&"CompositionEvent"in window,Nu=null;Vs&&"documentMode"in document&&(Nu=document.documentMode);var Av=Vs&&"TextEvent"in window&&!Nu,Nx=Vs&&(!s2||Nu&&8<Nu&&11>=Nu),Gg=" ",qg=!1;function Sx(e,t){switch(e){case"keyup":return wv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pc=!1;function Nv(e,t){switch(e){case"compositionend":return Cx(t);case"keypress":return t.which!==32?null:(qg=!0,Gg);case"textInput":return e=t.data,e===Gg&&qg?null:e;default:return null}}function Sv(e,t){if(pc)return e==="compositionend"||!s2&&Sx(e,t)?(e=Ax(),h0=r2=_o=null,pc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nx&&t.locale!=="ko"?null:t.data;default:return null}}var Cv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Cv[e.type]:t==="textarea"}function Ex(e,t,n,r){gc?Tc?Tc.push(r):Tc=[r]:gc=r,t=Y0(t,"onChange"),0<t.length&&(n=new lh("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Su=null,Yu=null;function Ev(e){y3(e,0)}function uh(e){var t=vu(e);if(mx(t))return e}function Yg(e,t){if(e==="change")return t}var Tx=!1;if(Vs){var ed;if(Vs){var td="oninput"in document;if(!td){var Wg=document.createElement("div");Wg.setAttribute("oninput","return;"),td=typeof Wg.oninput=="function"}ed=td}else ed=!1;Tx=ed&&(!document.documentMode||9<document.documentMode)}function Xg(){Su&&(Su.detachEvent("onpropertychange",_x),Yu=Su=null)}function _x(e){if(e.propertyName==="value"&&uh(Yu)){var t=[];Ex(t,Yu,e,i2(e)),wx(Ev,t)}}function Tv(e,t,n){e==="focusin"?(Xg(),Su=t,Yu=n,Su.attachEvent("onpropertychange",_x)):e==="focusout"&&Xg()}function _v(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uh(Yu)}function Iv(e,t){if(e==="click")return uh(t)}function Dv(e,t){if(e==="input"||e==="change")return uh(t)}function Rv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ga=typeof Object.is=="function"?Object.is:Rv;function Wu(e,t){if(ga(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!zd.call(t,s)||!ga(e[s],t[s]))return!1}return!0}function Zg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qg(e,t){var n=Zg(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zg(n)}}function Ix(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ix(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Dx(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=_0(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_0(e.document)}return t}function o2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Ov=Vs&&"documentMode"in document&&11>=document.documentMode,mc=null,Wd=null,Cu=null,Xd=!1;function Kg(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xd||mc==null||mc!==_0(r)||(r=mc,"selectionStart"in r&&o2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cu&&Wu(Cu,r)||(Cu=r,r=Y0(Wd,"onSelect"),0<r.length&&(t=new lh("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mc)))}function pl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xc={animationend:pl("Animation","AnimationEnd"),animationiteration:pl("Animation","AnimationIteration"),animationstart:pl("Animation","AnimationStart"),transitionrun:pl("Transition","TransitionRun"),transitionstart:pl("Transition","TransitionStart"),transitioncancel:pl("Transition","TransitionCancel"),transitionend:pl("Transition","TransitionEnd")},nd={},Rx={};Vs&&(Rx=document.createElement("div").style,"AnimationEvent"in window||(delete xc.animationend.animation,delete xc.animationiteration.animation,delete xc.animationstart.animation),"TransitionEvent"in window||delete xc.transitionend.transition);function Hl(e){if(nd[e])return nd[e];if(!xc[e])return e;var t=xc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Rx)return nd[e]=t[n];return e}var Ox=Hl("animationend"),Lx=Hl("animationiteration"),Mx=Hl("animationstart"),Lv=Hl("transitionrun"),Mv=Hl("transitionstart"),jv=Hl("transitioncancel"),jx=Hl("transitionend"),kx=new Map,Zd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zd.push("scrollEnd");function Qa(e,t){kx.set(e,t),Ul(t,[e])}var Jg=new WeakMap;function Ra(e,t){if(typeof e=="object"&&e!==null){var n=Jg.get(e);return n!==void 0?n:(t={value:e,source:t,stack:kg(t)},Jg.set(e,t),t)}return{value:e,source:t,stack:kg(t)}}var Ca=[],yc=0,l2=0;function fh(){for(var e=yc,t=l2=yc=0;t<e;){var n=Ca[t];Ca[t++]=null;var r=Ca[t];Ca[t++]=null;var s=Ca[t];Ca[t++]=null;var o=Ca[t];if(Ca[t++]=null,r!==null&&s!==null){var f=r.pending;f===null?s.next=s:(s.next=f.next,f.next=s),r.pending=s}o!==0&&Bx(n,s,o)}}function hh(e,t,n,r){Ca[yc++]=e,Ca[yc++]=t,Ca[yc++]=n,Ca[yc++]=r,l2|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function c2(e,t,n,r){return hh(e,t,n,r),I0(e)}function Wc(e,t){return hh(e,null,null,t),I0(e)}function Bx(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var s=!1,o=e.return;o!==null;)o.childLanes|=n,r=o.alternate,r!==null&&(r.childLanes|=n),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(s=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,s&&t!==null&&(s=31-fa(n),e=o.hiddenUpdates,r=e[s],r===null?e[s]=[t]:r.push(t),t.lane=n|536870912),o):null}function I0(e){if(50<ju)throw ju=0,m1=null,Error(et(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var bc={};function kv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sa(e,t,n,r){return new kv(e,t,n,r)}function u2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Hs(e,t){var n=e.alternate;return n===null?(n=sa(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Px(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function g0(e,t,n,r,s,o){var f=0;if(r=e,typeof e=="function")u2(e)&&(f=1);else if(typeof e=="string")f=P4(e,n,hs.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Bd:return e=sa(31,n,t,s),e.elementType=Bd,e.lanes=o,e;case fc:return Al(n.children,s,o,t);case ix:f=8,s|=24;break;case Md:return e=sa(12,n,t,s|2),e.elementType=Md,e.lanes=o,e;case jd:return e=sa(13,n,t,s),e.elementType=jd,e.lanes=o,e;case kd:return e=sa(19,n,t,s),e.elementType=kd,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Eb:case ks:f=10;break e;case rx:f=9;break e;case Q1:f=11;break e;case K1:f=14;break e;case vo:f=16,r=null;break e}f=29,n=Error(et(130,e===null?"null":typeof e,"")),r=null}return t=sa(f,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Al(e,t,n,r){return e=sa(7,e,r,t),e.lanes=n,e}function id(e,t,n){return e=sa(6,e,null,t),e.lanes=n,e}function rd(e,t,n){return t=sa(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var vc=[],wc=0,D0=null,R0=0,Ta=[],_a=0,Nl=null,Bs=1,Ps="";function xl(e,t){vc[wc++]=R0,vc[wc++]=D0,D0=e,R0=t}function Fx(e,t,n){Ta[_a++]=Bs,Ta[_a++]=Ps,Ta[_a++]=Nl,Nl=e;var r=Bs;e=Ps;var s=32-fa(r)-1;r&=~(1<<s),n+=1;var o=32-fa(t)+s;if(30<o){var f=s-s%5;o=(r&(1<<f)-1).toString(32),r>>=f,s-=f,Bs=1<<32-fa(t)+s|n<<s|r,Ps=o+e}else Bs=1<<o|n<<s|r,Ps=e}function f2(e){e.return!==null&&(xl(e,1),Fx(e,1,0))}function h2(e){for(;e===D0;)D0=vc[--wc],vc[wc]=null,R0=vc[--wc],vc[wc]=null;for(;e===Nl;)Nl=Ta[--_a],Ta[_a]=null,Ps=Ta[--_a],Ta[_a]=null,Bs=Ta[--_a],Ta[_a]=null}var Lr=null,wi=null,Nn=!1,Sl=null,cs=!1,Qd=Error(et(519));function Ll(e){var t=Error(et(418,""));throw Xu(Ra(t,e)),Qd}function $g(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Sr]=e,t[Vr]=r,n){case"dialog":rn("cancel",t),rn("close",t);break;case"iframe":case"object":case"embed":rn("load",t);break;case"video":case"audio":for(n=0;n<Ku.length;n++)rn(Ku[n],t);break;case"source":rn("error",t);break;case"img":case"image":case"link":rn("error",t),rn("load",t);break;case"details":rn("toggle",t);break;case"input":rn("invalid",t),xx(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),T0(t);break;case"select":rn("invalid",t);break;case"textarea":rn("invalid",t),bx(t,r.value,r.defaultValue,r.children),T0(t)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||r.suppressHydrationWarning===!0||v3(t.textContent,n)?(r.popover!=null&&(rn("beforetoggle",t),rn("toggle",t)),r.onScroll!=null&&rn("scroll",t),r.onScrollEnd!=null&&rn("scrollend",t),r.onClick!=null&&(t.onclick=vh),t=!0):t=!1,t||Ll(e)}function ep(e){for(Lr=e.return;Lr;)switch(Lr.tag){case 5:case 13:cs=!1;return;case 27:case 3:cs=!0;return;default:Lr=Lr.return}}function uu(e){if(e!==Lr)return!1;if(!Nn)return ep(e),Nn=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||A1(e.type,e.memoizedProps)),n=!n),n&&wi&&Ll(e),ep(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){wi=Za(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}wi=null}}else t===27?(t=wi,Qo(e.type)?(e=C1,C1=null,wi=e):wi=t):wi=Lr?Za(e.stateNode.nextSibling):null;return!0}function pf(){wi=Lr=null,Nn=!1}function tp(){var e=Sl;return e!==null&&(qr===null?qr=e:qr.push.apply(qr,e),Sl=null),e}function Xu(e){Sl===null?Sl=[e]:Sl.push(e)}var Kd=xs(null),Gl=null,Fs=null;function Ao(e,t,n){li(Kd,t._currentValue),t._currentValue=n}function Gs(e){e._currentValue=Kd.current,ir(Kd)}function Jd(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function $d(e,t,n,r){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){var f=s.child;o=o.firstContext;e:for(;o!==null;){var p=o;o=s;for(var m=0;m<t.length;m++)if(p.context===t[m]){o.lanes|=n,p=o.alternate,p!==null&&(p.lanes|=n),Jd(o.return,n,e),r||(f=null);break e}o=p.next}}else if(s.tag===18){if(f=s.return,f===null)throw Error(et(341));f.lanes|=n,o=f.alternate,o!==null&&(o.lanes|=n),Jd(f,n,e),f=null}else f=s.child;if(f!==null)f.return=s;else for(f=s;f!==null;){if(f===e){f=null;break}if(s=f.sibling,s!==null){s.return=f.return,f=s;break}f=f.return}s=f}}function mf(e,t,n,r){e=null;for(var s=t,o=!1;s!==null;){if(!o){if(s.flags&524288)o=!0;else if(s.flags&262144)break}if(s.tag===10){var f=s.alternate;if(f===null)throw Error(et(387));if(f=f.memoizedProps,f!==null){var p=s.type;ga(s.pendingProps.value,f.value)||(e!==null?e.push(p):e=[p])}}else if(s===N0.current){if(f=s.alternate,f===null)throw Error(et(387));f.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(ef):e=[ef])}s=s.return}e!==null&&$d(t,e,n,r),t.flags|=262144}function O0(e){for(e=e.firstContext;e!==null;){if(!ga(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ml(e){Gl=e,Fs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Cr(e){return Ux(Gl,e)}function Kf(e,t){return Gl===null&&Ml(e),Ux(e,t)}function Ux(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Fs===null){if(e===null)throw Error(et(308));Fs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Fs=Fs.next=t;return n}var Bv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Pv=Yi.unstable_scheduleCallback,Fv=Yi.unstable_NormalPriority,qi={$$typeof:ks,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function d2(){return{controller:new Bv,data:new Map,refCount:0}}function xf(e){e.refCount--,e.refCount===0&&Pv(Fv,function(){e.controller.abort()})}var Eu=null,e1=0,kc=0,_c=null;function Uv(e,t){if(Eu===null){var n=Eu=[];e1=0,kc=k2(),_c={status:"pending",value:void 0,then:function(r){n.push(r)}}}return e1++,t.then(np,np),t}function np(){if(--e1===0&&Eu!==null){_c!==null&&(_c.status="fulfilled");var e=Eu;Eu=null,kc=0,_c=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function zv(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(r.status="rejected",r.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),r}var ip=Ft.S;Ft.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Uv(e,t),ip!==null&&ip(e,t)};var Cl=xs(null);function g2(){var e=Cl.current;return e!==null?e:Yn.pooledCache}function p0(e,t){t===null?li(Cl,Cl.current):li(Cl,t.pool)}function zx(){var e=g2();return e===null?null:{parent:qi._currentValue,pool:e}}var yf=Error(et(460)),Hx=Error(et(474)),dh=Error(et(542)),t1={then:function(){}};function rp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Jf(){}function Gx(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Jf,Jf),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,sp(e),e;default:if(typeof t.status=="string")t.then(Jf,Jf);else{if(e=Yn,e!==null&&100<e.shellSuspendCounter)throw Error(et(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=r}},function(r){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,sp(e),e}throw Tu=t,yf}}var Tu=null;function ap(){if(Tu===null)throw Error(et(459));var e=Tu;return Tu=null,e}function sp(e){if(e===yf||e===dh)throw Error(et(483))}var wo=!1;function p2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function n1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Mo(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function jo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Rn&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=I0(e),Bx(e,null,n),t}return hh(e,r,t,n),I0(e)}function _u(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fx(e,n)}}function ad(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var f={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?s=o=f:o=o.next=f,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var i1=!1;function Iu(){if(i1){var e=_c;if(e!==null)throw e}}function Du(e,t,n,r){i1=!1;var s=e.updateQueue;wo=!1;var o=s.firstBaseUpdate,f=s.lastBaseUpdate,p=s.shared.pending;if(p!==null){s.shared.pending=null;var m=p,y=m.next;m.next=null,f===null?o=y:f.next=y,f=m;var S=e.alternate;S!==null&&(S=S.updateQueue,p=S.lastBaseUpdate,p!==f&&(p===null?S.firstBaseUpdate=y:p.next=y,S.lastBaseUpdate=m))}if(o!==null){var w=s.baseState;f=0,S=y=m=null,p=o;do{var E=p.lane&-536870913,A=E!==p.lane;if(A?(dn&E)===E:(r&E)===E){E!==0&&E===kc&&(i1=!0),S!==null&&(S=S.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var U=e,O=p;E=t;var H=n;switch(O.tag){case 1:if(U=O.payload,typeof U=="function"){w=U.call(H,w,E);break e}w=U;break e;case 3:U.flags=U.flags&-65537|128;case 0:if(U=O.payload,E=typeof U=="function"?U.call(H,w,E):U,E==null)break e;w=ei({},w,E);break e;case 2:wo=!0}}E=p.callback,E!==null&&(e.flags|=64,A&&(e.flags|=8192),A=s.callbacks,A===null?s.callbacks=[E]:A.push(E))}else A={lane:E,tag:p.tag,payload:p.payload,callback:p.callback,next:null},S===null?(y=S=A,m=w):S=S.next=A,f|=E;if(p=p.next,p===null){if(p=s.shared.pending,p===null)break;A=p,p=A.next,A.next=null,s.lastBaseUpdate=A,s.shared.pending=null}}while(!0);S===null&&(m=w),s.baseState=m,s.firstBaseUpdate=y,s.lastBaseUpdate=S,o===null&&(s.shared.lanes=0),qo|=f,e.lanes=f,e.memoizedState=w}}function qx(e,t){if(typeof e!="function")throw Error(et(191,e));e.call(t)}function Vx(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)qx(n[e],t)}var Bc=xs(null),L0=xs(0);function op(e,t){e=Xs,li(L0,e),li(Bc,t),Xs=e|t.baseLanes}function r1(){li(L0,Xs),li(Bc,Bc.current)}function m2(){Xs=L0.current,ir(Bc),ir(L0)}var Ho=0,en=null,Bn=null,Bi=null,M0=!1,Ic=!1,jl=!1,j0=0,Zu=0,Dc=null,Hv=0;function Ii(){throw Error(et(321))}function x2(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ga(e[n],t[n]))return!1;return!0}function y2(e,t,n,r,s,o){return Ho=o,en=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ft.H=e===null||e.memoizedState===null?A5:N5,jl=!1,o=n(r,s),jl=!1,Ic&&(o=Wx(t,n,r,s)),Yx(e),o}function Yx(e){Ft.H=k0;var t=Bn!==null&&Bn.next!==null;if(Ho=0,Bi=Bn=en=null,M0=!1,Zu=0,Dc=null,t)throw Error(et(300));e===null||nr||(e=e.dependencies,e!==null&&O0(e)&&(nr=!0))}function Wx(e,t,n,r){en=e;var s=0;do{if(Ic&&(Dc=null),Zu=0,Ic=!1,25<=s)throw Error(et(301));if(s+=1,Bi=Bn=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}Ft.H=Zv,o=t(n,r)}while(Ic);return o}function Gv(){var e=Ft.H,t=e.useState()[0];return t=typeof t.then=="function"?bf(t):t,e=e.useState()[0],(Bn!==null?Bn.memoizedState:null)!==e&&(en.flags|=1024),t}function b2(){var e=j0!==0;return j0=0,e}function v2(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function w2(e){if(M0){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}M0=!1}Ho=0,Bi=Bn=en=null,Ic=!1,Zu=j0=0,Dc=null}function Hr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bi===null?en.memoizedState=Bi=e:Bi=Bi.next=e,Bi}function Pi(){if(Bn===null){var e=en.alternate;e=e!==null?e.memoizedState:null}else e=Bn.next;var t=Bi===null?en.memoizedState:Bi.next;if(t!==null)Bi=t,Bn=e;else{if(e===null)throw en.alternate===null?Error(et(467)):Error(et(310));Bn=e,e={memoizedState:Bn.memoizedState,baseState:Bn.baseState,baseQueue:Bn.baseQueue,queue:Bn.queue,next:null},Bi===null?en.memoizedState=Bi=e:Bi=Bi.next=e}return Bi}function A2(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bf(e){var t=Zu;return Zu+=1,Dc===null&&(Dc=[]),e=Gx(Dc,e,t),t=en,(Bi===null?t.memoizedState:Bi.next)===null&&(t=t.alternate,Ft.H=t===null||t.memoizedState===null?A5:N5),e}function gh(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return bf(e);if(e.$$typeof===ks)return Cr(e)}throw Error(et(438,String(e)))}function N2(e){var t=null,n=en.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=en.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=A2(),en.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=Tb;return t.index++,n}function Ys(e,t){return typeof t=="function"?t(e):t}function m0(e){var t=Pi();return S2(t,Bn,e)}function S2(e,t,n){var r=e.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=n;var s=e.baseQueue,o=r.pending;if(o!==null){if(s!==null){var f=s.next;s.next=o.next,o.next=f}t.baseQueue=s=o,r.pending=null}if(o=e.baseState,s===null)e.memoizedState=o;else{t=s.next;var p=f=null,m=null,y=t,S=!1;do{var w=y.lane&-536870913;if(w!==y.lane?(dn&w)===w:(Ho&w)===w){var E=y.revertLane;if(E===0)m!==null&&(m=m.next={lane:0,revertLane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),w===kc&&(S=!0);else if((Ho&E)===E){y=y.next,E===kc&&(S=!0);continue}else w={lane:0,revertLane:y.revertLane,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null},m===null?(p=m=w,f=o):m=m.next=w,en.lanes|=E,qo|=E;w=y.action,jl&&n(o,w),o=y.hasEagerState?y.eagerState:n(o,w)}else E={lane:w,revertLane:y.revertLane,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null},m===null?(p=m=E,f=o):m=m.next=E,en.lanes|=w,qo|=w;y=y.next}while(y!==null&&y!==t);if(m===null?f=o:m.next=p,!ga(o,e.memoizedState)&&(nr=!0,S&&(n=_c,n!==null)))throw n;e.memoizedState=o,e.baseState=f,e.baseQueue=m,r.lastRenderedState=o}return s===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function sd(e){var t=Pi(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var f=s=s.next;do o=e(o,f.action),f=f.next;while(f!==s);ga(o,t.memoizedState)||(nr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Xx(e,t,n){var r=en,s=Pi(),o=Nn;if(o){if(n===void 0)throw Error(et(407));n=n()}else n=t();var f=!ga((Bn||s).memoizedState,n);f&&(s.memoizedState=n,nr=!0),s=s.queue;var p=Kx.bind(null,r,s,e);if(vf(2048,8,p,[e]),s.getSnapshot!==t||f||Bi!==null&&Bi.memoizedState.tag&1){if(r.flags|=2048,Pc(9,ph(),Qx.bind(null,r,s,n,t),null),Yn===null)throw Error(et(349));o||Ho&124||Zx(r,t,n)}return n}function Zx(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=en.updateQueue,t===null?(t=A2(),en.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Qx(e,t,n,r){t.value=n,t.getSnapshot=r,Jx(t)&&$x(e)}function Kx(e,t,n){return n(function(){Jx(t)&&$x(e)})}function Jx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ga(e,n)}catch{return!0}}function $x(e){var t=Wc(e,2);t!==null&&da(t,e,2)}function a1(e){var t=Hr();if(typeof e=="function"){var n=e;if(e=n(),jl){To(!0);try{n()}finally{To(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:e},t}function e5(e,t,n,r){return e.baseState=n,S2(e,Bn,typeof r=="function"?r:Ys)}function qv(e,t,n,r,s){if(mh(e))throw Error(et(485));if(e=t.action,e!==null){var o={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){o.listeners.push(f)}};Ft.T!==null?n(!0):o.isTransition=!1,r(o),n=t.pending,n===null?(o.next=t.pending=o,t5(t,o)):(o.next=n.next,t.pending=n.next=o)}}function t5(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var o=Ft.T,f={};Ft.T=f;try{var p=n(s,r),m=Ft.S;m!==null&&m(f,p),lp(e,t,p)}catch(y){s1(e,t,y)}finally{Ft.T=o}}else try{o=n(s,r),lp(e,t,o)}catch(y){s1(e,t,y)}}function lp(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){cp(e,t,r)},function(r){return s1(e,t,r)}):cp(e,t,n)}function cp(e,t,n){t.status="fulfilled",t.value=n,n5(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,t5(e,n)))}function s1(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=n,n5(t),t=t.next;while(t!==r)}e.action=null}function n5(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function i5(e,t){return t}function up(e,t){if(Nn){var n=Yn.formState;if(n!==null){e:{var r=en;if(Nn){if(wi){t:{for(var s=wi,o=cs;s.nodeType!==8;){if(!o){s=null;break t}if(s=Za(s.nextSibling),s===null){s=null;break t}}o=s.data,s=o==="F!"||o==="F"?s:null}if(s){wi=Za(s.nextSibling),r=s.data==="F!";break e}}Ll(r)}r=!1}r&&(t=n[0])}}return n=Hr(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i5,lastRenderedState:t},n.queue=r,n=b5.bind(null,en,r),r.dispatch=n,r=a1(!1),o=_2.bind(null,en,!1,r.queue),r=Hr(),s={state:t,dispatch:null,action:e,pending:null},r.queue=s,n=qv.bind(null,en,s,o,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function fp(e){var t=Pi();return r5(t,Bn,e)}function r5(e,t,n){if(t=S2(e,t,i5)[0],e=m0(Ys)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=bf(t)}catch(f){throw f===yf?dh:f}else r=t;t=Pi();var s=t.queue,o=s.dispatch;return n!==t.memoizedState&&(en.flags|=2048,Pc(9,ph(),Vv.bind(null,s,n),null)),[r,o,e]}function Vv(e,t){e.action=t}function hp(e){var t=Pi(),n=Bn;if(n!==null)return r5(t,n,e);Pi(),t=t.memoizedState,n=Pi();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Pc(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=en.updateQueue,t===null&&(t=A2(),en.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ph(){return{destroy:void 0,resource:void 0}}function a5(){return Pi().memoizedState}function x0(e,t,n,r){var s=Hr();r=r===void 0?null:r,en.flags|=e,s.memoizedState=Pc(1|t,ph(),n,r)}function vf(e,t,n,r){var s=Pi();r=r===void 0?null:r;var o=s.memoizedState.inst;Bn!==null&&r!==null&&x2(r,Bn.memoizedState.deps)?s.memoizedState=Pc(t,o,n,r):(en.flags|=e,s.memoizedState=Pc(1|t,o,n,r))}function dp(e,t){x0(8390656,8,e,t)}function s5(e,t){vf(2048,8,e,t)}function o5(e,t){return vf(4,2,e,t)}function l5(e,t){return vf(4,4,e,t)}function c5(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function u5(e,t,n){n=n!=null?n.concat([e]):null,vf(4,4,c5.bind(null,t,e),n)}function C2(){}function f5(e,t){var n=Pi();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&x2(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function h5(e,t){var n=Pi();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&x2(t,r[1]))return r[0];if(r=e(),jl){To(!0);try{e()}finally{To(!1)}}return n.memoizedState=[r,t],r}function E2(e,t,n){return n===void 0||Ho&1073741824?e.memoizedState=t:(e.memoizedState=n,e=n3(),en.lanes|=e,qo|=e,n)}function d5(e,t,n,r){return ga(n,t)?n:Bc.current!==null?(e=E2(e,n,r),ga(e,t)||(nr=!0),e):Ho&42?(e=n3(),en.lanes|=e,qo|=e,t):(nr=!0,e.memoizedState=n)}function g5(e,t,n,r,s){var o=Sn.p;Sn.p=o!==0&&8>o?o:8;var f=Ft.T,p={};Ft.T=p,_2(e,!1,t,n);try{var m=s(),y=Ft.S;if(y!==null&&y(p,m),m!==null&&typeof m=="object"&&typeof m.then=="function"){var S=zv(m,r);Ru(e,t,S,ha(e))}else Ru(e,t,r,ha(e))}catch(w){Ru(e,t,{then:function(){},status:"rejected",reason:w},ha())}finally{Sn.p=o,Ft.T=f}}function Yv(){}function o1(e,t,n,r){if(e.tag!==5)throw Error(et(476));var s=p5(e).queue;g5(e,s,t,wl,n===null?Yv:function(){return m5(e),n(r)})}function p5(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:wl,baseState:wl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:wl},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function m5(e){var t=p5(e).next.queue;Ru(e,t,{},ha())}function T2(){return Cr(ef)}function x5(){return Pi().memoizedState}function y5(){return Pi().memoizedState}function Wv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=ha();e=Mo(n);var r=jo(t,e,n);r!==null&&(da(r,t,n),_u(r,t,n)),t={cache:d2()},e.payload=t;return}t=t.return}}function Xv(e,t,n){var r=ha();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},mh(e)?v5(t,n):(n=c2(e,t,n,r),n!==null&&(da(n,e,r),w5(n,t,r)))}function b5(e,t,n){var r=ha();Ru(e,t,n,r)}function Ru(e,t,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(mh(e))v5(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var f=t.lastRenderedState,p=o(f,n);if(s.hasEagerState=!0,s.eagerState=p,ga(p,f))return hh(e,t,s,0),Yn===null&&fh(),!1}catch{}finally{}if(n=c2(e,t,s,r),n!==null)return da(n,e,r),w5(n,t,r),!0}return!1}function _2(e,t,n,r){if(r={lane:2,revertLane:k2(),action:r,hasEagerState:!1,eagerState:null,next:null},mh(e)){if(t)throw Error(et(479))}else t=c2(e,n,r,2),t!==null&&da(t,e,2)}function mh(e){var t=e.alternate;return e===en||t!==null&&t===en}function v5(e,t){Ic=M0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function w5(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fx(e,n)}}var k0={readContext:Cr,use:gh,useCallback:Ii,useContext:Ii,useEffect:Ii,useImperativeHandle:Ii,useLayoutEffect:Ii,useInsertionEffect:Ii,useMemo:Ii,useReducer:Ii,useRef:Ii,useState:Ii,useDebugValue:Ii,useDeferredValue:Ii,useTransition:Ii,useSyncExternalStore:Ii,useId:Ii,useHostTransitionStatus:Ii,useFormState:Ii,useActionState:Ii,useOptimistic:Ii,useMemoCache:Ii,useCacheRefresh:Ii},A5={readContext:Cr,use:gh,useCallback:function(e,t){return Hr().memoizedState=[e,t===void 0?null:t],e},useContext:Cr,useEffect:dp,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,x0(4194308,4,c5.bind(null,t,e),n)},useLayoutEffect:function(e,t){return x0(4194308,4,e,t)},useInsertionEffect:function(e,t){x0(4,2,e,t)},useMemo:function(e,t){var n=Hr();t=t===void 0?null:t;var r=e();if(jl){To(!0);try{e()}finally{To(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Hr();if(n!==void 0){var s=n(t);if(jl){To(!0);try{n(t)}finally{To(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=Xv.bind(null,en,e),[r.memoizedState,e]},useRef:function(e){var t=Hr();return e={current:e},t.memoizedState=e},useState:function(e){e=a1(e);var t=e.queue,n=b5.bind(null,en,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:C2,useDeferredValue:function(e,t){var n=Hr();return E2(n,e,t)},useTransition:function(){var e=a1(!1);return e=g5.bind(null,en,e.queue,!0,!1),Hr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=en,s=Hr();if(Nn){if(n===void 0)throw Error(et(407));n=n()}else{if(n=t(),Yn===null)throw Error(et(349));dn&124||Zx(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,dp(Kx.bind(null,r,o,e),[e]),r.flags|=2048,Pc(9,ph(),Qx.bind(null,r,o,n,t),null),n},useId:function(){var e=Hr(),t=Yn.identifierPrefix;if(Nn){var n=Ps,r=Bs;n=(r&~(1<<32-fa(r)-1)).toString(32)+n,t=""+t+"R"+n,n=j0++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=Hv++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:T2,useFormState:up,useActionState:up,useOptimistic:function(e){var t=Hr();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=_2.bind(null,en,!0,n),n.dispatch=t,[e,t]},useMemoCache:N2,useCacheRefresh:function(){return Hr().memoizedState=Wv.bind(null,en)}},N5={readContext:Cr,use:gh,useCallback:f5,useContext:Cr,useEffect:s5,useImperativeHandle:u5,useInsertionEffect:o5,useLayoutEffect:l5,useMemo:h5,useReducer:m0,useRef:a5,useState:function(){return m0(Ys)},useDebugValue:C2,useDeferredValue:function(e,t){var n=Pi();return d5(n,Bn.memoizedState,e,t)},useTransition:function(){var e=m0(Ys)[0],t=Pi().memoizedState;return[typeof e=="boolean"?e:bf(e),t]},useSyncExternalStore:Xx,useId:x5,useHostTransitionStatus:T2,useFormState:fp,useActionState:fp,useOptimistic:function(e,t){var n=Pi();return e5(n,Bn,e,t)},useMemoCache:N2,useCacheRefresh:y5},Zv={readContext:Cr,use:gh,useCallback:f5,useContext:Cr,useEffect:s5,useImperativeHandle:u5,useInsertionEffect:o5,useLayoutEffect:l5,useMemo:h5,useReducer:sd,useRef:a5,useState:function(){return sd(Ys)},useDebugValue:C2,useDeferredValue:function(e,t){var n=Pi();return Bn===null?E2(n,e,t):d5(n,Bn.memoizedState,e,t)},useTransition:function(){var e=sd(Ys)[0],t=Pi().memoizedState;return[typeof e=="boolean"?e:bf(e),t]},useSyncExternalStore:Xx,useId:x5,useHostTransitionStatus:T2,useFormState:hp,useActionState:hp,useOptimistic:function(e,t){var n=Pi();return Bn!==null?e5(n,Bn,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:N2,useCacheRefresh:y5},Rc=null,Qu=0;function $f(e){var t=Qu;return Qu+=1,Rc===null&&(Rc=[]),Gx(Rc,e,t)}function fu(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function e0(e,t){throw t.$$typeof===Cb?Error(et(525)):(e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function gp(e){var t=e._init;return t(e._payload)}function S5(e){function t(_,T){if(e){var D=_.deletions;D===null?(_.deletions=[T],_.flags|=16):D.push(T)}}function n(_,T){if(!e)return null;for(;T!==null;)t(_,T),T=T.sibling;return null}function r(_){for(var T=new Map;_!==null;)_.key!==null?T.set(_.key,_):T.set(_.index,_),_=_.sibling;return T}function s(_,T){return _=Hs(_,T),_.index=0,_.sibling=null,_}function o(_,T,D){return _.index=D,e?(D=_.alternate,D!==null?(D=D.index,D<T?(_.flags|=67108866,T):D):(_.flags|=67108866,T)):(_.flags|=1048576,T)}function f(_){return e&&_.alternate===null&&(_.flags|=67108866),_}function p(_,T,D,j){return T===null||T.tag!==6?(T=id(D,_.mode,j),T.return=_,T):(T=s(T,D),T.return=_,T)}function m(_,T,D,j){var q=D.type;return q===fc?S(_,T,D.props.children,j,D.key):T!==null&&(T.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===vo&&gp(q)===T.type)?(T=s(T,D.props),fu(T,D),T.return=_,T):(T=g0(D.type,D.key,D.props,null,_.mode,j),fu(T,D),T.return=_,T)}function y(_,T,D,j){return T===null||T.tag!==4||T.stateNode.containerInfo!==D.containerInfo||T.stateNode.implementation!==D.implementation?(T=rd(D,_.mode,j),T.return=_,T):(T=s(T,D.children||[]),T.return=_,T)}function S(_,T,D,j,q){return T===null||T.tag!==7?(T=Al(D,_.mode,j,q),T.return=_,T):(T=s(T,D),T.return=_,T)}function w(_,T,D){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=id(""+T,_.mode,D),T.return=_,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Yf:return D=g0(T.type,T.key,T.props,null,_.mode,D),fu(D,T),D.return=_,D;case yu:return T=rd(T,_.mode,D),T.return=_,T;case vo:var j=T._init;return T=j(T._payload),w(_,T,D)}if(bu(T)||ou(T))return T=Al(T,_.mode,D,null),T.return=_,T;if(typeof T.then=="function")return w(_,$f(T),D);if(T.$$typeof===ks)return w(_,Kf(_,T),D);e0(_,T)}return null}function E(_,T,D,j){var q=T!==null?T.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return q!==null?null:p(_,T,""+D,j);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Yf:return D.key===q?m(_,T,D,j):null;case yu:return D.key===q?y(_,T,D,j):null;case vo:return q=D._init,D=q(D._payload),E(_,T,D,j)}if(bu(D)||ou(D))return q!==null?null:S(_,T,D,j,null);if(typeof D.then=="function")return E(_,T,$f(D),j);if(D.$$typeof===ks)return E(_,T,Kf(_,D),j);e0(_,D)}return null}function A(_,T,D,j,q){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return _=_.get(D)||null,p(T,_,""+j,q);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Yf:return _=_.get(j.key===null?D:j.key)||null,m(T,_,j,q);case yu:return _=_.get(j.key===null?D:j.key)||null,y(T,_,j,q);case vo:var K=j._init;return j=K(j._payload),A(_,T,D,j,q)}if(bu(j)||ou(j))return _=_.get(D)||null,S(T,_,j,q,null);if(typeof j.then=="function")return A(_,T,D,$f(j),q);if(j.$$typeof===ks)return A(_,T,D,Kf(T,j),q);e0(T,j)}return null}function U(_,T,D,j){for(var q=null,K=null,P=T,R=T=0,M=null;P!==null&&R<D.length;R++){P.index>R?(M=P,P=null):M=P.sibling;var J=E(_,P,D[R],j);if(J===null){P===null&&(P=M);break}e&&P&&J.alternate===null&&t(_,P),T=o(J,T,R),K===null?q=J:K.sibling=J,K=J,P=M}if(R===D.length)return n(_,P),Nn&&xl(_,R),q;if(P===null){for(;R<D.length;R++)P=w(_,D[R],j),P!==null&&(T=o(P,T,R),K===null?q=P:K.sibling=P,K=P);return Nn&&xl(_,R),q}for(P=r(P);R<D.length;R++)M=A(P,_,R,D[R],j),M!==null&&(e&&M.alternate!==null&&P.delete(M.key===null?R:M.key),T=o(M,T,R),K===null?q=M:K.sibling=M,K=M);return e&&P.forEach(function(F){return t(_,F)}),Nn&&xl(_,R),q}function O(_,T,D,j){if(D==null)throw Error(et(151));for(var q=null,K=null,P=T,R=T=0,M=null,J=D.next();P!==null&&!J.done;R++,J=D.next()){P.index>R?(M=P,P=null):M=P.sibling;var F=E(_,P,J.value,j);if(F===null){P===null&&(P=M);break}e&&P&&F.alternate===null&&t(_,P),T=o(F,T,R),K===null?q=F:K.sibling=F,K=F,P=M}if(J.done)return n(_,P),Nn&&xl(_,R),q;if(P===null){for(;!J.done;R++,J=D.next())J=w(_,J.value,j),J!==null&&(T=o(J,T,R),K===null?q=J:K.sibling=J,K=J);return Nn&&xl(_,R),q}for(P=r(P);!J.done;R++,J=D.next())J=A(P,_,R,J.value,j),J!==null&&(e&&J.alternate!==null&&P.delete(J.key===null?R:J.key),T=o(J,T,R),K===null?q=J:K.sibling=J,K=J);return e&&P.forEach(function(L){return t(_,L)}),Nn&&xl(_,R),q}function H(_,T,D,j){if(typeof D=="object"&&D!==null&&D.type===fc&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case Yf:e:{for(var q=D.key;T!==null;){if(T.key===q){if(q=D.type,q===fc){if(T.tag===7){n(_,T.sibling),j=s(T,D.props.children),j.return=_,_=j;break e}}else if(T.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===vo&&gp(q)===T.type){n(_,T.sibling),j=s(T,D.props),fu(j,D),j.return=_,_=j;break e}n(_,T);break}else t(_,T);T=T.sibling}D.type===fc?(j=Al(D.props.children,_.mode,j,D.key),j.return=_,_=j):(j=g0(D.type,D.key,D.props,null,_.mode,j),fu(j,D),j.return=_,_=j)}return f(_);case yu:e:{for(q=D.key;T!==null;){if(T.key===q)if(T.tag===4&&T.stateNode.containerInfo===D.containerInfo&&T.stateNode.implementation===D.implementation){n(_,T.sibling),j=s(T,D.children||[]),j.return=_,_=j;break e}else{n(_,T);break}else t(_,T);T=T.sibling}j=rd(D,_.mode,j),j.return=_,_=j}return f(_);case vo:return q=D._init,D=q(D._payload),H(_,T,D,j)}if(bu(D))return U(_,T,D,j);if(ou(D)){if(q=ou(D),typeof q!="function")throw Error(et(150));return D=q.call(D),O(_,T,D,j)}if(typeof D.then=="function")return H(_,T,$f(D),j);if(D.$$typeof===ks)return H(_,T,Kf(_,D),j);e0(_,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,T!==null&&T.tag===6?(n(_,T.sibling),j=s(T,D),j.return=_,_=j):(n(_,T),j=id(D,_.mode,j),j.return=_,_=j),f(_)):n(_,T)}return function(_,T,D,j){try{Qu=0;var q=H(_,T,D,j);return Rc=null,q}catch(P){if(P===yf||P===dh)throw P;var K=sa(29,P,null,_.mode);return K.lanes=j,K.return=_,K}finally{}}}var Fc=S5(!0),C5=S5(!1),ja=xs(null),gs=null;function No(e){var t=e.alternate;li(Vi,Vi.current&1),li(ja,e),gs===null&&(t===null||Bc.current!==null||t.memoizedState!==null)&&(gs=e)}function E5(e){if(e.tag===22){if(li(Vi,Vi.current),li(ja,e),gs===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(gs=e)}}else So()}function So(){li(Vi,Vi.current),li(ja,ja.current)}function Us(e){ir(ja),gs===e&&(gs=null),ir(Vi)}var Vi=xs(0);function B0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||S1(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function od(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ei({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var l1={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ha(),s=Mo(r);s.payload=t,n!=null&&(s.callback=n),t=jo(e,s,r),t!==null&&(da(t,e,r),_u(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ha(),s=Mo(r);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=jo(e,s,r),t!==null&&(da(t,e,r),_u(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ha(),r=Mo(n);r.tag=2,t!=null&&(r.callback=t),t=jo(e,r,n),t!==null&&(da(t,e,n),_u(t,e,n))}};function pp(e,t,n,r,s,o,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,f):t.prototype&&t.prototype.isPureReactComponent?!Wu(n,r)||!Wu(s,o):!0}function mp(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&l1.enqueueReplaceState(t,t.state,null)}function kl(e,t){var n=t;if("ref"in t){n={};for(var r in t)r!=="ref"&&(n[r]=t[r])}if(e=e.defaultProps){n===t&&(n=ei({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}var P0=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function T5(e){P0(e)}function _5(e){console.error(e)}function I5(e){P0(e)}function F0(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function xp(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function c1(e,t,n){return n=Mo(n),n.tag=3,n.payload={element:null},n.callback=function(){F0(e,t)},n}function D5(e){return e=Mo(e),e.tag=3,e}function R5(e,t,n,r){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var o=r.value;e.payload=function(){return s(o)},e.callback=function(){xp(t,n,r)}}var f=n.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){xp(t,n,r),typeof s!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var p=r.stack;this.componentDidCatch(r.value,{componentStack:p!==null?p:""})})}function Qv(e,t,n,r,s){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=n.alternate,t!==null&&mf(t,n,s,!0),n=ja.current,n!==null){switch(n.tag){case 13:return gs===null?x1():n.alternate===null&&Ai===0&&(Ai=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===t1?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),yd(e,r,s)),!1;case 22:return n.flags|=65536,r===t1?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),yd(e,r,s)),!1}throw Error(et(435,n.tag))}return yd(e,r,s),x1(),!1}if(Nn)return t=ja.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==Qd&&(e=Error(et(422),{cause:r}),Xu(Ra(e,n)))):(r!==Qd&&(t=Error(et(423),{cause:r}),Xu(Ra(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,r=Ra(r,n),s=c1(e.stateNode,r,s),ad(e,s),Ai!==4&&(Ai=2)),!1;var o=Error(et(520),{cause:r});if(o=Ra(o,n),Mu===null?Mu=[o]:Mu.push(o),Ai!==4&&(Ai=2),t===null)return!0;r=Ra(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=c1(n.stateNode,r,e),ad(n,e),!1;case 1:if(t=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(ko===null||!ko.has(o))))return n.flags|=65536,s&=-s,n.lanes|=s,s=D5(s),R5(s,e,n,r),ad(n,s),!1}n=n.return}while(n!==null);return!1}var O5=Error(et(461)),nr=!1;function ur(e,t,n,r){t.child=e===null?C5(t,null,n,r):Fc(t,e.child,n,r)}function yp(e,t,n,r,s){n=n.render;var o=t.ref;if("ref"in r){var f={};for(var p in r)p!=="ref"&&(f[p]=r[p])}else f=r;return Ml(t),r=y2(e,t,n,f,o,s),p=b2(),e!==null&&!nr?(v2(e,t,s),Ws(e,t,s)):(Nn&&p&&f2(t),t.flags|=1,ur(e,t,r,s),t.child)}function bp(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!u2(o)&&o.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=o,L5(e,t,o,r,s)):(e=g0(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!I2(e,s)){var f=o.memoizedProps;if(n=n.compare,n=n!==null?n:Wu,n(f,r)&&e.ref===t.ref)return Ws(e,t,s)}return t.flags|=1,e=Hs(o,r),e.ref=t.ref,e.return=t,t.child=e}function L5(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Wu(o,r)&&e.ref===t.ref)if(nr=!1,t.pendingProps=r=o,I2(e,s))e.flags&131072&&(nr=!0);else return t.lanes=e.lanes,Ws(e,t,s)}return u1(e,t,n,r,s)}function M5(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden"){if(t.flags&128){if(r=o!==null?o.baseLanes|n:n,e!==null){for(s=t.child=e.child,o=0;s!==null;)o=o|s.lanes|s.childLanes,s=s.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return vp(e,t,r,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&p0(t,o!==null?o.cachePool:null),o!==null?op(t,o):r1(),E5(t);else return t.lanes=t.childLanes=536870912,vp(e,t,o!==null?o.baseLanes|n:n,n)}else o!==null?(p0(t,o.cachePool),op(t,o),So(),t.memoizedState=null):(e!==null&&p0(t,null),r1(),So());return ur(e,t,s,n),t.child}function vp(e,t,n,r){var s=g2();return s=s===null?null:{parent:qi._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&p0(t,null),r1(),E5(t),e!==null&&mf(e,t,r,!0),null}function y0(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(et(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function u1(e,t,n,r,s){return Ml(t),n=y2(e,t,n,r,void 0,s),r=b2(),e!==null&&!nr?(v2(e,t,s),Ws(e,t,s)):(Nn&&r&&f2(t),t.flags|=1,ur(e,t,n,s),t.child)}function wp(e,t,n,r,s,o){return Ml(t),t.updateQueue=null,n=Wx(t,r,n,s),Yx(e),r=b2(),e!==null&&!nr?(v2(e,t,o),Ws(e,t,o)):(Nn&&r&&f2(t),t.flags|=1,ur(e,t,n,o),t.child)}function Ap(e,t,n,r,s){if(Ml(t),t.stateNode===null){var o=bc,f=n.contextType;typeof f=="object"&&f!==null&&(o=Cr(f)),o=new n(r,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=l1,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=r,o.state=t.memoizedState,o.refs={},p2(t),f=n.contextType,o.context=typeof f=="object"&&f!==null?Cr(f):bc,o.state=t.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(od(t,n,f,r),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(f=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),f!==o.state&&l1.enqueueReplaceState(o,o.state,null),Du(t,r,o,s),Iu(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){o=t.stateNode;var p=t.memoizedProps,m=kl(n,p);o.props=m;var y=o.context,S=n.contextType;f=bc,typeof S=="object"&&S!==null&&(f=Cr(S));var w=n.getDerivedStateFromProps;S=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function",p=t.pendingProps!==p,S||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(p||y!==f)&&mp(t,o,r,f),wo=!1;var E=t.memoizedState;o.state=E,Du(t,r,o,s),Iu(),y=t.memoizedState,p||E!==y||wo?(typeof w=="function"&&(od(t,n,w,r),y=t.memoizedState),(m=wo||pp(t,n,m,r,E,y,f))?(S||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=y),o.props=r,o.state=y,o.context=f,r=m):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,n1(e,t),f=t.memoizedProps,S=kl(n,f),o.props=S,w=t.pendingProps,E=o.context,y=n.contextType,m=bc,typeof y=="object"&&y!==null&&(m=Cr(y)),p=n.getDerivedStateFromProps,(y=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(f!==w||E!==m)&&mp(t,o,r,m),wo=!1,E=t.memoizedState,o.state=E,Du(t,r,o,s),Iu();var A=t.memoizedState;f!==w||E!==A||wo||e!==null&&e.dependencies!==null&&O0(e.dependencies)?(typeof p=="function"&&(od(t,n,p,r),A=t.memoizedState),(S=wo||pp(t,n,S,r,E,A,m)||e!==null&&e.dependencies!==null&&O0(e.dependencies))?(y||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,m),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,m)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||f===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=A),o.props=r,o.state=A,o.context=m,r=S):(typeof o.componentDidUpdate!="function"||f===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,y0(e,t),r=(t.flags&128)!==0,o||r?(o=t.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&r?(t.child=Fc(t,e.child,null,s),t.child=Fc(t,null,n,s)):ur(e,t,n,s),t.memoizedState=o.state,e=t.child):e=Ws(e,t,s),e}function Np(e,t,n,r){return pf(),t.flags|=256,ur(e,t,n,r),t.child}var ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cd(e){return{baseLanes:e,cachePool:zx()}}function ud(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=La),e}function j5(e,t,n){var r=t.pendingProps,s=!1,o=(t.flags&128)!==0,f;if((f=o)||(f=e!==null&&e.memoizedState===null?!1:(Vi.current&2)!==0),f&&(s=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(Nn){if(s?No(t):So(),Nn){var p=wi,m;if(m=p){e:{for(m=p,p=cs;m.nodeType!==8;){if(!p){p=null;break e}if(m=Za(m.nextSibling),m===null){p=null;break e}}p=m}p!==null?(t.memoizedState={dehydrated:p,treeContext:Nl!==null?{id:Bs,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},m=sa(18,null,null,0),m.stateNode=p,m.return=t,t.child=m,Lr=t,wi=null,m=!0):m=!1}m||Ll(t)}if(p=t.memoizedState,p!==null&&(p=p.dehydrated,p!==null))return S1(p)?t.lanes=32:t.lanes=536870912,null;Us(t)}return p=r.children,r=r.fallback,s?(So(),s=t.mode,p=U0({mode:"hidden",children:p},s),r=Al(r,s,n,null),p.return=t,r.return=t,p.sibling=r,t.child=p,s=t.child,s.memoizedState=cd(n),s.childLanes=ud(e,f,n),t.memoizedState=ld,r):(No(t),f1(t,p))}if(m=e.memoizedState,m!==null&&(p=m.dehydrated,p!==null)){if(o)t.flags&256?(No(t),t.flags&=-257,t=fd(e,t,n)):t.memoizedState!==null?(So(),t.child=e.child,t.flags|=128,t=null):(So(),s=r.fallback,p=t.mode,r=U0({mode:"visible",children:r.children},p),s=Al(s,p,n,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,Fc(t,e.child,null,n),r=t.child,r.memoizedState=cd(n),r.childLanes=ud(e,f,n),t.memoizedState=ld,t=s);else if(No(t),S1(p)){if(f=p.nextSibling&&p.nextSibling.dataset,f)var y=f.dgst;f=y,r=Error(et(419)),r.stack="",r.digest=f,Xu({value:r,source:null,stack:null}),t=fd(e,t,n)}else if(nr||mf(e,t,n,!1),f=(n&e.childLanes)!==0,nr||f){if(f=Yn,f!==null&&(r=n&-n,r=r&42?1:$1(r),r=r&(f.suspendedLanes|n)?0:r,r!==0&&r!==m.retryLane))throw m.retryLane=r,Wc(e,r),da(f,e,r),O5;p.data==="$?"||x1(),t=fd(e,t,n)}else p.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=m.treeContext,wi=Za(p.nextSibling),Lr=t,Nn=!0,Sl=null,cs=!1,e!==null&&(Ta[_a++]=Bs,Ta[_a++]=Ps,Ta[_a++]=Nl,Bs=e.id,Ps=e.overflow,Nl=t),t=f1(t,r.children),t.flags|=4096);return t}return s?(So(),s=r.fallback,p=t.mode,m=e.child,y=m.sibling,r=Hs(m,{mode:"hidden",children:r.children}),r.subtreeFlags=m.subtreeFlags&65011712,y!==null?s=Hs(y,s):(s=Al(s,p,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,p=e.child.memoizedState,p===null?p=cd(n):(m=p.cachePool,m!==null?(y=qi._currentValue,m=m.parent!==y?{parent:y,pool:y}:m):m=zx(),p={baseLanes:p.baseLanes|n,cachePool:m}),s.memoizedState=p,s.childLanes=ud(e,f,n),t.memoizedState=ld,r):(No(t),n=e.child,e=n.sibling,n=Hs(n,{mode:"visible",children:r.children}),n.return=t,n.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=n,t.memoizedState=null,n)}function f1(e,t){return t=U0({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function U0(e,t){return e=sa(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function fd(e,t,n){return Fc(t,e.child,null,n),e=f1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Sp(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Jd(e.return,t,n)}function hd(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function k5(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(ur(e,t,r.children,n),r=Vi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sp(e,n,t);else if(e.tag===19)Sp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(li(Vi,r),s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&B0(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),hd(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&B0(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}hd(t,!0,n,null,o);break;case"together":hd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),qo|=t.lanes,!(n&t.childLanes))if(e!==null){if(mf(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,n=Hs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Hs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function I2(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&O0(e)))}function Kv(e,t,n){switch(t.tag){case 3:S0(t,t.stateNode.containerInfo),Ao(t,qi,e.memoizedState.cache),pf();break;case 27:case 5:Ud(t);break;case 4:S0(t,t.stateNode.containerInfo);break;case 10:Ao(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(No(t),t.flags|=128,null):n&t.child.childLanes?j5(e,t,n):(No(t),e=Ws(e,t,n),e!==null?e.sibling:null);No(t);break;case 19:var s=(e.flags&128)!==0;if(r=(n&t.childLanes)!==0,r||(mf(e,t,n,!1),r=(n&t.childLanes)!==0),s){if(r)return k5(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),li(Vi,Vi.current),r)break;return null;case 22:case 23:return t.lanes=0,M5(e,t,n);case 24:Ao(t,qi,e.memoizedState.cache)}return Ws(e,t,n)}function B5(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)nr=!0;else{if(!I2(e,n)&&!(t.flags&128))return nr=!1,Kv(e,t,n);nr=!!(e.flags&131072)}else nr=!1,Nn&&t.flags&1048576&&Fx(t,R0,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,s=r._init;if(r=s(r._payload),t.type=r,typeof r=="function")u2(r)?(e=kl(r,e),t.tag=1,t=Ap(null,t,r,e,n)):(t.tag=0,t=u1(null,t,r,e,n));else{if(r!=null){if(s=r.$$typeof,s===Q1){t.tag=11,t=yp(null,t,r,e,n);break e}else if(s===K1){t.tag=14,t=bp(null,t,r,e,n);break e}}throw t=Pd(r)||r,Error(et(306,t,""))}}return t;case 0:return u1(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,s=kl(r,t.pendingProps),Ap(e,t,r,s,n);case 3:e:{if(S0(t,t.stateNode.containerInfo),e===null)throw Error(et(387));r=t.pendingProps;var o=t.memoizedState;s=o.element,n1(e,t),Du(t,r,null,n);var f=t.memoizedState;if(r=f.cache,Ao(t,qi,r),r!==o.cache&&$d(t,[qi],n,!0),Iu(),r=f.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Np(e,t,r,n);break e}else if(r!==s){s=Ra(Error(et(424)),t),Xu(s),t=Np(e,t,r,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(wi=Za(e.firstChild),Lr=t,Nn=!0,Sl=null,cs=!0,n=C5(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(pf(),r===s){t=Ws(e,t,n);break e}ur(e,t,r,n)}t=t.child}return t;case 26:return y0(e,t),e===null?(n=zp(t.type,null,t.pendingProps,null))?t.memoizedState=n:Nn||(n=t.type,e=t.pendingProps,r=W0(Lo.current).createElement(n),r[Sr]=t,r[Vr]=e,hr(r,n,e),tr(r),t.stateNode=r):t.memoizedState=zp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ud(t),e===null&&Nn&&(r=t.stateNode=N3(t.type,t.pendingProps,Lo.current),Lr=t,cs=!0,s=wi,Qo(t.type)?(C1=s,wi=Za(r.firstChild)):wi=s),ur(e,t,t.pendingProps.children,n),y0(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Nn&&((s=r=wi)&&(r=C4(r,t.type,t.pendingProps,cs),r!==null?(t.stateNode=r,Lr=t,wi=Za(r.firstChild),cs=!1,s=!0):s=!1),s||Ll(t)),Ud(t),s=t.type,o=t.pendingProps,f=e!==null?e.memoizedProps:null,r=o.children,A1(s,o)?r=null:f!==null&&A1(s,f)&&(t.flags|=32),t.memoizedState!==null&&(s=y2(e,t,Gv,null,null,n),ef._currentValue=s),y0(e,t),ur(e,t,r,n),t.child;case 6:return e===null&&Nn&&((e=n=wi)&&(n=E4(n,t.pendingProps,cs),n!==null?(t.stateNode=n,Lr=t,wi=null,e=!0):e=!1),e||Ll(t)),null;case 13:return j5(e,t,n);case 4:return S0(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fc(t,null,r,n):ur(e,t,r,n),t.child;case 11:return yp(e,t,t.type,t.pendingProps,n);case 7:return ur(e,t,t.pendingProps,n),t.child;case 8:return ur(e,t,t.pendingProps.children,n),t.child;case 12:return ur(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ao(t,t.type,r.value),ur(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Ml(t),s=Cr(s),r=r(s),t.flags|=1,ur(e,t,r,n),t.child;case 14:return bp(e,t,t.type,t.pendingProps,n);case 15:return L5(e,t,t.type,t.pendingProps,n);case 19:return k5(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},e===null?(n=U0(r,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Hs(e.child,r),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return M5(e,t,n);case 24:return Ml(t),r=Cr(qi),e===null?(s=g2(),s===null&&(s=Yn,o=d2(),s.pooledCache=o,o.refCount++,o!==null&&(s.pooledCacheLanes|=n),s=o),t.memoizedState={parent:r,cache:s},p2(t),Ao(t,qi,s)):(e.lanes&n&&(n1(e,t),Du(t,null,null,n),Iu()),s=e.memoizedState,o=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Ao(t,qi,r)):(r=o.cache,Ao(t,qi,r),r!==s.cache&&$d(t,[qi],n,!0))),ur(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(et(156,t.tag))}function Rs(e){e.flags|=4}function Cp(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!E3(t)){if(t=ja.current,t!==null&&((dn&4194048)===dn?gs!==null:(dn&62914560)!==dn&&!(dn&536870912)||t!==gs))throw Tu=t1,Hx;e.flags|=8192}}function t0(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?cx():536870912,e.lanes|=t,Uc|=t)}function hu(e,t){if(!Nn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&65011712,r|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Jv(e,t,n){var r=t.pendingProps;switch(h2(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(t),null;case 1:return gi(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Gs(qi),Lc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(uu(t)?Rs(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,tp())),gi(t),null;case 26:return n=t.memoizedState,e===null?(Rs(t),n!==null?(gi(t),Cp(t,n)):(gi(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Rs(t),gi(t),Cp(t,n)):(gi(t),t.flags&=-16777217):(e.memoizedProps!==r&&Rs(t),gi(t),t.flags&=-16777217),null;case 27:C0(t),n=Lo.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Rs(t);else{if(!r){if(t.stateNode===null)throw Error(et(166));return gi(t),null}e=hs.current,uu(t)?$g(t):(e=N3(s,r,n),t.stateNode=e,Rs(t))}return gi(t),null;case 5:if(C0(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Rs(t);else{if(!r){if(t.stateNode===null)throw Error(et(166));return gi(t),null}if(e=hs.current,uu(t))$g(t);else{switch(s=W0(Lo.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof r.is=="string"?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e=typeof r.is=="string"?s.createElement(n,{is:r.is}):s.createElement(n)}}e[Sr]=t,e[Vr]=r;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(hr(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Rs(t)}}return gi(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Rs(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(et(166));if(e=Lo.current,uu(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,s=Lr,s!==null)switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Sr]=t,e=!!(e.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||v3(e.nodeValue,n)),e||Ll(t)}else e=W0(e).createTextNode(r),e[Sr]=t,t.stateNode=e}return gi(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=uu(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(et(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[Sr]=t}else pf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gi(t),s=!1}else s=tp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Us(t),t):(Us(t),null)}if(Us(t),t.flags&128)return t.lanes=n,t;if(n=r!==null,e=e!==null&&e.memoizedState!==null,n){r=t.child,s=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(s=r.alternate.memoizedState.cachePool.pool);var o=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==s&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),t0(t,t.updateQueue),gi(t),null;case 4:return Lc(),e===null&&B2(t.stateNode.containerInfo),gi(t),null;case 10:return Gs(t.type),gi(t),null;case 19:if(ir(Vi),s=t.memoizedState,s===null)return gi(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)hu(s,!1);else{if(Ai!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=B0(e),o!==null){for(t.flags|=128,hu(s,!1),e=o.updateQueue,t.updateQueue=e,t0(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Px(n,e),n=n.sibling;return li(Vi,Vi.current&1|2),t.child}e=e.sibling}s.tail!==null&&ds()>H0&&(t.flags|=128,r=!0,hu(s,!1),t.lanes=4194304)}else{if(!r)if(e=B0(o),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,t0(t,e),hu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Nn)return gi(t),null}else 2*ds()-s.renderingStartTime>H0&&n!==536870912&&(t.flags|=128,r=!0,hu(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(e=s.last,e!==null?e.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ds(),t.sibling=null,e=Vi.current,li(Vi,r?e&1|2:e&1),t):(gi(t),null);case 22:case 23:return Us(t),m2(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(gi(t),t.subtreeFlags&6&&(t.flags|=8192)):gi(t),n=t.updateQueue,n!==null&&t0(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&ir(Cl),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Gs(qi),gi(t),null;case 25:return null;case 30:return null}throw Error(et(156,t.tag))}function $v(e,t){switch(h2(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gs(qi),Lc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return C0(t),null;case 13:if(Us(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));pf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ir(Vi),null;case 4:return Lc(),null;case 10:return Gs(t.type),null;case 22:case 23:return Us(t),m2(),e!==null&&ir(Cl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Gs(qi),null;case 25:return null;default:return null}}function P5(e,t){switch(h2(t),t.tag){case 3:Gs(qi),Lc();break;case 26:case 27:case 5:C0(t);break;case 4:Lc();break;case 13:Us(t);break;case 19:ir(Vi);break;case 10:Gs(t.type);break;case 22:case 23:Us(t),m2(),e!==null&&ir(Cl);break;case 24:Gs(qi)}}function wf(e,t){try{var n=t.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var o=n.create,f=n.inst;r=o(),f.destroy=r}n=n.next}while(n!==s)}}catch(p){Un(t,t.return,p)}}function Go(e,t,n){try{var r=t.updateQueue,s=r!==null?r.lastEffect:null;if(s!==null){var o=s.next;r=o;do{if((r.tag&e)===e){var f=r.inst,p=f.destroy;if(p!==void 0){f.destroy=void 0,s=t;var m=n,y=p;try{y()}catch(S){Un(s,m,S)}}}r=r.next}while(r!==o)}}catch(S){Un(t,t.return,S)}}function F5(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Vx(t,n)}catch(r){Un(e,e.return,r)}}}function U5(e,t,n){n.props=kl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Un(e,t,r)}}function Ou(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(s){Un(e,t,s)}}function us(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(s){Un(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){Un(e,t,s)}else n.current=null}function z5(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){Un(e,e.return,s)}}function dd(e,t,n){try{var r=e.stateNode;v4(r,e.type,n,t),r[Vr]=t}catch(s){Un(e,e.return,s)}}function H5(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Qo(e.type)||e.tag===4}function gd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||H5(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Qo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function h1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=vh));else if(r!==4&&(r===27&&Qo(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(h1(e,t,n),e=e.sibling;e!==null;)h1(e,t,n),e=e.sibling}function z0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&Qo(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(z0(e,t,n),e=e.sibling;e!==null;)z0(e,t,n),e=e.sibling}function G5(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);hr(t,r,n),t[Sr]=e,t[Vr]=n}catch(o){Un(e,e.return,o)}}var js=!1,Di=!1,pd=!1,Ep=typeof WeakSet=="function"?WeakSet:Set,er=null;function e4(e,t){if(e=e.containerInfo,v1=K0,e=Dx(e),o2(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var f=0,p=-1,m=-1,y=0,S=0,w=e,E=null;t:for(;;){for(var A;w!==n||s!==0&&w.nodeType!==3||(p=f+s),w!==o||r!==0&&w.nodeType!==3||(m=f+r),w.nodeType===3&&(f+=w.nodeValue.length),(A=w.firstChild)!==null;)E=w,w=A;for(;;){if(w===e)break t;if(E===n&&++y===s&&(p=f),E===o&&++S===r&&(m=f),(A=w.nextSibling)!==null)break;w=E,E=w.parentNode}w=A}n=p===-1||m===-1?null:{start:p,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(w1={focusedElem:e,selectionRange:n},K0=!1,er=t;er!==null;)if(t=er,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,er=e;else for(;er!==null;){switch(t=er,o=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,s=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var U=kl(n.type,s,n.elementType===n.type);e=r.getSnapshotBeforeUpdate(U,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(O){Un(n,n.return,O)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)N1(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":N1(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(et(163))}if(e=t.sibling,e!==null){e.return=t.return,er=e;break}er=t.return}}function q5(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:po(e,n),r&4&&wf(5,n);break;case 1:if(po(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(f){Un(n,n.return,f)}else{var s=kl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){Un(n,n.return,f)}}r&64&&F5(n),r&512&&Ou(n,n.return);break;case 3:if(po(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Vx(e,t)}catch(f){Un(n,n.return,f)}}break;case 27:t===null&&r&4&&G5(n);case 26:case 5:po(e,n),t===null&&r&4&&z5(n),r&512&&Ou(n,n.return);break;case 12:po(e,n);break;case 13:po(e,n),r&4&&W5(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=c4.bind(null,n),T4(e,n))));break;case 22:if(r=n.memoizedState!==null||js,!r){t=t!==null&&t.memoizedState!==null||Di,s=js;var o=Di;js=r,(Di=t)&&!o?bo(e,n,(n.subtreeFlags&8772)!==0):po(e,n),js=s,Di=o}break;case 30:break;default:po(e,n)}}function V5(e){var t=e.alternate;t!==null&&(e.alternate=null,V5(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&t2(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var si=null,Gr=!1;function Os(e,t,n){for(n=n.child;n!==null;)Y5(e,t,n),n=n.sibling}function Y5(e,t,n){if(ua&&typeof ua.onCommitFiberUnmount=="function")try{ua.onCommitFiberUnmount(uf,n)}catch{}switch(n.tag){case 26:Di||us(n,t),Os(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Di||us(n,t);var r=si,s=Gr;Qo(n.type)&&(si=n.stateNode,Gr=!1),Os(e,t,n),ku(n.stateNode),si=r,Gr=s;break;case 5:Di||us(n,t);case 6:if(r=si,s=Gr,si=null,Os(e,t,n),si=r,Gr=s,si!==null)if(Gr)try{(si.nodeType===9?si.body:si.nodeName==="HTML"?si.ownerDocument.body:si).removeChild(n.stateNode)}catch(o){Un(n,t,o)}else try{si.removeChild(n.stateNode)}catch(o){Un(n,t,o)}break;case 18:si!==null&&(Gr?(e=si,Pp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),rf(e)):Pp(si,n.stateNode));break;case 4:r=si,s=Gr,si=n.stateNode.containerInfo,Gr=!0,Os(e,t,n),si=r,Gr=s;break;case 0:case 11:case 14:case 15:Di||Go(2,n,t),Di||Go(4,n,t),Os(e,t,n);break;case 1:Di||(us(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"&&U5(n,t,r)),Os(e,t,n);break;case 21:Os(e,t,n);break;case 22:Di=(r=Di)||n.memoizedState!==null,Os(e,t,n),Di=r;break;default:Os(e,t,n)}}function W5(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{rf(e)}catch(n){Un(t,t.return,n)}}function t4(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ep),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ep),t;default:throw Error(et(435,e.tag))}}function md(e,t){var n=t4(e);t.forEach(function(r){var s=u4.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}function ta(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r],o=e,f=t,p=f;e:for(;p!==null;){switch(p.tag){case 27:if(Qo(p.type)){si=p.stateNode,Gr=!1;break e}break;case 5:si=p.stateNode,Gr=!1;break e;case 3:case 4:si=p.stateNode.containerInfo,Gr=!0;break e}p=p.return}if(si===null)throw Error(et(160));Y5(o,f,s),si=null,Gr=!1,o=s.alternate,o!==null&&(o.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)X5(t,e),t=t.sibling}var Wa=null;function X5(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ta(t,e),na(e),r&4&&(Go(3,e,e.return),wf(3,e),Go(5,e,e.return));break;case 1:ta(t,e),na(e),r&512&&(Di||n===null||us(n,n.return)),r&64&&js&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var s=Wa;if(ta(t,e),na(e),r&512&&(Di||n===null||us(n,n.return)),r&4){var o=n!==null?n.memoizedState:null;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":o=s.getElementsByTagName("title")[0],(!o||o[df]||o[Sr]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=s.createElement(r),s.head.insertBefore(o,s.querySelector("head > title"))),hr(o,r,n),o[Sr]=e,tr(o),r=o;break e;case"link":var f=Gp("link","href",s).get(r+(n.href||""));if(f){for(var p=0;p<f.length;p++)if(o=f[p],o.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){f.splice(p,1);break t}}o=s.createElement(r),hr(o,r,n),s.head.appendChild(o);break;case"meta":if(f=Gp("meta","content",s).get(r+(n.content||""))){for(p=0;p<f.length;p++)if(o=f[p],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){f.splice(p,1);break t}}o=s.createElement(r),hr(o,r,n),s.head.appendChild(o);break;default:throw Error(et(468,r))}o[Sr]=e,tr(o),r=o}e.stateNode=r}else qp(s,e.type,e.stateNode);else e.stateNode=Hp(s,r,e.memoizedProps);else o!==r?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?qp(s,e.type,e.stateNode):Hp(s,r,e.memoizedProps)):r===null&&e.stateNode!==null&&dd(e,e.memoizedProps,n.memoizedProps)}break;case 27:ta(t,e),na(e),r&512&&(Di||n===null||us(n,n.return)),n!==null&&r&4&&dd(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ta(t,e),na(e),r&512&&(Di||n===null||us(n,n.return)),e.flags&32){s=e.stateNode;try{jc(s,"")}catch(A){Un(e,e.return,A)}}r&4&&e.stateNode!=null&&(s=e.memoizedProps,dd(e,s,n!==null?n.memoizedProps:s)),r&1024&&(pd=!0);break;case 6:if(ta(t,e),na(e),r&4){if(e.stateNode===null)throw Error(et(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(A){Un(e,e.return,A)}}break;case 3:if(w0=null,s=Wa,Wa=X0(t.containerInfo),ta(t,e),Wa=s,na(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rf(t.containerInfo)}catch(A){Un(e,e.return,A)}pd&&(pd=!1,Z5(e));break;case 4:r=Wa,Wa=X0(e.stateNode.containerInfo),ta(t,e),na(e),Wa=r;break;case 12:ta(t,e),na(e);break;case 13:ta(t,e),na(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(M2=ds()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,md(e,r)));break;case 22:s=e.memoizedState!==null;var m=n!==null&&n.memoizedState!==null,y=js,S=Di;if(js=y||s,Di=S||m,ta(t,e),Di=S,js=y,na(e),r&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(n===null||m||js||Di||yl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){m=n=t;try{if(o=m.stateNode,s)f=o.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{p=m.stateNode;var w=m.memoizedProps.style,E=w!=null&&w.hasOwnProperty("display")?w.display:null;p.style.display=E==null||typeof E=="boolean"?"":(""+E).trim()}}catch(A){Un(m,m.return,A)}}}else if(t.tag===6){if(n===null){m=t;try{m.stateNode.nodeValue=s?"":m.memoizedProps}catch(A){Un(m,m.return,A)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,md(e,n))));break;case 19:ta(t,e),na(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,md(e,r)));break;case 30:break;case 21:break;default:ta(t,e),na(e)}}function na(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(H5(r)){n=r;break}r=r.return}if(n==null)throw Error(et(160));switch(n.tag){case 27:var s=n.stateNode,o=gd(e);z0(e,o,s);break;case 5:var f=n.stateNode;n.flags&32&&(jc(f,""),n.flags&=-33);var p=gd(e);z0(e,p,f);break;case 3:case 4:var m=n.stateNode.containerInfo,y=gd(e);h1(e,y,m);break;default:throw Error(et(161))}}catch(S){Un(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Z5(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Z5(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function po(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)q5(e,t.alternate,t),t=t.sibling}function yl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Go(4,t,t.return),yl(t);break;case 1:us(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&U5(t,t.return,n),yl(t);break;case 27:ku(t.stateNode);case 26:case 5:us(t,t.return),yl(t);break;case 22:t.memoizedState===null&&yl(t);break;case 30:yl(t);break;default:yl(t)}e=e.sibling}}function bo(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,s=e,o=t,f=o.flags;switch(o.tag){case 0:case 11:case 15:bo(s,o,n),wf(4,o);break;case 1:if(bo(s,o,n),r=o,s=r.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(y){Un(r,r.return,y)}if(r=o,s=r.updateQueue,s!==null){var p=r.stateNode;try{var m=s.shared.hiddenCallbacks;if(m!==null)for(s.shared.hiddenCallbacks=null,s=0;s<m.length;s++)qx(m[s],p)}catch(y){Un(r,r.return,y)}}n&&f&64&&F5(o),Ou(o,o.return);break;case 27:G5(o);case 26:case 5:bo(s,o,n),n&&r===null&&f&4&&z5(o),Ou(o,o.return);break;case 12:bo(s,o,n);break;case 13:bo(s,o,n),n&&f&4&&W5(s,o);break;case 22:o.memoizedState===null&&bo(s,o,n),Ou(o,o.return);break;case 30:break;default:bo(s,o,n)}t=t.sibling}}function D2(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&xf(n))}function R2(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&xf(e))}function ss(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Q5(e,t,n,r),t=t.sibling}function Q5(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:ss(e,t,n,r),s&2048&&wf(9,t);break;case 1:ss(e,t,n,r);break;case 3:ss(e,t,n,r),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&xf(e)));break;case 12:if(s&2048){ss(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,f=o.id,p=o.onPostCommit;typeof p=="function"&&p(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(m){Un(t,t.return,m)}}else ss(e,t,n,r);break;case 13:ss(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,f=t.alternate,t.memoizedState!==null?o._visibility&2?ss(e,t,n,r):Lu(e,t):o._visibility&2?ss(e,t,n,r):(o._visibility|=2,oc(e,t,n,r,(t.subtreeFlags&10256)!==0)),s&2048&&D2(f,t);break;case 24:ss(e,t,n,r),s&2048&&R2(t.alternate,t);break;default:ss(e,t,n,r)}}function oc(e,t,n,r,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var o=e,f=t,p=n,m=r,y=f.flags;switch(f.tag){case 0:case 11:case 15:oc(o,f,p,m,s),wf(8,f);break;case 23:break;case 22:var S=f.stateNode;f.memoizedState!==null?S._visibility&2?oc(o,f,p,m,s):Lu(o,f):(S._visibility|=2,oc(o,f,p,m,s)),s&&y&2048&&D2(f.alternate,f);break;case 24:oc(o,f,p,m,s),s&&y&2048&&R2(f.alternate,f);break;default:oc(o,f,p,m,s)}t=t.sibling}}function Lu(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:Lu(n,r),s&2048&&D2(r.alternate,r);break;case 24:Lu(n,r),s&2048&&R2(r.alternate,r);break;default:Lu(n,r)}t=t.sibling}}var wu=8192;function tc(e){if(e.subtreeFlags&wu)for(e=e.child;e!==null;)K5(e),e=e.sibling}function K5(e){switch(e.tag){case 26:tc(e),e.flags&wu&&e.memoizedState!==null&&U4(Wa,e.memoizedState,e.memoizedProps);break;case 5:tc(e);break;case 3:case 4:var t=Wa;Wa=X0(e.stateNode.containerInfo),tc(e),Wa=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=wu,wu=16777216,tc(e),wu=t):tc(e));break;default:tc(e)}}function J5(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function du(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];er=r,e3(r,e)}J5(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$5(e),e=e.sibling}function $5(e){switch(e.tag){case 0:case 11:case 15:du(e),e.flags&2048&&Go(9,e,e.return);break;case 3:du(e);break;case 12:du(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,b0(e)):du(e);break;default:du(e)}}function b0(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];er=r,e3(r,e)}J5(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Go(8,t,t.return),b0(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,b0(t));break;default:b0(t)}e=e.sibling}}function e3(e,t){for(;er!==null;){var n=er;switch(n.tag){case 0:case 11:case 15:Go(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:xf(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,er=r;else e:for(n=e;er!==null;){r=er;var s=r.sibling,o=r.return;if(V5(r),r===n){er=null;break e}if(s!==null){s.return=o,er=s;break e}er=o}}}var n4={getCacheForType:function(e){var t=Cr(qi),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},i4=typeof WeakMap=="function"?WeakMap:Map,Rn=0,Yn=null,an=null,dn=0,In=0,aa=null,Io=!1,Xc=!1,O2=!1,Xs=0,Ai=0,qo=0,El=0,L2=0,La=0,Uc=0,Mu=null,qr=null,d1=!1,M2=0,H0=1/0,G0=null,ko=null,fr=0,Bo=null,zc=null,Oc=0,g1=0,p1=null,t3=null,ju=0,m1=null;function ha(){if(Rn&2&&dn!==0)return dn&-dn;if(Ft.T!==null){var e=kc;return e!==0?e:k2()}return hx()}function n3(){La===0&&(La=!(dn&536870912)||Nn?lx():536870912);var e=ja.current;return e!==null&&(e.flags|=32),La}function da(e,t,n){(e===Yn&&(In===2||In===9)||e.cancelPendingCommit!==null)&&(Hc(e,0),Do(e,dn,La,!1)),hf(e,n),(!(Rn&2)||e!==Yn)&&(e===Yn&&(!(Rn&2)&&(El|=n),Ai===4&&Do(e,dn,La,!1)),ys(e))}function i3(e,t,n){if(Rn&6)throw Error(et(327));var r=!n&&(t&124)===0&&(t&e.expiredLanes)===0||ff(e,t),s=r?s4(e,t):xd(e,t,!0),o=r;do{if(s===0){Xc&&!r&&Do(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!r4(n)){s=xd(e,t,!1),o=!1;continue}if(s===2){if(o=t,e.errorRecoveryDisabledLanes&o)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var p=e;s=Mu;var m=p.current.memoizedState.isDehydrated;if(m&&(Hc(p,f).flags|=256),f=xd(p,f,!1),f!==2){if(O2&&!m){p.errorRecoveryDisabledLanes|=o,El|=o,s=4;break e}o=qr,qr=s,o!==null&&(qr===null?qr=o:qr.push.apply(qr,o))}s=f}if(o=!1,s!==2)continue}}if(s===1){Hc(e,0),Do(e,t,0,!0);break}e:{switch(r=e,o=s,o){case 0:case 1:throw Error(et(345));case 4:if((t&4194048)!==t)break;case 6:Do(r,t,La,!Io);break e;case 2:qr=null;break;case 3:case 5:break;default:throw Error(et(329))}if((t&62914560)===t&&(s=M2+300-ds(),10<s)){if(Do(r,t,La,!Io),oh(r,0,!0)!==0)break e;r.timeoutHandle=A3(Tp.bind(null,r,n,qr,G0,d1,t,La,El,Uc,Io,o,2,-0,0),s);break e}Tp(r,n,qr,G0,d1,t,La,El,Uc,Io,o,0,-0,0)}}break}while(!0);ys(e)}function Tp(e,t,n,r,s,o,f,p,m,y,S,w,E,A){if(e.timeoutHandle=-1,w=t.subtreeFlags,(w&8192||(w&16785408)===16785408)&&($u={stylesheets:null,count:0,unsuspend:F4},K5(t),w=z4(),w!==null)){e.cancelPendingCommit=w(Ip.bind(null,e,t,o,n,r,s,f,p,m,S,1,E,A)),Do(e,o,f,!y);return}Ip(e,t,o,n,r,s,f,p,m)}function r4(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!ga(o(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Do(e,t,n,r){t&=~L2,t&=~El,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var o=31-fa(s),f=1<<o;r[o]=-1,s&=~f}n!==0&&ux(e,n,t)}function xh(){return Rn&6?!0:(Af(0),!1)}function j2(){if(an!==null){if(In===0)var e=an.return;else e=an,Fs=Gl=null,w2(e),Rc=null,Qu=0,e=an;for(;e!==null;)P5(e.alternate,e),e=e.return;an=null}}function Hc(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,A4(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),j2(),Yn=e,an=n=Hs(e.current,null),dn=t,In=0,aa=null,Io=!1,Xc=ff(e,t),O2=!1,Uc=La=L2=El=qo=Ai=0,qr=Mu=null,d1=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var s=31-fa(r),o=1<<s;t|=e[s],r&=~o}return Xs=t,fh(),n}function r3(e,t){en=null,Ft.H=k0,t===yf||t===dh?(t=ap(),In=3):t===Hx?(t=ap(),In=4):In=t===O5?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,aa=t,an===null&&(Ai=1,F0(e,Ra(t,e.current)))}function a3(){var e=Ft.H;return Ft.H=k0,e===null?k0:e}function s3(){var e=Ft.A;return Ft.A=n4,e}function x1(){Ai=4,Io||(dn&4194048)!==dn&&ja.current!==null||(Xc=!0),!(qo&134217727)&&!(El&134217727)||Yn===null||Do(Yn,dn,La,!1)}function xd(e,t,n){var r=Rn;Rn|=2;var s=a3(),o=s3();(Yn!==e||dn!==t)&&(G0=null,Hc(e,t)),t=!1;var f=Ai;e:do try{if(In!==0&&an!==null){var p=an,m=aa;switch(In){case 8:j2(),f=6;break e;case 3:case 2:case 9:case 6:ja.current===null&&(t=!0);var y=In;if(In=0,aa=null,Ac(e,p,m,y),n&&Xc){f=0;break e}break;default:y=In,In=0,aa=null,Ac(e,p,m,y)}}a4(),f=Ai;break}catch(S){r3(e,S)}while(!0);return t&&e.shellSuspendCounter++,Fs=Gl=null,Rn=r,Ft.H=s,Ft.A=o,an===null&&(Yn=null,dn=0,fh()),f}function a4(){for(;an!==null;)o3(an)}function s4(e,t){var n=Rn;Rn|=2;var r=a3(),s=s3();Yn!==e||dn!==t?(G0=null,H0=ds()+500,Hc(e,t)):Xc=ff(e,t);e:do try{if(In!==0&&an!==null){t=an;var o=aa;t:switch(In){case 1:In=0,aa=null,Ac(e,t,o,1);break;case 2:case 9:if(rp(o)){In=0,aa=null,_p(t);break}t=function(){In!==2&&In!==9||Yn!==e||(In=7),ys(e)},o.then(t,t);break e;case 3:In=7;break e;case 4:In=5;break e;case 7:rp(o)?(In=0,aa=null,_p(t)):(In=0,aa=null,Ac(e,t,o,7));break;case 5:var f=null;switch(an.tag){case 26:f=an.memoizedState;case 5:case 27:var p=an;if(!f||E3(f)){In=0,aa=null;var m=p.sibling;if(m!==null)an=m;else{var y=p.return;y!==null?(an=y,yh(y)):an=null}break t}}In=0,aa=null,Ac(e,t,o,5);break;case 6:In=0,aa=null,Ac(e,t,o,6);break;case 8:j2(),Ai=6;break e;default:throw Error(et(462))}}o4();break}catch(S){r3(e,S)}while(!0);return Fs=Gl=null,Ft.H=r,Ft.A=s,Rn=n,an!==null?0:(Yn=null,dn=0,fh(),Ai)}function o4(){for(;an!==null&&!Ib();)o3(an)}function o3(e){var t=B5(e.alternate,e,Xs);e.memoizedProps=e.pendingProps,t===null?yh(e):an=t}function _p(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=wp(n,t,t.pendingProps,t.type,void 0,dn);break;case 11:t=wp(n,t,t.pendingProps,t.type.render,t.ref,dn);break;case 5:w2(t);default:P5(n,t),t=an=Px(t,Xs),t=B5(n,t,Xs)}e.memoizedProps=e.pendingProps,t===null?yh(e):an=t}function Ac(e,t,n,r){Fs=Gl=null,w2(t),Rc=null,Qu=0;var s=t.return;try{if(Qv(e,s,t,n,dn)){Ai=1,F0(e,Ra(n,e.current)),an=null;return}}catch(o){if(s!==null)throw an=s,o;Ai=1,F0(e,Ra(n,e.current)),an=null;return}t.flags&32768?(Nn||r===1?e=!0:Xc||dn&536870912?e=!1:(Io=e=!0,(r===2||r===9||r===3||r===6)&&(r=ja.current,r!==null&&r.tag===13&&(r.flags|=16384))),l3(t,e)):yh(t)}function yh(e){var t=e;do{if(t.flags&32768){l3(t,Io);return}e=t.return;var n=Jv(t.alternate,t,Xs);if(n!==null){an=n;return}if(t=t.sibling,t!==null){an=t;return}an=t=e}while(t!==null);Ai===0&&(Ai=5)}function l3(e,t){do{var n=$v(e.alternate,e);if(n!==null){n.flags&=32767,an=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){an=e;return}an=e=n}while(e!==null);Ai=6,an=null}function Ip(e,t,n,r,s,o,f,p,m){e.cancelPendingCommit=null;do bh();while(fr!==0);if(Rn&6)throw Error(et(327));if(t!==null){if(t===e.current)throw Error(et(177));if(o=t.lanes|t.childLanes,o|=l2,Fb(e,n,o,f,p,m),e===Yn&&(an=Yn=null,dn=0),zc=t,Bo=e,Oc=n,g1=o,p1=s,t3=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,f4(E0,function(){return d3(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,t.subtreeFlags&13878||r){r=Ft.T,Ft.T=null,s=Sn.p,Sn.p=2,f=Rn,Rn|=4;try{e4(e,t,n)}finally{Rn=f,Sn.p=s,Ft.T=r}}fr=1,c3(),u3(),f3()}}function c3(){if(fr===1){fr=0;var e=Bo,t=zc,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Ft.T,Ft.T=null;var r=Sn.p;Sn.p=2;var s=Rn;Rn|=4;try{X5(t,e);var o=w1,f=Dx(e.containerInfo),p=o.focusedElem,m=o.selectionRange;if(f!==p&&p&&p.ownerDocument&&Ix(p.ownerDocument.documentElement,p)){if(m!==null&&o2(p)){var y=m.start,S=m.end;if(S===void 0&&(S=y),"selectionStart"in p)p.selectionStart=y,p.selectionEnd=Math.min(S,p.value.length);else{var w=p.ownerDocument||document,E=w&&w.defaultView||window;if(E.getSelection){var A=E.getSelection(),U=p.textContent.length,O=Math.min(m.start,U),H=m.end===void 0?O:Math.min(m.end,U);!A.extend&&O>H&&(f=H,H=O,O=f);var _=Qg(p,O),T=Qg(p,H);if(_&&T&&(A.rangeCount!==1||A.anchorNode!==_.node||A.anchorOffset!==_.offset||A.focusNode!==T.node||A.focusOffset!==T.offset)){var D=w.createRange();D.setStart(_.node,_.offset),A.removeAllRanges(),O>H?(A.addRange(D),A.extend(T.node,T.offset)):(D.setEnd(T.node,T.offset),A.addRange(D))}}}}for(w=[],A=p;A=A.parentNode;)A.nodeType===1&&w.push({element:A,left:A.scrollLeft,top:A.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<w.length;p++){var j=w[p];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}K0=!!v1,w1=v1=null}finally{Rn=s,Sn.p=r,Ft.T=n}}e.current=t,fr=2}}function u3(){if(fr===2){fr=0;var e=Bo,t=zc,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Ft.T,Ft.T=null;var r=Sn.p;Sn.p=2;var s=Rn;Rn|=4;try{q5(e,t.alternate,t)}finally{Rn=s,Sn.p=r,Ft.T=n}}fr=3}}function f3(){if(fr===4||fr===3){fr=0,Db();var e=Bo,t=zc,n=Oc,r=t3;t.subtreeFlags&10256||t.flags&10256?fr=5:(fr=0,zc=Bo=null,h3(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(ko=null),e2(n),t=t.stateNode,ua&&typeof ua.onCommitFiberRoot=="function")try{ua.onCommitFiberRoot(uf,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=Ft.T,s=Sn.p,Sn.p=2,Ft.T=null;try{for(var o=e.onRecoverableError,f=0;f<r.length;f++){var p=r[f];o(p.value,{componentStack:p.stack})}}finally{Ft.T=t,Sn.p=s}}Oc&3&&bh(),ys(e),s=e.pendingLanes,n&4194090&&s&42?e===m1?ju++:(ju=0,m1=e):ju=0,Af(0)}}function h3(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,xf(t)))}function bh(e){return c3(),u3(),f3(),d3()}function d3(){if(fr!==5)return!1;var e=Bo,t=g1;g1=0;var n=e2(Oc),r=Ft.T,s=Sn.p;try{Sn.p=32>n?32:n,Ft.T=null,n=p1,p1=null;var o=Bo,f=Oc;if(fr=0,zc=Bo=null,Oc=0,Rn&6)throw Error(et(331));var p=Rn;if(Rn|=4,$5(o.current),Q5(o,o.current,f,n),Rn=p,Af(0,!1),ua&&typeof ua.onPostCommitFiberRoot=="function")try{ua.onPostCommitFiberRoot(uf,o)}catch{}return!0}finally{Sn.p=s,Ft.T=r,h3(e,t)}}function Dp(e,t,n){t=Ra(n,t),t=c1(e.stateNode,t,2),e=jo(e,t,2),e!==null&&(hf(e,2),ys(e))}function Un(e,t,n){if(e.tag===3)Dp(e,e,n);else for(;t!==null;){if(t.tag===3){Dp(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ko===null||!ko.has(r))){e=Ra(n,e),n=D5(2),r=jo(t,n,2),r!==null&&(R5(n,r,t,e),hf(r,2),ys(r));break}}t=t.return}}function yd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new i4;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(O2=!0,s.add(n),e=l4.bind(null,e,t,n),t.then(e,e))}function l4(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Yn===e&&(dn&n)===n&&(Ai===4||Ai===3&&(dn&62914560)===dn&&300>ds()-M2?!(Rn&2)&&Hc(e,0):L2|=n,Uc===dn&&(Uc=0)),ys(e)}function g3(e,t){t===0&&(t=cx()),e=Wc(e,t),e!==null&&(hf(e,t),ys(e))}function c4(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),g3(e,n)}function u4(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(et(314))}r!==null&&r.delete(t),g3(e,n)}function f4(e,t){return J1(e,t)}var q0=null,lc=null,y1=!1,V0=!1,bd=!1,Tl=0;function ys(e){e!==lc&&e.next===null&&(lc===null?q0=lc=e:lc=lc.next=e),V0=!0,y1||(y1=!0,d4())}function Af(e,t){if(!bd&&V0){bd=!0;do for(var n=!1,r=q0;r!==null;){if(e!==0){var s=r.pendingLanes;if(s===0)var o=0;else{var f=r.suspendedLanes,p=r.pingedLanes;o=(1<<31-fa(42|e)+1)-1,o&=s&~(f&~p),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(n=!0,Rp(r,o))}else o=dn,o=oh(r,r===Yn?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(o&3)||ff(r,o)||(n=!0,Rp(r,o));r=r.next}while(n);bd=!1}}function h4(){p3()}function p3(){V0=y1=!1;var e=0;Tl!==0&&(w4()&&(e=Tl),Tl=0);for(var t=ds(),n=null,r=q0;r!==null;){var s=r.next,o=m3(r,t);o===0?(r.next=null,n===null?q0=s:n.next=s,s===null&&(lc=n)):(n=r,(e!==0||o&3)&&(V0=!0)),r=s}Af(e)}function m3(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var f=31-fa(o),p=1<<f,m=s[f];m===-1?(!(p&n)||p&r)&&(s[f]=Pb(p,t)):m<=t&&(e.expiredLanes|=p),o&=~p}if(t=Yn,n=dn,n=oh(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(In===2||In===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Vh(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||ff(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Vh(r),e2(n)){case 2:case 8:n=sx;break;case 32:n=E0;break;case 268435456:n=ox;break;default:n=E0}return r=x3.bind(null,e),n=J1(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Vh(r),e.callbackPriority=2,e.callbackNode=null,2}function x3(e,t){if(fr!==0&&fr!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(bh()&&e.callbackNode!==n)return null;var r=dn;return r=oh(e,e===Yn?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(i3(e,r,t),m3(e,ds()),e.callbackNode!=null&&e.callbackNode===n?x3.bind(null,e):null)}function Rp(e,t){if(bh())return null;i3(e,t,!0)}function d4(){N4(function(){Rn&6?J1(ax,h4):p3()})}function k2(){return Tl===0&&(Tl=lx()),Tl}function Op(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:f0(""+e)}function Lp(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function g4(e,t,n,r,s){if(t==="submit"&&n&&n.stateNode===s){var o=Op((s[Vr]||null).action),f=r.submitter;f&&(t=(t=f[Vr]||null)?Op(t.formAction):f.getAttribute("formAction"),t!==null&&(o=t,f=null));var p=new lh("action","action",null,r,s);e.push({event:p,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Tl!==0){var m=f?Lp(s,f):new FormData(s);o1(n,{pending:!0,data:m,method:s.method,action:o},null,m)}}else typeof o=="function"&&(p.preventDefault(),m=f?Lp(s,f):new FormData(s),o1(n,{pending:!0,data:m,method:s.method,action:o},o,m))},currentTarget:s}]})}}for(var vd=0;vd<Zd.length;vd++){var wd=Zd[vd],p4=wd.toLowerCase(),m4=wd[0].toUpperCase()+wd.slice(1);Qa(p4,"on"+m4)}Qa(Ox,"onAnimationEnd");Qa(Lx,"onAnimationIteration");Qa(Mx,"onAnimationStart");Qa("dblclick","onDoubleClick");Qa("focusin","onFocus");Qa("focusout","onBlur");Qa(Lv,"onTransitionRun");Qa(Mv,"onTransitionStart");Qa(jv,"onTransitionCancel");Qa(jx,"onTransitionEnd");Mc("onMouseEnter",["mouseout","mouseover"]);Mc("onMouseLeave",["mouseout","mouseover"]);Mc("onPointerEnter",["pointerout","pointerover"]);Mc("onPointerLeave",["pointerout","pointerover"]);Ul("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ul("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ul("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ul("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ul("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ul("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function y3(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var f=r.length-1;0<=f;f--){var p=r[f],m=p.instance,y=p.currentTarget;if(p=p.listener,m!==o&&s.isPropagationStopped())break e;o=p,s.currentTarget=y;try{o(s)}catch(S){P0(S)}s.currentTarget=null,o=m}else for(f=0;f<r.length;f++){if(p=r[f],m=p.instance,y=p.currentTarget,p=p.listener,m!==o&&s.isPropagationStopped())break e;o=p,s.currentTarget=y;try{o(s)}catch(S){P0(S)}s.currentTarget=null,o=m}}}}function rn(e,t){var n=t[Hd];n===void 0&&(n=t[Hd]=new Set);var r=e+"__bubble";n.has(r)||(b3(t,e,2,!1),n.add(r))}function Ad(e,t,n){var r=0;t&&(r|=4),b3(n,e,r,t)}var n0="_reactListening"+Math.random().toString(36).slice(2);function B2(e){if(!e[n0]){e[n0]=!0,dx.forEach(function(n){n!=="selectionchange"&&(x4.has(n)||Ad(n,!1,e),Ad(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[n0]||(t[n0]=!0,Ad("selectionchange",!1,t))}}function b3(e,t,n,r){switch(R3(t)){case 2:var s=q4;break;case 8:s=V4;break;default:s=z2}n=s.bind(null,t,n,e),s=void 0,!Yd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Nd(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var f=r.tag;if(f===3||f===4){var p=r.stateNode.containerInfo;if(p===s)break;if(f===4)for(f=r.return;f!==null;){var m=f.tag;if((m===3||m===4)&&f.stateNode.containerInfo===s)return;f=f.return}for(;p!==null;){if(f=dc(p),f===null)return;if(m=f.tag,m===5||m===6||m===26||m===27){r=o=f;continue e}p=p.parentNode}}r=r.return}wx(function(){var y=o,S=i2(n),w=[];e:{var E=kx.get(e);if(E!==void 0){var A=lh,U=e;switch(e){case"keypress":if(d0(n)===0)break e;case"keydown":case"keyup":A=fv;break;case"focusin":U="focus",A=$h;break;case"focusout":U="blur",A=$h;break;case"beforeblur":case"afterblur":A=$h;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=Ug;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=$b;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=gv;break;case Ox:case Lx:case Mx:A=nv;break;case jx:A=mv;break;case"scroll":case"scrollend":A=Kb;break;case"wheel":A=yv;break;case"copy":case"cut":case"paste":A=rv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Hg;break;case"toggle":case"beforetoggle":A=vv}var O=(t&4)!==0,H=!O&&(e==="scroll"||e==="scrollend"),_=O?E!==null?E+"Capture":null:E;O=[];for(var T=y,D;T!==null;){var j=T;if(D=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||D===null||_===null||(j=Vu(T,_),j!=null&&O.push(Ju(T,j,D))),H)break;T=T.return}0<O.length&&(E=new A(E,U,null,n,S),w.push({event:E,listeners:O}))}}if(!(t&7)){e:{if(E=e==="mouseover"||e==="pointerover",A=e==="mouseout"||e==="pointerout",E&&n!==Vd&&(U=n.relatedTarget||n.fromElement)&&(dc(U)||U[Vc]))break e;if((A||E)&&(E=S.window===S?S:(E=S.ownerDocument)?E.defaultView||E.parentWindow:window,A?(U=n.relatedTarget||n.toElement,A=y,U=U?dc(U):null,U!==null&&(H=cf(U),O=U.tag,U!==H||O!==5&&O!==27&&O!==6)&&(U=null)):(A=null,U=y),A!==U)){if(O=Ug,j="onMouseLeave",_="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(O=Hg,j="onPointerLeave",_="onPointerEnter",T="pointer"),H=A==null?E:vu(A),D=U==null?E:vu(U),E=new O(j,T+"leave",A,n,S),E.target=H,E.relatedTarget=D,j=null,dc(S)===y&&(O=new O(_,T+"enter",U,n,S),O.target=D,O.relatedTarget=H,j=O),H=j,A&&U)t:{for(O=A,_=U,T=0,D=O;D;D=nc(D))T++;for(D=0,j=_;j;j=nc(j))D++;for(;0<T-D;)O=nc(O),T--;for(;0<D-T;)_=nc(_),D--;for(;T--;){if(O===_||_!==null&&O===_.alternate)break t;O=nc(O),_=nc(_)}O=null}else O=null;A!==null&&Mp(w,E,A,O,!1),U!==null&&H!==null&&Mp(w,H,U,O,!0)}}e:{if(E=y?vu(y):window,A=E.nodeName&&E.nodeName.toLowerCase(),A==="select"||A==="input"&&E.type==="file")var q=Yg;else if(Vg(E))if(Tx)q=Dv;else{q=_v;var K=Tv}else A=E.nodeName,!A||A.toLowerCase()!=="input"||E.type!=="checkbox"&&E.type!=="radio"?y&&n2(y.elementType)&&(q=Yg):q=Iv;if(q&&(q=q(e,y))){Ex(w,q,n,S);break e}K&&K(e,E,y),e==="focusout"&&y&&E.type==="number"&&y.memoizedProps.value!=null&&qd(E,"number",E.value)}switch(K=y?vu(y):window,e){case"focusin":(Vg(K)||K.contentEditable==="true")&&(mc=K,Wd=y,Cu=null);break;case"focusout":Cu=Wd=mc=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,Kg(w,n,S);break;case"selectionchange":if(Ov)break;case"keydown":case"keyup":Kg(w,n,S)}var P;if(s2)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else pc?Sx(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Nx&&n.locale!=="ko"&&(pc||R!=="onCompositionStart"?R==="onCompositionEnd"&&pc&&(P=Ax()):(_o=S,r2="value"in _o?_o.value:_o.textContent,pc=!0)),K=Y0(y,R),0<K.length&&(R=new zg(R,e,null,n,S),w.push({event:R,listeners:K}),P?R.data=P:(P=Cx(n),P!==null&&(R.data=P)))),(P=Av?Nv(e,n):Sv(e,n))&&(R=Y0(y,"onBeforeInput"),0<R.length&&(K=new zg("onBeforeInput","beforeinput",null,n,S),w.push({event:K,listeners:R}),K.data=P)),g4(w,e,y,n,S)}y3(w,t)})}function Ju(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Y0(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||o===null||(s=Vu(e,n),s!=null&&r.unshift(Ju(e,s,o)),s=Vu(e,t),s!=null&&r.push(Ju(e,s,o))),e.tag===3)return r;e=e.return}return[]}function nc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Mp(e,t,n,r,s){for(var o=t._reactName,f=[];n!==null&&n!==r;){var p=n,m=p.alternate,y=p.stateNode;if(p=p.tag,m!==null&&m===r)break;p!==5&&p!==26&&p!==27||y===null||(m=y,s?(y=Vu(n,o),y!=null&&f.unshift(Ju(n,y,m))):s||(y=Vu(n,o),y!=null&&f.push(Ju(n,y,m)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var y4=/\r\n?/g,b4=/\u0000|\uFFFD/g;function jp(e){return(typeof e=="string"?e:""+e).replace(y4,`
`).replace(b4,"")}function v3(e,t){return t=jp(t),jp(e)===t}function vh(){}function kn(e,t,n,r,s,o){switch(n){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||jc(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&jc(e,""+r);break;case"className":Zf(e,"class",r);break;case"tabIndex":Zf(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Zf(e,n,r);break;case"style":vx(e,r,o);break;case"data":if(t!=="object"){Zf(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=f0(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(t!=="input"&&kn(e,t,"name",s.name,s,null),kn(e,t,"formEncType",s.formEncType,s,null),kn(e,t,"formMethod",s.formMethod,s,null),kn(e,t,"formTarget",s.formTarget,s,null)):(kn(e,t,"encType",s.encType,s,null),kn(e,t,"method",s.method,s,null),kn(e,t,"target",s.target,s,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=f0(""+r),e.setAttribute(n,r);break;case"onClick":r!=null&&(e.onclick=vh);break;case"onScroll":r!=null&&rn("scroll",e);break;case"onScrollEnd":r!=null&&rn("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(et(61));if(n=r.__html,n!=null){if(s.children!=null)throw Error(et(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}n=f0(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":r===!0?e.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":rn("beforetoggle",e),rn("toggle",e),u0(e,"popover",r);break;case"xlinkActuate":Ds(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Ds(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Ds(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Ds(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Ds(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Ds(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Ds(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Ds(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Ds(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":u0(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Zb.get(n)||n,u0(e,n,r))}}function b1(e,t,n,r,s,o){switch(n){case"style":vx(e,r,o);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(et(61));if(n=r.__html,n!=null){if(s.children!=null)throw Error(et(60));e.innerHTML=n}}break;case"children":typeof r=="string"?jc(e,r):(typeof r=="number"||typeof r=="bigint")&&jc(e,""+r);break;case"onScroll":r!=null&&rn("scroll",e);break;case"onScrollEnd":r!=null&&rn("scrollend",e);break;case"onClick":r!=null&&(e.onclick=vh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gx.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),o=e[Vr]||null,o=o!=null?o[n]:null,typeof o=="function"&&e.removeEventListener(t,o,s),typeof r=="function")){typeof o!="function"&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s);break e}n in e?e[n]=r:r===!0?e.setAttribute(n,""):u0(e,n,r)}}}function hr(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rn("error",e),rn("load",e);var r=!1,s=!1,o;for(o in n)if(n.hasOwnProperty(o)){var f=n[o];if(f!=null)switch(o){case"src":r=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(et(137,t));default:kn(e,t,o,f,n,null)}}s&&kn(e,t,"srcSet",n.srcSet,n,null),r&&kn(e,t,"src",n.src,n,null);return;case"input":rn("invalid",e);var p=o=f=s=null,m=null,y=null;for(r in n)if(n.hasOwnProperty(r)){var S=n[r];if(S!=null)switch(r){case"name":s=S;break;case"type":f=S;break;case"checked":m=S;break;case"defaultChecked":y=S;break;case"value":o=S;break;case"defaultValue":p=S;break;case"children":case"dangerouslySetInnerHTML":if(S!=null)throw Error(et(137,t));break;default:kn(e,t,r,S,n,null)}}xx(e,o,p,m,y,f,s,!1),T0(e);return;case"select":rn("invalid",e),r=f=o=null;for(s in n)if(n.hasOwnProperty(s)&&(p=n[s],p!=null))switch(s){case"value":o=p;break;case"defaultValue":f=p;break;case"multiple":r=p;default:kn(e,t,s,p,n,null)}t=o,n=f,e.multiple=!!r,t!=null?Ec(e,!!r,t,!1):n!=null&&Ec(e,!!r,n,!0);return;case"textarea":rn("invalid",e),o=s=r=null;for(f in n)if(n.hasOwnProperty(f)&&(p=n[f],p!=null))switch(f){case"value":r=p;break;case"defaultValue":s=p;break;case"children":o=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(et(91));break;default:kn(e,t,f,p,n,null)}bx(e,r,s,o),T0(e);return;case"option":for(m in n)if(n.hasOwnProperty(m)&&(r=n[m],r!=null))switch(m){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:kn(e,t,m,r,n,null)}return;case"dialog":rn("beforetoggle",e),rn("toggle",e),rn("cancel",e),rn("close",e);break;case"iframe":case"object":rn("load",e);break;case"video":case"audio":for(r=0;r<Ku.length;r++)rn(Ku[r],e);break;case"image":rn("error",e),rn("load",e);break;case"details":rn("toggle",e);break;case"embed":case"source":case"link":rn("error",e),rn("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(y in n)if(n.hasOwnProperty(y)&&(r=n[y],r!=null))switch(y){case"children":case"dangerouslySetInnerHTML":throw Error(et(137,t));default:kn(e,t,y,r,n,null)}return;default:if(n2(t)){for(S in n)n.hasOwnProperty(S)&&(r=n[S],r!==void 0&&b1(e,t,S,r,n,void 0));return}}for(p in n)n.hasOwnProperty(p)&&(r=n[p],r!=null&&kn(e,t,p,r,n,null))}function v4(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,o=null,f=null,p=null,m=null,y=null,S=null;for(A in n){var w=n[A];if(n.hasOwnProperty(A)&&w!=null)switch(A){case"checked":break;case"value":break;case"defaultValue":m=w;default:r.hasOwnProperty(A)||kn(e,t,A,null,r,w)}}for(var E in r){var A=r[E];if(w=n[E],r.hasOwnProperty(E)&&(A!=null||w!=null))switch(E){case"type":o=A;break;case"name":s=A;break;case"checked":y=A;break;case"defaultChecked":S=A;break;case"value":f=A;break;case"defaultValue":p=A;break;case"children":case"dangerouslySetInnerHTML":if(A!=null)throw Error(et(137,t));break;default:A!==w&&kn(e,t,E,A,r,w)}}Gd(e,f,p,m,y,S,o,s);return;case"select":A=f=p=E=null;for(o in n)if(m=n[o],n.hasOwnProperty(o)&&m!=null)switch(o){case"value":break;case"multiple":A=m;default:r.hasOwnProperty(o)||kn(e,t,o,null,r,m)}for(s in r)if(o=r[s],m=n[s],r.hasOwnProperty(s)&&(o!=null||m!=null))switch(s){case"value":E=o;break;case"defaultValue":p=o;break;case"multiple":f=o;default:o!==m&&kn(e,t,s,o,r,m)}t=p,n=f,r=A,E!=null?Ec(e,!!n,E,!1):!!r!=!!n&&(t!=null?Ec(e,!!n,t,!0):Ec(e,!!n,n?[]:"",!1));return;case"textarea":A=E=null;for(p in n)if(s=n[p],n.hasOwnProperty(p)&&s!=null&&!r.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:kn(e,t,p,null,r,s)}for(f in r)if(s=r[f],o=n[f],r.hasOwnProperty(f)&&(s!=null||o!=null))switch(f){case"value":E=s;break;case"defaultValue":A=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(et(91));break;default:s!==o&&kn(e,t,f,s,r,o)}yx(e,E,A);return;case"option":for(var U in n)if(E=n[U],n.hasOwnProperty(U)&&E!=null&&!r.hasOwnProperty(U))switch(U){case"selected":e.selected=!1;break;default:kn(e,t,U,null,r,E)}for(m in r)if(E=r[m],A=n[m],r.hasOwnProperty(m)&&E!==A&&(E!=null||A!=null))switch(m){case"selected":e.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:kn(e,t,m,E,r,A)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)E=n[O],n.hasOwnProperty(O)&&E!=null&&!r.hasOwnProperty(O)&&kn(e,t,O,null,r,E);for(y in r)if(E=r[y],A=n[y],r.hasOwnProperty(y)&&E!==A&&(E!=null||A!=null))switch(y){case"children":case"dangerouslySetInnerHTML":if(E!=null)throw Error(et(137,t));break;default:kn(e,t,y,E,r,A)}return;default:if(n2(t)){for(var H in n)E=n[H],n.hasOwnProperty(H)&&E!==void 0&&!r.hasOwnProperty(H)&&b1(e,t,H,void 0,r,E);for(S in r)E=r[S],A=n[S],!r.hasOwnProperty(S)||E===A||E===void 0&&A===void 0||b1(e,t,S,E,r,A);return}}for(var _ in n)E=n[_],n.hasOwnProperty(_)&&E!=null&&!r.hasOwnProperty(_)&&kn(e,t,_,null,r,E);for(w in r)E=r[w],A=n[w],!r.hasOwnProperty(w)||E===A||E==null&&A==null||kn(e,t,w,E,r,A)}var v1=null,w1=null;function W0(e){return e.nodeType===9?e:e.ownerDocument}function kp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w3(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function A1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Sd=null;function w4(){var e=window.event;return e&&e.type==="popstate"?e===Sd?!1:(Sd=e,!0):(Sd=null,!1)}var A3=typeof setTimeout=="function"?setTimeout:void 0,A4=typeof clearTimeout=="function"?clearTimeout:void 0,Bp=typeof Promise=="function"?Promise:void 0,N4=typeof queueMicrotask=="function"?queueMicrotask:typeof Bp<"u"?function(e){return Bp.resolve(null).then(e).catch(S4)}:A3;function S4(e){setTimeout(function(){throw e})}function Qo(e){return e==="head"}function Pp(e,t){var n=t,r=0,s=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(0<r&&8>r){n=r;var f=e.ownerDocument;if(n&1&&ku(f.documentElement),n&2&&ku(f.body),n&4)for(n=f.head,ku(n),f=n.firstChild;f;){var p=f.nextSibling,m=f.nodeName;f[df]||m==="SCRIPT"||m==="STYLE"||m==="LINK"&&f.rel.toLowerCase()==="stylesheet"||n.removeChild(f),f=p}}if(s===0){e.removeChild(o),rf(t);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);rf(t)}function N1(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":N1(n),t2(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function C4(e,t,n,r){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[df])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=Za(e.nextSibling),e===null)break}return null}function E4(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Za(e.nextSibling),e===null))return null;return e}function S1(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function T4(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Za(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var C1=null;function Fp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function N3(e,t,n){switch(t=W0(n),e){case"html":if(e=t.documentElement,!e)throw Error(et(452));return e;case"head":if(e=t.head,!e)throw Error(et(453));return e;case"body":if(e=t.body,!e)throw Error(et(454));return e;default:throw Error(et(451))}}function ku(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);t2(e)}var ka=new Map,Up=new Set;function X0(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Zs=Sn.d;Sn.d={f:_4,r:I4,D:D4,C:R4,L:O4,m:L4,X:j4,S:M4,M:k4};function _4(){var e=Zs.f(),t=xh();return e||t}function I4(e){var t=Yc(e);t!==null&&t.tag===5&&t.type==="form"?m5(t):Zs.r(e)}var Zc=typeof document>"u"?null:document;function S3(e,t,n){var r=Zc;if(r&&typeof t=="string"&&t){var s=Da(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),Up.has(s)||(Up.add(s),e={rel:e,crossOrigin:n,href:t},r.querySelector(s)===null&&(t=r.createElement("link"),hr(t,"link",e),tr(t),r.head.appendChild(t)))}}function D4(e){Zs.D(e),S3("dns-prefetch",e,null)}function R4(e,t){Zs.C(e,t),S3("preconnect",e,t)}function O4(e,t,n){Zs.L(e,t,n);var r=Zc;if(r&&e&&t){var s='link[rel="preload"][as="'+Da(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+Da(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+Da(n.imageSizes)+'"]')):s+='[href="'+Da(e)+'"]';var o=s;switch(t){case"style":o=Gc(e);break;case"script":o=Qc(e)}ka.has(o)||(e=ei({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ka.set(o,e),r.querySelector(s)!==null||t==="style"&&r.querySelector(Nf(o))||t==="script"&&r.querySelector(Sf(o))||(t=r.createElement("link"),hr(t,"link",e),tr(t),r.head.appendChild(t)))}}function L4(e,t){Zs.m(e,t);var n=Zc;if(n&&e){var r=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+Da(r)+'"][href="'+Da(e)+'"]',o=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Qc(e)}if(!ka.has(o)&&(e=ei({rel:"modulepreload",href:e},t),ka.set(o,e),n.querySelector(s)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Sf(o)))return}r=n.createElement("link"),hr(r,"link",e),tr(r),n.head.appendChild(r)}}}function M4(e,t,n){Zs.S(e,t,n);var r=Zc;if(r&&e){var s=Cc(r).hoistableStyles,o=Gc(e);t=t||"default";var f=s.get(o);if(!f){var p={loading:0,preload:null};if(f=r.querySelector(Nf(o)))p.loading=5;else{e=ei({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ka.get(o))&&P2(e,n);var m=f=r.createElement("link");tr(m),hr(m,"link",e),m._p=new Promise(function(y,S){m.onload=y,m.onerror=S}),m.addEventListener("load",function(){p.loading|=1}),m.addEventListener("error",function(){p.loading|=2}),p.loading|=4,v0(f,t,r)}f={type:"stylesheet",instance:f,count:1,state:p},s.set(o,f)}}}function j4(e,t){Zs.X(e,t);var n=Zc;if(n&&e){var r=Cc(n).hoistableScripts,s=Qc(e),o=r.get(s);o||(o=n.querySelector(Sf(s)),o||(e=ei({src:e,async:!0},t),(t=ka.get(s))&&F2(e,t),o=n.createElement("script"),tr(o),hr(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(s,o))}}function k4(e,t){Zs.M(e,t);var n=Zc;if(n&&e){var r=Cc(n).hoistableScripts,s=Qc(e),o=r.get(s);o||(o=n.querySelector(Sf(s)),o||(e=ei({src:e,async:!0,type:"module"},t),(t=ka.get(s))&&F2(e,t),o=n.createElement("script"),tr(o),hr(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(s,o))}}function zp(e,t,n,r){var s=(s=Lo.current)?X0(s):null;if(!s)throw Error(et(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Gc(n.href),n=Cc(s).hoistableStyles,r=n.get(t),r||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Gc(n.href);var o=Cc(s).hoistableStyles,f=o.get(e);if(f||(s=s.ownerDocument||s,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,f),(o=s.querySelector(Nf(e)))&&!o._p&&(f.instance=o,f.state.loading=5),ka.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ka.set(e,n),o||B4(s,e,n,f.state))),t&&r===null)throw Error(et(528,""));return f}if(t&&r!==null)throw Error(et(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Qc(n),n=Cc(s).hoistableScripts,r=n.get(t),r||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(et(444,e))}}function Gc(e){return'href="'+Da(e)+'"'}function Nf(e){return'link[rel="stylesheet"]['+e+"]"}function C3(e){return ei({},e,{"data-precedence":e.precedence,precedence:null})}function B4(e,t,n,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),hr(t,"link",n),tr(t),e.head.appendChild(t))}function Qc(e){return'[src="'+Da(e)+'"]'}function Sf(e){return"script[async]"+e}function Hp(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Da(n.href)+'"]');if(r)return t.instance=r,tr(r),r;var s=ei({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),tr(r),hr(r,"style",s),v0(r,n.precedence,e),t.instance=r;case"stylesheet":s=Gc(n.href);var o=e.querySelector(Nf(s));if(o)return t.state.loading|=4,t.instance=o,tr(o),o;r=C3(n),(s=ka.get(s))&&P2(r,s),o=(e.ownerDocument||e).createElement("link"),tr(o);var f=o;return f._p=new Promise(function(p,m){f.onload=p,f.onerror=m}),hr(o,"link",r),t.state.loading|=4,v0(o,n.precedence,e),t.instance=o;case"script":return o=Qc(n.src),(s=e.querySelector(Sf(o)))?(t.instance=s,tr(s),s):(r=n,(s=ka.get(o))&&(r=ei({},n),F2(r,s)),e=e.ownerDocument||e,s=e.createElement("script"),tr(s),hr(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(et(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,v0(r,n.precedence,e));return t.instance}function v0(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,o=s,f=0;f<r.length;f++){var p=r[f];if(p.dataset.precedence===t)o=p;else if(o!==s)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function P2(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function F2(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var w0=null;function Gp(e,t,n){if(w0===null){var r=new Map,s=w0=new Map;s.set(n,r)}else s=w0,r=s.get(n),r||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var o=n[s];if(!(o[df]||o[Sr]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var f=o.getAttribute(t)||"";f=e+f;var p=r.get(f);p?p.push(o):r.set(f,[o])}}return r}function qp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function P4(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function E3(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var $u=null;function F4(){}function U4(e,t,n){if($u===null)throw Error(et(475));var r=$u;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=Gc(n.href),o=e.querySelector(Nf(s));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(r.count++,r=Z0.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,tr(o);return}o=e.ownerDocument||e,n=C3(n),(s=ka.get(s))&&P2(n,s),o=o.createElement("link"),tr(o);var f=o;f._p=new Promise(function(p,m){f.onload=p,f.onerror=m}),hr(o,"link",n),t.instance=o}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(r.count++,t=Z0.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}function z4(){if($u===null)throw Error(et(475));var e=$u;return e.stylesheets&&e.count===0&&E1(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&E1(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Z0(){if(this.count--,this.count===0){if(this.stylesheets)E1(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Q0=null;function E1(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Q0=new Map,t.forEach(H4,e),Q0=null,Z0.call(e))}function H4(e,t){if(!(t.state.loading&4)){var n=Q0.get(e);if(n)var r=n.get(null);else{n=new Map,Q0.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<s.length;o++){var f=s[o];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(n.set(f.dataset.precedence,f),r=f)}r&&n.set(null,r)}s=t.instance,f=s.getAttribute("data-precedence"),o=n.get(f)||r,o===r&&n.set(null,s),n.set(f,s),this.count++,r=Z0.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),o?o.parentNode.insertBefore(s,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var ef={$$typeof:ks,Provider:null,Consumer:null,_currentValue:wl,_currentValue2:wl,_threadCount:0};function G4(e,t,n,r,s,o,f,p){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yh(0),this.hiddenUpdates=Yh(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=o,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=p,this.incompleteTransitions=new Map}function T3(e,t,n,r,s,o,f,p,m,y,S,w){return e=new G4(e,t,n,f,p,m,y,w),t=1,o===!0&&(t|=24),o=sa(3,null,null,t),e.current=o,o.stateNode=e,t=d2(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},p2(o),e}function _3(e){return e?(e=bc,e):bc}function I3(e,t,n,r,s,o){s=_3(s),r.context===null?r.context=s:r.pendingContext=s,r=Mo(t),r.payload={element:n},o=o===void 0?null:o,o!==null&&(r.callback=o),n=jo(e,r,t),n!==null&&(da(n,e,t),_u(n,e,t))}function Vp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function U2(e,t){Vp(e,t),(e=e.alternate)&&Vp(e,t)}function D3(e){if(e.tag===13){var t=Wc(e,67108864);t!==null&&da(t,e,67108864),U2(e,67108864)}}var K0=!0;function q4(e,t,n,r){var s=Ft.T;Ft.T=null;var o=Sn.p;try{Sn.p=2,z2(e,t,n,r)}finally{Sn.p=o,Ft.T=s}}function V4(e,t,n,r){var s=Ft.T;Ft.T=null;var o=Sn.p;try{Sn.p=8,z2(e,t,n,r)}finally{Sn.p=o,Ft.T=s}}function z2(e,t,n,r){if(K0){var s=T1(r);if(s===null)Nd(e,t,r,J0,n),Yp(e,r);else if(W4(s,e,t,n,r))r.stopPropagation();else if(Yp(e,r),t&4&&-1<Y4.indexOf(e)){for(;s!==null;){var o=Yc(s);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var f=ml(o.pendingLanes);if(f!==0){var p=o;for(p.pendingLanes|=2,p.entangledLanes|=2;f;){var m=1<<31-fa(f);p.entanglements[1]|=m,f&=~m}ys(o),!(Rn&6)&&(H0=ds()+500,Af(0))}}break;case 13:p=Wc(o,2),p!==null&&da(p,o,2),xh(),U2(o,2)}if(o=T1(r),o===null&&Nd(e,t,r,J0,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Nd(e,t,r,null,n)}}function T1(e){return e=i2(e),H2(e)}var J0=null;function H2(e){if(J0=null,e=dc(e),e!==null){var t=cf(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=tx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return J0=e,null}function R3(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rb()){case ax:return 2;case sx:return 8;case E0:case Ob:return 32;case ox:return 268435456;default:return 32}default:return 32}}var _1=!1,Po=null,Fo=null,Uo=null,tf=new Map,nf=new Map,Co=[],Y4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yp(e,t){switch(e){case"focusin":case"focusout":Po=null;break;case"dragenter":case"dragleave":Fo=null;break;case"mouseover":case"mouseout":Uo=null;break;case"pointerover":case"pointerout":tf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nf.delete(t.pointerId)}}function gu(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Yc(t),t!==null&&D3(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function W4(e,t,n,r,s){switch(t){case"focusin":return Po=gu(Po,e,t,n,r,s),!0;case"dragenter":return Fo=gu(Fo,e,t,n,r,s),!0;case"mouseover":return Uo=gu(Uo,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return tf.set(o,gu(tf.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,nf.set(o,gu(nf.get(o)||null,e,t,n,r,s)),!0}return!1}function O3(e){var t=dc(e.target);if(t!==null){var n=cf(t);if(n!==null){if(t=n.tag,t===13){if(t=tx(n),t!==null){e.blockedOn=t,Ub(e.priority,function(){if(n.tag===13){var r=ha();r=$1(r);var s=Wc(n,r);s!==null&&da(s,n,r),U2(n,r)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function A0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=T1(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Vd=r,n.target.dispatchEvent(r),Vd=null}else return t=Yc(n),t!==null&&D3(t),e.blockedOn=n,!1;t.shift()}return!0}function Wp(e,t,n){A0(e)&&n.delete(t)}function X4(){_1=!1,Po!==null&&A0(Po)&&(Po=null),Fo!==null&&A0(Fo)&&(Fo=null),Uo!==null&&A0(Uo)&&(Uo=null),tf.forEach(Wp),nf.forEach(Wp)}function i0(e,t){e.blockedOn===t&&(e.blockedOn=null,_1||(_1=!0,Yi.unstable_scheduleCallback(Yi.unstable_NormalPriority,X4)))}var r0=null;function Xp(e){r0!==e&&(r0=e,Yi.unstable_scheduleCallback(Yi.unstable_NormalPriority,function(){r0===e&&(r0=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if(typeof r!="function"){if(H2(r||n)===null)continue;break}var o=Yc(n);o!==null&&(e.splice(t,3),t-=3,o1(o,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function rf(e){function t(m){return i0(m,e)}Po!==null&&i0(Po,e),Fo!==null&&i0(Fo,e),Uo!==null&&i0(Uo,e),tf.forEach(t),nf.forEach(t);for(var n=0;n<Co.length;n++){var r=Co[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Co.length&&(n=Co[0],n.blockedOn===null);)O3(n),n.blockedOn===null&&Co.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var s=n[r],o=n[r+1],f=s[Vr]||null;if(typeof o=="function")f||Xp(n);else if(f){var p=null;if(o&&o.hasAttribute("formAction")){if(s=o,f=o[Vr]||null)p=f.formAction;else if(H2(s)!==null)continue}else p=f.action;typeof p=="function"?n[r+1]=p:(n.splice(r,3),r-=3),Xp(n)}}}function G2(e){this._internalRoot=e}wh.prototype.render=G2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));var n=t.current,r=ha();I3(n,r,e,t,null,null)};wh.prototype.unmount=G2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;I3(e.current,2,null,e,null,null),xh(),t[Vc]=null}};function wh(e){this._internalRoot=e}wh.prototype.unstable_scheduleHydration=function(e){if(e){var t=hx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Co.length&&t!==0&&t<Co[n].priority;n++);Co.splice(n,0,e),n===0&&O3(e)}};var Zp=$m.version;if(Zp!=="19.1.1")throw Error(et(527,Zp,"19.1.1"));Sn.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=Sb(t),e=e!==null?nx(e):null,e=e===null?null:e.stateNode,e};var Z4={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Ft,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var a0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!a0.isDisabled&&a0.supportsFiber)try{uf=a0.inject(Z4),ua=a0}catch{}}ah.createRoot=function(e,t){if(!ex(e))throw Error(et(299));var n=!1,r="",s=T5,o=_5,f=I5,p=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(p=t.unstable_transitionCallbacks)),t=T3(e,1,!1,null,null,n,r,s,o,f,p,null),e[Vc]=t.current,B2(e),new G2(t)};ah.hydrateRoot=function(e,t,n){if(!ex(e))throw Error(et(299));var r=!1,s="",o=T5,f=_5,p=I5,m=null,y=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(p=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(m=n.unstable_transitionCallbacks),n.formState!==void 0&&(y=n.formState)),t=T3(e,1,!0,t,n??null,r,s,o,f,p,m,y),t.context=_3(null),n=t.current,r=ha(),r=$1(r),s=Mo(r),s.callback=null,jo(n,s,r),n=r,t.current.lanes=n,hf(t,n),ys(t),e[Vc]=t.current,B2(e),new wh(t)};ah.version="19.1.1";function L3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(L3)}catch(e){console.error(e)}}L3(),Wm.exports=ah;var Q4=Wm.exports;const K4=ih(Q4);var ht=(e=>(e.CLIENT="Client",e.COURIER="Courier",e.ASSIGNING_USER="Assigning User",e.SUPER_USER="Super User",e.ADMIN="Administrator",e))(ht||{}),at=(e=>(e.PENDING_ASSIGNMENT="Pending Assignment",e.ASSIGNED_TO_COURIER="Assigned to Courier",e.PICKED_UP="Picked Up",e.IN_TRANSIT="In Transit",e.OUT_FOR_DELIVERY="Out for Delivery",e.DELIVERED="Delivered",e.DELIVERY_FAILED="Delivery Failed",e.RETURN_REQUESTED="Return Requested",e.RETURN_IN_PROGRESS="Return in Progress",e.RETURNED="Returned",e))(at||{}),Or=(e=>(e.COD="Cash on Delivery",e.INSTAPAY="InstaPay",e.WALLET="Wallet",e))(Or||{}),Ia=(e=>(e.CAIRO_DOWNTOWN="Cairo - Downtown (El Alfy)",e.CAIRO_HELIOPOLIS_SHERATON="Cairo - Heliopolis (Sheraton)",e.CAIRO_HELIOPOLIS_HEGAZ="Cairo - Heliopolis (Hegaz Square)",e.CAIRO_HELIOPOLIS_ROXY="Cairo - Heliopolis (Roxy)",e.CAIRO_HELIOPOLIS_SARAY="Cairo - Heliopolis (Saray El Qobba)",e.CAIRO_HELIOPOLIS_SUDAN="Cairo - Heliopolis (Misr w Sudan)",e.CAIRO_NASR_CITY_10TH="Cairo - Nasr City (10th District)",e.CAIRO_NASR_CITY_ABBAS="Cairo - Nasr City (Abbas El Akkad)",e.CAIRO_NASR_CITY_TAYARAN="Cairo - Nasr City (Tayaran St)",e.CAIRO_NASR_CITY_MAKRAM="Cairo - Nasr City (Makram Ebeid)",e.CAIRO_REHAB="Cairo - Rehab City",e.CAIRO_REHAB_SHELL="Cairo - Rehab City (Chill Out)",e.CAIRO_NEW_CAIRO_GOLDEN="Cairo - New Cairo (Golden Square)",e.CAIRO_NEW_CAIRO_SILVER="Cairo - New Cairo (Silver Star)",e.CAIRO_NEW_CAIRO_1ST="Cairo - New Cairo (1st Settlement)",e.CAIRO_NEW_CAIRO_90TH="Cairo - New Cairo (90th St)",e.CAIRO_MAADI_9="Cairo - Maadi (Street 9)",e.CAIRO_MAADI_ZAHRA="Cairo - Maadi (Zahraa)",e.CAIRO_MOKATTAM="Cairo - Mokattam",e.CAIRO_SHOROUK="Cairo - Shorouk City",e.CAIRO_MADINATY="Cairo - Madinaty",e.CAIRO_OBOUR="Cairo - Obour City",e.CAIRO_SHUBRA="Cairo - Shubra",e.CAIRO_TALAAT_HARB="Cairo - Talaat Harb",e.CAIRO_HELWAN="Cairo - Helwan",e.CAIRO_AIN_SHAMS="Cairo - Ain Shams",e.GIZA_HARAM="Giza - Haram",e.GIZA_FAISAL="Giza - Faisal",e.GIZA_FAISAL_MATBAA="Giza - Faisal (Matbaa)",e.GIZA_IMBABA="Giza - Imbaba",e.GIZA_HADAYEK_AHRAM="Giza - Hadayek El Ahram",e.GIZA_HADAYEK_AHRAM_2="Giza - Hadayek El Ahram 2",e.GIZA_SHEIKH_ZAYED="Giza - Sheikh Zayed",e.GIZA_DAHSHOUR="Giza - Dahshur Link",e.GIZA_MOHANDISEEN="Giza - Mohandiseen",e.GIZA_MANIL="Giza - Manial",e.GIZA_OCTOBER_HOSARY="Giza - 6th of October (Hosary)",e.GIZA_DOKKI="Giza - Dokki",e.GIZA_OCTOBER_MOTAMAYEZ="Giza - 6th of October (Motamayez)",e.ALEXANDRIA_RAML="Alexandria - Raml Station",e.ALEXANDRIA_LAURENT="Alexandria - Laurent",e.ALEXANDRIA_SMOUHA="Alexandria - Smouha",e.ALEXANDRIA_ASAFRA="Alexandria - Asafra",e.OTHER_SHUBIN_KOM="Other - Shibin El Kom",e.OTHER_PORT_SAID="Other - Port Said",e.OTHER_MANSOURA_UNIVERSITY="Other - Mansoura (University)",e.OTHER_MANSOURA_GEISH="Other - Mansoura (El Geish)",e.OTHER_TANTA="Other - Tanta",e.OTHER_ISMAILIA="Other - Ismailia",e.OTHER_ZAGAZIG="Other - Zagazig",e.OTHER_SUEZ="Other - Suez",e.OTHER_MAHALLA="Other - Mahalla",e.OTHER_ASSIUT="Other - Assiut",e.OTHER_MARINA="Other - Marina",e.OTHER_HURGHADA="Other - Hurghada",e.OTHER_MATROUH="Other - Matrouh",e))(Ia||{}),bn=(e=>(e.STANDARD="Standard",e.URGENT="Urgent",e.EXPRESS="Express",e))(bn||{}),I1=(e=>(e.DEPOSIT="Deposit",e.PAYMENT="Payment",e))(I1||{}),$0=(e=>(e.FLAT="flat",e.PERCENTAGE="percentage",e))($0||{}),_l=(e=>(e.COMMISSION="Commission",e.PENALTY="Penalty",e.BONUS="Bonus",e.WITHDRAWAL_REQUEST="Withdrawal Request",e.WITHDRAWAL_PROCESSED="Withdrawal Processed",e))(_l||{}),qs=(e=>(e.PENDING="Pending",e.PROCESSED="Processed",e.FAILED="Failed",e))(qs||{});const J4="https://acba2359b1e2.ngrok-free.app",$i=async(e,t={})=>{const n=`${J4}${e}`;try{const r=await fetch(n,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!r.ok){const o=await r.json();throw new Error(o.error||`Server error: ${r.statusText}`)}const s=r.headers.get("content-type");return s&&s.includes("application/json")?r.json():{success:!0}}catch(r){throw r}},M3=Fl.createContext(null),ci=()=>{const e=Fl.useContext(M3);if(!e)throw new Error("useAppContext must be used within an AppProvider");return e},$4=({children:e})=>{const[t,n]=He.useState(null),[r,s]=He.useState([]),[o,f]=He.useState([]),[p,m]=He.useState([]),[y,S]=He.useState([]),[w,E]=He.useState({}),[A,U]=He.useState([]),[O,H]=He.useState([]),[_,T]=He.useState([]),[D]=He.useState({baseCommissionRate:30,penaltyAmount:10,consecutiveFailureLimit:3,performanceThreshold:2}),[j,q]=He.useState(!1),K=He.useCallback((Te,ze,Xe)=>{const vt=Date.now(),mt=Xe||1e4;U(_t=>[..._t,{id:vt,message:Te,type:ze,duration:mt}])},[]),P=He.useCallback(Te=>{U(ze=>ze.filter(Xe=>Xe.id!==Te))},[]),R=He.useCallback(async()=>{if(t){q(!0);try{const Te=await $i("/api/data");s(Te.users||[]),f(Te.shipments||[]),m(Te.clientTransactions||[]),S(Te.notifications||[]),H(Te.courierStats||[]),T(Te.courierTransactions||[])}catch(Te){K(`Failed to load data: ${Te.message}`,"error"),J()}finally{q(!1)}}},[K,t]),M=He.useCallback(async(Te,ze)=>{q(!0);try{const Xe=await $i("/api/login",{method:"POST",body:JSON.stringify({email:Te,password:ze})});return n(Xe),K(`Welcome back, ${Xe.name}!`,"success"),!0}catch(Xe){return K(Xe.message,"error"),n(null),!1}finally{q(!1)}},[K]);Fl.useEffect(()=>{t&&R()},[t,R]),He.useEffect(()=>{if(t&&r.length>0){const Te=r.find(ze=>ze.id===t.id);Te&&JSON.stringify(Te)!==JSON.stringify(t)&&n(Te)}},[r,t]);const J=He.useCallback(()=>{K("You have been logged out.","info"),n(null),s([]),f([]),m([]),S([]),H([]),T([])},[K]),F=He.useCallback(async(Te,ze,Xe)=>{try{await Te,K(ze,"success"),await R()}catch(vt){K(`${Xe}: ${vt.message}`,"error")}},[K,R]),L=He.useCallback(Te=>F($i("/api/users",{method:"POST",body:JSON.stringify(Te)}),`User "${Te.name}" created successfully.`,"Failed to create user"),[F]),re=He.useCallback(async(Te,ze,Xe=!1)=>{try{await $i(`/api/users/${Te}`,{method:"PUT",body:JSON.stringify(ze)}),Xe||K("User updated successfully.","success"),await R()}catch(vt){Xe||K(`Update failed: ${vt.message}`,"error")}},[K,R]),ce=He.useCallback(Te=>F($i(`/api/users/${Te}`,{method:"DELETE"}),"User removed successfully.","Failed to remove user"),[F]),ne=He.useCallback((Te,ze)=>F($i(`/api/users/${Te}/password`,{method:"PUT",body:JSON.stringify({password:ze})}),"Password reset successfully.","Failed to reset password"),[F]),Q=He.useCallback(async Te=>{if(!t)return;const ze={...Te,clientId:t.id,clientName:t.name,clientFlatRateFee:t.flatRateFee};await F($i("/api/shipments",{method:"POST",body:JSON.stringify(ze)}),"Shipment created successfully!","Failed to create shipment")},[t,F]),W=He.useCallback((Te,ze,Xe)=>F($i(`/api/shipments/${Te}/status`,{method:"PUT",body:JSON.stringify({status:ze,...Xe})}),`Shipment ${Te} updated to ${ze}.`,"Failed to update status"),[F]),ue=He.useCallback(async(Te,ze)=>{try{return await $i(`/api/shipments/${Te}/assign`,{method:"PUT",body:JSON.stringify({courierId:ze})}),K(`Shipment ${Te} assigned.`,"success"),await R(),!0}catch(Xe){return K(Xe.message,"error"),!1}},[K,R]),oe=He.useCallback(async(Te,ze)=>{await ue(Te,ze)},[ue]),ye=He.useCallback(async(Te,ze)=>{try{return await W(Te,at.RETURN_REQUESTED),await ue(Te,ze)}catch(Xe){return K(`Failed to assign return: ${Xe.message}`,"error"),!1}},[W,ue,K]),xe=async(Te,ze)=>F($i(`/api/shipments/${Te}/fees`,{method:"PUT",body:JSON.stringify(ze)}),"Shipment fees updated.","Failed to update fees"),z=He.useCallback(async Te=>{E(ze=>({...ze,[Te]:"sending"}));try{await $i(`/api/notifications/${Te}/resend`,{method:"POST"}),K("Notification resent successfully.","success"),await R(),E(ze=>({...ze,[Te]:"sent"}))}catch(ze){K(ze.message,"error"),E(Xe=>({...Xe,[Te]:"failed"}))}},[K,R]),G=(Te,ze)=>F($i(`/api/couriers/${Te}/settings`,{method:"PUT",body:JSON.stringify(ze)}),"Courier settings updated.","Failed to update settings"),ie=(Te,ze,Xe)=>F($i(`/api/couriers/${Te}/penalty`,{method:"POST",body:JSON.stringify({amount:ze,description:Xe})}),"Penalty applied successfully.","Failed to apply penalty"),fe=(Te,ze)=>F($i("/api/couriers/payouts",{method:"POST",body:JSON.stringify({courierId:Te,amount:ze})}),"Payout request submitted.","Failed to submit payout request"),se=Te=>F($i(`/api/payouts/${Te}/process`,{method:"PUT"}),"Payout processed successfully.","Failed to process payout"),Ee=(Te,ze)=>F($i(`/api/clients/${Te}/flatrate`,{method:"PUT",body:JSON.stringify({flatRateFee:ze})}),"Client's flat rate updated.","Failed to update flat rate"),be=(Te,ze)=>F($i(`/api/clients/${Te}/taxcard`,{method:"PUT",body:JSON.stringify({taxCardNumber:ze})}),"Client's tax card number updated.","Failed to update tax card"),Ce=He.useMemo(()=>{if(!t)return 0;const Te=p.filter(ze=>ze.userId===t.id).reduce((ze,Xe)=>ze+Xe.amount,0);return isNaN(Te)?0:Te},[p,t]),We=He.useMemo(()=>t?{...t,walletBalance:Ce}:null,[t,Ce]),Oe=He.useMemo(()=>O.map(Te=>{const ze=_.filter(ct=>ct.courierId===Te.courierId),Xe=o.filter(ct=>ct.courierId===Te.courierId&&(ct.status===at.DELIVERED||ct.status===at.RETURNED)).length,vt=o.filter(ct=>ct.courierId===Te.courierId&&ct.status===at.DELIVERY_FAILED).length,mt=ze.filter(ct=>(ct.type===_l.COMMISSION||ct.type===_l.BONUS)&&ct.status===qs.PROCESSED).reduce((ct,Mt)=>ct+Mt.amount,0),_t=ze.filter(ct=>ct.status===qs.PROCESSED).reduce((ct,Mt)=>ct+Mt.amount,0),Lt=ze.filter(ct=>ct.type===_l.WITHDRAWAL_REQUEST&&ct.status===qs.PENDING).reduce((ct,Mt)=>ct+Mt.amount,0);return{...Te,deliveriesCompleted:Xe,deliveriesFailed:vt,totalEarnings:mt,currentBalance:_t,pendingEarnings:Math.max(0,_t+Lt)}}),[O,_,o]),tt=He.useCallback(Te=>Te.role===ht.ADMIN,[]),qe=He.useCallback(Te=>Te.role===ht.ADMIN||Te.role===ht.SUPER_USER,[]),ut=He.useCallback(Te=>{var ze;return((ze=r.find(Xe=>Xe.id===Te))==null?void 0:ze.taxCardNumber)||""},[r]),Le=He.useCallback(Te=>{const ze=Oe.find(Xe=>Xe.courierId===Te);return!ze||!D?!1:!ze.isRestricted&&ze.performanceRating>=D.performanceThreshold&&ze.consecutiveFailures<D.consecutiveFailureLimit},[Oe,D]),me=He.useCallback((Te,ze)=>{let Xe=ze.commissionType===$0.PERCENTAGE?Te.price*(ze.commissionValue/100):ze.commissionValue;return Math.round(Xe*100)/100},[]),pt=He.useCallback(()=>{const Te=o.filter(gt=>gt.status===at.DELIVERED),ze=o.filter(gt=>gt.status===at.PENDING_ASSIGNMENT||gt.status===at.ASSIGNED_TO_COURIER||gt.status===at.PICKED_UP||gt.status===at.IN_TRANSIT||gt.status===at.OUT_FOR_DELIVERY),Xe=o.filter(gt=>gt.status===at.DELIVERY_FAILED||gt.status===at.RETURN_REQUESTED||gt.status===at.RETURN_IN_PROGRESS||gt.status===at.RETURNED),vt=Te.reduce((gt,wt)=>gt+wt.price,0),mt=ze.reduce((gt,wt)=>gt+wt.packageValue,0),_t=Xe.reduce((gt,wt)=>gt+wt.packageValue,0),Lt=Te.reduce((gt,wt)=>gt+(wt.clientFlatRateFee||0),0),ct=o.reduce((gt,wt)=>gt+(wt.clientFlatRateFee||0),0),Mt=Te.reduce((gt,wt)=>gt+(wt.courierCommission||0),0),ft=Lt-Mt,vn=Te.reduce((gt,wt)=>gt+wt.price,0),Et=Te.reduce((gt,wt)=>gt+(wt.clientFlatRateFee||0),0),ot=Te.reduce((gt,wt)=>gt+(wt.courierCommission||0),0);return{totalCollectedMoney:vt,undeliveredPackagesValue:mt,failedDeliveriesValue:_t,totalRevenue:Lt,totalFees:ct,totalCommission:Mt,netRevenue:ft,grossRevenue:vn,totalClientFees:Et,totalCourierPayouts:ot,totalOrders:Te.length,taxCarNumber:""}},[o]),Ve=He.useCallback(()=>r.filter(Te=>Te.role===ht.CLIENT).map(Te=>{const ze=o.filter(Xe=>Xe.clientId===Te.id&&Xe.status===at.DELIVERED);return{clientId:Te.id,clientName:Te.name,totalOrders:ze.length,orderSum:ze.reduce((Xe,vt)=>Xe+vt.packageValue,0),flatRateFee:Te.flatRateFee||0}}),[r,o]),Be=He.useCallback((Te,ze,Xe)=>{const vt={[bn.STANDARD]:1,[bn.URGENT]:1.5,[bn.EXPRESS]:2},_t=(Xe.priorityMultipliers||vt)[ze]||vt[ze];return Math.round(Te*_t*100)/100},[]),lt=He.useCallback(Te=>{if(!Te)return"Not Assigned";const ze=r.find(Xe=>Xe.id===Te);return ze?ze.name:`Courier ${Te} (Deleted)`},[r]),Ue=He.useMemo(()=>({currentUser:We,users:r,shipments:o,clientTransactions:p,toasts:A,notifications:y,notificationStatus:w,courierStats:Oe,courierTransactions:_,financialSettings:D,isLoading:j,login:M,logout:J,addShipment:Q,updateShipmentStatus:W,updateShipmentFees:xe,assignShipmentToCourier:ue,addUser:L,updateUser:re,removeUser:ce,resetPassword:ne,addToast:K,removeToast:P,assignReturn:ye,reassignCourier:oe,resendNotification:z,canCourierReceiveAssignment:Le,updateCourierSettings:G,applyManualPenalty:ie,processCourierPayout:se,requestCourierPayout:fe,updateClientFlatRate:Ee,updateClientTaxCard:be,getTaxCardNumber:ut,getAdminFinancials:pt,getClientFinancials:Ve,canAccessAdminFinancials:tt,canCreateUsers:qe,calculateCommission:me,calculatePriorityPrice:Be,getCourierName:lt}),[We,r,o,p,A,y,w,Oe,_,D,j,M,J,Q,W,xe,ue,L,re,ce,ne,K,P,ye,oe,z,Le,G,ie,se,fe,Ee,be,ut,pt,Ve,tt,qe,me,Be,lt]);return h.jsx(M3.Provider,{value:Ue,children:e})},af=({className:e="w-10 h-10"})=>h.jsxs("svg",{viewBox:"0 0 128 128",className:e,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("rect",{width:"128",height:"128",rx:"32",fill:"url(#paint0_linear_1_2)"}),h.jsx("path",{d:"M41.8732 104L73.4475 56.4028H53.0337L86.1268 24L54.5525 71.5972H74.9663L41.8732 104Z",fill:"white"}),h.jsx("defs",{children:h.jsxs("linearGradient",{id:"paint0_linear_1_2",x1:"0",y1:"0",x2:"128",y2:"128",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:"#4338ca"}),h.jsx("stop",{offset:"1",stopColor:"#6366f1"})]})})]}),pu=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),oa=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Oa=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),j3=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 16.382V5.618a1 1 0 00-1.447-.894L15 7m-6 10h6"})}),Bu=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.122-1.28-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.122-1.28.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),ps=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),ew=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Ro=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),Nc=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),q2=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),ql=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Bl=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),tw=({className:e="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Qp=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),Ah=({className:e="w-5 h-5"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.536L16.732 3.732z"})}),k3=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),nw=({className:e="w-5 h-5"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),B3=({className:e="w-5 h-5"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4v-3l1.258-1.258a6 6 0 015.742-10.485A6 6 0 0115 7z"})}),iw=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"})}),Pl=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),sf=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h10a8 8 0 018 8v2M3 10l4-4m-4 4l4 4"})}),rw=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),V2=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Kp=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),aw=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m6 11v1m-6-16v1m12 11v1M4 12H3m10 6H3m10-12H3m18 12h-1M4 20v-1m0-6V3m0 18v-1M20 4v1m0 12v1M4 4h1m15 15h1M4 8h1m15 7h1m-6-4h.01M12 12h.01M8 12h.01M12 16h.01M16 12h.01M16 16h.01M8 16h.01M12 8h.01M16 8h.01M8 8h.01"})}),D1=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),P3=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Pu=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01M12 14v3m-3-3h6M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),sw=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),ow=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l4-4m0 0l4 4m-4-4v12"})}),Jp=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),F3=({className:e="w-6 h-6"})=>h.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),$p=({className:e="w-6 h-6"})=>h.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),lw=({toast:e})=>{const{removeToast:t}=ci(),n={success:"bg-green-600",error:"bg-red-600",info:"bg-primary-600"},r={success:h.jsx(ql,{className:"w-6 h-6 text-white"}),error:h.jsx(Bl,{className:"w-6 h-6 text-white"}),info:h.jsx(tw,{className:"w-6 h-6 text-white"})};return He.useEffect(()=>{const s=e.duration||1e4,o=setTimeout(()=>{t(e.id)},s);return()=>clearTimeout(o)},[e.id,e.duration,t]),h.jsxs("div",{className:`flex items-center gap-4 text-white p-4 pr-6 rounded-xl shadow-2xl animate-fade-in-up ${n[e.type]} relative`,children:[r[e.type],h.jsx("p",{className:"font-medium flex-1",children:e.message}),h.jsx("button",{onClick:()=>t(e.id),className:"ml-2 hover:bg-white hover:bg-opacity-20 rounded-full p-1 transition-colors","aria-label":"Close notification",children:h.jsx(F3,{className:"w-4 h-4 text-white"})})]})},cw=()=>{const{toasts:e}=ci();return h.jsx("div",{className:"fixed bottom-8 right-8 z-[100] space-y-3",children:e.map(t=>h.jsx(lw,{toast:t},t.id))})},uw=({onTrackPackageClick:e})=>{const{login:t}=ci(),[n,r]=He.useState(""),[s,o]=He.useState(""),f=p=>{p.preventDefault(),t(n,s)};return h.jsxs("div",{className:"min-h-screen w-full lg:grid lg:grid-cols-2",children:[h.jsxs("div",{className:"relative hidden lg:flex flex-col items-center justify-center p-12 bg-login-image text-white",children:[h.jsx("div",{className:"absolute inset-0 bg-slate-900 opacity-60"}),h.jsxs("div",{className:"relative z-10 text-center",children:[h.jsx(af,{className:"w-28 h-28 mx-auto"}),h.jsx("h1",{className:"mt-6 text-4xl font-bold tracking-tight",children:"Flash Express"}),h.jsx("p",{className:"mt-3 text-lg text-slate-300",children:"Your world, delivered faster."})]})]}),h.jsx("div",{className:"flex items-center justify-center p-6 sm:p-12 lg:p-16 bg-slate-50",children:h.jsxs("div",{className:"w-full max-w-md",children:[h.jsxs("div",{className:"lg:hidden text-center mb-8",children:[h.jsx(af,{className:"w-20 h-20 mx-auto"}),h.jsx("h1",{className:"text-3xl font-bold text-slate-800 mt-4",children:"Flash Express"})]}),h.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Login"}),h.jsx("p",{className:"mt-2 text-slate-600",children:"Enter your credentials to access your account."}),h.jsxs("form",{onSubmit:f,className:"mt-8 space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700",children:"Email Address"}),h.jsxs("div",{className:"relative mt-1",children:[h.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:h.jsx(P3,{className:"h-5 w-5 text-slate-400"})}),h.jsx("input",{id:"email",type:"email",value:n,onChange:p=>r(p.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"you@example.com",required:!0})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700",children:"Password"}),h.jsxs("div",{className:"relative mt-1",children:[h.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:h.jsx(B3,{className:"h-5 w-5 text-slate-400"})}),h.jsx("input",{id:"password",type:"password",value:s,onChange:p=>o(p.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"",required:!0})]})]}),h.jsx("button",{type:"submit",className:"w-full flex justify-center bg-primary-600 text-white font-semibold py-3 px-4 rounded-lg shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition duration-300",children:"Login"})]}),h.jsxs("p",{className:"text-center text-sm text-slate-500 mt-8",children:["Test with: ",h.jsx("code",{className:"bg-slate-200 text-slate-700 px-1.5 py-0.5 rounded-md",children:"admin@flash.com"})," / ",h.jsx("code",{className:"bg-slate-200 text-slate-700 px-1.5 py-0.5 rounded-md",children:"password123"})]}),h.jsxs("div",{className:"mt-8",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("div",{className:"w-full border-t border-slate-300"})}),h.jsx("div",{className:"relative flex justify-center text-sm",children:h.jsx("span",{className:"px-2 bg-slate-50 text-slate-500",children:"or"})})]}),h.jsx("div",{className:"mt-6",children:h.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-3 bg-green-600 text-white font-semibold py-3 px-4 rounded-lg shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition duration-300",children:[h.jsx(oa,{className:"h-5 w-5"}),"Track Your Shipment"]})})]})]})})]})},fw=({role:e,activeView:t,setActiveView:n})=>{const s={[ht.CLIENT]:[{name:"Dashboard",icon:h.jsx(pu,{}),view:"dashboard"},{name:"My Shipments",icon:h.jsx(oa,{}),view:"shipments"},{name:"Create Shipment",icon:h.jsx(q2,{}),view:"create"},{name:"Wallet",icon:h.jsx(ps,{}),view:"wallet"},{name:"Financials",icon:h.jsx(Ro,{}),view:"financials"},{name:"My Profile",icon:h.jsx(V2,{}),view:"profile"}],[ht.COURIER]:[{name:"Dashboard",icon:h.jsx(pu,{}),view:"dashboard"},{name:"My Tasks",icon:h.jsx(Nc,{}),view:"tasks"},{name:"My Earnings",icon:h.jsx(Pu,{}),view:"courier-financials"}],[ht.ASSIGNING_USER]:[{name:"Dashboard",icon:h.jsx(pu,{}),view:"dashboard"},{name:"Assign Shipments",icon:h.jsx(Oa,{}),view:"assign"}],[ht.SUPER_USER]:[{name:"Dashboard",icon:h.jsx(pu,{}),view:"dashboard"},{name:"All Shipments",icon:h.jsx(oa,{}),view:"shipments"},{name:"Assign Shipments",icon:h.jsx(Oa,{}),view:"assign"},{name:"Manage Returns",icon:h.jsx(sf,{}),view:"returns"},{name:"User Management",icon:h.jsx(Bu,{}),view:"users"},{name:"Client Analytics",icon:h.jsx(Kp,{}),view:"client-analytics"},{name:"Courier Performance",icon:h.jsx(Pu,{}),view:"courier-performance"},{name:"Financials",icon:h.jsx(Ro,{}),view:"financials"},{name:"Total Shipments",icon:h.jsx(oa,{}),view:"total-shipments"},{name:"Notifications Log",icon:h.jsx(D1,{}),view:"notifications"}],[ht.ADMIN]:[{name:"Dashboard",icon:h.jsx(pu,{}),view:"dashboard"},{name:"All Shipments",icon:h.jsx(oa,{}),view:"shipments"},{name:"Assign Shipments",icon:h.jsx(Oa,{}),view:"assign"},{name:"Manage Returns",icon:h.jsx(sf,{}),view:"returns"},{name:"User Management",icon:h.jsx(Bu,{}),view:"users"},{name:"Client Analytics",icon:h.jsx(Kp,{}),view:"client-analytics"},{name:"Courier Performance",icon:h.jsx(Pu,{}),view:"courier-performance"},{name:"Financials",icon:h.jsx(Ro,{}),view:"financials"},{name:"Admin Financials",icon:h.jsx(Ro,{}),view:"admin-financials"},{name:"Total Shipments",icon:h.jsx(oa,{}),view:"total-shipments"},{name:"Notifications Log",icon:h.jsx(D1,{}),view:"notifications"}]}[e]||[];return h.jsxs("aside",{className:"w-64 bg-slate-800 text-slate-300 flex flex-col flex-shrink-0",children:[h.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-700",children:[h.jsx(af,{className:"w-9 h-9"}),h.jsx("div",{children:h.jsx("h1",{className:"text-lg font-bold text-white",children:"Flash Express"})})]}),h.jsx("nav",{className:"flex-1 p-4 space-y-1.5",children:s.map(o=>h.jsxs("button",{onClick:()=>n(o.view),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-md text-left transition ${t===o.view?"bg-primary-600 text-white font-semibold":"hover:bg-slate-700 hover:text-white"}`,children:[Fl.cloneElement(o.icon,{className:"w-6 h-6"}),h.jsx("span",{className:"text-sm font-medium",children:o.name})]},o.name))})]})},hw=({onLogout:e,user:t,onNavigate:n})=>{const{notifications:r,notificationStatus:s}=ci(),[o,f]=He.useState(!1),p=He.useRef(null),m=r.filter(y=>s[y.id]==="failed");return He.useEffect(()=>{const y=S=>{p.current&&!p.current.contains(S.target)&&f(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]),h.jsxs("header",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 p-4 flex justify-between items-center z-20 sticky top-0",children:[h.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[t.role," Portal"]}),h.jsxs("div",{className:"flex items-center gap-4",children:[t.role===ht.ADMIN&&h.jsxs("div",{className:"relative",ref:p,children:[h.jsxs("button",{onClick:()=>f(y=>!y),className:"p-2 rounded-full hover:bg-slate-100 transition relative",children:[h.jsx(D1,{className:"w-6 h-6 text-slate-600"}),m.length>0&&h.jsxs("span",{className:"absolute top-0 right-0 flex h-3 w-3",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]}),o&&h.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-slate-200 overflow-hidden",children:[h.jsxs("div",{className:"p-3 font-semibold text-slate-800 border-b border-slate-200",children:["Notifications (",m.length," failed)"]}),h.jsx("div",{className:"max-h-80 overflow-y-auto",children:m.length>0?m.map(y=>h.jsxs("div",{className:"p-3 hover:bg-slate-50 border-b border-slate-100 last:border-b-0",children:[h.jsxs("p",{className:"text-sm font-medium text-red-800",children:["Failed to send to ",y.recipient]}),h.jsx("p",{className:"text-sm text-slate-600 truncate",children:y.message.split(`

`)[0]})]},y.id)):h.jsx("p",{className:"text-sm text-slate-500 p-4 text-center",children:"No delivery failures."})}),h.jsx("div",{className:"p-2 bg-slate-50 border-t border-slate-200",children:h.jsx("button",{onClick:()=>{f(!1),n("notifications")},className:"w-full text-center text-sm font-semibold text-primary-600 hover:text-primary-800 py-1",children:"View Full Log"})})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"font-semibold text-slate-800",children:t.name}),h.jsx("p",{className:"text-xs text-slate-500",children:t.email})]}),h.jsx("button",{onClick:e,title:"Logout",className:"p-2 rounded-full hover:bg-red-50 transition",children:h.jsx(ew,{className:"w-6 h-6 text-red-500"})})]})]})]})},Kt=({title:e,value:t,icon:n,color:r,subtitle:s,onClick:o})=>h.jsxs("div",{className:`bg-white p-5 rounded-xl shadow-sm flex items-center justify-between border-l-4 ${o?"cursor-pointer hover:shadow-md hover:-translate-y-0.5 transition-all duration-300":""}`,style:{borderColor:r},onClick:o,children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-slate-500",children:e}),h.jsx("p",{className:"text-3xl font-bold text-slate-800",children:t}),s&&h.jsx("p",{className:"text-xs text-slate-400 mt-1",children:s})]}),h.jsx("div",{className:"p-3 rounded-lg bg-opacity-10",style:{color:r,backgroundColor:`${r}1A`},children:Fl.cloneElement(n,{className:"w-7 h-7"})})]}),em=({setActiveView:e})=>{const{currentUser:t,shipments:n,users:r}=ci();if(!t)return null;const s=n.filter(S=>S.clientId===t.id),o=n.filter(S=>S.courierId===t.id),f=()=>{var S;return h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[h.jsx(Kt,{title:"Total Shipments",value:s.length,icon:h.jsx(oa,{className:"w-7 h-7"}),color:"#3b82f6",onClick:()=>e("shipments")}),h.jsx(Kt,{title:"In Transit",value:s.filter(w=>[at.IN_TRANSIT,at.OUT_FOR_DELIVERY].includes(w.status)).length,icon:h.jsx(Oa,{className:"w-7 h-7"}),color:"#8b5cf6"}),h.jsx(Kt,{title:"Wallet Balance",value:`${((S=t.walletBalance)==null?void 0:S.toFixed(2))??0} EGP`,icon:h.jsx(ps,{className:"w-7 h-7"}),color:"#22c55e",onClick:()=>e("wallet")})]})},p=()=>{const S=o.filter(w=>w.status===at.DELIVERED&&w.paymentMethod===Or.COD).reduce((w,E)=>w+E.price,0);return h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[h.jsx(Kt,{title:"Assigned Today",value:o.filter(w=>new Date(w.creationDate).toDateString()===new Date().toDateString()).length,icon:h.jsx(Nc,{className:"w-7 h-7"}),color:"#3b82f6"}),h.jsx(Kt,{title:"Pending Deliveries",value:o.filter(w=>w.status===at.OUT_FOR_DELIVERY).length,icon:h.jsx(Oa,{className:"w-7 h-7"}),color:"#06b6d4",onClick:()=>e("tasks")}),h.jsx(Kt,{title:"COD Collected",value:`${S.toFixed(2)} EGP`,icon:h.jsx(ps,{className:"w-7 h-7"}),color:"#16a34a"})]})},m=()=>h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx(Kt,{title:"Total Shipments",value:n.length,icon:h.jsx(oa,{className:"w-7 h-7"}),color:"#3b82f6",onClick:t.role===ht.ADMIN?()=>e("shipments"):void 0}),h.jsx(Kt,{title:"Total Clients",value:r.filter(S=>S.role===ht.CLIENT).length,icon:h.jsx(Bu,{className:"w-7 h-7"}),color:"#8b5cf6",onClick:t.role===ht.ADMIN?()=>e("client-analytics"):void 0}),h.jsx(Kt,{title:"Pending Assignment",value:n.filter(S=>S.status===at.PENDING_ASSIGNMENT).length,icon:h.jsx(Nc,{className:"w-7 h-7"}),color:"#f97316",onClick:()=>e("assign")}),h.jsx(Kt,{title:"Total Revenue",value:`${n.filter(S=>S.status===at.DELIVERED).reduce((S,w)=>S+w.price,0).toFixed(2)} EGP`,icon:h.jsx(Ro,{className:"w-7 h-7"}),color:"#16a34a",onClick:t.role===ht.ADMIN?()=>e("financials"):void 0})]}),y=()=>h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx(Kt,{title:"Total Shipments",value:n.length,icon:h.jsx(oa,{className:"w-7 h-7"}),color:"#3b82f6",onClick:()=>e("total-shipments")}),h.jsx(Kt,{title:"Total Clients",value:r.filter(S=>S.role===ht.CLIENT).length,icon:h.jsx(Bu,{className:"w-7 h-7"}),color:"#8b5cf6",onClick:()=>e("client-analytics")}),h.jsx(Kt,{title:"Total Couriers",value:r.filter(S=>S.role===ht.COURIER).length,icon:h.jsx(Oa,{className:"w-7 h-7"}),color:"#f97316",onClick:()=>e("courier-performance")}),h.jsx(Kt,{title:"Total Revenue",value:`${n.filter(S=>S.status===at.DELIVERED).reduce((S,w)=>S+w.price,0).toFixed(2)} EGP`,icon:h.jsx(Ro,{className:"w-7 h-7"}),color:"#16a34a",onClick:()=>e("financials")})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[h.jsx(Kt,{title:"Pending Assignment",value:n.filter(S=>S.status===at.PENDING_ASSIGNMENT).length,icon:h.jsx(Nc,{className:"w-7 h-7"}),color:"#f59e0b",onClick:()=>e("assign")}),h.jsx(Kt,{title:"In Transit",value:n.filter(S=>[at.IN_TRANSIT,at.OUT_FOR_DELIVERY].includes(S.status)).length,icon:h.jsx(Oa,{className:"w-7 h-7"}),color:"#06b6d4",onClick:()=>e("shipments")}),h.jsx(Kt,{title:"Delivered Today",value:n.filter(S=>S.status===at.DELIVERED&&new Date(S.deliveryDate||"").toDateString()===new Date().toDateString()).length,icon:h.jsx(oa,{className:"w-7 h-7"}),color:"#16a34a"})]}),h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs("button",{onClick:()=>e("user-management"),className:"p-4 bg-blue-50 hover:bg-blue-100 rounded-lg border border-blue-200 transition-colors",children:[h.jsx(Bu,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),h.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Manage Users"})]}),h.jsxs("button",{onClick:()=>e("admin-financials"),className:"p-4 bg-green-50 hover:bg-green-100 rounded-lg border border-green-200 transition-colors",children:[h.jsx(Ro,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),h.jsx("span",{className:"text-sm font-semibold text-green-800",children:"Admin Financials"})]}),h.jsxs("button",{onClick:()=>e("courier-performance"),className:"p-4 bg-orange-50 hover:bg-orange-100 rounded-lg border border-orange-200 transition-colors",children:[h.jsx(Oa,{className:"w-8 h-8 text-orange-600 mx-auto mb-2"}),h.jsx("span",{className:"text-sm font-semibold text-orange-800",children:"Courier Performance"})]}),h.jsxs("button",{onClick:()=>e("notifications"),className:"p-4 bg-purple-50 hover:bg-purple-100 rounded-lg border border-purple-200 transition-colors",children:[h.jsx(Nc,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),h.jsx("span",{className:"text-sm font-semibold text-purple-800",children:"Notifications Log"})]})]})]})]});return h.jsxs("div",{children:[h.jsxs("h1",{className:"text-3xl font-bold text-slate-800 mb-6",children:["Welcome back, ",t.name.split(" ")[0],"!"]}),t.role===ht.CLIENT&&f(),t.role===ht.COURIER&&p(),(t.role===ht.ADMIN||t.role===ht.ASSIGNING_USER)&&m(),t.role===ht.SUPER_USER&&y()]})},dw="modulepreload",gw=function(e){return"/"+e},tm={},R1=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));s=Promise.allSettled(n.map(m=>{if(m=gw(m),m in tm)return;tm[m]=!0;const y=m.endsWith(".css"),S=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${S}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":dw,y||(w.as="script"),w.crossOrigin="",w.href=m,p&&w.setAttribute("nonce",p),document.head.appendChild(w),y)return new Promise((E,A)=>{w.addEventListener("load",E),w.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return s.then(f=>{for(const p of f||[])p.status==="rejected"&&o(p.reason);return t().catch(o)})};function On(e){"@babel/helpers - typeof";return On=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},On(e)}var Nr=Uint8Array,ca=Uint16Array,Y2=Int32Array,Nh=new Nr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Sh=new Nr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),O1=new Nr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U3=function(e,t){for(var n=new ca(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var s=new Y2(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)s[o]=o-n[r]<<5|r;return{b:n,r:s}},z3=U3(Nh,2),H3=z3.b,L1=z3.r;H3[28]=258,L1[258]=28;var G3=U3(Sh,0),pw=G3.b,nm=G3.r,M1=new ca(32768);for(var $n=0;$n<32768;++$n){var mo=($n&43690)>>1|($n&21845)<<1;mo=(mo&52428)>>2|(mo&13107)<<2,mo=(mo&61680)>>4|(mo&3855)<<4,M1[$n]=((mo&65280)>>8|(mo&255)<<8)>>1}var ms=function(e,t,n){for(var r=e.length,s=0,o=new ca(t);s<r;++s)e[s]&&++o[e[s]-1];var f=new ca(t);for(s=1;s<t;++s)f[s]=f[s-1]+o[s-1]<<1;var p;if(n){p=new ca(1<<t);var m=15-t;for(s=0;s<r;++s)if(e[s])for(var y=s<<4|e[s],S=t-e[s],w=f[e[s]-1]++<<S,E=w|(1<<S)-1;w<=E;++w)p[M1[w]>>m]=y}else for(p=new ca(r),s=0;s<r;++s)e[s]&&(p[s]=M1[f[e[s]-1]++]>>15-e[s]);return p},Vo=new Nr(288);for(var $n=0;$n<144;++$n)Vo[$n]=8;for(var $n=144;$n<256;++$n)Vo[$n]=9;for(var $n=256;$n<280;++$n)Vo[$n]=7;for(var $n=280;$n<288;++$n)Vo[$n]=8;var of=new Nr(32);for(var $n=0;$n<32;++$n)of[$n]=5;var mw=ms(Vo,9,0),xw=ms(Vo,9,1),yw=ms(of,5,0),bw=ms(of,5,1),Cd=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},qa=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},Ed=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},W2=function(e){return(e+7)/8|0},q3=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Nr(e.subarray(t,n))},vw=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ya=function(e,t,n){var r=new Error(t||vw[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Ya),!n)throw r;return r},ww=function(e,t,n,r){var s=e.length,o=0;if(!s||t.f&&!t.l)return n||new Nr(0);var f=!n,p=f||t.i!=2,m=t.i;f&&(n=new Nr(s*3));var y=function(Oe){var tt=n.length;if(Oe>tt){var qe=new Nr(Math.max(tt*2,Oe));qe.set(n),n=qe}},S=t.f||0,w=t.p||0,E=t.b||0,A=t.l,U=t.d,O=t.m,H=t.n,_=s*8;do{if(!A){S=qa(e,w,1);var T=qa(e,w+1,3);if(w+=3,T)if(T==1)A=xw,U=bw,O=9,H=5;else if(T==2){var K=qa(e,w,31)+257,P=qa(e,w+10,15)+4,R=K+qa(e,w+5,31)+1;w+=14;for(var M=new Nr(R),J=new Nr(19),F=0;F<P;++F)J[O1[F]]=qa(e,w+F*3,7);w+=P*3;for(var L=Cd(J),re=(1<<L)-1,ce=ms(J,L,1),F=0;F<R;){var ne=ce[qa(e,w,re)];w+=ne&15;var D=ne>>4;if(D<16)M[F++]=D;else{var Q=0,W=0;for(D==16?(W=3+qa(e,w,3),w+=2,Q=M[F-1]):D==17?(W=3+qa(e,w,7),w+=3):D==18&&(W=11+qa(e,w,127),w+=7);W--;)M[F++]=Q}}var ue=M.subarray(0,K),oe=M.subarray(K);O=Cd(ue),H=Cd(oe),A=ms(ue,O,1),U=ms(oe,H,1)}else Ya(1);else{var D=W2(w)+4,j=e[D-4]|e[D-3]<<8,q=D+j;if(q>s){m&&Ya(0);break}p&&y(E+j),n.set(e.subarray(D,q),E),t.b=E+=j,t.p=w=q*8,t.f=S;continue}if(w>_){m&&Ya(0);break}}p&&y(E+131072);for(var ye=(1<<O)-1,xe=(1<<H)-1,z=w;;z=w){var Q=A[Ed(e,w)&ye],G=Q>>4;if(w+=Q&15,w>_){m&&Ya(0);break}if(Q||Ya(2),G<256)n[E++]=G;else if(G==256){z=w,A=null;break}else{var ie=G-254;if(G>264){var F=G-257,fe=Nh[F];ie=qa(e,w,(1<<fe)-1)+H3[F],w+=fe}var se=U[Ed(e,w)&xe],Ee=se>>4;se||Ya(3),w+=se&15;var oe=pw[Ee];if(Ee>3){var fe=Sh[Ee];oe+=Ed(e,w)&(1<<fe)-1,w+=fe}if(w>_){m&&Ya(0);break}p&&y(E+131072);var be=E+ie;if(E<oe){var Ce=o-oe,We=Math.min(oe,be);for(Ce+E<0&&Ya(3);E<We;++E)n[E]=r[Ce+E]}for(;E<be;++E)n[E]=n[E-oe]}}t.l=A,t.p=z,t.b=E,t.f=S,A&&(S=1,t.m=O,t.d=U,t.n=H)}while(!S);return E!=n.length&&f?q3(n,0,E):n.subarray(0,E)},Ls=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},mu=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},Td=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var s=n.length,o=n.slice();if(!s)return{t:Y3,l:0};if(s==1){var f=new Nr(n[0].s+1);return f[n[0].s]=1,{t:f,l:1}}n.sort(function(q,K){return q.f-K.f}),n.push({s:-1,f:25001});var p=n[0],m=n[1],y=0,S=1,w=2;for(n[0]={s:-1,f:p.f+m.f,l:p,r:m};S!=s-1;)p=n[n[y].f<n[w].f?y++:w++],m=n[y!=S&&n[y].f<n[w].f?y++:w++],n[S++]={s:-1,f:p.f+m.f,l:p,r:m};for(var E=o[0].s,r=1;r<s;++r)o[r].s>E&&(E=o[r].s);var A=new ca(E+1),U=j1(n[S-1],A,0);if(U>t){var r=0,O=0,H=U-t,_=1<<H;for(o.sort(function(K,P){return A[P.s]-A[K.s]||K.f-P.f});r<s;++r){var T=o[r].s;if(A[T]>t)O+=_-(1<<U-A[T]),A[T]=t;else break}for(O>>=H;O>0;){var D=o[r].s;A[D]<t?O-=1<<t-A[D]++-1:++r}for(;r>=0&&O;--r){var j=o[r].s;A[j]==t&&(--A[j],++O)}U=t}return{t:new Nr(A),l:U}},j1=function(e,t,n){return e.s==-1?Math.max(j1(e.l,t,n+1),j1(e.r,t,n+1)):t[e.s]=n},im=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new ca(++t),r=0,s=e[0],o=1,f=function(m){n[r++]=m},p=1;p<=t;++p)if(e[p]==s&&p!=t)++o;else{if(!s&&o>2){for(;o>138;o-=138)f(32754);o>2&&(f(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(f(s),--o;o>6;o-=6)f(8304);o>2&&(f(o-3<<5|8208),o=0)}for(;o--;)f(s);o=1,s=e[p]}return{c:n.subarray(0,r),n:t}},xu=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},V3=function(e,t,n){var r=n.length,s=W2(t+2);e[s]=r&255,e[s+1]=r>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var o=0;o<r;++o)e[s+o+4]=n[o];return(s+4+r)*8},rm=function(e,t,n,r,s,o,f,p,m,y,S){Ls(t,S++,n),++s[256];for(var w=Td(s,15),E=w.t,A=w.l,U=Td(o,15),O=U.t,H=U.l,_=im(E),T=_.c,D=_.n,j=im(O),q=j.c,K=j.n,P=new ca(19),R=0;R<T.length;++R)++P[T[R]&31];for(var R=0;R<q.length;++R)++P[q[R]&31];for(var M=Td(P,7),J=M.t,F=M.l,L=19;L>4&&!J[O1[L-1]];--L);var re=y+5<<3,ce=xu(s,Vo)+xu(o,of)+f,ne=xu(s,E)+xu(o,O)+f+14+3*L+xu(P,J)+2*P[16]+3*P[17]+7*P[18];if(m>=0&&re<=ce&&re<=ne)return V3(t,S,e.subarray(m,m+y));var Q,W,ue,oe;if(Ls(t,S,1+(ne<ce)),S+=2,ne<ce){Q=ms(E,A,0),W=E,ue=ms(O,H,0),oe=O;var ye=ms(J,F,0);Ls(t,S,D-257),Ls(t,S+5,K-1),Ls(t,S+10,L-4),S+=14;for(var R=0;R<L;++R)Ls(t,S+3*R,J[O1[R]]);S+=3*L;for(var xe=[T,q],z=0;z<2;++z)for(var G=xe[z],R=0;R<G.length;++R){var ie=G[R]&31;Ls(t,S,ye[ie]),S+=J[ie],ie>15&&(Ls(t,S,G[R]>>5&127),S+=G[R]>>12)}}else Q=mw,W=Vo,ue=yw,oe=of;for(var R=0;R<p;++R){var fe=r[R];if(fe>255){var ie=fe>>18&31;mu(t,S,Q[ie+257]),S+=W[ie+257],ie>7&&(Ls(t,S,fe>>23&31),S+=Nh[ie]);var se=fe&31;mu(t,S,ue[se]),S+=oe[se],se>3&&(mu(t,S,fe>>5&8191),S+=Sh[se])}else mu(t,S,Q[fe]),S+=W[fe]}return mu(t,S,Q[256]),S+W[256]},Aw=new Y2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Y3=new Nr(0),Nw=function(e,t,n,r,s,o){var f=o.z||e.length,p=new Nr(r+f+5*(1+Math.ceil(f/7e3))+s),m=p.subarray(r,p.length-s),y=o.l,S=(o.r||0)&7;if(t){S&&(m[0]=o.r>>3);for(var w=Aw[t-1],E=w>>13,A=w&8191,U=(1<<n)-1,O=o.p||new ca(32768),H=o.h||new ca(U+1),_=Math.ceil(n/3),T=2*_,D=function(ut){return(e[ut]^e[ut+1]<<_^e[ut+2]<<T)&U},j=new Y2(25e3),q=new ca(288),K=new ca(32),P=0,R=0,M=o.i||0,J=0,F=o.w||0,L=0;M+2<f;++M){var re=D(M),ce=M&32767,ne=H[re];if(O[ce]=ne,H[re]=ce,F<=M){var Q=f-M;if((P>7e3||J>24576)&&(Q>423||!y)){S=rm(e,m,0,j,q,K,R,J,L,M-L,S),J=P=R=0,L=M;for(var W=0;W<286;++W)q[W]=0;for(var W=0;W<30;++W)K[W]=0}var ue=2,oe=0,ye=A,xe=ce-ne&32767;if(Q>2&&re==D(M-xe))for(var z=Math.min(E,Q)-1,G=Math.min(32767,M),ie=Math.min(258,Q);xe<=G&&--ye&&ce!=ne;){if(e[M+ue]==e[M+ue-xe]){for(var fe=0;fe<ie&&e[M+fe]==e[M+fe-xe];++fe);if(fe>ue){if(ue=fe,oe=xe,fe>z)break;for(var se=Math.min(xe,fe-2),Ee=0,W=0;W<se;++W){var be=M-xe+W&32767,Ce=O[be],We=be-Ce&32767;We>Ee&&(Ee=We,ne=be)}}}ce=ne,ne=O[ce],xe+=ce-ne&32767}if(oe){j[J++]=268435456|L1[ue]<<18|nm[oe];var Oe=L1[ue]&31,tt=nm[oe]&31;R+=Nh[Oe]+Sh[tt],++q[257+Oe],++K[tt],F=M+ue,++P}else j[J++]=e[M],++q[e[M]]}}for(M=Math.max(M,F);M<f;++M)j[J++]=e[M],++q[e[M]];S=rm(e,m,y,j,q,K,R,J,L,M-L,S),y||(o.r=S&7|m[S/8|0]<<3,S-=7,o.h=H,o.p=O,o.i=M,o.w=F)}else{for(var M=o.w||0;M<f+y;M+=65535){var qe=M+65535;qe>=f&&(m[S/8|0]=y,qe=f),S=V3(m,S+1,e.subarray(M,qe))}o.i=f}return q3(p,0,r+W2(S)+s)},W3=function(){var e=1,t=0;return{p:function(n){for(var r=e,s=t,o=n.length|0,f=0;f!=o;){for(var p=Math.min(f+2655,o);f<p;++f)s+=r+=n[f];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}e=r,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Sw=function(e,t,n,r,s){if(!s&&(s={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),f=new Nr(o.length+e.length);f.set(o),f.set(e,o.length),e=f,s.w=o.length}return Nw(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,s)},X3=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},Cw=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=W3();s.p(t.dictionary),X3(e,2,s.d())}},Ew=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ya(6,"invalid zlib data"),(e[1]>>5&1)==1&&Ya(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function k1(e,t){t||(t={});var n=W3();n.p(e);var r=Sw(e,t,t.dictionary?6:2,4);return Cw(r,t),X3(r,r.length-4,n.d()),r}function Tw(e,t){return ww(e.subarray(Ew(e),-4),{i:2},t,t)}var _w=typeof TextDecoder<"u"&&new TextDecoder,Iw=0;try{_w.decode(Y3,{stream:!0}),Iw=1}catch{}var Bt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function _d(){Bt.console&&typeof Bt.console.log=="function"&&Bt.console.log.apply(Bt.console,arguments)}var Fn={log:_d,warn:function(e){Bt.console&&(typeof Bt.console.warn=="function"?Bt.console.warn.apply(Bt.console,arguments):_d.call(null,arguments))},error:function(e){Bt.console&&(typeof Bt.console.error=="function"?Bt.console.error.apply(Bt.console,arguments):_d(e))}};function Id(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){bl(r.response,t,n)},r.onerror=function(){Fn.error("could not download file")},r.send()}function am(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function s0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Fu,B1,bl=Bt.saveAs||((typeof window>"u"?"undefined":On(window))!=="object"||window!==Bt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=Bt.URL||Bt.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?am(s.href)?Id(e,t,n):s0(s,s.target="_blank"):s0(s)):(s.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){s0(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(am(e))Id(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){s0(r)})}else navigator.msSaveOrOpenBlob(function(s,o){return o===void 0?o={autoBom:!1}:On(o)!=="object"&&(Fn.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return Id(e,t,n);var s=e.type==="application/octet-stream",o=/constructor/i.test(Bt.HTMLElement)||Bt.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||s&&o)&&(typeof FileReader>"u"?"undefined":On(FileReader))==="object"){var p=new FileReader;p.onloadend=function(){var S=p.result;S=f?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=S:location=S,r=null},p.readAsDataURL(e)}else{var m=Bt.URL||Bt.webkitURL,y=m.createObjectURL(e);r?r.location=y:location.href=y,r=null,setTimeout(function(){m.revokeObjectURL(y)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Z3(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(p){return[parseInt(p[1]),parseInt(p[2]),parseInt(p[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(p){return[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(p){return[parseInt(p[1]+p[1],16),parseInt(p[2]+p[2],16),parseInt(p[3]+p[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,o=n[r].process,f=s.exec(e);f&&(t=o(f),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var p=this.r.toString(16),m=this.g.toString(16),y=this.b.toString(16);return p.length==1&&(p="0"+p),m.length==1&&(m="0"+m),y.length==1&&(y="0"+y),"#"+p+m+y}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Dd(e,t){var n=e[0],r=e[1],s=e[2],o=e[3];n=br(n,r,s,o,t[0],7,-680876936),o=br(o,n,r,s,t[1],12,-389564586),s=br(s,o,n,r,t[2],17,606105819),r=br(r,s,o,n,t[3],22,-1044525330),n=br(n,r,s,o,t[4],7,-176418897),o=br(o,n,r,s,t[5],12,1200080426),s=br(s,o,n,r,t[6],17,-1473231341),r=br(r,s,o,n,t[7],22,-45705983),n=br(n,r,s,o,t[8],7,1770035416),o=br(o,n,r,s,t[9],12,-1958414417),s=br(s,o,n,r,t[10],17,-42063),r=br(r,s,o,n,t[11],22,-1990404162),n=br(n,r,s,o,t[12],7,1804603682),o=br(o,n,r,s,t[13],12,-40341101),s=br(s,o,n,r,t[14],17,-1502002290),n=vr(n,r=br(r,s,o,n,t[15],22,1236535329),s,o,t[1],5,-165796510),o=vr(o,n,r,s,t[6],9,-1069501632),s=vr(s,o,n,r,t[11],14,643717713),r=vr(r,s,o,n,t[0],20,-373897302),n=vr(n,r,s,o,t[5],5,-701558691),o=vr(o,n,r,s,t[10],9,38016083),s=vr(s,o,n,r,t[15],14,-660478335),r=vr(r,s,o,n,t[4],20,-405537848),n=vr(n,r,s,o,t[9],5,568446438),o=vr(o,n,r,s,t[14],9,-1019803690),s=vr(s,o,n,r,t[3],14,-187363961),r=vr(r,s,o,n,t[8],20,1163531501),n=vr(n,r,s,o,t[13],5,-1444681467),o=vr(o,n,r,s,t[2],9,-51403784),s=vr(s,o,n,r,t[7],14,1735328473),n=wr(n,r=vr(r,s,o,n,t[12],20,-1926607734),s,o,t[5],4,-378558),o=wr(o,n,r,s,t[8],11,-2022574463),s=wr(s,o,n,r,t[11],16,1839030562),r=wr(r,s,o,n,t[14],23,-35309556),n=wr(n,r,s,o,t[1],4,-1530992060),o=wr(o,n,r,s,t[4],11,1272893353),s=wr(s,o,n,r,t[7],16,-155497632),r=wr(r,s,o,n,t[10],23,-1094730640),n=wr(n,r,s,o,t[13],4,681279174),o=wr(o,n,r,s,t[0],11,-358537222),s=wr(s,o,n,r,t[3],16,-722521979),r=wr(r,s,o,n,t[6],23,76029189),n=wr(n,r,s,o,t[9],4,-640364487),o=wr(o,n,r,s,t[12],11,-421815835),s=wr(s,o,n,r,t[15],16,530742520),n=Ar(n,r=wr(r,s,o,n,t[2],23,-995338651),s,o,t[0],6,-198630844),o=Ar(o,n,r,s,t[7],10,1126891415),s=Ar(s,o,n,r,t[14],15,-1416354905),r=Ar(r,s,o,n,t[5],21,-57434055),n=Ar(n,r,s,o,t[12],6,1700485571),o=Ar(o,n,r,s,t[3],10,-1894986606),s=Ar(s,o,n,r,t[10],15,-1051523),r=Ar(r,s,o,n,t[1],21,-2054922799),n=Ar(n,r,s,o,t[8],6,1873313359),o=Ar(o,n,r,s,t[15],10,-30611744),s=Ar(s,o,n,r,t[6],15,-1560198380),r=Ar(r,s,o,n,t[13],21,1309151649),n=Ar(n,r,s,o,t[4],6,-145523070),o=Ar(o,n,r,s,t[11],10,-1120210379),s=Ar(s,o,n,r,t[2],15,718787259),r=Ar(r,s,o,n,t[9],21,-343485551),e[0]=Oo(n,e[0]),e[1]=Oo(r,e[1]),e[2]=Oo(s,e[2]),e[3]=Oo(o,e[3])}function Ch(e,t,n,r,s,o){return t=Oo(Oo(t,e),Oo(r,o)),Oo(t<<s|t>>>32-s,n)}function br(e,t,n,r,s,o,f){return Ch(t&n|~t&r,e,t,s,o,f)}function vr(e,t,n,r,s,o,f){return Ch(t&r|n&~r,e,t,s,o,f)}function wr(e,t,n,r,s,o,f){return Ch(t^n^r,e,t,s,o,f)}function Ar(e,t,n,r,s,o,f){return Ch(n^(t|~r),e,t,s,o,f)}function Q3(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Dd(r,Dw(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(Dd(r,s),t=0;t<16;t++)s[t]=0;return s[14]=8*n,Dd(r,s),r}function Dw(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Fu=Bt.atob.bind(Bt),B1=Bt.btoa.bind(Bt);var sm="0123456789abcdef".split("");function Rw(e){for(var t="",n=0;n<4;n++)t+=sm[e>>8*n+4&15]+sm[e>>8*n&15];return t}function Ow(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function P1(e){return Q3(e).map(Ow).join("")}var Lw=function(e){for(var t=0;t<e.length;t++)e[t]=Rw(e[t]);return e.join("")}(Q3("hello"))!="5d41402abc4b2a76b9719d911017c592";function Oo(e,t){if(Lw){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function F1(e,t){var n,r,s,o;if(e!==n){for(var f=(s=e,o=1+(256/e.length>>0),new Array(o+1).join(s)),p=[],m=0;m<256;m++)p[m]=m;var y=0;for(m=0;m<256;m++){var S=p[m];y=(y+S+f.charCodeAt(m))%256,p[m]=p[y],p[y]=S}n=e,r=p}else p=r;var w=t.length,E=0,A=0,U="";for(m=0;m<w;m++)A=(A+(S=p[E=(E+1)%256]))%256,p[E]=p[A],p[A]=S,f=p[(p[E]+p[A])%256],U+=String.fromCharCode(t.charCodeAt(m)^f);return U}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var om={print:4,modify:8,copy:16,"annot-forms":32};function cc(e,t,n,r){this.v=1,this.r=2;var s=192;e.forEach(function(p){if(om.perm!==void 0)throw new Error("Invalid permission: "+p);s+=om[p]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(t+this.padding).substr(0,32),f=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,f),this.P=-(1+(255^s)),this.encryptionKey=P1(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=F1(this.encryptionKey,this.padding)}function uc(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var s=e.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[r]}return t}function lm(e){if(On(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var o=Math.random().toString(35);return t[n][o]=[r,!!s],o},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var o in t[n]){var f=t[n][o];try{f[0].apply(e,r)}catch(p){Bt.console&&Fn.error("jsPDF PubSub Error",p.message,p)}f[1]&&s.push(o)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function lf(e){if(!(this instanceof lf))return new lf(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function K3(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Eo(e,t,n,r,s){if(!(this instanceof Eo))return new Eo(e,t,n,r,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,K3.call(this,r,s)}function vl(e,t,n,r,s){if(!(this instanceof vl))return new vl(e,t,n,r,s);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,K3.call(this,r,s)}function kt(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],o=arguments[3],f=[],p=1,m=16,y="S",S=null;On(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,s=e.format||s,o=e.compress||e.compressPdf||o,(S=e.encryption||null)!==null&&(S.userPassword=S.userPassword||"",S.ownerPassword=S.ownerPassword||"",S.userPermissions=S.userPermissions||[]),p=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(m=e.floatPrecision),y=e.defaultPathOperation||"S"),f=e.filters||(o===!0?["FlateEncode"]:f),r=r||"mm",n=(""+(n||"P")).toLowerCase();var w=e.putOnlyUsedFonts||!1,E={},A={internal:{},__private__:{}};A.__private__.PubSub=lm;var U="1.3",O=A.__private__.getPdfVersion=function(){return U};A.__private__.setPdfVersion=function(N){U=N};var H={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};A.__private__.getPageFormats=function(){return H};var _=A.__private__.getPageFormat=function(N){return H[N]};s=s||"a4";var T={COMPAT:"compat",ADVANCED:"advanced"},D=T.COMPAT;function j(){this.saveGraphicsState(),me(new Tt(ft,0,0,-ft,0,xr()*ft).toString()+" cm"),this.setFontSize(this.getFontSize()/ft),y="n",D=T.ADVANCED}function q(){this.restoreGraphicsState(),y="S",D=T.COMPAT}var K=A.__private__.combineFontStyleAndFontWeight=function(N,Z){if(N=="bold"&&Z=="normal"||N=="bold"&&Z==400||N=="normal"&&Z=="italic"||N=="bold"&&Z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Z&&(N=Z==400||Z==="normal"?N==="italic"?"italic":"normal":Z!=700&&Z!=="bold"||N!=="normal"?(Z==700?"bold":Z)+""+N:"bold"),N};A.advancedAPI=function(N){var Z=D===T.COMPAT;return Z&&j.call(this),typeof N!="function"||(N(this),Z&&q.call(this)),this},A.compatAPI=function(N){var Z=D===T.ADVANCED;return Z&&q.call(this),typeof N!="function"||(N(this),Z&&j.call(this)),this},A.isAdvancedAPI=function(){return D===T.ADVANCED};var P,R=function(N){if(D!==T.ADVANCED)throw new Error(N+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=A.roundToPrecision=A.__private__.roundToPrecision=function(N,Z){var de=t||Z;if(isNaN(N)||isNaN(de))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return N.toFixed(de).replace(/0+$/,"")};P=A.hpf=A.__private__.hpf=typeof m=="number"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return M(N,m)}:m==="smart"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return M(N,N>-1&&N<1?16:5)}:function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return M(N,16)};var J=A.f2=A.__private__.f2=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f2");return M(N,2)},F=A.__private__.f3=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f3");return M(N,3)},L=A.scale=A.__private__.scale=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.scale");return D===T.COMPAT?N*ft:D===T.ADVANCED?N:void 0},re=function(N){return D===T.COMPAT?xr()-N:D===T.ADVANCED?N:void 0},ce=function(N){return L(re(N))};A.__private__.setPrecision=A.setPrecision=function(N){typeof parseInt(N,10)=="number"&&(t=parseInt(N,10))};var ne,Q="00000000000000000000000000000000",W=A.__private__.getFileId=function(){return Q},ue=A.__private__.setFileId=function(N){return Q=N!==void 0&&/^[a-fA-F0-9]{32}$/.test(N)?N.toUpperCase():Q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),S!==null&&(Ei=new cc(S.userPermissions,S.userPassword,S.ownerPassword,Q)),Q};A.setFileId=function(N){return ue(N),this},A.getFileId=function(){return W()};var oe=A.__private__.convertDateToPDFDate=function(N){var Z=N.getTimezoneOffset(),de=Z<0?"+":"-",we=Math.floor(Math.abs(Z/60)),Re=Math.abs(Z%60),Ye=[de,ie(we),"'",ie(Re),"'"].join("");return["D:",N.getFullYear(),ie(N.getMonth()+1),ie(N.getDate()),ie(N.getHours()),ie(N.getMinutes()),ie(N.getSeconds()),Ye].join("")},ye=A.__private__.convertPDFDateToDate=function(N){var Z=parseInt(N.substr(2,4),10),de=parseInt(N.substr(6,2),10)-1,we=parseInt(N.substr(8,2),10),Re=parseInt(N.substr(10,2),10),Ye=parseInt(N.substr(12,2),10),$e=parseInt(N.substr(14,2),10);return new Date(Z,de,we,Re,Ye,$e,0)},xe=A.__private__.setCreationDate=function(N){var Z;if(N===void 0&&(N=new Date),N instanceof Date)Z=oe(N);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(N))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Z=N}return ne=Z},z=A.__private__.getCreationDate=function(N){var Z=ne;return N==="jsDate"&&(Z=ye(ne)),Z};A.setCreationDate=function(N){return xe(N),this},A.getCreationDate=function(N){return z(N)};var G,ie=A.__private__.padd2=function(N){return("0"+parseInt(N)).slice(-2)},fe=A.__private__.padd2Hex=function(N){return("00"+(N=N.toString())).substr(N.length)},se=0,Ee=[],be=[],Ce=0,We=[],Oe=[],tt=!1,qe=be,ut=function(){se=0,Ce=0,be=[],Ee=[],We=[],dr=Ln(),Tr=Ln()};A.__private__.setCustomOutputDestination=function(N){tt=!0,qe=N};var Le=function(N){tt||(qe=N)};A.__private__.resetCustomOutputDestination=function(){tt=!1,qe=be};var me=A.__private__.out=function(N){return N=N.toString(),Ce+=N.length+1,qe.push(N),qe},pt=A.__private__.write=function(N){return me(arguments.length===1?N.toString():Array.prototype.join.call(arguments," "))},Ve=A.__private__.getArrayBuffer=function(N){for(var Z=N.length,de=new ArrayBuffer(Z),we=new Uint8Array(de);Z--;)we[Z]=N.charCodeAt(Z);return de},Be=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];A.__private__.getStandardFonts=function(){return Be};var lt=e.fontSize||16;A.__private__.setFontSize=A.setFontSize=function(N){return lt=D===T.ADVANCED?N/ft:N,this};var Ue,Te=A.__private__.getFontSize=A.getFontSize=function(){return D===T.COMPAT?lt:lt*ft},ze=e.R2L||!1;A.__private__.setR2L=A.setR2L=function(N){return ze=N,this},A.__private__.getR2L=A.getR2L=function(){return ze};var Xe,vt=A.__private__.setZoomMode=function(N){var Z=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(N))Ue=N;else if(isNaN(N)){if(Z.indexOf(N)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+N+'" is not recognized.');Ue=N}else Ue=parseInt(N,10)};A.__private__.getZoomMode=function(){return Ue};var mt,_t=A.__private__.setPageMode=function(N){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(N)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+N+'" is not recognized.');Xe=N};A.__private__.getPageMode=function(){return Xe};var Lt=A.__private__.setLayoutMode=function(N){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(N)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+N+'" is not recognized.');mt=N};A.__private__.getLayoutMode=function(){return mt},A.__private__.setDisplayMode=A.setDisplayMode=function(N,Z,de){return vt(N),Lt(Z),_t(de),this};var ct={title:"",subject:"",author:"",keywords:"",creator:""};A.__private__.getDocumentProperty=function(N){if(Object.keys(ct).indexOf(N)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ct[N]},A.__private__.getDocumentProperties=function(){return ct},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function(N){for(var Z in ct)ct.hasOwnProperty(Z)&&N[Z]&&(ct[Z]=N[Z]);return this},A.__private__.setDocumentProperty=function(N,Z){if(Object.keys(ct).indexOf(N)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ct[N]=Z};var Mt,ft,vn,Et,ot,gt={},wt={},gn=[],sn={},Ba={},Wn={},Vt={},rr=null,Xn=0,Ut=[],Wt=new lm(A),Pa=e.hotfixes||[],fn={},ar={},Er=[],Tt=function N(Z,de,we,Re,Ye,$e){if(!(this instanceof N))return new N(Z,de,we,Re,Ye,$e);isNaN(Z)&&(Z=1),isNaN(de)&&(de=0),isNaN(we)&&(we=0),isNaN(Re)&&(Re=1),isNaN(Ye)&&(Ye=0),isNaN($e)&&($e=0),this._matrix=[Z,de,we,Re,Ye,$e]};Object.defineProperty(Tt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(Tt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(Tt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(Tt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(Tt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(Tt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(Tt.prototype,"a",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(Tt.prototype,"b",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(Tt.prototype,"c",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(Tt.prototype,"d",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(Tt.prototype,"e",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(Tt.prototype,"f",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(Tt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Tt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Tt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Tt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Tt.prototype.join=function(N){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(N)},Tt.prototype.multiply=function(N){var Z=N.sx*this.sx+N.shy*this.shx,de=N.sx*this.shy+N.shy*this.sy,we=N.shx*this.sx+N.sy*this.shx,Re=N.shx*this.shy+N.sy*this.sy,Ye=N.tx*this.sx+N.ty*this.shx+this.tx,$e=N.tx*this.shy+N.ty*this.sy+this.ty;return new Tt(Z,de,we,Re,Ye,$e)},Tt.prototype.decompose=function(){var N=this.sx,Z=this.shy,de=this.shx,we=this.sy,Re=this.tx,Ye=this.ty,$e=Math.sqrt(N*N+Z*Z),yt=(N/=$e)*de+(Z/=$e)*we;de-=N*yt,we-=Z*yt;var Rt=Math.sqrt(de*de+we*we);return yt/=Rt,N*(we/=Rt)<Z*(de/=Rt)&&(N=-N,Z=-Z,yt=-yt,$e=-$e),{scale:new Tt($e,0,0,Rt,0,0),translate:new Tt(1,0,0,1,Re,Ye),rotate:new Tt(N,Z,-Z,N,0,0),skew:new Tt(1,0,yt,1,0,0)}},Tt.prototype.toString=function(N){return this.join(" ")},Tt.prototype.inversed=function(){var N=this.sx,Z=this.shy,de=this.shx,we=this.sy,Re=this.tx,Ye=this.ty,$e=1/(N*we-Z*de),yt=we*$e,Rt=-Z*$e,zt=-de*$e,Ht=N*$e;return new Tt(yt,Rt,zt,Ht,-yt*Re-zt*Ye,-Rt*Re-Ht*Ye)},Tt.prototype.applyToPoint=function(N){var Z=N.x*this.sx+N.y*this.shx+this.tx,de=N.x*this.shy+N.y*this.sy+this.ty;return new to(Z,de)},Tt.prototype.applyToRectangle=function(N){var Z=this.applyToPoint(N),de=this.applyToPoint(new to(N.x+N.w,N.y+N.h));return new fl(Z.x,Z.y,de.x-Z.x,de.y-Z.y)},Tt.prototype.clone=function(){var N=this.sx,Z=this.shy,de=this.shx,we=this.sy,Re=this.tx,Ye=this.ty;return new Tt(N,Z,de,we,Re,Ye)},A.Matrix=Tt;var Xr=A.matrixMult=function(N,Z){return Z.multiply(N)},Wi=new Tt(1,0,0,1,0,0);A.unitMatrix=A.identityMatrix=Wi;var Xi=function(N,Z){if(!Ba[N]){var de=(Z instanceof Eo?"Sh":"P")+(Object.keys(sn).length+1).toString(10);Z.id=de,Ba[N]=de,sn[de]=Z,Wt.publish("addPattern",Z)}};A.ShadingPattern=Eo,A.TilingPattern=vl,A.addShadingPattern=function(N,Z){return R("addShadingPattern()"),Xi(N,Z),this},A.beginTilingPattern=function(N){R("beginTilingPattern()"),no(N.boundingBox[0],N.boundingBox[1],N.boundingBox[2]-N.boundingBox[0],N.boundingBox[3]-N.boundingBox[1],N.matrix)},A.endTilingPattern=function(N,Z){R("endTilingPattern()"),Z.stream=Oe[G].join(`
`),Xi(N,Z),Wt.publish("endTilingPattern",Z),Er.pop().restore()};var hn=A.__private__.newObject=function(){var N=Ln();return zn(N,!0),N},Ln=A.__private__.newObjectDeferred=function(){return se++,Ee[se]=function(){return Ce},se},zn=function(N,Z){return Z=typeof Z=="boolean"&&Z,Ee[N]=Ce,Z&&me(N+" 0 obj"),N},bt=A.__private__.newAdditionalObject=function(){var N={objId:Ln(),content:""};return We.push(N),N},dr=Ln(),Tr=Ln(),Hn=A.__private__.decodeColorString=function(N){var Z=N.split(" ");if(Z.length!==2||Z[1]!=="g"&&Z[1]!=="G")Z.length===5&&(Z[4]==="k"||Z[4]==="K")&&(Z=[(1-Z[0])*(1-Z[3]),(1-Z[1])*(1-Z[3]),(1-Z[2])*(1-Z[3]),"r"]);else{var de=parseFloat(Z[0]);Z=[de,de,de,"r"]}for(var we="#",Re=0;Re<3;Re++)we+=("0"+Math.floor(255*parseFloat(Z[Re])).toString(16)).slice(-2);return we},Zi=A.__private__.encodeColorString=function(N){var Z;typeof N=="string"&&(N={ch1:N});var de=N.ch1,we=N.ch2,Re=N.ch3,Ye=N.ch4,$e=N.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof de=="string"&&de.charAt(0)!=="#"){var yt=new Z3(de);if(yt.ok)de=yt.toHex();else if(!/^\d*\.?\d*$/.test(de))throw new Error('Invalid color "'+de+'" passed to jsPDF.encodeColorString.')}if(typeof de=="string"&&/^#[0-9A-Fa-f]{3}$/.test(de)&&(de="#"+de[1]+de[1]+de[2]+de[2]+de[3]+de[3]),typeof de=="string"&&/^#[0-9A-Fa-f]{6}$/.test(de)){var Rt=parseInt(de.substr(1),16);de=Rt>>16&255,we=Rt>>8&255,Re=255&Rt}if(we===void 0||Ye===void 0&&de===we&&we===Re)if(typeof de=="string")Z=de+" "+$e[0];else switch(N.precision){case 2:Z=J(de/255)+" "+$e[0];break;case 3:default:Z=F(de/255)+" "+$e[0]}else if(Ye===void 0||On(Ye)==="object"){if(Ye&&!isNaN(Ye.a)&&Ye.a===0)return Z=["1.","1.","1.",$e[1]].join(" ");if(typeof de=="string")Z=[de,we,Re,$e[1]].join(" ");else switch(N.precision){case 2:Z=[J(de/255),J(we/255),J(Re/255),$e[1]].join(" ");break;default:case 3:Z=[F(de/255),F(we/255),F(Re/255),$e[1]].join(" ")}}else if(typeof de=="string")Z=[de,we,Re,Ye,$e[2]].join(" ");else switch(N.precision){case 2:Z=[J(de),J(we),J(Re),J(Ye),$e[2]].join(" ");break;case 3:default:Z=[F(de),F(we),F(Re),F(Ye),$e[2]].join(" ")}return Z},_r=A.__private__.getFilters=function(){return f},sr=A.__private__.putStream=function(N){var Z=(N=N||{}).data||"",de=N.filters||_r(),we=N.alreadyAppliedFilters||[],Re=N.addLength1||!1,Ye=Z.length,$e=N.objectId,yt=function(Qi){return Qi};if(S!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");S!==null&&(yt=Ei.encryptor($e,0));var Rt={};de===!0&&(de=["FlateEncode"]);var zt=N.additionalKeyValues||[],Ht=(Rt=kt.API.processDataByFilters!==void 0?kt.API.processDataByFilters(Z,de):{data:Z,reverseChain:[]}).reverseChain+(Array.isArray(we)?we.join(" "):we.toString());if(Rt.data.length!==0&&(zt.push({key:"Length",value:Rt.data.length}),Re===!0&&zt.push({key:"Length1",value:Ye})),Ht.length!=0)if(Ht.split("/").length-1==1)zt.push({key:"Filter",value:Ht});else{zt.push({key:"Filter",value:"["+Ht+"]"});for(var nn=0;nn<zt.length;nn+=1)if(zt[nn].key==="DecodeParms"){for(var Kn=[],En=0;En<Rt.reverseChain.split("/").length-1;En+=1)Kn.push("null");Kn.push(zt[nn].value),zt[nn].value="["+Kn.join(" ")+"]"}}me("<<");for(var ii=0;ii<zt.length;ii++)me("/"+zt[ii].key+" "+zt[ii].value);me(">>"),Rt.data.length!==0&&(me("stream"),me(yt(Rt.data)),me("endstream"))},Ni=A.__private__.putPage=function(N){var Z=N.number,de=N.data,we=N.objId,Re=N.contentsObjId;zn(we,!0),me("<</Type /Page"),me("/Parent "+N.rootDictionaryObjId+" 0 R"),me("/Resources "+N.resourceDictionaryObjId+" 0 R"),me("/MediaBox ["+parseFloat(P(N.mediaBox.bottomLeftX))+" "+parseFloat(P(N.mediaBox.bottomLeftY))+" "+P(N.mediaBox.topRightX)+" "+P(N.mediaBox.topRightY)+"]"),N.cropBox!==null&&me("/CropBox ["+P(N.cropBox.bottomLeftX)+" "+P(N.cropBox.bottomLeftY)+" "+P(N.cropBox.topRightX)+" "+P(N.cropBox.topRightY)+"]"),N.bleedBox!==null&&me("/BleedBox ["+P(N.bleedBox.bottomLeftX)+" "+P(N.bleedBox.bottomLeftY)+" "+P(N.bleedBox.topRightX)+" "+P(N.bleedBox.topRightY)+"]"),N.trimBox!==null&&me("/TrimBox ["+P(N.trimBox.bottomLeftX)+" "+P(N.trimBox.bottomLeftY)+" "+P(N.trimBox.topRightX)+" "+P(N.trimBox.topRightY)+"]"),N.artBox!==null&&me("/ArtBox ["+P(N.artBox.bottomLeftX)+" "+P(N.artBox.bottomLeftY)+" "+P(N.artBox.topRightX)+" "+P(N.artBox.topRightY)+"]"),typeof N.userUnit=="number"&&N.userUnit!==1&&me("/UserUnit "+N.userUnit),Wt.publish("putPage",{objId:we,pageContext:Ut[Z],pageNumber:Z,page:de}),me("/Contents "+Re+" 0 R"),me(">>"),me("endobj");var Ye=de.join(`
`);return D===T.ADVANCED&&(Ye+=`
Q`),zn(Re,!0),sr({data:Ye,filters:_r(),objectId:Re}),me("endobj"),we},vs=A.__private__.putPages=function(){var N,Z,de=[];for(N=1;N<=Xn;N++)Ut[N].objId=Ln(),Ut[N].contentsObjId=Ln();for(N=1;N<=Xn;N++)de.push(Ni({number:N,data:Oe[N],objId:Ut[N].objId,contentsObjId:Ut[N].contentsObjId,mediaBox:Ut[N].mediaBox,cropBox:Ut[N].cropBox,bleedBox:Ut[N].bleedBox,trimBox:Ut[N].trimBox,artBox:Ut[N].artBox,userUnit:Ut[N].userUnit,rootDictionaryObjId:dr,resourceDictionaryObjId:Tr}));zn(dr,!0),me("<</Type /Pages");var we="/Kids [";for(Z=0;Z<Xn;Z++)we+=de[Z]+" 0 R ";me(we+"]"),me("/Count "+Xn),me(">>"),me("endobj"),Wt.publish("postPutPages")},Qs=function(N){Wt.publish("putFont",{font:N,out:me,newObject:hn,putStream:sr}),N.isAlreadyPutted!==!0&&(N.objectNumber=hn(),me("<<"),me("/Type /Font"),me("/BaseFont /"+uc(N.postScriptName)),me("/Subtype /Type1"),typeof N.encoding=="string"&&me("/Encoding /"+N.encoding),me("/FirstChar 32"),me("/LastChar 255"),me(">>"),me("endobj"))},or=function(){for(var N in gt)gt.hasOwnProperty(N)&&(w===!1||w===!0&&E.hasOwnProperty(N))&&Qs(gt[N])},mi=function(N){N.objectNumber=hn();var Z=[];Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Form"}),Z.push({key:"BBox",value:"["+[P(N.x),P(N.y),P(N.x+N.width),P(N.y+N.height)].join(" ")+"]"}),Z.push({key:"Matrix",value:"["+N.matrix.toString()+"]"});var de=N.pages[1].join(`
`);sr({data:de,additionalKeyValues:Z,objectId:N.objectNumber}),me("endobj")},wn=function(){for(var N in fn)fn.hasOwnProperty(N)&&mi(fn[N])},Ko=function(N,Z){var de,we=[],Re=1/(Z-1);for(de=0;de<1;de+=Re)we.push(de);if(we.push(1),N[0].offset!=0){var Ye={offset:0,color:N[0].color};N.unshift(Ye)}if(N[N.length-1].offset!=1){var $e={offset:1,color:N[N.length-1].color};N.push($e)}for(var yt="",Rt=0,zt=0;zt<we.length;zt++){for(de=we[zt];de>N[Rt+1].offset;)Rt++;var Ht=N[Rt].offset,nn=(de-Ht)/(N[Rt+1].offset-Ht),Kn=N[Rt].color,En=N[Rt+1].color;yt+=fe(Math.round((1-nn)*Kn[0]+nn*En[0]).toString(16))+fe(Math.round((1-nn)*Kn[1]+nn*En[1]).toString(16))+fe(Math.round((1-nn)*Kn[2]+nn*En[2]).toString(16))}return yt.trim()},pa=function(N,Z){Z||(Z=21);var de=hn(),we=Ko(N.colors,Z),Re=[];Re.push({key:"FunctionType",value:"0"}),Re.push({key:"Domain",value:"[0.0 1.0]"}),Re.push({key:"Size",value:"["+Z+"]"}),Re.push({key:"BitsPerSample",value:"8"}),Re.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Re.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),sr({data:we,additionalKeyValues:Re,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:de}),me("endobj"),N.objectNumber=hn(),me("<< /ShadingType "+N.type),me("/ColorSpace /DeviceRGB");var Ye="/Coords ["+P(parseFloat(N.coords[0]))+" "+P(parseFloat(N.coords[1]))+" ";N.type===2?Ye+=P(parseFloat(N.coords[2]))+" "+P(parseFloat(N.coords[3])):Ye+=P(parseFloat(N.coords[2]))+" "+P(parseFloat(N.coords[3]))+" "+P(parseFloat(N.coords[4]))+" "+P(parseFloat(N.coords[5])),me(Ye+="]"),N.matrix&&me("/Matrix ["+N.matrix.toString()+"]"),me("/Function "+de+" 0 R"),me("/Extend [true true]"),me(">>"),me("endobj")},Jo=function(N,Z){var de=Ln(),we=hn();Z.push({resourcesOid:de,objectOid:we}),N.objectNumber=we;var Re=[];Re.push({key:"Type",value:"/Pattern"}),Re.push({key:"PatternType",value:"1"}),Re.push({key:"PaintType",value:"1"}),Re.push({key:"TilingType",value:"1"}),Re.push({key:"BBox",value:"["+N.boundingBox.map(P).join(" ")+"]"}),Re.push({key:"XStep",value:P(N.xStep)}),Re.push({key:"YStep",value:P(N.yStep)}),Re.push({key:"Resources",value:de+" 0 R"}),N.matrix&&Re.push({key:"Matrix",value:"["+N.matrix.toString()+"]"}),sr({data:N.stream,additionalKeyValues:Re,objectId:N.objectNumber}),me("endobj")},Ke=function(N){var Z;for(Z in sn)sn.hasOwnProperty(Z)&&(sn[Z]instanceof Eo?pa(sn[Z]):sn[Z]instanceof vl&&Jo(sn[Z],N))},Yl=function(N){for(var Z in N.objectNumber=hn(),me("<<"),N)switch(Z){case"opacity":me("/ca "+J(N[Z]));break;case"stroke-opacity":me("/CA "+J(N[Z]))}me(">>"),me("endobj")},Gn=function(){var N;for(N in Wn)Wn.hasOwnProperty(N)&&Yl(Wn[N])},ma=function(){for(var N in me("/XObject <<"),fn)fn.hasOwnProperty(N)&&fn[N].objectNumber>=0&&me("/"+N+" "+fn[N].objectNumber+" 0 R");Wt.publish("putXobjectDict"),me(">>")},Kc=function(){Ei.oid=hn(),me("<<"),me("/Filter /Standard"),me("/V "+Ei.v),me("/R "+Ei.r),me("/U <"+Ei.toHexString(Ei.U)+">"),me("/O <"+Ei.toHexString(Ei.O)+">"),me("/P "+Ei.P),me(">>"),me("endobj")},ln=function(){for(var N in me("/Font <<"),gt)gt.hasOwnProperty(N)&&(w===!1||w===!0&&E.hasOwnProperty(N))&&me("/"+N+" "+gt[N].objectNumber+" 0 R");me(">>")},cn=function(){if(Object.keys(sn).length>0){for(var N in me("/Shading <<"),sn)sn.hasOwnProperty(N)&&sn[N]instanceof Eo&&sn[N].objectNumber>=0&&me("/"+N+" "+sn[N].objectNumber+" 0 R");Wt.publish("putShadingPatternDict"),me(">>")}},Xt=function(N){if(Object.keys(sn).length>0){for(var Z in me("/Pattern <<"),sn)sn.hasOwnProperty(Z)&&sn[Z]instanceof A.TilingPattern&&sn[Z].objectNumber>=0&&sn[Z].objectNumber<N&&me("/"+Z+" "+sn[Z].objectNumber+" 0 R");Wt.publish("putTilingPatternDict"),me(">>")}},$o=function(){if(Object.keys(Wn).length>0){var N;for(N in me("/ExtGState <<"),Wn)Wn.hasOwnProperty(N)&&Wn[N].objectNumber>=0&&me("/"+N+" "+Wn[N].objectNumber+" 0 R");Wt.publish("putGStateDict"),me(">>")}},Zn=function(N){zn(N.resourcesOid,!0),me("<<"),me("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ln(),cn(),Xt(N.objectOid),$o(),ma(),me(">>"),me("endobj")},Ks=function(){var N=[];or(),Gn(),wn(),Ke(N),Wt.publish("putResources"),N.forEach(Zn),Zn({resourcesOid:Tr,objectOid:Number.MAX_SAFE_INTEGER}),Wt.publish("postPutResources")},ti=function(){Wt.publish("putAdditionalObjects");for(var N=0;N<We.length;N++){var Z=We[N];zn(Z.objId,!0),me(Z.content),me("endobj")}Wt.publish("postPutAdditionalObjects")},Zr=function(N){wt[N.fontName]=wt[N.fontName]||{},wt[N.fontName][N.fontStyle]=N.id},el=function(N,Z,de,we,Re){var Ye={id:"F"+(Object.keys(gt).length+1).toString(10),postScriptName:N,fontName:Z,fontStyle:de,encoding:we,isStandardFont:Re||!1,metadata:{}};return Wt.publish("addFont",{font:Ye,instance:this}),gt[Ye.id]=Ye,Zr(Ye),Ye.id},Qn=function(N){for(var Z=0,de=Be.length;Z<de;Z++){var we=el.call(this,N[Z][0],N[Z][1],N[Z][2],Be[Z][3],!0);w===!1&&(E[we]=!0);var Re=N[Z][0].split("-");Zr({id:we,fontName:Re[0],fontStyle:Re[1]||""})}Wt.publish("addFonts",{fonts:gt,dictionary:wt})},Mi=function(N){return N.foo=function(){try{return N.apply(this,arguments)}catch(we){var Z=we.stack||"";~Z.indexOf(" at ")&&(Z=Z.split(" at ")[1]);var de="Error in function "+Z.split(`
`)[0].split("<")[0]+": "+we.message;if(!Bt.console)throw new Error(de);Bt.console.error(de,we),Bt.alert&&alert(de)}},N.foo.bar=N,N.foo},Js=function(N,Z){var de,we,Re,Ye,$e,yt,Rt,zt,Ht;if(Re=(Z=Z||{}).sourceEncoding||"Unicode",$e=Z.outputEncoding,(Z.autoencode||$e)&&gt[Mt].metadata&&gt[Mt].metadata[Re]&&gt[Mt].metadata[Re].encoding&&(Ye=gt[Mt].metadata[Re].encoding,!$e&&gt[Mt].encoding&&($e=gt[Mt].encoding),!$e&&Ye.codePages&&($e=Ye.codePages[0]),typeof $e=="string"&&($e=Ye[$e]),$e)){for(Rt=!1,yt=[],de=0,we=N.length;de<we;de++)(zt=$e[N.charCodeAt(de)])?yt.push(String.fromCharCode(zt)):yt.push(N[de]),yt[de].charCodeAt(0)>>8&&(Rt=!0);N=yt.join("")}for(de=N.length;Rt===void 0&&de!==0;)N.charCodeAt(de-1)>>8&&(Rt=!0),de--;if(!Rt)return N;for(yt=Z.noBOM?[]:[254,255],de=0,we=N.length;de<we;de++){if((Ht=(zt=N.charCodeAt(de))>>8)>>8)throw new Error("Character at position "+de+" of string '"+N+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");yt.push(Ht),yt.push(zt-(Ht<<8))}return String.fromCharCode.apply(void 0,yt)},Si=A.__private__.pdfEscape=A.pdfEscape=function(N,Z){return Js(N,Z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yn=A.__private__.beginPage=function(N){Oe[++Xn]=[],Ut[Xn]={objId:0,contentsObjId:0,userUnit:Number(p),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(N[0]),topRightY:Number(N[1])}},he(Xn),Le(Oe[G])},Ci=function(N,Z){var de,we,Re;switch(n=Z||n,typeof N=="string"&&(de=_(N.toLowerCase()),Array.isArray(de)&&(we=de[0],Re=de[1])),Array.isArray(N)&&(we=N[0]*ft,Re=N[1]*ft),isNaN(we)&&(we=s[0],Re=s[1]),(we>14400||Re>14400)&&(Fn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),we=Math.min(14400,we),Re=Math.min(14400,Re)),s=[we,Re],n.substr(0,1)){case"l":Re>we&&(s=[Re,we]);break;case"p":we>Re&&(s=[Re,we])}yn(s),Fi(Ua),me(Br),fi!==0&&me(fi+" J"),ts!==0&&me(ts+" j"),Wt.publish("addPage",{pageNumber:Xn})},Me=function(N){N>0&&N<=Xn&&(Oe.splice(N,1),Ut.splice(N,1),Xn--,G>Xn&&(G=Xn),this.setPage(G))},he=function(N){N>0&&N<=Xn&&(G=N)},It=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return Oe.length-1},ui=function(N,Z,de){var we,Re=void 0;return de=de||{},N=N!==void 0?N:gt[Mt].fontName,Z=Z!==void 0?Z:gt[Mt].fontStyle,we=N.toLowerCase(),wt[we]!==void 0&&wt[we][Z]!==void 0?Re=wt[we][Z]:wt[N]!==void 0&&wt[N][Z]!==void 0?Re=wt[N][Z]:de.disableWarning===!1&&Fn.warn("Unable to look up font label for font '"+N+"', '"+Z+"'. Refer to getFontList() for available fonts."),Re||de.noFallback||(Re=wt.times[Z])==null&&(Re=wt.times.normal),Re},gr=A.__private__.putInfo=function(){var N=hn(),Z=function(we){return we};for(var de in S!==null&&(Z=Ei.encryptor(N,0)),me("<<"),me("/Producer ("+Si(Z("jsPDF "+kt.version))+")"),ct)ct.hasOwnProperty(de)&&ct[de]&&me("/"+de.substr(0,1).toUpperCase()+de.substr(1)+" ("+Si(Z(ct[de]))+")");me("/CreationDate ("+Si(Z(ne))+")"),me(">>"),me("endobj")},tl=A.__private__.putCatalog=function(N){var Z=(N=N||{}).rootDictionaryObjId||dr;switch(hn(),me("<<"),me("/Type /Catalog"),me("/Pages "+Z+" 0 R"),Ue||(Ue="fullwidth"),Ue){case"fullwidth":me("/OpenAction [3 0 R /FitH null]");break;case"fullheight":me("/OpenAction [3 0 R /FitV null]");break;case"fullpage":me("/OpenAction [3 0 R /Fit]");break;case"original":me("/OpenAction [3 0 R /XYZ null null 1]");break;default:var de=""+Ue;de.substr(de.length-1)==="%"&&(Ue=parseInt(Ue)/100),typeof Ue=="number"&&me("/OpenAction [3 0 R /XYZ null null "+J(Ue)+"]")}switch(mt||(mt="continuous"),mt){case"continuous":me("/PageLayout /OneColumn");break;case"single":me("/PageLayout /SinglePage");break;case"two":case"twoleft":me("/PageLayout /TwoColumnLeft");break;case"tworight":me("/PageLayout /TwoColumnRight")}Xe&&me("/PageMode /"+Xe),Wt.publish("putCatalog"),me(">>"),me("endobj")},nl=A.__private__.putTrailer=function(){me("trailer"),me("<<"),me("/Size "+(se+1)),me("/Root "+se+" 0 R"),me("/Info "+(se-1)+" 0 R"),S!==null&&me("/Encrypt "+Ei.oid+" 0 R"),me("/ID [ <"+Q+"> <"+Q+"> ]"),me(">>")},pr=A.__private__.putHeader=function(){me("%PDF-"+U),me("%")},Ot=A.__private__.putXRef=function(){var N="0000000000";me("xref"),me("0 "+(se+1)),me("0000000000 65535 f ");for(var Z=1;Z<=se;Z++)typeof Ee[Z]=="function"?me((N+Ee[Z]()).slice(-10)+" 00000 n "):Ee[Z]!==void 0?me((N+Ee[Z]).slice(-10)+" 00000 n "):me("0000000000 00000 n ")},pn=A.__private__.buildDocument=function(){ut(),Le(be),Wt.publish("buildDocument"),pr(),vs(),ti(),Ks(),S!==null&&Kc(),gr(),tl();var N=Ce;return Ot(),nl(),me("startxref"),me(""+N),me("%%EOF"),Le(Oe[G]),be.join(`
`)},ws=A.__private__.getBlob=function(N){return new Blob([Ve(N)],{type:"application/pdf"})},$s=A.output=A.__private__.output=Mi(function(N,Z){switch(typeof(Z=Z||{})=="string"?Z={filename:Z}:Z.filename=Z.filename||"generated.pdf",N){case void 0:return pn();case"save":A.save(Z.filename);break;case"arraybuffer":return Ve(pn());case"blob":return ws(pn());case"bloburi":case"bloburl":if(Bt.URL!==void 0&&typeof Bt.URL.createObjectURL=="function")return Bt.URL&&Bt.URL.createObjectURL(ws(pn()))||void 0;Fn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var de="",we=pn();try{de=B1(we)}catch{de=B1(unescape(encodeURIComponent(we)))}return"data:application/pdf;filename="+Z.filename+";base64,"+de;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Bt)==="[object Window]"){var Re="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ye=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Z.pdfObjectUrl&&(Re=Z.pdfObjectUrl,Ye="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Re+'"'+Ye+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Z)+");<\/script></body></html>",yt=Bt.open();return yt!==null&&yt.document.write($e),yt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Bt)==="[object Window]"){var Rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Z.filename+'" width="500px" height="400px" /></body></html>',zt=Bt.open();if(zt!==null){zt.document.write(Rt);var Ht=this;zt.document.documentElement.querySelector("#pdfViewer").onload=function(){zt.document.title=Z.filename,zt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ht.output("bloburl"))}}return zt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Bt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var nn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Z)+'"></iframe></body></html>',Kn=Bt.open();if(Kn!==null&&(Kn.document.write(nn),Kn.document.title=Z.filename),Kn||typeof safari>"u")return Kn;break;case"datauri":case"dataurl":return Bt.document.location.href=this.output("datauristring",Z);default:return null}}),eo=function(N){return Array.isArray(Pa)===!0&&Pa.indexOf(N)>-1};switch(r){case"pt":ft=1;break;case"mm":ft=72/25.4;break;case"cm":ft=72/2.54;break;case"in":ft=72;break;case"px":ft=eo("px_scaling")==1?.75:96/72;break;case"pc":case"em":ft=12;break;case"ex":ft=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ft=r}var Ei=null;xe(),ue();var il=function(N){return S!==null?Ei.encryptor(N,0):function(Z){return Z}},Wl=A.__private__.getPageInfo=A.getPageInfo=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ut[N].objId,pageNumber:N,pageContext:Ut[N]}},Ct=A.__private__.getPageInfoByObjId=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Z in Ut)if(Ut[Z].objId===N)break;return Wl(Z)},As=A.__private__.getCurrentPageInfo=A.getCurrentPageInfo=function(){return{objId:Ut[G].objId,pageNumber:G,pageContext:Ut[G]}};A.addPage=function(){return Ci.apply(this,arguments),this},A.setPage=function(){return he.apply(this,arguments),Le.call(this,Oe[G]),this},A.insertPage=function(N){return this.addPage(),this.movePage(G,N),this},A.movePage=function(N,Z){var de,we;if(N>Z){de=Oe[N],we=Ut[N];for(var Re=N;Re>Z;Re--)Oe[Re]=Oe[Re-1],Ut[Re]=Ut[Re-1];Oe[Z]=de,Ut[Z]=we,this.setPage(Z)}else if(N<Z){de=Oe[N],we=Ut[N];for(var Ye=N;Ye<Z;Ye++)Oe[Ye]=Oe[Ye+1],Ut[Ye]=Ut[Ye+1];Oe[Z]=de,Ut[Z]=we,this.setPage(Z)}return this},A.deletePage=function(){return Me.apply(this,arguments),this},A.__private__.text=A.text=function(N,Z,de,we,Re){var Ye,$e,yt,Rt,zt,Ht,nn,Kn,En,ii=(we=we||{}).scope||this;if(typeof N=="number"&&typeof Z=="number"&&(typeof de=="string"||Array.isArray(de))){var Qi=de;de=Z,Z=N,N=Qi}if(arguments[3]instanceof Tt?(R("The transform parameter of text() with a Matrix value"),En=Re):(yt=arguments[4],Rt=arguments[5],On(nn=arguments[3])==="object"&&nn!==null||(typeof yt=="string"&&(Rt=yt,yt=null),typeof nn=="string"&&(Rt=nn,nn=null),typeof nn=="number"&&(yt=nn,nn=null),we={flags:nn,angle:yt,align:Rt})),isNaN(Z)||isNaN(de)||N==null)throw new Error("Invalid arguments passed to jsPDF.text");if(N.length===0)return ii;var ri="",Kr=!1,xi=typeof we.lineHeightFactor=="number"?we.lineHeightFactor:$a,Ir=ii.internal.scaleFactor;function lr(qn){return qn=qn.split("	").join(Array(we.TabLen||9).join(" ")),Si(qn,nn)}function io(qn){for(var Vn,_i=qn.concat(),Hi=[],Es=_i.length;Es--;)typeof(Vn=_i.shift())=="string"?Hi.push(Vn):Array.isArray(qn)&&(Vn.length===1||Vn[1]===void 0&&Vn[2]===void 0)?Hi.push(Vn[0]):Hi.push([Vn[0],Vn[1],Vn[2]]);return Hi}function yr(qn,Vn){var _i;if(typeof qn=="string")_i=Vn(qn)[0];else if(Array.isArray(qn)){for(var Hi,Es,eu=qn.concat(),Ql=[],Cf=eu.length;Cf--;)typeof(Hi=eu.shift())=="string"?Ql.push(Vn(Hi)[0]):Array.isArray(Hi)&&typeof Hi[0]=="string"&&(Es=Vn(Hi[0],Hi[1],Hi[2]),Ql.push([Es[0],Es[1],Es[2]]));_i=Ql}return _i}var ro=!1,Ss=!0;if(typeof N=="string")ro=!0;else if(Array.isArray(N)){var dl=N.concat();$e=[];for(var Cs,Mn=dl.length;Mn--;)(typeof(Cs=dl.shift())!="string"||Array.isArray(Cs)&&typeof Cs[0]!="string")&&(Ss=!1);ro=Ss}if(ro===!1)throw new Error('Type of text must be string or Array. "'+N+'" is not recognized.');typeof N=="string"&&(N=N.match(/[\r?\n]/)?N.split(/\r\n|\r|\n/g):[N]);var ao=lt/ii.internal.scaleFactor,rs=ao*(xi-1);switch(we.baseline){case"bottom":de-=rs;break;case"top":de+=ao-rs;break;case"hanging":de+=ao-2*rs;break;case"middle":de+=ao/2-rs}if((Ht=we.maxWidth||0)>0&&(typeof N=="string"?N=ii.splitTextToSize(N,Ht):Object.prototype.toString.call(N)==="[object Array]"&&(N=N.reduce(function(qn,Vn){return qn.concat(ii.splitTextToSize(Vn,Ht))},[]))),Ye={text:N,x:Z,y:de,options:we,mutex:{pdfEscape:Si,activeFontKey:Mt,fonts:gt,activeFontSize:lt}},Wt.publish("preProcessText",Ye),N=Ye.text,yt=(we=Ye.options).angle,!(En instanceof Tt)&&yt&&typeof yt=="number"){yt*=Math.PI/180,we.rotationDirection===0&&(yt=-yt),D===T.ADVANCED&&(yt=-yt);var va=Math.cos(yt),$t=Math.sin(yt);En=new Tt(va,$t,-$t,va,0,0)}else yt&&yt instanceof Tt&&(En=yt);D!==T.ADVANCED||En||(En=Wi),(zt=we.charSpace||Pe)!==void 0&&(ri+=P(L(zt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Kn=we.horizontalScale)!==void 0&&(ri+=P(100*Kn)+` Tz
`),we.lang;var Ui=-1,Y=we.renderingMode!==void 0?we.renderingMode:we.stroke,i=ii.internal.getCurrentPageInfo().pageContext;switch(Y){case 0:case!1:case"fill":Ui=0;break;case 1:case!0:case"stroke":Ui=1;break;case 2:case"fillThenStroke":Ui=2;break;case 3:case"invisible":Ui=3;break;case 4:case"fillAndAddForClipping":Ui=4;break;case 5:case"strokeAndAddPathForClipping":Ui=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ui=6;break;case 7:case"addToPathForClipping":Ui=7}var a=i.usedRenderingMode!==void 0?i.usedRenderingMode:-1;Ui!==-1?ri+=Ui+` Tr
`:a!==-1&&(ri+=`0 Tr
`),Ui!==-1&&(i.usedRenderingMode=Ui),Rt=we.align||"left";var l,c=lt*xi,u=ii.internal.pageSize.getWidth(),d=gt[Mt];zt=we.charSpace||Pe,Ht=we.maxWidth||0,nn=Object.assign({autoencode:!0,noBOM:!0},we.flags);var x=[],v=function(qn){return ii.getStringUnitWidth(qn,{font:d,charSpace:zt,fontSize:lt,doKerning:!1})*lt/Ir};if(Object.prototype.toString.call(N)==="[object Array]"){var C;$e=io(N),Rt!=="left"&&(l=$e.map(v));var B,V=0;if(Rt==="right"){Z-=l[0],N=[],Mn=$e.length;for(var ee=0;ee<Mn;ee++)ee===0?(B=ba(Z),C=za(de)):(B=L(V-l[ee]),C=-c),N.push([$e[ee],B,C]),V=l[ee]}else if(Rt==="center"){Z-=l[0]/2,N=[],Mn=$e.length;for(var ge=0;ge<Mn;ge++)ge===0?(B=ba(Z),C=za(de)):(B=L((V-l[ge])/2),C=-c),N.push([$e[ge],B,C]),V=l[ge]}else if(Rt==="left"){N=[],Mn=$e.length;for(var ve=0;ve<Mn;ve++)N.push($e[ve])}else if(Rt==="justify"&&d.encoding==="Identity-H"){N=[],Mn=$e.length,Ht=Ht!==0?Ht:u;for(var Ae=0,Ie=0;Ie<Mn;Ie++)if(C=Ie===0?za(de):-c,B=Ie===0?ba(Z):Ae,Ie<Mn-1){var Fe=L((Ht-l[Ie])/($e[Ie].split(" ").length-1)),nt=$e[Ie].split(" ");N.push([nt[0]+" ",B,C]),Ae=0;for(var st=1;st<nt.length;st++){var it=(v(nt[st-1]+" "+nt[st])-v(nt[st]))*Ir+Fe;st==nt.length-1?N.push([nt[st],it,0]):N.push([nt[st]+" ",it,0]),Ae-=it}}else N.push([$e[Ie],B,C]);N.push(["",Ae,0])}else{if(Rt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(N=[],Mn=$e.length,Ht=Ht!==0?Ht:u,Ie=0;Ie<Mn;Ie++)C=Ie===0?za(de):-c,B=Ie===0?ba(Z):0,Ie<Mn-1?x.push(P(L((Ht-l[Ie])/($e[Ie].split(" ").length-1)))):x.push(0),N.push([$e[Ie],B,C])}}var Qt=typeof we.R2L=="boolean"?we.R2L:ze;Qt===!0&&(N=yr(N,function(qn,Vn,_i){return[qn.split("").reverse().join(""),Vn,_i]})),Ye={text:N,x:Z,y:de,options:we,mutex:{pdfEscape:Si,activeFontKey:Mt,fonts:gt,activeFontSize:lt}},Wt.publish("postProcessText",Ye),N=Ye.text,Kr=Ye.mutex.isHex||!1;var Pt=gt[Mt].encoding;Pt!=="WinAnsiEncoding"&&Pt!=="StandardEncoding"||(N=yr(N,function(qn,Vn,_i){return[lr(qn),Vn,_i]})),$e=io(N),N=[];for(var yi,zi,di,un=0,ai=1,Ti=Array.isArray($e[0])?ai:un,Dr="",wa=function(qn,Vn,_i){var Hi="";return _i instanceof Tt?(_i=typeof we.angle=="number"?Xr(_i,new Tt(1,0,0,1,qn,Vn)):Xr(new Tt(1,0,0,1,qn,Vn),_i),D===T.ADVANCED&&(_i=Xr(new Tt(1,0,0,-1,0,0),_i)),Hi=_i.join(" ")+` Tm
`):Hi=P(qn)+" "+P(Vn)+` Td
`,Hi},Pr=0;Pr<$e.length;Pr++){switch(Dr="",Ti){case ai:di=(Kr?"<":"(")+$e[Pr][0]+(Kr?">":")"),yi=parseFloat($e[Pr][1]),zi=parseFloat($e[Pr][2]);break;case un:di=(Kr?"<":"(")+$e[Pr]+(Kr?">":")"),yi=ba(Z),zi=za(de)}x!==void 0&&x[Pr]!==void 0&&(Dr=x[Pr]+` Tw
`),Pr===0?N.push(Dr+wa(yi,zi,En)+di):Ti===un?N.push(Dr+di):Ti===ai&&N.push(Dr+wa(yi,zi,En)+di)}N=Ti===un?N.join(` Tj
T* `):N.join(` Tj
`),N+=` Tj
`;var Fr=`BT
/`;return Fr+=Mt+" "+lt+` Tf
`,Fr+=P(lt*xi)+` TL
`,Fr+=mr+`
`,Fr+=ri,Fr+=N,me(Fr+="ET"),E[Mt]=!0,ii};var xa=A.__private__.clip=A.clip=function(N){return me(N==="evenodd"?"W*":"W"),this};A.clipEvenOdd=function(){return xa("evenodd")},A.__private__.discardPath=A.discardPath=function(){return me("n"),this};var Dt=A.__private__.isValidStyle=function(N){var Z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(N)!==-1&&(Z=!0),Z};A.__private__.setDefaultPathOperation=A.setDefaultPathOperation=function(N){return Dt(N)&&(y=N),this};var Xl=A.__private__.getStyle=A.getStyle=function(N){var Z=y;switch(N){case"D":case"S":Z="S";break;case"F":Z="f";break;case"FD":case"DF":Z="B";break;case"f":case"f*":case"B":case"B*":Z=N}return Z},Gt=A.close=function(){return me("h"),this};A.stroke=function(){return me("S"),this},A.fill=function(N){return ni("f",N),this},A.fillEvenOdd=function(N){return ni("f*",N),this},A.fillStroke=function(N){return ni("B",N),this},A.fillStrokeEvenOdd=function(N){return ni("B*",N),this};var ni=function(N,Z){On(Z)==="object"?Zl(Z,N):me(N)},rl=function(N){N===null||D===T.ADVANCED&&N===void 0||(N=Xl(N),me(N))};function al(N,Z,de,we,Re){var Ye=new vl(Z||this.boundingBox,de||this.xStep,we||this.yStep,this.gState,Re||this.matrix);Ye.stream=this.stream;var $e=N+"$$"+this.cloneIndex+++"$$";return Xi($e,Ye),Ye}var Zl=function(N,Z){var de=Ba[N.key],we=sn[de];if(we instanceof Eo)me("q"),me(Fa(Z)),we.gState&&A.setGState(we.gState),me(N.matrix.toString()+" cm"),me("/"+de+" sh"),me("Q");else if(we instanceof vl){var Re=new Tt(1,0,0,-1,0,xr());N.matrix&&(Re=Re.multiply(N.matrix||Wi),de=al.call(we,N.key,N.boundingBox,N.xStep,N.yStep,Re).id),me("q"),me("/Pattern cs"),me("/"+de+" scn"),we.gState&&A.setGState(we.gState),me(Z),me("Q")}},Fa=function(N){switch(N){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},sl=A.moveTo=function(N,Z){return me(P(L(N))+" "+P(ce(Z))+" m"),this},Qr=A.lineTo=function(N,Z){return me(P(L(N))+" "+P(ce(Z))+" l"),this},kr=A.curveTo=function(N,Z,de,we,Re,Ye){return me([P(L(N)),P(ce(Z)),P(L(de)),P(ce(we)),P(L(Re)),P(ce(Ye)),"c"].join(" ")),this};A.__private__.line=A.line=function(N,Z,de,we,Re){if(isNaN(N)||isNaN(Z)||isNaN(de)||isNaN(we)||!Dt(Re))throw new Error("Invalid arguments passed to jsPDF.line");return D===T.COMPAT?this.lines([[de-N,we-Z]],N,Z,[1,1],Re||"S"):this.lines([[de-N,we-Z]],N,Z,[1,1]).stroke()},A.__private__.lines=A.lines=function(N,Z,de,we,Re,Ye){var $e,yt,Rt,zt,Ht,nn,Kn,En,ii,Qi,ri,Kr;if(typeof N=="number"&&(Kr=de,de=Z,Z=N,N=Kr),we=we||[1,1],Ye=Ye||!1,isNaN(Z)||isNaN(de)||!Array.isArray(N)||!Array.isArray(we)||!Dt(Re)||typeof Ye!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(sl(Z,de),$e=we[0],yt=we[1],zt=N.length,Qi=Z,ri=de,Rt=0;Rt<zt;Rt++)(Ht=N[Rt]).length===2?(Qi=Ht[0]*$e+Qi,ri=Ht[1]*yt+ri,Qr(Qi,ri)):(nn=Ht[0]*$e+Qi,Kn=Ht[1]*yt+ri,En=Ht[2]*$e+Qi,ii=Ht[3]*yt+ri,Qi=Ht[4]*$e+Qi,ri=Ht[5]*yt+ri,kr(nn,Kn,En,ii,Qi,ri));return Ye&&Gt(),rl(Re),this},A.path=function(N){for(var Z=0;Z<N.length;Z++){var de=N[Z],we=de.c;switch(de.op){case"m":sl(we[0],we[1]);break;case"l":Qr(we[0],we[1]);break;case"c":kr.apply(this,we);break;case"h":Gt()}}return this},A.__private__.rect=A.rect=function(N,Z,de,we,Re){if(isNaN(N)||isNaN(Z)||isNaN(de)||isNaN(we)||!Dt(Re))throw new Error("Invalid arguments passed to jsPDF.rect");return D===T.COMPAT&&(we=-we),me([P(L(N)),P(ce(Z)),P(L(de)),P(L(we)),"re"].join(" ")),rl(Re),this},A.__private__.triangle=A.triangle=function(N,Z,de,we,Re,Ye,$e){if(isNaN(N)||isNaN(Z)||isNaN(de)||isNaN(we)||isNaN(Re)||isNaN(Ye)||!Dt($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[de-N,we-Z],[Re-de,Ye-we],[N-Re,Z-Ye]],N,Z,[1,1],$e,!0),this},A.__private__.roundedRect=A.roundedRect=function(N,Z,de,we,Re,Ye,$e){if(isNaN(N)||isNaN(Z)||isNaN(de)||isNaN(we)||isNaN(Re)||isNaN(Ye)||!Dt($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var yt=4/3*(Math.SQRT2-1);return Re=Math.min(Re,.5*de),Ye=Math.min(Ye,.5*we),this.lines([[de-2*Re,0],[Re*yt,0,Re,Ye-Ye*yt,Re,Ye],[0,we-2*Ye],[0,Ye*yt,-Re*yt,Ye,-Re,Ye],[2*Re-de,0],[-Re*yt,0,-Re,-Ye*yt,-Re,-Ye],[0,2*Ye-we],[0,-Ye*yt,Re*yt,-Ye,Re,-Ye]],N+Re,Z,[1,1],$e,!0),this},A.__private__.ellipse=A.ellipse=function(N,Z,de,we,Re){if(isNaN(N)||isNaN(Z)||isNaN(de)||isNaN(we)||!Dt(Re))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ye=4/3*(Math.SQRT2-1)*de,$e=4/3*(Math.SQRT2-1)*we;return sl(N+de,Z),kr(N+de,Z-$e,N+Ye,Z-we,N,Z-we),kr(N-Ye,Z-we,N-de,Z-$e,N-de,Z),kr(N-de,Z+$e,N-Ye,Z+we,N,Z+we),kr(N+Ye,Z+we,N+de,Z+$e,N+de,Z),rl(Re),this},A.__private__.circle=A.circle=function(N,Z,de,we){if(isNaN(N)||isNaN(Z)||isNaN(de)||!Dt(we))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(N,Z,de,de,we)},A.setFont=function(N,Z,de){return de&&(Z=K(Z,de)),Mt=ui(N,Z,{disableWarning:!1}),this};var Ns=A.__private__.getFont=A.getFont=function(){return gt[ui.apply(A,arguments)]};A.__private__.getFontList=A.getFontList=function(){var N,Z,de={};for(N in wt)if(wt.hasOwnProperty(N))for(Z in de[N]=[],wt[N])wt[N].hasOwnProperty(Z)&&de[N].push(Z);return de},A.addFont=function(N,Z,de,we,Re){var Ye=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ye.indexOf(arguments[3])!==-1?Re=arguments[3]:arguments[3]&&Ye.indexOf(arguments[3])==-1&&(de=K(de,we)),Re=Re||"Identity-H",el.call(this,N,Z,de,Re)};var $a,Ua=e.lineWidth||.200025,ya=A.__private__.getLineWidth=A.getLineWidth=function(){return Ua},Fi=A.__private__.setLineWidth=A.setLineWidth=function(N){return Ua=N,me(P(L(N))+" w"),this};A.__private__.setLineDash=kt.API.setLineDash=kt.API.setLineDashPattern=function(N,Z){if(N=N||[],Z=Z||0,isNaN(Z)||!Array.isArray(N))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return N=N.map(function(de){return P(L(de))}).join(" "),Z=P(L(Z)),me("["+N+"] "+Z+" d"),this};var ol=A.__private__.getLineHeight=A.getLineHeight=function(){return lt*$a};A.__private__.getLineHeight=A.getLineHeight=function(){return lt*$a};var ll=A.__private__.setLineHeightFactor=A.setLineHeightFactor=function(N){return typeof(N=N||1.15)=="number"&&($a=N),this},cl=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return $a};ll(e.lineHeight);var ba=A.__private__.getHorizontalCoordinate=function(N){return L(N)},za=A.__private__.getVerticalCoordinate=function(N){return D===T.ADVANCED?N:Ut[G].mediaBox.topRightY-Ut[G].mediaBox.bottomLeftY-L(N)},Jc=A.__private__.getHorizontalCoordinateString=A.getHorizontalCoordinateString=function(N){return P(ba(N))},tn=A.__private__.getVerticalCoordinateString=A.getVerticalCoordinateString=function(N){return P(za(N))},Br=e.strokeColor||"0 G";A.__private__.getStrokeColor=A.getDrawColor=function(){return Hn(Br)},A.__private__.setStrokeColor=A.setDrawColor=function(N,Z,de,we){return Br=Zi({ch1:N,ch2:Z,ch3:de,ch4:we,pdfColorType:"draw",precision:2}),me(Br),this};var es=e.fillColor||"0 g";A.__private__.getFillColor=A.getFillColor=function(){return Hn(es)},A.__private__.setFillColor=A.setFillColor=function(N,Z,de,we){return es=Zi({ch1:N,ch2:Z,ch3:de,ch4:we,pdfColorType:"fill",precision:2}),me(es),this};var mr=e.textColor||"0 g",$c=A.__private__.getTextColor=A.getTextColor=function(){return Hn(mr)};A.__private__.setTextColor=A.setTextColor=function(N,Z,de,we){return mr=Zi({ch1:N,ch2:Z,ch3:de,ch4:we,pdfColorType:"text",precision:3}),this};var Pe=e.charSpace,Yt=A.__private__.getCharSpace=A.getCharSpace=function(){return parseFloat(Pe||0)};A.__private__.setCharSpace=A.setCharSpace=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Pe=N,this};var fi=0;A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function(N){var Z=A.CapJoinStyles[N];if(Z===void 0)throw new Error("Line cap style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fi=Z,me(Z+" J"),this};var ts=0;A.__private__.setLineJoin=A.setLineJoin=function(N){var Z=A.CapJoinStyles[N];if(Z===void 0)throw new Error("Line join style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ts=Z,me(Z+" j"),this},A.__private__.setLineMiterLimit=A.__private__.setMiterLimit=A.setLineMiterLimit=A.setMiterLimit=function(N){if(N=N||0,isNaN(N))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return me(P(L(N))+" M"),this},A.GState=lf,A.setGState=function(N){(N=typeof N=="string"?Wn[Vt[N]]:ul(null,N)).equals(rr)||(me("/"+N.id+" gs"),rr=N)};var ul=function(N,Z){if(!N||!Vt[N]){var de=!1;for(var we in Wn)if(Wn.hasOwnProperty(we)&&Wn[we].equals(Z)){de=!0;break}if(de)Z=Wn[we];else{var Re="GS"+(Object.keys(Wn).length+1).toString(10);Wn[Re]=Z,Z.id=Re}return N&&(Vt[N]=Z.id),Wt.publish("addGState",Z),Z}};A.addGState=function(N,Z){return ul(N,Z),this},A.saveGraphicsState=function(){return me("q"),gn.push({key:Mt,size:lt,color:mr}),this},A.restoreGraphicsState=function(){me("Q");var N=gn.pop();return Mt=N.key,lt=N.size,mr=N.color,rr=null,this},A.setCurrentTransformationMatrix=function(N){return me(N.toString()+" cm"),this},A.comment=function(N){return me("#"+N),this};var to=function(N,Z){var de=N||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return de},set:function(Ye){isNaN(Ye)||(de=parseFloat(Ye))}});var we=Z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return we},set:function(Ye){isNaN(Ye)||(we=parseFloat(Ye))}});var Re="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Re},set:function(Ye){Re=Ye.toString()}}),this},fl=function(N,Z,de,we){to.call(this,N,Z),this.type="rect";var Re=de||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Re},set:function($e){isNaN($e)||(Re=parseFloat($e))}});var Ye=we||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ye},set:function($e){isNaN($e)||(Ye=parseFloat($e))}}),this},hl=function(){this.page=Xn,this.currentPage=G,this.pages=Oe.slice(0),this.pagesContext=Ut.slice(0),this.x=vn,this.y=Et,this.matrix=ot,this.width=Cn(G),this.height=xr(G),this.outputDestination=qe,this.id="",this.objectNumber=-1};hl.prototype.restore=function(){Xn=this.page,G=this.currentPage,Ut=this.pagesContext,Oe=this.pages,vn=this.x,Et=this.y,ot=this.matrix,is(G,this.width),mn(G,this.height),qe=this.outputDestination};var no=function(N,Z,de,we,Re){Er.push(new hl),Xn=G=0,Oe=[],vn=N,Et=Z,ot=Re,yn([de,we])},hi=function(N){if(ar[N])Er.pop().restore();else{var Z=new hl,de="Xo"+(Object.keys(fn).length+1).toString(10);Z.id=de,ar[N]=de,fn[de]=Z,Wt.publish("addFormObject",Z),Er.pop().restore()}};for(var ns in A.beginFormObject=function(N,Z,de,we,Re){return no(N,Z,de,we,Re),this},A.endFormObject=function(N){return hi(N),this},A.doFormObject=function(N,Z){var de=fn[ar[N]];return me("q"),me(Z.toString()+" cm"),me("/"+de.id+" Do"),me("Q"),this},A.getFormObject=function(N){var Z=fn[ar[N]];return{x:Z.x,y:Z.y,width:Z.width,height:Z.height,matrix:Z.matrix}},A.save=function(N,Z){return N=N||"generated.pdf",(Z=Z||{}).returnPromise=Z.returnPromise||!1,Z.returnPromise===!1?(bl(ws(pn()),N),typeof bl.unload=="function"&&Bt.setTimeout&&setTimeout(bl.unload,911),this):new Promise(function(de,we){try{var Re=bl(ws(pn()),N);typeof bl.unload=="function"&&Bt.setTimeout&&setTimeout(bl.unload,911),de(Re)}catch(Ye){we(Ye.message)}})},kt.API)kt.API.hasOwnProperty(ns)&&(ns==="events"&&kt.API.events.length?function(N,Z){var de,we,Re;for(Re=Z.length-1;Re!==-1;Re--)de=Z[Re][0],we=Z[Re][1],N.subscribe.apply(N,[de].concat(typeof we=="function"?[we]:we))}(Wt,kt.API.events):A[ns]=kt.API[ns]);var Cn=A.getPageWidth=function(N){return(Ut[N=N||G].mediaBox.topRightX-Ut[N].mediaBox.bottomLeftX)/ft},is=A.setPageWidth=function(N,Z){Ut[N].mediaBox.topRightX=Z*ft+Ut[N].mediaBox.bottomLeftX},xr=A.getPageHeight=function(N){return(Ut[N=N||G].mediaBox.topRightY-Ut[N].mediaBox.bottomLeftY)/ft},mn=A.setPageHeight=function(N,Z){Ut[N].mediaBox.topRightY=Z*ft+Ut[N].mediaBox.bottomLeftY};return A.internal={pdfEscape:Si,getStyle:Xl,getFont:Ns,getFontSize:Te,getCharSpace:Yt,getTextColor:$c,getLineHeight:ol,getLineHeightFactor:cl,getLineWidth:ya,write:pt,getHorizontalCoordinate:ba,getVerticalCoordinate:za,getCoordinateString:Jc,getVerticalCoordinateString:tn,collections:{},newObject:hn,newAdditionalObject:bt,newObjectDeferred:Ln,newObjectDeferredBegin:zn,getFilters:_r,putStream:sr,events:Wt,scaleFactor:ft,pageSize:{getWidth:function(){return Cn(G)},setWidth:function(N){is(G,N)},getHeight:function(){return xr(G)},setHeight:function(N){mn(G,N)}},encryptionOptions:S,encryption:Ei,getEncryptor:il,output:$s,getNumberOfPages:It,pages:Oe,out:me,f2:J,f3:F,getPageInfo:Wl,getPageInfoByObjId:Ct,getCurrentPageInfo:As,getPDFVersion:O,Point:to,Rectangle:fl,Matrix:Tt,hasHotfix:eo},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return Cn(G)},set:function(N){is(G,N)},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return xr(G)},set:function(N){mn(G,N)},enumerable:!0,configurable:!0}),Qn.call(A,Be),Mt="F1",Ci(s,n),Wt.publish("initialized"),A}cc.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},cc.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},cc.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},cc.prototype.processOwnerPassword=function(e,t){return F1(P1(t).substr(0,5),e)},cc.prototype.encryptor=function(e,t){var n=P1(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return F1(n,r)}},lf.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||On(e)!==On(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},kt.API={events:[]},kt.version="2.5.2";var vi=kt.API,X2=1,Vl=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ic=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},qt=function(e){return e.toFixed(2)},xo=function(e){return e.toFixed(5)};vi.__acroform__={};var Wr=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},cm=function(e){return e*X2},os=function(e){var t=new $3,n=St.internal.getHeight(e)||0,r=St.internal.getWidth(e)||0;return t.BBox=[0,0,Number(qt(r)),Number(qt(n))],t},Mw=vi.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},jw=vi.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},kw=vi.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ri=vi.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return kw(e,t-1)},Oi=vi.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Mw(e,t-1)},Li=vi.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return jw(e,t-1)},Bw=vi.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,s=e[0],o=e[1],f=e[2],p=e[3],m={};return m.lowerLeft_X=n(s)||0,m.lowerLeft_Y=r(o+p)||0,m.upperRight_X=n(s+f)||0,m.upperRight_Y=r(o)||0,[Number(qt(m.lowerLeft_X)),Number(qt(m.lowerLeft_Y)),Number(qt(m.upperRight_X)),Number(qt(m.upperRight_Y))]},Pw=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=U1(e,n),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+qt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=os(e);return o.scope=e.scope,o.stream=t.join(`
`),o}},U1=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(F){return F.split(`
`)}):s.map(function(F){return[F]});var o=n,f=St.internal.getHeight(e)||0;f=f<0?-f:f;var p=St.internal.getWidth(e)||0;p=p<0?-p:p;var m=function(F,L,re){if(F+1<s.length){var ce=L+" "+s[F+1][0];return o0(ce,e,re).width<=p-4}return!1};o++;e:for(;o>0;){t="",o--;var y,S,w=o0("3",e,o).height,E=e.multiline?f-o:(f-w)/2,A=E+=2,U=0,O=0,H=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+o0(t,e,o=12).width+", FieldWidth:"+p+`
`;break}for(var _="",T=0,D=0;D<s.length;D++)if(s.hasOwnProperty(D)){var j=!1;if(s[D].length!==1&&H!==s[D].length-1){if((w+2)*(T+2)+2>f)continue e;_+=s[D][H],j=!0,O=D,D--}else{_=(_+=s[D][H]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var q=parseInt(D),K=m(q,_,o),P=D>=s.length-1;if(K&&!P){_+=" ",H=0;continue}if(K||P){if(P)O=q;else if(e.multiline&&(w+2)*(T+2)+2>f)continue e}else{if(!e.multiline||(w+2)*(T+2)+2>f)continue e;O=q}}for(var R="",M=U;M<=O;M++){var J=s[M];if(e.multiline){if(M===O){R+=J[H]+" ",H=(H+1)%J.length;continue}if(M===U){R+=J[J.length-1]+" ";continue}}R+=J[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,S=o0(R,e,o).width,e.textAlign){case"right":y=p-S-2;break;case"center":y=(p-S)/2;break;case"left":default:y=2}t+=qt(y)+" "+qt(A)+` Td
`,t+="("+Vl(R)+`) Tj
`,t+=-qt(y)+` 0 Td
`,A=-(o+2),S=0,U=j?O:O+1,T++,_=""}break}return r.text=t,r.fontSize=o,r},o0=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},Fw={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Uw=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},zw=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,s=e[n];t.internal.newObjectDeferredBegin(s.objId,!0),On(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[r]}},Hw=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Ka.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Fw)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");X2=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new ey,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var o=r[s];o.objId=void 0,o.hasAnnotation&&Uw(o,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,s){var o=!r;for(var f in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(f)){var p=r[f],m=[],y=p.Rect;if(p.Rect&&(p.Rect=Bw(p.Rect,s)),s.internal.newObjectDeferredBegin(p.objId,!0),p.DA=St.createDefaultAppearanceStream(p),On(p)==="object"&&typeof p.getKeyValueListForStream=="function"&&(m=p.getKeyValueListForStream()),p.Rect=y,p.hasAppearanceStream&&!p.appearanceStreamContent){var S=Pw(p);m.push({key:"AP",value:"<</N "+S+">>"}),s.internal.acroformPlugin.xForms.push(S)}if(p.appearanceStreamContent){var w="";for(var E in p.appearanceStreamContent)if(p.appearanceStreamContent.hasOwnProperty(E)){var A=p.appearanceStreamContent[E];if(w+="/"+E+" ",w+="<<",Object.keys(A).length>=1||Array.isArray(A)){for(var f in A)if(A.hasOwnProperty(f)){var U=A[f];typeof U=="function"&&(U=U.call(s,p)),w+="/"+f+" "+U+" ",s.internal.acroformPlugin.xForms.indexOf(U)>=0||s.internal.acroformPlugin.xForms.push(U)}}else typeof(U=A)=="function"&&(U=U.call(s,p)),w+="/"+f+" "+U,s.internal.acroformPlugin.xForms.indexOf(U)>=0||s.internal.acroformPlugin.xForms.push(U);w+=">>"}m.push({key:"AP",value:`<<
`+w+">>"})}s.internal.putStream({additionalKeyValues:m,objectId:p.objId}),s.internal.out("endobj")}o&&zw(s.internal.acroformPlugin.xForms,s)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},J3=vi.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(f){return f};if(Array.isArray(e)){for(var s="[",o=0;o<e.length;o++)switch(o!==0&&(s+=" "),On(e[o])){case"boolean":case"number":case"object":s+=e[o].toString();break;case"string":e[o].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),s+="("+Vl(r(e[o].toString()))+")"):s+=e[o].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Rd=function(e,t,n){var r=function(s){return s};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Vl(r(e))+")"},fs=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fs.prototype.toString=function(){return this.objId+" 0 R"},fs.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},fs.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],s=this[r];s&&(Array.isArray(s)?e.push({key:r,value:J3(s,this.objId,this.scope)}):s instanceof fs?(s.scope=this.scope,e.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:r,value:s}))}return e};var $3=function(){fs.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};Wr($3,fs);var ey=function(){fs.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Vl(n(e))+")"}},set:function(n){e=n}})};Wr(ey,fs);var Ka=function e(){fs.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');t=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ri(t,3)},set:function(_){_?this.F=Oi(t,3):this.F=Li(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');n=_}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(_){r=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(_){r[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(_){r[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(_){r[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(_){r[3]=_}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof eh)return;o="FieldObject"+e.FieldNum++}var _=function(T){return T};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+Vl(_(o))+")"},set:function(_){o=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(_){o=_}});var f="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return f},set:function(_){f=_}});var p="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return p},set:function(_){p=_}});var m=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return m},set:function(_){m=_}});var y=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return y===void 0?50/X2:y},set:function(_){y=_}});var S="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return S},set:function(_){S=_}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof eh||this instanceof zo))return Rd(w,this.objId,this.scope)},set:function(_){_=_.toString(),w=_}});var E=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(E)return this instanceof Gi?E:Rd(E,this.objId,this.scope)},set:function(_){_=_.toString(),E=this instanceof Gi?_:_.substr(0,1)==="("?ic(_.substr(1,_.length-2)):ic(_)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gi?ic(E.substr(1,E.length-1)):E},set:function(_){_=_.toString(),E=this instanceof Gi?"/"+_:_}});var A=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(A)return A},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof Gi?A:Rd(A,this.objId,this.scope)},set:function(_){_=_.toString(),A=this instanceof Gi?_:_.substr(0,1)==="("?ic(_.substr(1,_.length-2)):ic(_)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gi?ic(A.substr(1,A.length-1)):A},set:function(_){_=_.toString(),A=this instanceof Gi?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var U,O=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return O},set:function(_){_=!!_,O=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(U)return U},set:function(_){U=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,1)},set:function(_){_?this.Ff=Oi(this.Ff,1):this.Ff=Li(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,2)},set:function(_){_?this.Ff=Oi(this.Ff,2):this.Ff=Li(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,3)},set:function(_){_?this.Ff=Oi(this.Ff,3):this.Ff=Li(this.Ff,3)}});var H=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(H!==null)return H},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');H=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(H){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:H=2;break;case"center":case 1:H=1;break;case"left":case 0:default:H=0}}})};Wr(Ka,fs);var Il=function(){Ka.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return J3(t,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(o,f,p){p||(p=1);for(var m,y=[];m=f.exec(o);)y.push(m[p]);return y}(r,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,18)},set:function(n){n?this.Ff=Oi(this.Ff,18):this.Ff=Li(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Oi(this.Ff,19):this.Ff=Li(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,20)},set:function(n){n?(this.Ff=Oi(this.Ff,20),t.sort()):this.Ff=Li(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,22)},set:function(n){n?this.Ff=Oi(this.Ff,22):this.Ff=Li(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,23)},set:function(n){n?this.Ff=Oi(this.Ff,23):this.Ff=Li(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,27)},set:function(n){n?this.Ff=Oi(this.Ff,27):this.Ff=Li(this.Ff,27)}}),this.hasAppearanceStream=!1};Wr(Il,Ka);var Dl=function(){Il.call(this),this.fontName="helvetica",this.combo=!1};Wr(Dl,Il);var Rl=function(){Dl.call(this),this.combo=!0};Wr(Rl,Dl);var Uu=function(){Rl.call(this),this.edit=!0};Wr(Uu,Rl);var Gi=function(){Ka.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,15)},set:function(n){n?this.Ff=Oi(this.Ff,15):this.Ff=Li(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,16)},set:function(n){n?this.Ff=Oi(this.Ff,16):this.Ff=Li(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,17)},set:function(n){n?this.Ff=Oi(this.Ff,17):this.Ff=Li(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,26)},set:function(n){n?this.Ff=Oi(this.Ff,26):this.Ff=Li(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,s=[];for(r in s.push("<<"),t)s.push("/"+r+" ("+Vl(n(t[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){On(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};Wr(Gi,Ka);var zu=function(){Gi.call(this),this.pushButton=!0};Wr(zu,Gi);var Ol=function(){Gi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Wr(Ol,Gi);var eh=function(){var e,t;Ka.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(p){return p};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var o,f=[];for(o in f.push("<<"),r)f.push("/"+o+" ("+Vl(s(r[o]))+")");return f.push(">>"),f.join(`
`)},set:function(s){On(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=St.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Wr(eh,Ka),Ol.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Ol.prototype.createOption=function(e){var t=new eh;return t.Parent=this,t.optionName=e,this.Kids.push(t),Gw.call(this.scope,t),t};var Hu=function(){Gi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=St.CheckBox.createAppearanceStream()};Wr(Hu,Gi);var zo=function(){Ka.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,13)},set:function(t){t?this.Ff=Oi(this.Ff,13):this.Ff=Li(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,21)},set:function(t){t?this.Ff=Oi(this.Ff,21):this.Ff=Li(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,23)},set:function(t){t?this.Ff=Oi(this.Ff,23):this.Ff=Li(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,24)},set:function(t){t?this.Ff=Oi(this.Ff,24):this.Ff=Li(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,25)},set:function(t){t?this.Ff=Oi(this.Ff,25):this.Ff=Li(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,26)},set:function(t){t?this.Ff=Oi(this.Ff,26):this.Ff=Li(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Wr(zo,Ka);var Gu=function(){zo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ri(this.Ff,14)},set:function(e){e?this.Ff=Oi(this.Ff,14):this.Ff=Li(this.Ff,14)}}),this.password=!0};Wr(Gu,zo);var St={CheckBox:{createAppearanceStream:function(){return{N:{On:St.CheckBox.YesNormal},D:{On:St.CheckBox.YesPushDown,Off:St.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=os(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),o=U1(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+qt(St.internal.getWidth(e))+" "+qt(St.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+qt(o.fontSize)+" Tf "+s),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=os(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),s=[],o=St.internal.getHeight(e),f=St.internal.getWidth(e),p=U1(e,e.caption);return s.push("1 g"),s.push("0 0 "+qt(f)+" "+qt(o)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+qt(f-1)+" "+qt(o-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+qt(p.fontSize)+" Tf "+r),s.push(p.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=os(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+qt(St.internal.getWidth(e))+" "+qt(St.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:St.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=St.RadioButton.Circle.YesNormal,t.D[e]=St.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=os(e);t.scope=e.scope;var n=[],r=St.internal.getWidth(e)<=St.internal.getHeight(e)?St.internal.getWidth(e)/4:St.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=St.internal.Bezier_C,o=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+xo(St.internal.getWidth(e)/2)+" "+xo(St.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=os(e);t.scope=e.scope;var n=[],r=St.internal.getWidth(e)<=St.internal.getHeight(e)?St.internal.getWidth(e)/4:St.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),o=Number((s*St.internal.Bezier_C).toFixed(5)),f=Number((r*St.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+xo(St.internal.getWidth(e)/2)+" "+xo(St.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),n.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),n.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),n.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+xo(St.internal.getWidth(e)/2)+" "+xo(St.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+f+" "+f+" "+r+" 0 "+r+" c"),n.push("-"+f+" "+r+" -"+r+" "+f+" -"+r+" 0 c"),n.push("-"+r+" -"+f+" -"+f+" -"+r+" 0 -"+r+" c"),n.push(f+" -"+r+" "+r+" -"+f+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=os(e);t.scope=e.scope;var n=[],r=St.internal.getWidth(e)<=St.internal.getHeight(e)?St.internal.getWidth(e)/4:St.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),o=Number((s*St.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+xo(St.internal.getWidth(e)/2)+" "+xo(St.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),n.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),n.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),n.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:St.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=St.RadioButton.Cross.YesNormal,t.D[e]=St.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=os(e);t.scope=e.scope;var n=[],r=St.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+qt(St.internal.getWidth(e)-2)+" "+qt(St.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(qt(r.x1.x)+" "+qt(r.x1.y)+" m"),n.push(qt(r.x2.x)+" "+qt(r.x2.y)+" l"),n.push(qt(r.x4.x)+" "+qt(r.x4.y)+" m"),n.push(qt(r.x3.x)+" "+qt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=os(e);t.scope=e.scope;var n=St.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+qt(St.internal.getWidth(e))+" "+qt(St.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+qt(St.internal.getWidth(e)-2)+" "+qt(St.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(qt(n.x1.x)+" "+qt(n.x1.y)+" m"),r.push(qt(n.x2.x)+" "+qt(n.x2.y)+" l"),r.push(qt(n.x4.x)+" "+qt(n.x4.y)+" m"),r.push(qt(n.x3.x)+" "+qt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=os(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+qt(St.internal.getWidth(e))+" "+qt(St.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};St.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=St.internal.getWidth(e),n=St.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},St.internal.getWidth=function(e){var t=0;return On(e)==="object"&&(t=cm(e.Rect[2])),t},St.internal.getHeight=function(e){var t=0;return On(e)==="object"&&(t=cm(e.Rect[3])),t};var Gw=vi.addField=function(e){if(Hw(this,e),!(e instanceof Ka))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};vi.AcroFormChoiceField=Il,vi.AcroFormListBox=Dl,vi.AcroFormComboBox=Rl,vi.AcroFormEditBox=Uu,vi.AcroFormButton=Gi,vi.AcroFormPushButton=zu,vi.AcroFormRadioButton=Ol,vi.AcroFormCheckBox=Hu,vi.AcroFormTextField=zo,vi.AcroFormPasswordField=Gu,vi.AcroFormAppearance=St,vi.AcroForm={ChoiceField:Il,ListBox:Dl,ComboBox:Rl,EditBox:Uu,Button:Gi,PushButton:zu,RadioButton:Ol,CheckBox:Hu,TextField:zo,PasswordField:Gu,Appearance:St},kt.AcroForm={ChoiceField:Il,ListBox:Dl,ComboBox:Rl,EditBox:Uu,Button:Gi,PushButton:zu,RadioButton:Ol,CheckBox:Hu,TextField:zo,PasswordField:Gu,Appearance:St};var qw=kt.AcroForm;function ty(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(F,L){var re,ce,ne,Q,W,ue=t;if((L=L||t)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(K(F))for(W in n)for(ne=n[W],re=0;re<ne.length;re+=1){for(Q=!0,ce=0;ce<ne[re].length;ce+=1)if(ne[re][ce]!==void 0&&ne[re][ce]!==F[ce]){Q=!1;break}if(Q===!0){ue=W;break}}else for(W in n)for(ne=n[W],re=0;re<ne.length;re+=1){for(Q=!0,ce=0;ce<ne[re].length;ce+=1)if(ne[re][ce]!==void 0&&ne[re][ce]!==F.charCodeAt(ce)){Q=!1;break}if(Q===!0){ue=W;break}}return ue===t&&L!==t&&(ue=L),ue},s=function F(L){for(var re=this.internal.write,ce=this.internal.putStream,ne=(0,this.internal.getFilters)();ne.indexOf("FlateEncode")!==-1;)ne.splice(ne.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:L.width}),Q.push({key:"Height",value:L.height}),L.colorSpace===H.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===H.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)){for(var W="",ue=0,oe=L.transparency.length;ue<oe;ue++)W+=L.transparency[ue]+" "+L.transparency[ue]+" ";Q.push({key:"Mask",value:"["+W+"]"})}L.sMask!==void 0&&Q.push({key:"SMask",value:L.objectId+1+" 0 R"});var ye=L.filter!==void 0?["/"+L.filter]:void 0;if(ce({data:L.data,additionalKeyValues:Q,alreadyAppliedFilters:ye,objectId:L.objectId}),re("endobj"),"sMask"in L&&L.sMask!==void 0){var xe="/Predictor "+L.predictor+" /Colors 1 /BitsPerComponent "+L.bitsPerComponent+" /Columns "+L.width,z={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:L.bitsPerComponent,decodeParameters:xe,data:L.sMask};"filter"in L&&(z.filter=L.filter),F.call(this,z)}if(L.colorSpace===H.INDEXED){var G=this.internal.newObject();ce({data:R(new Uint8Array(L.palette)),objectId:G}),re("endobj")}},o=function(){var F=this.internal.collections.addImage_images;for(var L in F)s.call(this,F[L])},f=function(){var F,L=this.internal.collections.addImage_images,re=this.internal.write;for(var ce in L)re("/I"+(F=L[ce]).index,F.objectId,"0","R")},p=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",f))},m=function(){var F=this.internal.collections.addImage_images;return p.call(this),F},y=function(){return Object.keys(this.internal.collections.addImage_images).length},S=function(F){return typeof e["process"+F.toUpperCase()]=="function"},w=function(F){return On(F)==="object"&&F.nodeType===1},E=function(F,L){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var re=""+F.getAttribute("src");if(re.indexOf("data:image/")===0)return Fu(unescape(re).split("base64,").pop());var ce=e.loadFile(re,!0);if(ce!==void 0)return ce}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var ne;switch(L){case"PNG":ne="image/png";break;case"WEBP":ne="image/webp";break;case"JPEG":case"JPG":default:ne="image/jpeg"}return Fu(F.toDataURL(ne,1).split("base64,").pop())}},A=function(F){var L=this.internal.collections.addImage_images;if(L){for(var re in L)if(F===L[re].alias)return L[re]}},U=function(F,L,re){return F||L||(F=-96,L=-96),F<0&&(F=-1*re.width*72/F/this.internal.scaleFactor),L<0&&(L=-1*re.height*72/L/this.internal.scaleFactor),F===0&&(F=L*re.width/re.height),L===0&&(L=F*re.height/re.width),[F,L]},O=function(F,L,re,ce,ne,Q){var W=U.call(this,re,ce,ne),ue=this.internal.getCoordinateString,oe=this.internal.getVerticalCoordinateString,ye=m.call(this);if(re=W[0],ce=W[1],ye[ne.index]=ne,Q){Q*=Math.PI/180;var xe=Math.cos(Q),z=Math.sin(Q),G=function(fe){return fe.toFixed(4)},ie=[G(xe),G(z),G(-1*z),G(xe),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,ue(F),oe(L+ce),"cm"].join(" ")),this.internal.write(ie.join(" ")),this.internal.write([ue(re),"0","0",ue(ce),"0","0","cm"].join(" "))):this.internal.write([ue(re),"0","0",ue(ce),ue(F),oe(L+ce),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ne.index+" Do"),this.internal.write("Q")},H=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=e.__addimage__.sHashCode=function(F){var L,re,ce=0;if(typeof F=="string")for(re=F.length,L=0;L<re;L++)ce=(ce<<5)-ce+F.charCodeAt(L),ce|=0;else if(K(F))for(re=F.byteLength/2,L=0;L<re;L++)ce=(ce<<5)-ce+F[L],ce|=0;return ce},D=e.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var L=!0;return F.length===0&&(L=!1),F.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(L=!1),L},j=e.__addimage__.extractImageFromDataUrl=function(F){var L=(F=F||"").split("base64,"),re=null;if(L.length===2){var ce=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(L[0]);Array.isArray(ce)&&(re={mimeType:ce[1],charset:ce[2],data:L[1]})}return re},q=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(F){return q()&&F instanceof ArrayBuffer};var K=e.__addimage__.isArrayBufferView=function(F){return q()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},P=e.__addimage__.binaryStringToUint8Array=function(F){for(var L=F.length,re=new Uint8Array(L),ce=0;ce<L;ce++)re[ce]=F.charCodeAt(ce);return re},R=e.__addimage__.arrayBufferToBinaryString=function(F){for(var L="",re=K(F)?F:new Uint8Array(F),ce=0;ce<re.length;ce+=8192)L+=String.fromCharCode.apply(null,re.subarray(ce,ce+8192));return L};e.addImage=function(){var F,L,re,ce,ne,Q,W,ue,oe;if(typeof arguments[1]=="number"?(L=t,re=arguments[1],ce=arguments[2],ne=arguments[3],Q=arguments[4],W=arguments[5],ue=arguments[6],oe=arguments[7]):(L=arguments[1],re=arguments[2],ce=arguments[3],ne=arguments[4],Q=arguments[5],W=arguments[6],ue=arguments[7],oe=arguments[8]),On(F=arguments[0])==="object"&&!w(F)&&"imageData"in F){var ye=F;F=ye.imageData,L=ye.format||L||t,re=ye.x||re||0,ce=ye.y||ce||0,ne=ye.w||ye.width||ne,Q=ye.h||ye.height||Q,W=ye.alias||W,ue=ye.compression||ue,oe=ye.rotation||ye.angle||oe}var xe=this.internal.getFilters();if(ue===void 0&&xe.indexOf("FlateEncode")!==-1&&(ue="SLOW"),isNaN(re)||isNaN(ce))throw new Error("Invalid coordinates passed to jsPDF.addImage");p.call(this);var z=M.call(this,F,L,W,ue);return O.call(this,re,ce,ne,Q,z,oe),this};var M=function(F,L,re,ce){var ne,Q,W;if(typeof F=="string"&&r(F)===t){F=unescape(F);var ue=J(F,!1);(ue!==""||(ue=e.loadFile(F,!0))!==void 0)&&(F=ue)}if(w(F)&&(F=E(F,L)),L=r(F,L),!S(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((W=re)==null||W.length===0)&&(re=function(oe){return typeof oe=="string"||K(oe)?T(oe):K(oe.data)?T(oe.data):null}(F)),(ne=A.call(this,re))||(q()&&(F instanceof Uint8Array||L==="RGBA"||(Q=F,F=P(F))),ne=this["process"+L.toUpperCase()](F,y.call(this),re,function(oe){return oe&&typeof oe=="string"&&(oe=oe.toUpperCase()),oe in e.image_compression?oe:_.NONE}(ce),Q)),!ne)throw new Error("An unknown error occurred whilst processing the image.");return ne},J=e.__addimage__.convertBase64ToBinaryString=function(F,L){var re;L=typeof L!="boolean"||L;var ce,ne="";if(typeof F=="string"){ce=(re=j(F))!==null?re.data:F;try{ne=Fu(ce)}catch(Q){if(L)throw D(ce)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};e.getImageProperties=function(F){var L,re,ce="";if(w(F)&&(F=E(F)),typeof F=="string"&&r(F)===t&&((ce=J(F,!1))===""&&(ce=e.loadFile(F)||""),F=ce),re=r(F),!S(re))throw new Error("addImage does not support files of type '"+re+"', please ensure that a plugin for '"+re+"' support is added.");if(!q()||F instanceof Uint8Array||(F=P(F)),!(L=this["process"+re.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=re,L}})(kt.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};kt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,s,o,f=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString,m=this.internal.getPageInfoByObjId(n.objId),y=n.pageContext.annotations,S=!1,w=0;w<y.length&&!S;w++)switch((r=y[w]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(S=!0);break;case"reference":case"text":case"freetext":S=!0}if(S!=0){this.internal.write("/Annots [");for(var E=0;E<y.length;E++){r=y[E];var A=this.internal.pdfEscape,U=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var O=this.internal.newAdditionalObject(),H=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(O.objId),T=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(s="/Rect ["+f(r.bounds.x)+" "+p(r.bounds.y+r.bounds.h)+" "+f(r.bounds.x+r.bounds.w)+" "+p(r.bounds.y)+"] ")+"/Contents ("+A(_(r.contents))+")",o+=" /Popup "+H.objId+" 0 R",o+=" /P "+m.objId+" 0 R",o+=" /T ("+A(_(T))+") >>",O.content=o;var D=O.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+f(r.bounds.x+30)+" "+p(r.bounds.y+r.bounds.h)+" "+f(r.bounds.x+r.bounds.w+30)+" "+p(r.bounds.y)+"] ")+" /Parent "+D,r.open&&(o+=" /Open true"),o+=" >>",H.content=o,this.internal.write(O.objId,"0 R",H.objId,"0 R");break;case"freetext":s="/Rect ["+f(r.bounds.x)+" "+p(r.bounds.y)+" "+f(r.bounds.x+r.bounds.w)+" "+p(r.bounds.y+r.bounds.h)+"] ";var j=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+A(U(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var q=this.annotations._nameMap[r.options.name];r.options.pageNumber=q.page,r.options.top=q.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+A(U(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var K=p(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+K+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,s,o,f){var p=this.internal.getCurrentPageInfo(),m=this.internal.getCoordinateString,y=this.internal.getVerticalCoordinateString;p.pageContext.annotations.push({finalBounds:{x:m(n),y:y(r),w:m(n+s),h:y(r+o)},options:f,type:"link"})},e.textWithLink=function(n,r,s,o){var f,p,m=this.getTextWidth(n),y=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){p=o.maxWidth;var S=this.splitTextToSize(n,p).length;f=Math.ceil(y*S)}else p=m,f=y;return this.text(n,r,s,o),s+=.2*y,o.align==="center"&&(r-=m/2),o.align==="right"&&(r-=m),this.link(r,s-y,p,f,o),m},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(kt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(O){return t[O.charCodeAt(0)]!==void 0},f=e.__arabicParser__.isArabicLetter=function(O){return typeof O=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(O)},p=e.__arabicParser__.isArabicEndLetter=function(O){return f(O)&&o(O)&&t[O.charCodeAt(0)].length<=2},m=e.__arabicParser__.isArabicAlfLetter=function(O){return f(O)&&s.indexOf(O.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(O){return f(O)&&o(O)&&t[O.charCodeAt(0)].length>=1};var y=e.__arabicParser__.arabicLetterHasFinalForm=function(O){return f(O)&&o(O)&&t[O.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(O){return f(O)&&o(O)&&t[O.charCodeAt(0)].length>=3};var S=e.__arabicParser__.arabicLetterHasMedialForm=function(O){return f(O)&&o(O)&&t[O.charCodeAt(0)].length==4},w=e.__arabicParser__.resolveLigatures=function(O){var H=0,_=n,T="",D=0;for(H=0;H<O.length;H+=1)_[O.charCodeAt(H)]!==void 0?(D++,typeof(_=_[O.charCodeAt(H)])=="number"&&(T+=String.fromCharCode(_),_=n,D=0),H===O.length-1&&(_=n,T+=O.charAt(H-(D-1)),H-=D-1,D=0)):(_=n,T+=O.charAt(H-D),H-=D,D=0);return T};e.__arabicParser__.isArabicDiacritic=function(O){return O!==void 0&&r[O.charCodeAt(0)]!==void 0};var E=e.__arabicParser__.getCorrectForm=function(O,H,_){return f(O)?o(O)===!1?-1:!y(O)||!f(H)&&!f(_)||!f(_)&&p(H)||p(O)&&!f(H)||p(O)&&m(H)||p(O)&&p(H)?0:S(O)&&f(H)&&!p(H)&&f(_)&&y(_)?3:p(O)||!f(_)?1:2:-1},A=function(O){var H=0,_=0,T=0,D="",j="",q="",K=(O=O||"").split("\\s+"),P=[];for(H=0;H<K.length;H+=1){for(P.push(""),_=0;_<K[H].length;_+=1)D=K[H][_],j=K[H][_-1],q=K[H][_+1],f(D)?(T=E(D,j,q),P[H]+=T!==-1?String.fromCharCode(t[D.charCodeAt(0)][T]):D):P[H]+=D;P[H]=w(P[H])}return P.join(" ")},U=e.__arabicParser__.processArabic=e.processArabic=function(){var O,H=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(H)){var T=0;for(_=[],T=0;T<H.length;T+=1)Array.isArray(H[T])?_.push([A(H[T][0]),H[T][1],H[T][2]]):_.push([A(H[T])]);O=_}else O=A(H);return typeof arguments[0]=="string"?O:(arguments[0].text=O,arguments[0])};e.events.push(["preProcessText",U])}(kt.API),kt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(p){n=p}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(p){r=isNaN(p)||Number.isInteger(p)===!1||p<0?150:p,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(p){s=isNaN(p)||Number.isInteger(p)===!1||p<0?300:p,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(p){o=p}});var f={};Object.defineProperty(this,"style",{get:function(){return f},set:function(p){f=p}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(kt.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var m=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return m},set:function(O){m=O}});var y=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return y},set:function(O){y=O}});var S=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return S},set:function(O){S=O}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(O){w=O}});var E=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return E},set:function(O){E=O}});var A=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return A},set:function(O){A=O}});var U=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return U},set:function(O){U=O}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(m){return r.call(this),this.internal.__cell__.headerFunction=typeof m=="function"?m:void 0,this},e.getTextDimensions=function(m,y){r.call(this);var S=(y=y||{}).fontSize||this.getFontSize(),w=y.font||this.getFont(),E=y.scaleFactor||this.internal.scaleFactor,A=0,U=0,O=0,H=this;if(!Array.isArray(m)&&typeof m!="string"){if(typeof m!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");m=String(m)}var _=y.maxWidth;_>0?typeof m=="string"?m=this.splitTextToSize(m,_):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(D,j){return D.concat(H.splitTextToSize(j,_))},[])):m=Array.isArray(m)?m:[m];for(var T=0;T<m.length;T++)A<(O=this.getStringUnitWidth(m[T],{font:w})*S)&&(A=O);return A!==0&&(U=m.length),{w:A/=E,h:Math.max((U*S*this.getLineHeightFactor()-S*(this.getLineHeightFactor()-1))/E,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var m=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(m.left,m.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var f=e.cell=function(){var m;m=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var y=this.internal.__cell__.lastCell,S=this.internal.__cell__.padding,w=this.internal.__cell__.margins||t,E=this.internal.__cell__.tableHeaderRow,A=this.internal.__cell__.printHeaders;return y.lineNumber!==void 0&&(y.lineNumber===m.lineNumber?(m.x=(y.x||0)+(y.width||0),m.y=y.y||0):y.y+y.height+m.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),m.y=w.top,A&&E&&(this.printHeaderRow(m.lineNumber,!0),m.y+=E[0].height)):m.y=y.y+y.height||m.y),m.text[0]!==void 0&&(this.rect(m.x,m.y,m.width,m.height,n===!0?"FD":void 0),m.align==="right"?this.text(m.text,m.x+m.width-S,m.y+S,{align:"right",baseline:"top"}):m.align==="center"?this.text(m.text,m.x+m.width/2,m.y+S,{align:"center",baseline:"top",maxWidth:m.width-S-S}):this.text(m.text,m.x+S,m.y+S,{align:"left",baseline:"top",maxWidth:m.width-S-S})),this.internal.__cell__.lastCell=m,this};e.table=function(m,y,S,w,E){if(r.call(this),!S)throw new Error("No data for PDF table.");var A,U,O,H,_=[],T=[],D=[],j={},q={},K=[],P=[],R=(E=E||{}).autoSize||!1,M=E.printHeaders!==!1,J=E.css&&E.css["font-size"]!==void 0?16*E.css["font-size"]:E.fontSize||12,F=E.margins||Object.assign({width:this.getPageWidth()},t),L=typeof E.padding=="number"?E.padding:3,re=E.headerBackgroundColor||"#c8c8c8",ce=E.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=J,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=re,this.internal.__cell__.headerTextColor=ce,this.setFontSize(J),w==null)T=_=Object.keys(S[0]),D=_.map(function(){return"left"});else if(Array.isArray(w)&&On(w[0])==="object")for(_=w.map(function(ye){return ye.name}),T=w.map(function(ye){return ye.prompt||ye.name||""}),D=w.map(function(ye){return ye.align||"left"}),A=0;A<w.length;A+=1)q[w[A].name]=w[A].width*(19.049976/25.4);else Array.isArray(w)&&typeof w[0]=="string"&&(T=_=w,D=_.map(function(){return"left"}));if(R||Array.isArray(w)&&typeof w[0]=="string")for(A=0;A<_.length;A+=1){for(j[H=_[A]]=S.map(function(ye){return ye[H]}),this.setFont(void 0,"bold"),K.push(this.getTextDimensions(T[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),U=j[H],this.setFont(void 0,"normal"),O=0;O<U.length;O+=1)K.push(this.getTextDimensions(U[O],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[H]=Math.max.apply(null,K)+L+L,K=[]}if(M){var ne={};for(A=0;A<_.length;A+=1)ne[_[A]]={},ne[_[A]].text=T[A],ne[_[A]].align=D[A];var Q=p.call(this,ne,q);P=_.map(function(ye){return new o(m,y,q[ye],Q,ne[ye].text,void 0,ne[ye].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var W=w.reduce(function(ye,xe){return ye[xe.name]=xe.align,ye},{});for(A=0;A<S.length;A+=1){"rowStart"in E&&E.rowStart instanceof Function&&E.rowStart({row:A,data:S[A]},this);var ue=p.call(this,S[A],q);for(O=0;O<_.length;O+=1){var oe=S[A][_[O]];"cellStart"in E&&E.cellStart instanceof Function&&E.cellStart({row:A,col:O,data:oe},this),f.call(this,new o(m,y,q[_[O]],ue,oe,A+2,W[_[O]]))}}return this.internal.__cell__.table_x=m,this.internal.__cell__.table_y=y,this};var p=function(m,y){var S=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,E=this.internal.scaleFactor;return Object.keys(m).map(function(A){var U=m[A];return this.splitTextToSize(U.hasOwnProperty("text")?U.text:U,y[A]-S-S)},this).map(function(A){return this.getLineHeightFactor()*A.length*w/E+S+S},this).reduce(function(A,U){return Math.max(A,U)},0)};e.setTableHeaderRow=function(m){r.call(this),this.internal.__cell__.tableHeaderRow=m},e.printHeaderRow=function(m,y){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var S;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var E=[],A=0;A<this.internal.__cell__.tableHeaderRow.length;A+=1){S=this.internal.__cell__.tableHeaderRow[A].clone(),y&&(S.y=this.internal.__cell__.margins.top||0,E.push(S)),S.lineNumber=m;var U=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),f.call(this,S),this.setTextColor(U)}E.length>0&&this.setTableHeaderRow(E),this.setFont(void 0,"normal"),n=!1}}(kt.API);var ny={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},iy=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],z1=ty(iy),ry=[100,200,300,400,500,600,700,800,900],Vw=ty(ry);function H1(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(o){return ny[o=o||"normal"]?o:"normal"}(e.style),r=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(e.weight),s=function(o){return typeof z1[o=o||"normal"]=="number"?o:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,n,r].join(" ")}}}function um(e,t,n,r){var s;for(s=n;s>=0&&s<t.length;s+=r)if(e[t[s]])return e[t[s]];for(s=n;s>=0&&s<t.length;s-=r)if(e[t[s]])return e[t[s]]}var Yw={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},fm={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function hm(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Ww(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},Yw,n.genericFontFamilies||{}),o=null,f=null,p=0;p<t.length;++p)if(s[(o=H1(t[p])).family]&&(o.family=s[o.family]),e.hasOwnProperty(o.family)){f=e[o.family];break}if(!(f=f||e[r]))throw new Error("Could not find a font-family for the rule '"+hm(o)+"' and default family '"+r+"'.");if(f=function(m,y){if(y[m])return y[m];var S=z1[m],w=S<=z1.normal?-1:1,E=um(y,iy,S,w);if(!E)throw new Error("Could not find a matching font-stretch value for "+m);return E}(o.stretch,f),f=function(m,y){if(y[m])return y[m];for(var S=ny[m],w=0;w<S.length;++w)if(y[S[w]])return y[S[w]];throw new Error("Could not find a matching font-style for "+m)}(o.style,f),!(f=function(m,y){if(y[m])return y[m];if(m===400&&y[500])return y[500];if(m===500&&y[400])return y[400];var S=Vw[m],w=um(y,ry,S,m<400?-1:1);if(!w)throw new Error("Could not find a matching font-weight for value "+m);return w}(o.weight,f)))throw new Error("Failed to resolve a font for the rule '"+hm(o)+"'.");return f}function dm(e){return e.trimLeft()}function Xw(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Zw(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var l0,gm,pm,Od=["times"];(function(e){var t,n,r,s,o,f,p,m,y,S=function(z){return z=z||{},this.isStrokeTransparent=z.isStrokeTransparent||!1,this.strokeOpacity=z.strokeOpacity||1,this.strokeStyle=z.strokeStyle||"#000000",this.fillStyle=z.fillStyle||"#000000",this.isFillTransparent=z.isFillTransparent||!1,this.fillOpacity=z.fillOpacity||1,this.font=z.font||"10px sans-serif",this.textBaseline=z.textBaseline||"alphabetic",this.textAlign=z.textAlign||"left",this.lineWidth=z.lineWidth||1,this.lineJoin=z.lineJoin||"miter",this.lineCap=z.lineCap||"butt",this.path=z.path||[],this.transform=z.transform!==void 0?z.transform.clone():new m,this.globalCompositeOperation=z.globalCompositeOperation||"normal",this.globalAlpha=z.globalAlpha||1,this.clip_path=z.clip_path||[],this.currentPoint=z.currentPoint||new f,this.miterLimit=z.miterLimit||10,this.lastPoint=z.lastPoint||new f,this.lineDashOffset=z.lineDashOffset||0,this.lineDash=z.lineDash||[],this.margin=z.margin||[0,0,0,0],this.prevPageLastElemOffset=z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof z.ignoreClearRect!="boolean"||z.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new w(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,f=this.internal.Point,p=this.internal.Rectangle,m=this.internal.Matrix,y=new S}]);var w=function(z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=z;Object.defineProperty(this,"pdf",{get:function(){return G}});var ie=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ie},set:function(Le){ie=!!Le}});var fe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return fe},set:function(Le){fe=!!Le}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(Le){isNaN(Le)||(se=Le)}});var Ee=0;Object.defineProperty(this,"posY",{get:function(){return Ee},set:function(Le){isNaN(Le)||(Ee=Le)}}),Object.defineProperty(this,"margin",{get:function(){return y.margin},set:function(Le){var me;typeof Le=="number"?me=[Le,Le,Le,Le]:((me=new Array(4))[0]=Le[0],me[1]=Le.length>=2?Le[1]:me[0],me[2]=Le.length>=3?Le[2]:me[0],me[3]=Le.length>=4?Le[3]:me[1]),y.margin=me}});var be=!1;Object.defineProperty(this,"autoPaging",{get:function(){return be},set:function(Le){be=Le}});var Ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ce},set:function(Le){Ce=Le}});var We=[];Object.defineProperty(this,"pageBreaks",{get:function(){return We},set:function(Le){We=Le}}),Object.defineProperty(this,"ctx",{get:function(){return y},set:function(Le){Le instanceof S&&(y=Le)}}),Object.defineProperty(this,"path",{get:function(){return y.path},set:function(Le){y.path=Le}});var Oe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Oe},set:function(Le){Oe=Le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Le){var me;me=E(Le),this.ctx.fillStyle=me.style,this.ctx.isFillTransparent=me.a===0,this.ctx.fillOpacity=me.a,this.pdf.setFillColor(me.r,me.g,me.b,{a:me.a}),this.pdf.setTextColor(me.r,me.g,me.b,{a:me.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Le){var me=E(Le);this.ctx.strokeStyle=me.style,this.ctx.isStrokeTransparent=me.a===0,this.ctx.strokeOpacity=me.a,me.a===0?this.pdf.setDrawColor(255,255,255):(me.a,this.pdf.setDrawColor(me.r,me.g,me.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Le){["butt","round","square"].indexOf(Le)!==-1&&(this.ctx.lineCap=Le,this.pdf.setLineCap(Le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Le){isNaN(Le)||(this.ctx.lineWidth=Le,this.pdf.setLineWidth(Le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Le){["bevel","round","miter"].indexOf(Le)!==-1&&(this.ctx.lineJoin=Le,this.pdf.setLineJoin(Le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Le){isNaN(Le)||(this.ctx.miterLimit=Le,this.pdf.setMiterLimit(Le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Le){this.ctx.textBaseline=Le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Le){["right","end","center","left","start"].indexOf(Le)!==-1&&(this.ctx.textAlign=Le)}});var tt=null;function qe(Le,me){if(tt===null){var pt=function(Ve){var Be=[];return Object.keys(Ve).forEach(function(lt){Ve[lt].forEach(function(Ue){var Te=null;switch(Ue){case"bold":Te={family:lt,weight:"bold"};break;case"italic":Te={family:lt,style:"italic"};break;case"bolditalic":Te={family:lt,weight:"bold",style:"italic"};break;case"":case"normal":Te={family:lt}}Te!==null&&(Te.ref={name:lt,style:Ue},Be.push(Te))})}),Be}(Le.getFontList());tt=function(Ve){for(var Be={},lt=0;lt<Ve.length;++lt){var Ue=H1(Ve[lt]),Te=Ue.family,ze=Ue.stretch,Xe=Ue.style,vt=Ue.weight;Be[Te]=Be[Te]||{},Be[Te][ze]=Be[Te][ze]||{},Be[Te][ze][Xe]=Be[Te][ze][Xe]||{},Be[Te][ze][Xe][vt]=Ue}return Be}(pt.concat(me))}return tt}var ut=null;Object.defineProperty(this,"fontFaces",{get:function(){return ut},set:function(Le){tt=null,ut=Le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Le){var me;if(this.ctx.font=Le,(me=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Le))!==null){var pt=me[1],Ve=(me[2],me[3]),Be=me[4],lt=(me[5],me[6]),Ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Be)[2];Be=Math.floor(Ue==="px"?parseFloat(Be)*this.pdf.internal.scaleFactor:Ue==="em"?parseFloat(Be)*this.pdf.getFontSize():parseFloat(Be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Be);var Te=function(ct){var Mt,ft,vn=[],Et=ct.trim();if(Et==="")return Od;if(Et in fm)return[fm[Et]];for(;Et!=="";){switch(ft=null,Mt=(Et=dm(Et)).charAt(0)){case'"':case"'":ft=Xw(Et.substring(1),Mt);break;default:ft=Zw(Et)}if(ft===null||(vn.push(ft[0]),(Et=dm(ft[1]))!==""&&Et.charAt(0)!==","))return Od;Et=Et.replace(/^,/,"")}return vn}(lt);if(this.fontFaces){var ze=Ww(qe(this.pdf,this.fontFaces),Te.map(function(ct){return{family:ct,stretch:"normal",weight:Ve,style:pt}}));this.pdf.setFont(ze.ref.name,ze.ref.style)}else{var Xe="";(Ve==="bold"||parseInt(Ve,10)>=700||pt==="bold")&&(Xe="bold"),pt==="italic"&&(Xe+="italic"),Xe.length===0&&(Xe="normal");for(var vt="",mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},_t=0;_t<Te.length;_t++){if(this.pdf.internal.getFont(Te[_t],Xe,{noFallback:!0,disableWarning:!0})!==void 0){vt=Te[_t];break}if(Xe==="bolditalic"&&this.pdf.internal.getFont(Te[_t],"bold",{noFallback:!0,disableWarning:!0})!==void 0)vt=Te[_t],Xe="bold";else if(this.pdf.internal.getFont(Te[_t],"normal",{noFallback:!0,disableWarning:!0})!==void 0){vt=Te[_t],Xe="normal";break}}if(vt===""){for(var Lt=0;Lt<Te.length;Lt++)if(mt[Te[Lt]]){vt=mt[Te[Lt]];break}}vt=vt===""?"Times":vt,this.pdf.setFont(vt,Xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Le){this.ctx.globalCompositeOperation=Le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Le){this.ctx.globalAlpha=Le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Le){this.ctx.lineDashOffset=Le,xe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Le){this.ctx.lineDash=Le,xe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Le){this.ctx.ignoreClearRect=!!Le}})};w.prototype.setLineDash=function(z){this.lineDash=z},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){j.call(this,"fill",!1)},w.prototype.stroke=function(){j.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(z,G){if(isNaN(z)||isNaN(G))throw Fn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ie=this.ctx.transform.applyToPoint(new f(z,G));this.path.push({type:"mt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new f(z,G)},w.prototype.closePath=function(){var z=new f(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&On(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){z=new f(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new f(z.x,z.y)},w.prototype.lineTo=function(z,G){if(isNaN(z)||isNaN(G))throw Fn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ie=this.ctx.transform.applyToPoint(new f(z,G));this.path.push({type:"lt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new f(ie.x,ie.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},w.prototype.quadraticCurveTo=function(z,G,ie,fe){if(isNaN(ie)||isNaN(fe)||isNaN(z)||isNaN(G))throw Fn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new f(ie,fe)),Ee=this.ctx.transform.applyToPoint(new f(z,G));this.path.push({type:"qct",x1:Ee.x,y1:Ee.y,x:se.x,y:se.y}),this.ctx.lastPoint=new f(se.x,se.y)},w.prototype.bezierCurveTo=function(z,G,ie,fe,se,Ee){if(isNaN(se)||isNaN(Ee)||isNaN(z)||isNaN(G)||isNaN(ie)||isNaN(fe))throw Fn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var be=this.ctx.transform.applyToPoint(new f(se,Ee)),Ce=this.ctx.transform.applyToPoint(new f(z,G)),We=this.ctx.transform.applyToPoint(new f(ie,fe));this.path.push({type:"bct",x1:Ce.x,y1:Ce.y,x2:We.x,y2:We.y,x:be.x,y:be.y}),this.ctx.lastPoint=new f(be.x,be.y)},w.prototype.arc=function(z,G,ie,fe,se,Ee){if(isNaN(z)||isNaN(G)||isNaN(ie)||isNaN(fe)||isNaN(se))throw Fn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ee=!!Ee,!this.ctx.transform.isIdentity){var be=this.ctx.transform.applyToPoint(new f(z,G));z=be.x,G=be.y;var Ce=this.ctx.transform.applyToPoint(new f(0,ie)),We=this.ctx.transform.applyToPoint(new f(0,0));ie=Math.sqrt(Math.pow(Ce.x-We.x,2)+Math.pow(Ce.y-We.y,2))}Math.abs(se-fe)>=2*Math.PI&&(fe=0,se=2*Math.PI),this.path.push({type:"arc",x:z,y:G,radius:ie,startAngle:fe,endAngle:se,counterclockwise:Ee})},w.prototype.arcTo=function(z,G,ie,fe,se){throw new Error("arcTo not implemented.")},w.prototype.rect=function(z,G,ie,fe){if(isNaN(z)||isNaN(G)||isNaN(ie)||isNaN(fe))throw Fn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(z,G),this.lineTo(z+ie,G),this.lineTo(z+ie,G+fe),this.lineTo(z,G+fe),this.lineTo(z,G),this.lineTo(z+ie,G),this.lineTo(z,G)},w.prototype.fillRect=function(z,G,ie,fe){if(isNaN(z)||isNaN(G)||isNaN(ie)||isNaN(fe))throw Fn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!A.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(z,G,ie,fe),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},w.prototype.strokeRect=function(z,G,ie,fe){if(isNaN(z)||isNaN(G)||isNaN(ie)||isNaN(fe))throw Fn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");U.call(this)||(this.beginPath(),this.rect(z,G,ie,fe),this.stroke())},w.prototype.clearRect=function(z,G,ie,fe){if(isNaN(z)||isNaN(G)||isNaN(ie)||isNaN(fe))throw Fn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(z,G,ie,fe))},w.prototype.save=function(z){z=typeof z!="boolean"||z;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),z){this.ctx.fontSize=this.pdf.internal.getFontSize();var fe=new S(this.ctx);this.ctxStack.push(this.ctx),this.ctx=fe}},w.prototype.restore=function(z){z=typeof z!="boolean"||z;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("Q");this.pdf.setPage(G),z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var E=function(z){var G,ie,fe,se;if(z.isCanvasGradient===!0&&(z=z.getColor()),!z)return{r:0,g:0,b:0,a:0,style:z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(z))G=0,ie=0,fe=0,se=0;else{var Ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(z);if(Ee!==null)G=parseInt(Ee[1]),ie=parseInt(Ee[2]),fe=parseInt(Ee[3]),se=1;else if((Ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(z))!==null)G=parseInt(Ee[1]),ie=parseInt(Ee[2]),fe=parseInt(Ee[3]),se=parseFloat(Ee[4]);else{if(se=1,typeof z=="string"&&z.charAt(0)!=="#"){var be=new Z3(z);z=be.ok?be.toHex():"#000000"}z.length===4?(G=z.substring(1,2),G+=G,ie=z.substring(2,3),ie+=ie,fe=z.substring(3,4),fe+=fe):(G=z.substring(1,3),ie=z.substring(3,5),fe=z.substring(5,7)),G=parseInt(G,16),ie=parseInt(ie,16),fe=parseInt(fe,16)}}return{r:G,g:ie,b:fe,a:se,style:z}},A=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},U=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(z,G,ie,fe){if(isNaN(G)||isNaN(ie)||typeof z!="string")throw Fn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(fe=isNaN(fe)?void 0:fe,!A.call(this)){var se=ue(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;L.call(this,{text:z,x:G,y:ie,scale:Ee,angle:se,align:this.textAlign,maxWidth:fe})}},w.prototype.strokeText=function(z,G,ie,fe){if(isNaN(G)||isNaN(ie)||typeof z!="string")throw Fn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!U.call(this)){fe=isNaN(fe)?void 0:fe;var se=ue(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;L.call(this,{text:z,x:G,y:ie,scale:Ee,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:fe})}},w.prototype.measureText=function(z){if(typeof z!="string")throw Fn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,ie=this.pdf.internal.scaleFactor,fe=G.internal.getFontSize(),se=G.getStringUnitWidth(z)*fe/G.internal.scaleFactor,Ee=function(be){var Ce=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ce}}),this};return new Ee({width:se*=Math.round(96*ie/72*1e4)/1e4})},w.prototype.scale=function(z,G){if(isNaN(z)||isNaN(G))throw Fn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ie=new m(z,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(ie)},w.prototype.rotate=function(z){if(isNaN(z))throw Fn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new m(Math.cos(z),Math.sin(z),-Math.sin(z),Math.cos(z),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},w.prototype.translate=function(z,G){if(isNaN(z)||isNaN(G))throw Fn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ie=new m(1,0,0,1,z,G);this.ctx.transform=this.ctx.transform.multiply(ie)},w.prototype.transform=function(z,G,ie,fe,se,Ee){if(isNaN(z)||isNaN(G)||isNaN(ie)||isNaN(fe)||isNaN(se)||isNaN(Ee))throw Fn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var be=new m(z,G,ie,fe,se,Ee);this.ctx.transform=this.ctx.transform.multiply(be)},w.prototype.setTransform=function(z,G,ie,fe,se,Ee){z=isNaN(z)?1:z,G=isNaN(G)?0:G,ie=isNaN(ie)?0:ie,fe=isNaN(fe)?1:fe,se=isNaN(se)?0:se,Ee=isNaN(Ee)?0:Ee,this.ctx.transform=new m(z,G,ie,fe,se,Ee)};var O=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(z,G,ie,fe,se,Ee,be,Ce,We){var Oe=this.pdf.getImageProperties(z),tt=1,qe=1,ut=1,Le=1;fe!==void 0&&Ce!==void 0&&(ut=Ce/fe,Le=We/se,tt=Oe.width/fe*Ce/fe,qe=Oe.height/se*We/se),Ee===void 0&&(Ee=G,be=ie,G=0,ie=0),fe!==void 0&&Ce===void 0&&(Ce=fe,We=se),fe===void 0&&Ce===void 0&&(Ce=Oe.width,We=Oe.height);for(var me,pt=this.ctx.transform.decompose(),Ve=ue(pt.rotate.shx),Be=new m,lt=(Be=(Be=(Be=Be.multiply(pt.translate)).multiply(pt.skew)).multiply(pt.scale)).applyToRectangle(new p(Ee-G*ut,be-ie*Le,fe*tt,se*qe)),Ue=H.call(this,lt),Te=[],ze=0;ze<Ue.length;ze+=1)Te.indexOf(Ue[ze])===-1&&Te.push(Ue[ze]);if(D(Te),this.autoPaging)for(var Xe=Te[0],vt=Te[Te.length-1],mt=Xe;mt<vt+1;mt++){this.pdf.setPage(mt);var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Lt=mt===1?this.posY+this.margin[0]:this.margin[0],ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Mt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=mt===1?0:ct+(mt-2)*Mt;if(this.ctx.clip_path.length!==0){var vn=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(me,this.posX+this.margin[3],-ft+Lt+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=vn}var Et=JSON.parse(JSON.stringify(lt));Et=T([Et],this.posX+this.margin[3],-ft+Lt+this.ctx.prevPageLastElemOffset)[0];var ot=(mt>Xe||mt<vt)&&O.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,Mt,null).clip().discardPath()),this.pdf.addImage(z,"JPEG",Et.x,Et.y,Et.w,Et.h,null,null,Ve),ot&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(z,"JPEG",lt.x,lt.y,lt.w,lt.h,null,null,Ve)};var H=function(z,G,ie){var fe=[];G=G||this.pdf.internal.pageSize.width,ie=ie||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(z.type){default:case"mt":case"lt":fe.push(Math.floor((z.y+se)/ie)+1);break;case"arc":fe.push(Math.floor((z.y+se-z.radius)/ie)+1),fe.push(Math.floor((z.y+se+z.radius)/ie)+1);break;case"qct":var Ee=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x,z.y);fe.push(Math.floor((Ee.y+se)/ie)+1),fe.push(Math.floor((Ee.y+Ee.h+se)/ie)+1);break;case"bct":var be=ye(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x2,z.y2,z.x,z.y);fe.push(Math.floor((be.y+se)/ie)+1),fe.push(Math.floor((be.y+be.h+se)/ie)+1);break;case"rect":fe.push(Math.floor((z.y+se)/ie)+1),fe.push(Math.floor((z.y+z.h+se)/ie)+1)}for(var Ce=0;Ce<fe.length;Ce+=1)for(;this.pdf.internal.getNumberOfPages()<fe[Ce];)_.call(this);return fe},_=function(){var z=this.fillStyle,G=this.strokeStyle,ie=this.font,fe=this.lineCap,se=this.lineWidth,Ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=z,this.strokeStyle=G,this.font=ie,this.lineCap=fe,this.lineWidth=se,this.lineJoin=Ee},T=function(z,G,ie){for(var fe=0;fe<z.length;fe++)switch(z[fe].type){case"bct":z[fe].x2+=G,z[fe].y2+=ie;case"qct":z[fe].x1+=G,z[fe].y1+=ie;case"mt":case"lt":case"arc":default:z[fe].x+=G,z[fe].y+=ie}return z},D=function(z){return z.sort(function(G,ie){return G-ie})},j=function(z,G){for(var ie,fe,se=this.fillStyle,Ee=this.strokeStyle,be=this.lineCap,Ce=this.lineWidth,We=Math.abs(Ce*this.ctx.transform.scaleX),Oe=this.lineJoin,tt=JSON.parse(JSON.stringify(this.path)),qe=JSON.parse(JSON.stringify(this.path)),ut=[],Le=0;Le<qe.length;Le++)if(qe[Le].x!==void 0)for(var me=H.call(this,qe[Le]),pt=0;pt<me.length;pt+=1)ut.indexOf(me[pt])===-1&&ut.push(me[pt]);for(var Ve=0;Ve<ut.length;Ve++)for(;this.pdf.internal.getNumberOfPages()<ut[Ve];)_.call(this);if(D(ut),this.autoPaging)for(var Be=ut[0],lt=ut[ut.length-1],Ue=Be;Ue<lt+1;Ue++){this.pdf.setPage(Ue),this.fillStyle=se,this.strokeStyle=Ee,this.lineCap=be,this.lineWidth=We,this.lineJoin=Oe;var Te=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ze=Ue===1?this.posY+this.margin[0]:this.margin[0],Xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],vt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=Ue===1?0:Xe+(Ue-2)*vt;if(this.ctx.clip_path.length!==0){var _t=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(ie,this.posX+this.margin[3],-mt+ze+this.ctx.prevPageLastElemOffset),q.call(this,z,!0),this.path=_t}if(fe=JSON.parse(JSON.stringify(tt)),this.path=T(fe,this.posX+this.margin[3],-mt+ze+this.ctx.prevPageLastElemOffset),G===!1||Ue===0){var Lt=(Ue>Be||Ue<lt)&&O.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Te,vt,null).clip().discardPath()),q.call(this,z,G),Lt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ce}else this.lineWidth=We,q.call(this,z,G),this.lineWidth=Ce;this.path=tt},q=function(z,G){if((z!=="stroke"||G||!U.call(this))&&(z==="stroke"||G||!A.call(this))){for(var ie,fe,se=[],Ee=this.path,be=0;be<Ee.length;be++){var Ce=Ee[be];switch(Ce.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:Ce,deltas:[],abs:[]});break;case"lt":var We=se.length;if(Ee[be-1]&&!isNaN(Ee[be-1].x)&&(ie=[Ce.x-Ee[be-1].x,Ce.y-Ee[be-1].y],We>0)){for(;We>=0;We--)if(se[We-1].close!==!0&&se[We-1].begin!==!0){se[We-1].deltas.push(ie),se[We-1].abs.push(Ce);break}}break;case"bct":ie=[Ce.x1-Ee[be-1].x,Ce.y1-Ee[be-1].y,Ce.x2-Ee[be-1].x,Ce.y2-Ee[be-1].y,Ce.x-Ee[be-1].x,Ce.y-Ee[be-1].y],se[se.length-1].deltas.push(ie);break;case"qct":var Oe=Ee[be-1].x+2/3*(Ce.x1-Ee[be-1].x),tt=Ee[be-1].y+2/3*(Ce.y1-Ee[be-1].y),qe=Ce.x+2/3*(Ce.x1-Ce.x),ut=Ce.y+2/3*(Ce.y1-Ce.y),Le=Ce.x,me=Ce.y;ie=[Oe-Ee[be-1].x,tt-Ee[be-1].y,qe-Ee[be-1].x,ut-Ee[be-1].y,Le-Ee[be-1].x,me-Ee[be-1].y],se[se.length-1].deltas.push(ie);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(Ce)}}fe=G?null:z==="stroke"?"stroke":"fill";for(var pt=!1,Ve=0;Ve<se.length;Ve++)if(se[Ve].arc)for(var Be=se[Ve].abs,lt=0;lt<Be.length;lt++){var Ue=Be[lt];Ue.type==="arc"?R.call(this,Ue.x,Ue.y,Ue.radius,Ue.startAngle,Ue.endAngle,Ue.counterclockwise,void 0,G,!pt):re.call(this,Ue.x,Ue.y),pt=!0}else if(se[Ve].close===!0)this.pdf.internal.out("h"),pt=!1;else if(se[Ve].begin!==!0){var Te=se[Ve].start.x,ze=se[Ve].start.y;ce.call(this,se[Ve].deltas,Te,ze),pt=!0}fe&&M.call(this,fe),G&&J.call(this)}},K=function(z){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ie=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return z-ie;case"top":return z+G-ie;case"hanging":return z+G-2*ie;case"middle":return z+G/2-ie;case"ideographic":return z;case"alphabetic":default:return z}},P=function(z){return z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var z=function(){};return z.colorStops=[],z.addColorStop=function(G,ie){this.colorStops.push([G,ie])},z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},z.isCanvasGradient=!0,z},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(z,G,ie,fe,se,Ee,be,Ce,We){for(var Oe=Q.call(this,ie,fe,se,Ee),tt=0;tt<Oe.length;tt++){var qe=Oe[tt];tt===0&&(We?F.call(this,qe.x1+z,qe.y1+G):re.call(this,qe.x1+z,qe.y1+G)),ne.call(this,z,G,qe.x2,qe.y2,qe.x3,qe.y3,qe.x4,qe.y4)}Ce?J.call(this):M.call(this,be)},M=function(z){switch(z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},J=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(z,G){this.pdf.internal.out(n(z)+" "+r(G)+" m")},L=function(z){var G;switch(z.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var ie=this.pdf.getTextDimensions(z.text),fe=K.call(this,z.y),se=P.call(this,fe)-ie.h,Ee=this.ctx.transform.applyToPoint(new f(z.x,fe)),be=this.ctx.transform.decompose(),Ce=new m;Ce=(Ce=(Ce=Ce.multiply(be.translate)).multiply(be.skew)).multiply(be.scale);for(var We,Oe,tt,qe=this.ctx.transform.applyToRectangle(new p(z.x,fe,ie.w,ie.h)),ut=Ce.applyToRectangle(new p(z.x,se,ie.w,ie.h)),Le=H.call(this,ut),me=[],pt=0;pt<Le.length;pt+=1)me.indexOf(Le[pt])===-1&&me.push(Le[pt]);if(D(me),this.autoPaging)for(var Ve=me[0],Be=me[me.length-1],lt=Ve;lt<Be+1;lt++){this.pdf.setPage(lt);var Ue=lt===1?this.posY+this.margin[0]:this.margin[0],Te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ze=this.pdf.internal.pageSize.height-this.margin[2],Xe=ze-this.margin[0],vt=this.pdf.internal.pageSize.width-this.margin[1],mt=vt-this.margin[3],_t=lt===1?0:Te+(lt-2)*Xe;if(this.ctx.clip_path.length!==0){var Lt=this.path;We=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(We,this.posX+this.margin[3],-1*_t+Ue),q.call(this,"fill",!0),this.path=Lt}var ct=T([JSON.parse(JSON.stringify(ut))],this.posX+this.margin[3],-_t+Ue+this.ctx.prevPageLastElemOffset)[0];z.scale>=.01&&(Oe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Oe*z.scale),tt=this.lineWidth,this.lineWidth=tt*z.scale);var Mt=this.autoPaging!=="text";if(Mt||ct.y+ct.h<=ze){if(Mt||ct.y>=Ue&&ct.x<=vt){var ft=Mt?z.text:this.pdf.splitTextToSize(z.text,z.maxWidth||vt-ct.x)[0],vn=T([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-_t+Ue+this.ctx.prevPageLastElemOffset)[0],Et=Mt&&(lt>Ve||lt<Be)&&O.call(this);Et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,Xe,null).clip().discardPath()),this.pdf.text(ft,vn.x,vn.y,{angle:z.angle,align:G,renderingMode:z.renderingMode}),Et&&this.pdf.restoreGraphicsState()}}else ct.y<ze&&(this.ctx.prevPageLastElemOffset+=ze-ct.y);z.scale>=.01&&(this.pdf.setFontSize(Oe),this.lineWidth=tt)}else z.scale>=.01&&(Oe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Oe*z.scale),tt=this.lineWidth,this.lineWidth=tt*z.scale),this.pdf.text(z.text,Ee.x+this.posX,Ee.y+this.posY,{angle:z.angle,align:G,renderingMode:z.renderingMode,maxWidth:z.maxWidth}),z.scale>=.01&&(this.pdf.setFontSize(Oe),this.lineWidth=tt)},re=function(z,G,ie,fe){ie=ie||0,fe=fe||0,this.pdf.internal.out(n(z+ie)+" "+r(G+fe)+" l")},ce=function(z,G,ie){return this.pdf.lines(z,G,ie,null,null)},ne=function(z,G,ie,fe,se,Ee,be,Ce){this.pdf.internal.out([t(s(ie+z)),t(o(fe+G)),t(s(se+z)),t(o(Ee+G)),t(s(be+z)),t(o(Ce+G)),"c"].join(" "))},Q=function(z,G,ie,fe){for(var se=2*Math.PI,Ee=Math.PI/2;G>ie;)G-=se;var be=Math.abs(ie-G);be<se&&fe&&(be=se-be);for(var Ce=[],We=fe?-1:1,Oe=G;be>1e-5;){var tt=Oe+We*Math.min(be,Ee);Ce.push(W.call(this,z,Oe,tt)),be-=Math.abs(tt-Oe),Oe=tt}return Ce},W=function(z,G,ie){var fe=(ie-G)/2,se=z*Math.cos(fe),Ee=z*Math.sin(fe),be=se,Ce=-Ee,We=be*be+Ce*Ce,Oe=We+be*se+Ce*Ee,tt=4/3*(Math.sqrt(2*We*Oe)-Oe)/(be*Ee-Ce*se),qe=be-tt*Ce,ut=Ce+tt*be,Le=qe,me=-ut,pt=fe+G,Ve=Math.cos(pt),Be=Math.sin(pt);return{x1:z*Math.cos(G),y1:z*Math.sin(G),x2:qe*Ve-ut*Be,y2:qe*Be+ut*Ve,x3:Le*Ve-me*Be,y3:Le*Be+me*Ve,x4:z*Math.cos(ie),y4:z*Math.sin(ie)}},ue=function(z){return 180*z/Math.PI},oe=function(z,G,ie,fe,se,Ee){var be=z+.5*(ie-z),Ce=G+.5*(fe-G),We=se+.5*(ie-se),Oe=Ee+.5*(fe-Ee),tt=Math.min(z,se,be,We),qe=Math.max(z,se,be,We),ut=Math.min(G,Ee,Ce,Oe),Le=Math.max(G,Ee,Ce,Oe);return new p(tt,ut,qe-tt,Le-ut)},ye=function(z,G,ie,fe,se,Ee,be,Ce){var We,Oe,tt,qe,ut,Le,me,pt,Ve,Be,lt,Ue,Te,ze,Xe=ie-z,vt=fe-G,mt=se-ie,_t=Ee-fe,Lt=be-se,ct=Ce-Ee;for(Oe=0;Oe<41;Oe++)Ve=(me=(tt=z+(We=Oe/40)*Xe)+We*((ut=ie+We*mt)-tt))+We*(ut+We*(se+We*Lt-ut)-me),Be=(pt=(qe=G+We*vt)+We*((Le=fe+We*_t)-qe))+We*(Le+We*(Ee+We*ct-Le)-pt),Oe==0?(lt=Ve,Ue=Be,Te=Ve,ze=Be):(lt=Math.min(lt,Ve),Ue=Math.min(Ue,Be),Te=Math.max(Te,Ve),ze=Math.max(ze,Be));return new p(Math.round(lt),Math.round(Ue),Math.round(Te-lt),Math.round(ze-Ue))},xe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var z,G,ie=(z=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:z,lineDashOffset:G}));this.prevLineDash!==ie&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ie)}}})(kt.API),function(e){var t=function(o){var f,p,m,y,S,w,E,A,U,O;for(p=[],m=0,y=(o+=f="\0\0\0\0".slice(o.length%4||4)).length;y>m;m+=4)(S=(o.charCodeAt(m)<<24)+(o.charCodeAt(m+1)<<16)+(o.charCodeAt(m+2)<<8)+o.charCodeAt(m+3))!==0?(w=(S=((S=((S=((S=(S-(O=S%85))/85)-(U=S%85))/85)-(A=S%85))/85)-(E=S%85))/85)%85,p.push(w+33,E+33,A+33,U+33,O+33)):p.push(122);return function(H,_){for(var T=_;T>0;T--)H.pop()}(p,f.length),String.fromCharCode.apply(String,p)+"~>"},n=function(o){var f,p,m,y,S,w=String,E="length",A=255,U="charCodeAt",O="slice",H="replace";for(o[O](-2),o=o[O](0,-2)[H](/\s/g,"")[H]("z","!!!!!"),m=[],y=0,S=(o+=f="uuuuu"[O](o[E]%5||5))[E];S>y;y+=5)p=52200625*(o[U](y)-33)+614125*(o[U](y+1)-33)+7225*(o[U](y+2)-33)+85*(o[U](y+3)-33)+(o[U](y+4)-33),m.push(A&p>>24,A&p>>16,A&p>>8,A&p);return function(_,T){for(var D=T;D>0;D--)_.pop()}(m,f[E]),w.fromCharCode.apply(w,m)},r=function(o){var f=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),f.test(o)===!1)return"";for(var p="",m=0;m<o.length;m+=2)p+=String.fromCharCode("0x"+(o[m]+o[m+1]));return p},s=function(o){for(var f=new Uint8Array(o.length),p=o.length;p--;)f[p]=o.charCodeAt(p);return o=(f=k1(f)).reduce(function(m,y){return m+String.fromCharCode(y)},"")};e.processDataByFilters=function(o,f){var p=0,m=o||"",y=[];for(typeof(f=f||[])=="string"&&(f=[f]),p=0;p<f.length;p+=1)switch(f[p]){case"ASCII85Decode":case"/ASCII85Decode":m=n(m),y.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=t(m),y.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=r(m),y.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=m.split("").map(function(S){return("0"+S.charCodeAt().toString(16)).slice(-2)}).join("")+">",y.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=s(m),y.push("/FlateDecode");break;default:throw new Error('The filter: "'+f[p]+'" is not implemented')}return{data:m,reverseChain:y.reverse().join(" ")}}}(kt.API),function(e){e.loadFile=function(t,n,r){return function(s,o,f){o=o!==!1,f=typeof f=="function"?f:function(){};var p=void 0;try{p=function(m,y,S){var w=new XMLHttpRequest,E=0,A=function(U){var O=U.length,H=[],_=String.fromCharCode;for(E=0;E<O;E+=1)H.push(_(255&U.charCodeAt(E)));return H.join("")};if(w.open("GET",m,!y),w.overrideMimeType("text/plain; charset=x-user-defined"),y===!1&&(w.onload=function(){w.status===200?S(A(this.responseText)):S(void 0)}),w.send(null),y&&w.status===200)return A(w.responseText)}(s,o,f)}catch{}return p}(t,n,r)},e.loadImageFile=e.loadFile}(kt.API),function(e){function t(){return(Bt.html2canvas?Promise.resolve(Bt.html2canvas):R1(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load html2canvas: "+f))}).then(function(f){return f.default?f.default:f})}function n(){return(Bt.DOMPurify?Promise.resolve(Bt.DOMPurify):R1(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load dompurify: "+f))}).then(function(f){return f.default?f.default:f})}var r=function(f){var p=On(f);return p==="undefined"?"undefined":p==="string"||f instanceof String?"string":p==="number"||f instanceof Number?"number":p==="function"||f instanceof Function?"function":f&&f.constructor===Array?"array":f&&f.nodeType===1?"element":p==="object"?"object":"unknown"},s=function(f,p){var m=document.createElement(f);for(var y in p.className&&(m.className=p.className),p.innerHTML&&p.dompurify&&(m.innerHTML=p.dompurify.sanitize(p.innerHTML)),p.style)m.style[y]=p.style[y];return m},o=function f(p){var m=Object.assign(f.convert(Promise.resolve()),JSON.parse(JSON.stringify(f.template))),y=f.convert(Promise.resolve(),m);return y=(y=y.setProgress(1,f,1,[f])).set(p)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(f,p){return f.__proto__=p||o.prototype,f},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(f,p){return this.then(function(){switch(p=p||function(m){switch(r(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(f)){case"string":return this.then(n).then(function(m){return this.set({src:s("div",{innerHTML:f,dompurify:m})})});case"element":return this.set({src:f});case"canvas":return this.set({canvas:f});case"img":return this.set({img:f});default:return this.error("Unknown source type.")}})},o.prototype.to=function(f){switch(f){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var f={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},p=function m(y,S){for(var w=y.nodeType===3?document.createTextNode(y.nodeValue):y.cloneNode(!1),E=y.firstChild;E;E=E.nextSibling)S!==!0&&E.nodeType===1&&E.nodeName==="SCRIPT"||w.appendChild(m(E,S));return y.nodeType===1&&(y.nodeName==="CANVAS"?(w.width=y.width,w.height=y.height,w.getContext("2d").drawImage(y,0,0)):y.nodeName!=="TEXTAREA"&&y.nodeName!=="SELECT"||(w.value=y.value),w.addEventListener("load",function(){w.scrollTop=y.scrollTop,w.scrollLeft=y.scrollLeft},!0)),w}(this.prop.src,this.opt.html2canvas.javascriptEnabled);p.tagName==="BODY"&&(f.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:f}),this.prop.container.appendChild(p),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(t).then(function(p){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,p(this.prop.container,m)}).then(function(p){(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(t).then(function(p){var m=this.opt.jsPDF,y=this.opt.fontFaces,S=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:S,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=y,y)for(var E=0;E<y.length;++E){var A=y[E],U=A.src.find(function(O){return O.format==="truetype"});U&&m.addFont(U.url,A.ref.name,A.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,m.context2d.save(!0),p(this.prop.container,w)}).then(function(p){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var f=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=f})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(f,p,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(f,p):this.outputPdf(f,p)},o.prototype.outputPdf=function(f,p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(f,p)})},o.prototype.outputImg=function(f){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(f){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+f+'" is not supported.'}})},o.prototype.save=function(f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(f?{filename:f}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(f){if(r(f)!=="object")return this;var p=Object.keys(f||{}).map(function(m){if(m in o.template.prop)return function(){this.prop[m]=f[m]};switch(m){case"margin":return this.setMargin.bind(this,f.margin);case"jsPDF":return function(){return this.opt.jsPDF=f.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,f.pageSize);default:return function(){this.opt[m]=f[m]}}},this);return this.then(function(){return this.thenList(p)})},o.prototype.get=function(f,p){return this.then(function(){var m=f in o.template.prop?this.prop[f]:this.opt[f];return p?p(m):m})},o.prototype.setMargin=function(f){return this.then(function(){switch(r(f)){case"number":f=[f,f,f,f];case"array":if(f.length===2&&(f=[f[0],f[1],f[0],f[1]]),f.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=f}).then(this.setPageSize)},o.prototype.setPageSize=function(f){function p(m,y){return Math.floor(m*y/72*96)}return this.then(function(){(f=f||kt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(f.inner={width:f.width-this.opt.margin[1]-this.opt.margin[3],height:f.height-this.opt.margin[0]-this.opt.margin[2]},f.inner.px={width:p(f.inner.width,f.k),height:p(f.inner.height,f.k)},f.inner.ratio=f.inner.height/f.inner.width),this.prop.pageSize=f})},o.prototype.setProgress=function(f,p,m,y){return f!=null&&(this.progress.val=f),p!=null&&(this.progress.state=p),m!=null&&(this.progress.n=m),y!=null&&(this.progress.stack=y),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(f,p,m,y){return this.setProgress(f?this.progress.val+f:null,p||null,m?this.progress.n+m:null,y?this.progress.stack.concat(y):null)},o.prototype.then=function(f,p){var m=this;return this.thenCore(f,p,function(y,S){return m.updateProgress(null,null,1,[y]),Promise.prototype.then.call(this,function(w){return m.updateProgress(null,y),w}).then(y,S).then(function(w){return m.updateProgress(1),w})})},o.prototype.thenCore=function(f,p,m){m=m||Promise.prototype.then,f&&(f=f.bind(this)),p&&(p=p.bind(this));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),S=m.call(y,f,p);return o.convert(S,this.__proto__)},o.prototype.thenExternal=function(f,p){return Promise.prototype.then.call(this,f,p)},o.prototype.thenList=function(f){var p=this;return f.forEach(function(m){p=p.thenCore(m)}),p},o.prototype.catch=function(f){f&&(f=f.bind(this));var p=Promise.prototype.catch.call(this,f);return o.convert(p,this)},o.prototype.catchExternal=function(f){return Promise.prototype.catch.call(this,f)},o.prototype.error=function(f){return this.then(function(){throw new Error(f)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,kt.getPageSize=function(f,p,m){if(On(f)==="object"){var y=f;f=y.orientation,p=y.unit||p,m=y.format||m}p=p||"mm",m=m||"a4",f=(""+(f||"P")).toLowerCase();var S,w=(""+m).toLowerCase(),E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":S=1;break;case"mm":S=72/25.4;break;case"cm":S=72/2.54;break;case"in":S=72;break;case"px":S=.75;break;case"pc":case"em":S=12;break;case"ex":S=6;break;default:throw"Invalid unit: "+p}var A,U=0,O=0;if(E.hasOwnProperty(w))U=E[w][1]/S,O=E[w][0]/S;else try{U=m[1],O=m[0]}catch{throw new Error("Invalid format: "+m)}if(f==="p"||f==="portrait")f="p",O>U&&(A=O,O=U,U=A);else{if(f!=="l"&&f!=="landscape")throw"Invalid orientation: "+f;f="l",U>O&&(A=O,O=U,U=A)}return{width:O,height:U,unit:p,k:S,orientation:f}},e.html=function(f,p){(p=p||{}).callback=p.callback||function(){},p.html2canvas=p.html2canvas||{},p.html2canvas.canvas=p.html2canvas.canvas||this.canvas,p.jsPDF=p.jsPDF||this,p.fontFaces=p.fontFaces?p.fontFaces.map(H1):null;var m=new o(p);return p.worker?m:m.from(f).doCallback()}}(kt.API),kt.API.addJS=function(e){return pm=e,this.internal.events.subscribe("postPutResources",function(){l0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(l0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),gm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+pm+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){l0!==void 0&&gm!==void 0&&this.internal.out("/Names <</JavaScript "+l0+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),o=0;o<s.length;o++){var f=s[o],p=r.exec(f);if(p!=null){var m=p[1];n.internal.newObjectDeferredBegin(m,!1)}n.internal.write(f)}if(this.outline.createNamedDestinations){var y=this.internal.pages.length,S=[];for(o=0;o<y;o++){var w=n.internal.newObject();S.push(w);var E=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+E.objId+" 0 R /XYZ null null null]>> endobj")}var A=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<S.length;o++)n.internal.write("(page_"+(o+1)+")"+S[o]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+A+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,o){var f={title:s,options:o,children:[]};return r==null&&(r=this.root),r.children.push(f),f},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var f=r.children[o];this.objStart(f),this.line("/Title "+this.makeString(f.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),f.children.length>0&&(this.line("/First "+this.makeRef(f.children[0])),this.line("/Last "+this.makeRef(f.children[f.children.length-1])));var p=this.count=this.count_r({count:0},f);if(p>0&&this.line("/Count "+p),f.options&&f.options.pageNumber){var m=n.internal.getPageInfo(f.options.pageNumber);this.line("/Dest ["+m.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var y=0;y<r.children.length;y++)this.renderItems(r.children[y])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var o=0;o<s.children.length;o++)r.count++,this.count_r(r,s.children[o]);return r.count}}])}(kt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,s,o,f,p){var m,y=this.decode.DCT_DECODE,S=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=f||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(m=function(w){for(var E,A=256*w.charCodeAt(4)+w.charCodeAt(5),U=w.length,O={width:0,height:0,numcomponents:1},H=4;H<U;H+=2){if(H+=A,t.indexOf(w.charCodeAt(H+1))!==-1){E=256*w.charCodeAt(H+5)+w.charCodeAt(H+6),O={width:256*w.charCodeAt(H+7)+w.charCodeAt(H+8),height:E,numcomponents:w.charCodeAt(H+9)};break}A=256*w.charCodeAt(H+2)+w.charCodeAt(H+3)}return O}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:p=this.color_spaces.DEVICE_GRAY;break;case 4:p=this.color_spaces.DEVICE_CMYK;break;case 3:p=this.color_spaces.DEVICE_RGB}S={data:n,width:m.width,height:m.height,colorSpace:p,bitsPerComponent:8,filter:y,index:r,alias:s}}return S}}(kt.API);var rc,c0,mm,xm,ym,Qw=function(){var e,t,n;function r(o){var f,p,m,y,S,w,E,A,U,O,H,_,T,D;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},w=null;;){switch(f=this.readUInt32(),U=(function(){var j,q;for(q=[],j=0;j<4;++j)q.push(String.fromCharCode(this.data[this.pos++]));return q}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(f);break;case"fcTL":w&&this.animation.frames.push(w),this.pos+=4,w={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},S=this.readUInt16(),y=this.readUInt16()||100,w.delay=1e3*S/y,w.disposeOp=this.data[this.pos++],w.blendOp=this.data[this.pos++],w.data=[];break;case"IDAT":case"fdAT":for(U==="fdAT"&&(this.pos+=4,f-=4),o=(w!=null?w.data:void 0)||this.imgData,_=0;0<=f?_<f:_>f;0<=f?++_:--_)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(m=this.palette.length/3,this.transparency.indexed=this.read(f),this.transparency.indexed.length>m)throw new Error("More transparent colors than palette size");if((O=m-this.transparency.indexed.length)>0)for(T=0;0<=O?T<O:T>O;0<=O?++T:--T)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(f)[0];break;case 2:this.transparency.rgb=this.read(f)}break;case"tEXt":E=(H=this.read(f)).indexOf(0),A=String.fromCharCode.apply(String,H.slice(0,E)),this.text[A]=String.fromCharCode.apply(String,H.slice(E+1));break;case"IEND":return w&&this.animation.frames.push(w),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(D=this.colorType)===4||D===6,p=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*p,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=f}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var f,p;for(p=[],f=0;0<=o?f<o:f>o;0<=o?++f:--f)p.push(this.data[this.pos++]);return p},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var f=this.pixelBitlength/8,p=new Uint8Array(this.width*this.height*f),m=0,y=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function S(w,E,A,U){var O,H,_,T,D,j,q,K,P,R,M,J,F,L,re,ce,ne,Q,W,ue,oe,ye=Math.ceil((y.width-w)/A),xe=Math.ceil((y.height-E)/U),z=y.width==ye&&y.height==xe;for(L=f*ye,J=z?p:new Uint8Array(L*xe),j=o.length,F=0,H=0;F<xe&&m<j;){switch(o[m++]){case 0:for(T=ne=0;ne<L;T=ne+=1)J[H++]=o[m++];break;case 1:for(T=Q=0;Q<L;T=Q+=1)O=o[m++],D=T<f?0:J[H-f],J[H++]=(O+D)%256;break;case 2:for(T=W=0;W<L;T=W+=1)O=o[m++],_=(T-T%f)/f,re=F&&J[(F-1)*L+_*f+T%f],J[H++]=(re+O)%256;break;case 3:for(T=ue=0;ue<L;T=ue+=1)O=o[m++],_=(T-T%f)/f,D=T<f?0:J[H-f],re=F&&J[(F-1)*L+_*f+T%f],J[H++]=(O+Math.floor((D+re)/2))%256;break;case 4:for(T=oe=0;oe<L;T=oe+=1)O=o[m++],_=(T-T%f)/f,D=T<f?0:J[H-f],F===0?re=ce=0:(re=J[(F-1)*L+_*f+T%f],ce=_&&J[(F-1)*L+(_-1)*f+T%f]),q=D+re-ce,K=Math.abs(q-D),R=Math.abs(q-re),M=Math.abs(q-ce),P=K<=R&&K<=M?D:R<=M?re:ce,J[H++]=(O+P)%256;break;default:throw new Error("Invalid filter algorithm: "+o[m-1])}if(!z){var G=((E+F*U)*y.width+w)*f,ie=F*L;for(T=0;T<ye;T+=1){for(var fe=0;fe<f;fe+=1)p[G++]=J[ie++];G+=(A-1)*f}}F++}}return o=Tw(o),y.interlaceMethod==1?(S(0,0,8,8),S(4,0,8,8),S(0,4,4,8),S(2,0,4,4),S(0,2,2,4),S(1,0,2,2),S(0,1,1,2)):S(0,0,1,1),p},r.prototype.decodePalette=function(){var o,f,p,m,y,S,w,E,A;for(p=this.palette,S=this.transparency.indexed||[],y=new Uint8Array((S.length||0)+p.length),m=0,o=0,f=w=0,E=p.length;w<E;f=w+=3)y[m++]=p[f],y[m++]=p[f+1],y[m++]=p[f+2],y[m++]=(A=S[o++])!=null?A:255;return y},r.prototype.copyToImageData=function(o,f){var p,m,y,S,w,E,A,U,O,H,_;if(m=this.colors,O=null,p=this.hasAlphaChannel,this.palette.length&&(O=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),m=4,p=!0),U=(y=o.data||o).length,w=O||f,S=E=0,m===1)for(;S<U;)A=O?4*f[S/4]:E,H=w[A++],y[S++]=H,y[S++]=H,y[S++]=H,y[S++]=p?w[A++]:255,E=A;else for(;S<U;)A=O?4*f[S/4]:E,y[S++]=w[A++],y[S++]=w[A++],y[S++]=w[A++],y[S++]=p?w[A++]:255,E=A},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var s=function(){if(Object.prototype.toString.call(Bt)==="[object Window]"){try{t=Bt.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(o){var f;if(s()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(f=new Image).src=t.toDataURL(),f;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var f,p,m,y,S,w,E,A;if(this.animation){for(A=[],p=S=0,w=(E=this.animation.frames).length;S<w;p=++S)f=E[p],m=o.createImageData(f.width,f.height),y=this.decodePixels(new Uint8Array(f.data)),this.copyToImageData(m,y),f.imageData=m,A.push(f.image=e(m));return A}},r.prototype.renderFrame=function(o,f){var p,m,y;return p=(m=this.animation.frames)[f],y=m[f-1],f===0&&o.clearRect(0,0,this.width,this.height),(y!=null?y.disposeOp:void 0)===1?o.clearRect(y.xOffset,y.yOffset,y.width,y.height):(y!=null?y.disposeOp:void 0)===2&&o.putImageData(y.imageData,y.xOffset,y.yOffset),p.blendOp===0&&o.clearRect(p.xOffset,p.yOffset,p.width,p.height),o.drawImage(p.image,p.xOffset,p.yOffset)},r.prototype.animate=function(o){var f,p,m,y,S,w,E=this;return p=0,w=this.animation,y=w.numFrames,m=w.frames,S=w.numPlays,(f=function(){var A,U;if(A=p++%y,U=m[A],E.renderFrame(o,A),y>1&&p/y<S)return E.animation._timeout=setTimeout(f,U.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var f,p;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,f=o.getContext("2d"),this.animation?(this.decodeFrames(f),this.animate(f)):(p=f.createImageData(this.width,this.height),this.copyToImageData(p,this.decodePixels()),f.putImageData(p,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Kw(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,s=e[t++],o=s>>7,f=1<<(7&s)+1;e[t++],e[t++];var p=null,m=null;o&&(p=t,m=f,t+=3*f);var y=!0,S=[],w=0,E=null,A=0,U=null;for(this.width=n,this.height=r;y&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,U=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var O=e[t++];w=e[t++]|e[t++]<<8,E=e[t++],!(1&O)&&(E=null),A=O>>2&7,t++;break;case 254:for(;;){if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var H=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,T=e[t++]|e[t++]<<8,D=e[t++]|e[t++]<<8,j=e[t++],q=j>>6&1,K=1<<(7&j)+1,P=p,R=m,M=!1;j>>7&&(M=!0,P=t,R=K,t+=3*K);var J=t;for(t++;;){var F;if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}S.push({x:H,y:_,width:T,height:D,has_local_palette:M,palette_offset:P,palette_size:R,data_offset:J,data_length:t-J,transparent_index:E,interlaced:!!q,delay:w,disposal:A});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return S.length},this.loopCount=function(){return U},this.frameInfo=function(L){if(L<0||L>=S.length)throw new Error("Frame index out of range.");return S[L]},this.decodeAndBlitFrameBGRA=function(L,re){var ce=this.frameInfo(L),ne=ce.width*ce.height,Q=new Uint8Array(ne);bm(e,ce.data_offset,Q,ne);var W=ce.palette_offset,ue=ce.transparent_index;ue===null&&(ue=256);var oe=ce.width,ye=n-oe,xe=oe,z=4*(ce.y*n+ce.x),G=4*((ce.y+ce.height)*n+ce.x),ie=z,fe=4*ye;ce.interlaced===!0&&(fe+=4*n*7);for(var se=8,Ee=0,be=Q.length;Ee<be;++Ee){var Ce=Q[Ee];if(xe===0&&(xe=oe,(ie+=fe)>=G&&(fe=4*ye+4*n*(se-1),ie=z+(oe+ye)*(se<<1),se>>=1)),Ce===ue)ie+=4;else{var We=e[W+3*Ce],Oe=e[W+3*Ce+1],tt=e[W+3*Ce+2];re[ie++]=tt,re[ie++]=Oe,re[ie++]=We,re[ie++]=255}--xe}},this.decodeAndBlitFrameRGBA=function(L,re){var ce=this.frameInfo(L),ne=ce.width*ce.height,Q=new Uint8Array(ne);bm(e,ce.data_offset,Q,ne);var W=ce.palette_offset,ue=ce.transparent_index;ue===null&&(ue=256);var oe=ce.width,ye=n-oe,xe=oe,z=4*(ce.y*n+ce.x),G=4*((ce.y+ce.height)*n+ce.x),ie=z,fe=4*ye;ce.interlaced===!0&&(fe+=4*n*7);for(var se=8,Ee=0,be=Q.length;Ee<be;++Ee){var Ce=Q[Ee];if(xe===0&&(xe=oe,(ie+=fe)>=G&&(fe=4*ye+4*n*(se-1),ie=z+(oe+ye)*(se<<1),se>>=1)),Ce===ue)ie+=4;else{var We=e[W+3*Ce],Oe=e[W+3*Ce+1],tt=e[W+3*Ce+2];re[ie++]=We,re[ie++]=Oe,re[ie++]=tt,re[ie++]=255}--xe}}}function bm(e,t,n,r){for(var s=e[t++],o=1<<s,f=o+1,p=f+1,m=s+1,y=(1<<m)-1,S=0,w=0,E=0,A=e[t++],U=new Int32Array(4096),O=null;;){for(;S<16&&A!==0;)w|=e[t++]<<S,S+=8,A===1?A=e[t++]:--A;if(S<m)break;var H=w&y;if(w>>=m,S-=m,H!==o){if(H===f)break;for(var _=H<p?H:O,T=0,D=_;D>o;)D=U[D]>>8,++T;var j=D;if(E+T+(_!==H?1:0)>r)return void Fn.log("Warning, gif stream longer than expected.");n[E++]=j;var q=E+=T;for(_!==H&&(n[E++]=j),D=_;T--;)D=U[D],n[--q]=255&D,D>>=8;O!==null&&p<4096&&(U[p++]=O<<8|j,p>=y+1&&m<12&&(++m,y=y<<1|1)),O=H}else p=f+1,y=(1<<(m=s+1))-1,O=null}return E!==r&&Fn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Ld(e){var t,n,r,s,o,f=Math.floor,p=new Array(64),m=new Array(64),y=new Array(64),S=new Array(64),w=new Array(65535),E=new Array(65535),A=new Array(64),U=new Array(64),O=[],H=0,_=7,T=new Array(64),D=new Array(64),j=new Array(64),q=new Array(256),K=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],re=[0,1,2,3,4,5,6,7,8,9,10,11],ce=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(z,G){for(var ie=0,fe=0,se=new Array,Ee=1;Ee<=16;Ee++){for(var be=1;be<=z[Ee];be++)se[G[fe]]=[],se[G[fe]][0]=ie,se[G[fe]][1]=Ee,fe++,ie++;ie*=2}return se}function W(z){for(var G=z[0],ie=z[1]-1;ie>=0;)G&1<<ie&&(H|=1<<_),ie--,--_<0&&(H==255?(ue(255),ue(0)):ue(H),_=7,H=0)}function ue(z){O.push(z)}function oe(z){ue(z>>8&255),ue(255&z)}function ye(z,G,ie,fe,se){for(var Ee,be=se[0],Ce=se[240],We=function(Be,lt){var Ue,Te,ze,Xe,vt,mt,_t,Lt,ct,Mt,ft=0;for(ct=0;ct<8;++ct){Ue=Be[ft],Te=Be[ft+1],ze=Be[ft+2],Xe=Be[ft+3],vt=Be[ft+4],mt=Be[ft+5],_t=Be[ft+6];var vn=Ue+(Lt=Be[ft+7]),Et=Ue-Lt,ot=Te+_t,gt=Te-_t,wt=ze+mt,gn=ze-mt,sn=Xe+vt,Ba=Xe-vt,Wn=vn+sn,Vt=vn-sn,rr=ot+wt,Xn=ot-wt;Be[ft]=Wn+rr,Be[ft+4]=Wn-rr;var Ut=.707106781*(Xn+Vt);Be[ft+2]=Vt+Ut,Be[ft+6]=Vt-Ut;var Wt=.382683433*((Wn=Ba+gn)-(Xn=gt+Et)),Pa=.5411961*Wn+Wt,fn=1.306562965*Xn+Wt,ar=.707106781*(rr=gn+gt),Er=Et+ar,Tt=Et-ar;Be[ft+5]=Tt+Pa,Be[ft+3]=Tt-Pa,Be[ft+1]=Er+fn,Be[ft+7]=Er-fn,ft+=8}for(ft=0,ct=0;ct<8;++ct){Ue=Be[ft],Te=Be[ft+8],ze=Be[ft+16],Xe=Be[ft+24],vt=Be[ft+32],mt=Be[ft+40],_t=Be[ft+48];var Xr=Ue+(Lt=Be[ft+56]),Wi=Ue-Lt,Xi=Te+_t,hn=Te-_t,Ln=ze+mt,zn=ze-mt,bt=Xe+vt,dr=Xe-vt,Tr=Xr+bt,Hn=Xr-bt,Zi=Xi+Ln,_r=Xi-Ln;Be[ft]=Tr+Zi,Be[ft+32]=Tr-Zi;var sr=.707106781*(_r+Hn);Be[ft+16]=Hn+sr,Be[ft+48]=Hn-sr;var Ni=.382683433*((Tr=dr+zn)-(_r=hn+Wi)),vs=.5411961*Tr+Ni,Qs=1.306562965*_r+Ni,or=.707106781*(Zi=zn+hn),mi=Wi+or,wn=Wi-or;Be[ft+40]=wn+vs,Be[ft+24]=wn-vs,Be[ft+8]=mi+Qs,Be[ft+56]=mi-Qs,ft++}for(ct=0;ct<64;++ct)Mt=Be[ct]*lt[ct],A[ct]=Mt>0?Mt+.5|0:Mt-.5|0;return A}(z,G),Oe=0;Oe<64;++Oe)U[P[Oe]]=We[Oe];var tt=U[0]-ie;ie=U[0],tt==0?W(fe[0]):(W(fe[E[Ee=32767+tt]]),W(w[Ee]));for(var qe=63;qe>0&&U[qe]==0;)qe--;if(qe==0)return W(be),ie;for(var ut,Le=1;Le<=qe;){for(var me=Le;U[Le]==0&&Le<=qe;)++Le;var pt=Le-me;if(pt>=16){ut=pt>>4;for(var Ve=1;Ve<=ut;++Ve)W(Ce);pt&=15}Ee=32767+U[Le],W(se[(pt<<4)+E[Ee]]),W(w[Ee]),Le++}return qe!=63&&W(be),ie}function xe(z){z=Math.min(Math.max(z,1),100),o!=z&&(function(G){for(var ie=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],fe=0;fe<64;fe++){var se=f((ie[fe]*G+50)/100);se=Math.min(Math.max(se,1),255),p[P[fe]]=se}for(var Ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],be=0;be<64;be++){var Ce=f((Ee[be]*G+50)/100);Ce=Math.min(Math.max(Ce,1),255),m[P[be]]=Ce}for(var We=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Oe=0,tt=0;tt<8;tt++)for(var qe=0;qe<8;qe++)y[Oe]=1/(p[P[Oe]]*We[tt]*We[qe]*8),S[Oe]=1/(m[P[Oe]]*We[tt]*We[qe]*8),Oe++}(z<50?Math.floor(5e3/z):Math.floor(200-2*z)),o=z)}this.encode=function(z,G){G&&xe(G),O=new Array,H=0,_=7,oe(65496),oe(65504),oe(16),ue(74),ue(70),ue(73),ue(70),ue(0),ue(1),ue(1),ue(0),oe(1),oe(1),ue(0),ue(0),function(){oe(65499),oe(132),ue(0);for(var Te=0;Te<64;Te++)ue(p[Te]);ue(1);for(var ze=0;ze<64;ze++)ue(m[ze])}(),function(Te,ze){oe(65472),oe(17),ue(8),oe(ze),oe(Te),ue(3),ue(1),ue(17),ue(0),ue(2),ue(17),ue(1),ue(3),ue(17),ue(1)}(z.width,z.height),function(){oe(65476),oe(418),ue(0);for(var Te=0;Te<16;Te++)ue(R[Te+1]);for(var ze=0;ze<=11;ze++)ue(M[ze]);ue(16);for(var Xe=0;Xe<16;Xe++)ue(J[Xe+1]);for(var vt=0;vt<=161;vt++)ue(F[vt]);ue(1);for(var mt=0;mt<16;mt++)ue(L[mt+1]);for(var _t=0;_t<=11;_t++)ue(re[_t]);ue(17);for(var Lt=0;Lt<16;Lt++)ue(ce[Lt+1]);for(var ct=0;ct<=161;ct++)ue(ne[ct])}(),oe(65498),oe(12),ue(3),ue(1),ue(0),ue(2),ue(17),ue(3),ue(17),ue(0),ue(63),ue(0);var ie=0,fe=0,se=0;H=0,_=7,this.encode.displayName="_encode_";for(var Ee,be,Ce,We,Oe,tt,qe,ut,Le,me=z.data,pt=z.width,Ve=z.height,Be=4*pt,lt=0;lt<Ve;){for(Ee=0;Ee<Be;){for(Oe=Be*lt+Ee,qe=-1,ut=0,Le=0;Le<64;Le++)tt=Oe+(ut=Le>>3)*Be+(qe=4*(7&Le)),lt+ut>=Ve&&(tt-=Be*(lt+1+ut-Ve)),Ee+qe>=Be&&(tt-=Ee+qe-Be+4),be=me[tt++],Ce=me[tt++],We=me[tt++],T[Le]=(K[be]+K[Ce+256>>0]+K[We+512>>0]>>16)-128,D[Le]=(K[be+768>>0]+K[Ce+1024>>0]+K[We+1280>>0]>>16)-128,j[Le]=(K[be+1280>>0]+K[Ce+1536>>0]+K[We+1792>>0]>>16)-128;ie=ye(T,y,ie,t,r),fe=ye(D,S,fe,n,s),se=ye(j,S,se,n,s),Ee+=32}lt+=8}if(_>=0){var Ue=[];Ue[1]=_+1,Ue[0]=(1<<_+1)-1,W(Ue)}return oe(65497),new Uint8Array(O)},e=e||50,function(){for(var z=String.fromCharCode,G=0;G<256;G++)q[G]=z(G)}(),t=Q(R,M),n=Q(L,re),r=Q(J,F),s=Q(ce,ne),function(){for(var z=1,G=2,ie=1;ie<=15;ie++){for(var fe=z;fe<G;fe++)E[32767+fe]=ie,w[32767+fe]=[],w[32767+fe][1]=ie,w[32767+fe][0]=fe;for(var se=-(G-1);se<=-z;se++)E[32767+se]=ie,w[32767+se]=[],w[32767+se][1]=ie,w[32767+se][0]=G-1+se;z<<=1,G<<=1}}(),function(){for(var z=0;z<256;z++)K[z]=19595*z,K[z+256>>0]=38470*z,K[z+512>>0]=7471*z+32768,K[z+768>>0]=-11059*z,K[z+1024>>0]=-21709*z,K[z+1280>>0]=32768*z+8421375,K[z+1536>>0]=-27439*z,K[z+1792>>0]=-5329*z}(),xe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Va(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function vm(e){function t(R){if(!R)throw Error("assert :P")}function n(R,M,J){for(var F=0;4>F;F++)if(R[M+F]!=J.charCodeAt(F))return!0;return!1}function r(R,M,J,F,L){for(var re=0;re<L;re++)R[M+re]=J[F+re]}function s(R,M,J,F){for(var L=0;L<F;L++)R[M+L]=J}function o(R){return new Int32Array(R)}function f(R,M){for(var J=[],F=0;F<R;F++)J.push(new M);return J}function p(R,M){var J=[];return function F(L,re,ce){for(var ne=ce[re],Q=0;Q<ne&&(L.push(ce.length>re+1?[]:new M),!(ce.length<re+1));Q++)F(L[Q],re+1,ce)}(J,0,R),J}var m=function(){var R=this;function M(g,b){for(var I=1<<b-1>>>0;g&I;)I>>>=1;return I?(g&I-1)+I:g}function J(g,b,I,k,X){t(!(k%I));do g[b+(k-=I)]=X;while(0<k)}function F(g,b,I,k,X){if(t(2328>=X),512>=X)var $=o(512);else if(($=o(X))==null)return 0;return function(te,ae,le,pe,Ne,je){var ke,De,Je=ae,Ge=1<<le,Se=o(16),_e=o(16);for(t(Ne!=0),t(pe!=null),t(te!=null),t(0<le),De=0;De<Ne;++De){if(15<pe[De])return 0;++Se[pe[De]]}if(Se[0]==Ne)return 0;for(_e[1]=0,ke=1;15>ke;++ke){if(Se[ke]>1<<ke)return 0;_e[ke+1]=_e[ke]+Se[ke]}for(De=0;De<Ne;++De)ke=pe[De],0<pe[De]&&(je[_e[ke]++]=De);if(_e[15]==1)return(pe=new L).g=0,pe.value=je[0],J(te,Je,1,Ge,pe),Ge;var Ze,rt=-1,Qe=Ge-1,At=0,dt=1,jt=1,xt=1<<le;for(De=0,ke=1,Ne=2;ke<=le;++ke,Ne<<=1){if(dt+=jt<<=1,0>(jt-=Se[ke]))return 0;for(;0<Se[ke];--Se[ke])(pe=new L).g=ke,pe.value=je[De++],J(te,Je+At,Ne,xt,pe),At=M(At,ke)}for(ke=le+1,Ne=2;15>=ke;++ke,Ne<<=1){if(dt+=jt<<=1,0>(jt-=Se[ke]))return 0;for(;0<Se[ke];--Se[ke]){if(pe=new L,(At&Qe)!=rt){for(Je+=xt,Ze=1<<(rt=ke)-le;15>rt&&!(0>=(Ze-=Se[rt]));)++rt,Ze<<=1;Ge+=xt=1<<(Ze=rt-le),te[ae+(rt=At&Qe)].g=Ze+le,te[ae+rt].value=Je-ae-rt}pe.g=ke-le,pe.value=je[De++],J(te,Je+(At>>le),Ne,xt,pe),At=M(At,ke)}}return dt!=2*_e[15]-1?0:Ge}(g,b,I,k,X,$)}function L(){this.value=this.g=0}function re(){this.value=this.g=0}function ce(){this.G=f(5,L),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=f(Mn,re)}function ne(g,b,I,k){t(g!=null),t(b!=null),t(2147483648>k),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=b,g.pa=I,g.Jd=b,g.Yc=I+k,g.Zc=4<=k?I+k-4+1:I,Ee(g)}function Q(g,b){for(var I=0;0<b--;)I|=Ce(g,128)<<b;return I}function W(g,b){var I=Q(g,b);return be(g)?-I:I}function ue(g,b,I,k){var X,$=0;for(t(g!=null),t(b!=null),t(4294967288>k),g.Sb=k,g.Ra=0,g.u=0,g.h=0,4<k&&(k=4),X=0;X<k;++X)$+=b[I+X]<<8*X;g.Ra=$,g.bb=k,g.oa=b,g.pa=I}function oe(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<va-8>>>0,++g.bb,g.u-=8;ie(g)&&(g.h=1,g.u=0)}function ye(g,b){if(t(0<=b),!g.h&&b<=rs){var I=G(g)&ao[b];return g.u+=b,oe(g),I}return g.h=1,g.u=0}function xe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(g){return g.Ra>>>(g.u&va-1)>>>0}function ie(g){return t(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>va}function fe(g,b){g.u=b,g.h=ie(g)}function se(g){g.u>=$t&&(t(g.u>=$t),oe(g))}function Ee(g){t(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(t(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function be(g){return Q(g,1)}function Ce(g,b){var I=g.Ca;0>g.b&&Ee(g);var k=g.b,X=I*b>>>8,$=(g.I>>>k>X)+0;for($?(I-=X,g.I-=X+1<<k>>>0):I=X+1,k=I,X=0;256<=k;)X+=8,k>>=8;return k=7^X+Ui[k],g.b-=k,g.Ca=(I<<k)-1,$}function We(g,b,I){g[b+0]=I>>24&255,g[b+1]=I>>16&255,g[b+2]=I>>8&255,g[b+3]=I>>0&255}function Oe(g,b){return g[b+0]<<0|g[b+1]<<8}function tt(g,b){return Oe(g,b)|g[b+2]<<16}function qe(g,b){return Oe(g,b)|Oe(g,b+2)<<16}function ut(g,b){var I=1<<b;return t(g!=null),t(0<b),g.X=o(I),g.X==null?0:(g.Mb=32-b,g.Xa=b,1)}function Le(g,b){t(g!=null),t(b!=null),t(g.Xa==b.Xa),r(b.X,0,g.X,0,1<<b.Xa)}function me(){this.X=[],this.Xa=this.Mb=0}function pt(g,b,I,k){t(I!=null),t(k!=null);var X=I[0],$=k[0];return X==0&&(X=(g*$+b/2)/b),$==0&&($=(b*X+g/2)/g),0>=X||0>=$?0:(I[0]=X,k[0]=$,1)}function Ve(g,b){return g+(1<<b)-1>>>b}function Be(g,b){return((4278255360&g)+(4278255360&b)>>>0&4278255360)+((16711935&g)+(16711935&b)>>>0&16711935)>>>0}function lt(g,b){R[b]=function(I,k,X,$,te,ae,le){var pe;for(pe=0;pe<te;++pe){var Ne=R[g](ae[le+pe-1],X,$+pe);ae[le+pe]=Be(I[k+pe],Ne)}}}function Ue(){this.ud=this.hd=this.jd=0}function Te(g,b){return((4278124286&(g^b))>>>1)+(g&b)>>>0}function ze(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Xe(g,b){return ze(g+(g-b+.5>>1))}function vt(g,b,I){return Math.abs(b-I)-Math.abs(g-I)}function mt(g,b,I,k,X,$,te){for(k=$[te-1],I=0;I<X;++I)$[te+I]=k=Be(g[b+I],k)}function _t(g,b,I,k,X){var $;for($=0;$<I;++$){var te=g[b+$],ae=te>>8&255,le=16711935&(le=(le=16711935&te)+((ae<<16)+ae));k[X+$]=(4278255360&te)+le>>>0}}function Lt(g,b){b.jd=g>>0&255,b.hd=g>>8&255,b.ud=g>>16&255}function ct(g,b,I,k,X,$){var te;for(te=0;te<k;++te){var ae=b[I+te],le=ae>>>8,pe=ae,Ne=255&(Ne=(Ne=ae>>>16)+((g.jd<<24>>24)*(le<<24>>24)>>>5));pe=255&(pe=(pe=pe+((g.hd<<24>>24)*(le<<24>>24)>>>5))+((g.ud<<24>>24)*(Ne<<24>>24)>>>5)),X[$+te]=(4278255360&ae)+(Ne<<16)+pe}}function Mt(g,b,I,k,X){R[b]=function($,te,ae,le,pe,Ne,je,ke,De){for(le=je;le<ke;++le)for(je=0;je<De;++je)pe[Ne++]=X(ae[k($[te++])])},R[g]=function($,te,ae,le,pe,Ne,je){var ke=8>>$.b,De=$.Ea,Je=$.K[0],Ge=$.w;if(8>ke)for($=(1<<$.b)-1,Ge=(1<<ke)-1;te<ae;++te){var Se,_e=0;for(Se=0;Se<De;++Se)Se&$||(_e=k(le[pe++])),Ne[je++]=X(Je[_e&Ge]),_e>>=ke}else R["VP8LMapColor"+I](le,pe,Je,Ge,Ne,je,te,ae,De)}}function ft(g,b,I,k,X){for(I=b+I;b<I;){var $=g[b++];k[X++]=$>>16&255,k[X++]=$>>8&255,k[X++]=$>>0&255}}function vn(g,b,I,k,X){for(I=b+I;b<I;){var $=g[b++];k[X++]=$>>16&255,k[X++]=$>>8&255,k[X++]=$>>0&255,k[X++]=$>>24&255}}function Et(g,b,I,k,X){for(I=b+I;b<I;){var $=(te=g[b++])>>16&240|te>>12&15,te=te>>0&240|te>>28&15;k[X++]=$,k[X++]=te}}function ot(g,b,I,k,X){for(I=b+I;b<I;){var $=(te=g[b++])>>16&248|te>>13&7,te=te>>5&224|te>>3&31;k[X++]=$,k[X++]=te}}function gt(g,b,I,k,X){for(I=b+I;b<I;){var $=g[b++];k[X++]=$>>0&255,k[X++]=$>>8&255,k[X++]=$>>16&255}}function wt(g,b,I,k,X,$){if($==0)for(I=b+I;b<I;)We(k,(($=g[b++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),X+=32;else r(k,X,g,b,I)}function gn(g,b){R[b][0]=R[g+"0"],R[b][1]=R[g+"1"],R[b][2]=R[g+"2"],R[b][3]=R[g+"3"],R[b][4]=R[g+"4"],R[b][5]=R[g+"5"],R[b][6]=R[g+"6"],R[b][7]=R[g+"7"],R[b][8]=R[g+"8"],R[b][9]=R[g+"9"],R[b][10]=R[g+"10"],R[b][11]=R[g+"11"],R[b][12]=R[g+"12"],R[b][13]=R[g+"13"],R[b][14]=R[g+"0"],R[b][15]=R[g+"0"]}function sn(g){return g==Ih||g==Dh||g==Rf||g==Rh}function Ba(){this.eb=[],this.size=this.A=this.fb=0}function Wn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Vt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ba,this.f.kb=new Wn,this.sd=null}function rr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Xn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ut(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function Wt(g,b){var I=g.T,k=b.ba.f.RGBA,X=k.eb,$=k.fb+g.ka*k.A,te=Na[b.ba.S],ae=g.y,le=g.O,pe=g.f,Ne=g.N,je=g.ea,ke=g.W,De=b.cc,Je=b.dc,Ge=b.Mc,Se=b.Nc,_e=g.ka,Ze=g.ka+g.T,rt=g.U,Qe=rt+1>>1;for(_e==0?te(ae,le,null,null,pe,Ne,je,ke,pe,Ne,je,ke,X,$,null,null,rt):(te(b.ec,b.fc,ae,le,De,Je,Ge,Se,pe,Ne,je,ke,X,$-k.A,X,$,rt),++I);_e+2<Ze;_e+=2)De=pe,Je=Ne,Ge=je,Se=ke,Ne+=g.Rc,ke+=g.Rc,$+=2*k.A,te(ae,(le+=2*g.fa)-g.fa,ae,le,De,Je,Ge,Se,pe,Ne,je,ke,X,$-k.A,X,$,rt);return le+=g.fa,g.j+Ze<g.o?(r(b.ec,b.fc,ae,le,rt),r(b.cc,b.dc,pe,Ne,Qe),r(b.Mc,b.Nc,je,ke,Qe),I--):1&Ze||te(ae,le,null,null,pe,Ne,je,ke,pe,Ne,je,ke,X,$+k.A,null,null,rt),I}function Pa(g,b,I){var k=g.F,X=[g.J];if(k!=null){var $=g.U,te=b.ba.S,ae=te==Df||te==Rf;b=b.ba.f.RGBA;var le=[0],pe=g.ka;le[0]=g.T,g.Kb&&(pe==0?--le[0]:(--pe,X[0]-=g.width),g.j+g.ka+g.T==g.o&&(le[0]=g.o-g.j-pe));var Ne=b.eb;pe=b.fb+pe*b.A,g=Vn(k,X[0],g.width,$,le,Ne,pe+(ae?0:3),b.A),t(I==le),g&&sn(te)&&Fr(Ne,pe,ae,$,le,b.A)}return 0}function fn(g){var b=g.ma,I=b.ba.S,k=11>I,X=I==_f||I==If||I==Df||I==_h||I==12||sn(I);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!Ss(b.Oa,g,X?11:12))return 0;if(X&&sn(I)&&$e(),g.da)alert("todo:use_scaling");else{if(k){if(b.Ib=Ut,g.Kb){if(I=g.U+1>>1,b.memory=o(g.U+2*I),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+g.U,b.Mc=b.cc,b.Nc=b.dc+I,b.Ib=Wt,$e()}}else alert("todo:EmitYUV");X&&(b.Jb=Pa,k&&Re())}if(k&&!og){for(g=0;256>g;++g)My[g]=89858*(g-128)+Lf>>Of,By[g]=-22014*(g-128)+Lf,ky[g]=-45773*(g-128),jy[g]=113618*(g-128)+Lf>>Of;for(g=nu;g<Mh;++g)b=76283*(g-16)+Lf>>Of,Py[g-nu]=xi(b,255),Fy[g-nu]=xi(b+8>>4,15);og=1}return 1}function ar(g){var b=g.ma,I=g.U,k=g.T;return t(!(1&g.ka)),0>=I||0>=k?0:(I=b.Ib(g,b),b.Jb!=null&&b.Jb(g,b,I),b.Dc+=I,1)}function Er(g){g.ma.memory=null}function Tt(g,b,I,k){return ye(g,8)!=47?0:(b[0]=ye(g,14)+1,I[0]=ye(g,14)+1,k[0]=ye(g,1),ye(g,3)!=0?0:!g.h)}function Xr(g,b){if(4>g)return g+1;var I=g-2>>1;return(2+(1&g)<<I)+ye(b,I)+1}function Wi(g,b){return 120<b?b-120:1<=(I=((I=vy[b-1])>>4)*g+(8-(15&I)))?I:1;var I}function Xi(g,b,I){var k=G(I),X=g[b+=255&k].g-8;return 0<X&&(fe(I,I.u+8),k=G(I),b+=g[b].value,b+=k&(1<<X)-1),fe(I,I.u+g[b].g),g[b].value}function hn(g,b,I){return I.g+=g.g,I.value+=g.value<<b>>>0,t(8>=I.g),g.g}function Ln(g,b,I){var k=g.xc;return t((b=k==0?0:g.vc[g.md*(I>>k)+(b>>k)])<g.Wb),g.Ya[b]}function zn(g,b,I,k){var X=g.ab,$=g.c*b,te=g.C;b=te+b;var ae=I,le=k;for(k=g.Ta,I=g.Ua;0<X--;){var pe=g.gc[X],Ne=te,je=b,ke=ae,De=le,Je=(le=k,ae=I,pe.Ea);switch(t(Ne<je),t(je<=pe.nc),pe.hc){case 2:a(ke,De,(je-Ne)*Je,le,ae);break;case 0:var Ge=Ne,Se=je,_e=le,Ze=ae,rt=(xt=pe).Ea;Ge==0&&(Y(ke,De,null,null,1,_e,Ze),mt(ke,De+1,0,0,rt-1,_e,Ze+1),De+=rt,Ze+=rt,++Ge);for(var Qe=1<<xt.b,At=Qe-1,dt=Ve(rt,xt.b),jt=xt.K,xt=xt.w+(Ge>>xt.b)*dt;Ge<Se;){var An=jt,Tn=xt,xn=1;for(i(ke,De,_e,Ze-rt,1,_e,Ze);xn<rt;){var on=(xn&~At)+Qe;on>rt&&(on=rt),(0,x[An[Tn++]>>8&15])(ke,De+ +xn,_e,Ze+xn-rt,on-xn,_e,Ze+xn),xn=on}De+=rt,Ze+=rt,++Ge&At||(xt+=dt)}je!=pe.nc&&r(le,ae-Je,le,ae+(je-Ne-1)*Je,Je);break;case 1:for(Je=ke,Se=De,rt=(ke=pe.Ea)-(Ze=ke&~(_e=(De=1<<pe.b)-1)),Ge=Ve(ke,pe.b),Qe=pe.K,pe=pe.w+(Ne>>pe.b)*Ge;Ne<je;){for(At=Qe,dt=pe,jt=new Ue,xt=Se+Ze,An=Se+ke;Se<xt;)Lt(At[dt++],jt),v(jt,Je,Se,De,le,ae),Se+=De,ae+=De;Se<An&&(Lt(At[dt++],jt),v(jt,Je,Se,rt,le,ae),Se+=rt,ae+=rt),++Ne&_e||(pe+=Ge)}break;case 3:if(ke==le&&De==ae&&0<pe.b){for(Se=le,ke=Je=ae+(je-Ne)*Je-(Ze=(je-Ne)*Ve(pe.Ea,pe.b)),De=le,_e=ae,Ge=[],Ze=(rt=Ze)-1;0<=Ze;--Ze)Ge[Ze]=De[_e+Ze];for(Ze=rt-1;0<=Ze;--Ze)Se[ke+Ze]=Ge[Ze];l(pe,Ne,je,le,Je,le,ae)}else l(pe,Ne,je,ke,De,le,ae)}ae=k,le=I}le!=I&&r(k,I,ae,le,$)}function bt(g,b){var I=g.V,k=g.Ba+g.c*g.C,X=b-g.C;if(t(b<=g.l.o),t(16>=X),0<X){var $=g.l,te=g.Ta,ae=g.Ua,le=$.width;if(zn(g,X,I,k),X=ae=[ae],t((I=g.C)<(k=b)),t($.v<$.va),k>$.o&&(k=$.o),I<$.j){var pe=$.j-I;I=$.j,X[0]+=pe*le}if(I>=k?I=0:(X[0]+=4*$.v,$.ka=I-$.j,$.U=$.va-$.v,$.T=k-I,I=1),I){if(ae=ae[0],11>(I=g.ca).S){var Ne=I.f.RGBA,je=(k=I.S,X=$.U,$=$.T,pe=Ne.eb,Ne.A),ke=$;for(Ne=Ne.fb+g.Ma*Ne.A;0<ke--;){var De=te,Je=ae,Ge=X,Se=pe,_e=Ne;switch(k){case Tf:C(De,Je,Ge,Se,_e);break;case _f:B(De,Je,Ge,Se,_e);break;case Ih:B(De,Je,Ge,Se,_e),Fr(Se,_e,0,Ge,1,0);break;case J2:ge(De,Je,Ge,Se,_e);break;case If:wt(De,Je,Ge,Se,_e,1);break;case Dh:wt(De,Je,Ge,Se,_e,1),Fr(Se,_e,0,Ge,1,0);break;case Df:wt(De,Je,Ge,Se,_e,0);break;case Rf:wt(De,Je,Ge,Se,_e,0),Fr(Se,_e,1,Ge,1,0);break;case _h:V(De,Je,Ge,Se,_e);break;case Rh:V(De,Je,Ge,Se,_e),qn(Se,_e,Ge,1,0);break;case $2:ee(De,Je,Ge,Se,_e);break;default:t(0)}ae+=le,Ne+=je}g.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");t(g.Ma<=I.height)}}g.C=b,t(g.C<=g.i)}function dr(g){var b;if(0<g.ua)return 0;for(b=0;b<g.Wb;++b){var I=g.Ya[b].G,k=g.Ya[b].H;if(0<I[1][k[1]+0].g||0<I[2][k[2]+0].g||0<I[3][k[3]+0].g)return 0}return 1}function Tr(g,b,I,k,X,$){if(g.Z!=0){var te=g.qd,ae=g.rd;for(t(oo[g.Z]!=null);b<I;++b)oo[g.Z](te,ae,k,X,k,X,$),te=k,ae=X,X+=$;g.qd=te,g.rd=ae}}function Hn(g,b){var I=g.l.ma,k=I.Z==0||I.Z==1?g.l.j:g.C;if(k=g.C<k?k:g.C,t(b<=g.l.o),b>k){var X=g.l.width,$=I.ca,te=I.tb+X*k,ae=g.V,le=g.Ba+g.c*k,pe=g.gc;t(g.ab==1),t(pe[0].hc==3),u(pe[0],k,b,ae,le,$,te),Tr(I,k,b,$,te,X)}g.C=g.Ma=b}function Zi(g,b,I,k,X,$,te){var ae=g.$/k,le=g.$%k,pe=g.m,Ne=g.s,je=I+g.$,ke=je;X=I+k*X;var De=I+k*$,Je=280+Ne.ua,Ge=g.Pb?ae:16777216,Se=0<Ne.ua?Ne.Wa:null,_e=Ne.wc,Ze=je<De?Ln(Ne,le,ae):null;t(g.C<$),t(De<=X);var rt=!1;e:for(;;){for(;rt||je<De;){var Qe=0;if(ae>=Ge){var At=je-I;t((Ge=g).Pb),Ge.wd=Ge.m,Ge.xd=At,0<Ge.s.ua&&Le(Ge.s.Wa,Ge.s.vb),Ge=ae+Ay}if(le&_e||(Ze=Ln(Ne,le,ae)),t(Ze!=null),Ze.Qb&&(b[je]=Ze.qb,rt=!0),!rt)if(se(pe),Ze.jc){Qe=pe,At=b;var dt=je,jt=Ze.pd[G(Qe)&Mn-1];t(Ze.jc),256>jt.g?(fe(Qe,Qe.u+jt.g),At[dt]=jt.value,Qe=0):(fe(Qe,Qe.u+jt.g-256),t(256<=jt.value),Qe=jt.value),Qe==0&&(rt=!0)}else Qe=Xi(Ze.G[0],Ze.H[0],pe);if(pe.h)break;if(rt||256>Qe){if(!rt)if(Ze.nd)b[je]=(Ze.qb|Qe<<8)>>>0;else{if(se(pe),rt=Xi(Ze.G[1],Ze.H[1],pe),se(pe),At=Xi(Ze.G[2],Ze.H[2],pe),dt=Xi(Ze.G[3],Ze.H[3],pe),pe.h)break;b[je]=(dt<<24|rt<<16|Qe<<8|At)>>>0}if(rt=!1,++je,++le>=k&&(le=0,++ae,te!=null&&ae<=$&&!(ae%16)&&te(g,ae),Se!=null))for(;ke<je;)Qe=b[ke++],Se.X[(506832829*Qe&4294967295)>>>Se.Mb]=Qe}else if(280>Qe){if(Qe=Xr(Qe-256,pe),At=Xi(Ze.G[4],Ze.H[4],pe),se(pe),At=Wi(k,At=Xr(At,pe)),pe.h)break;if(je-I<At||X-je<Qe)break e;for(dt=0;dt<Qe;++dt)b[je+dt]=b[je+dt-At];for(je+=Qe,le+=Qe;le>=k;)le-=k,++ae,te!=null&&ae<=$&&!(ae%16)&&te(g,ae);if(t(je<=X),le&_e&&(Ze=Ln(Ne,le,ae)),Se!=null)for(;ke<je;)Qe=b[ke++],Se.X[(506832829*Qe&4294967295)>>>Se.Mb]=Qe}else{if(!(Qe<Je))break e;for(rt=Qe-280,t(Se!=null);ke<je;)Qe=b[ke++],Se.X[(506832829*Qe&4294967295)>>>Se.Mb]=Qe;Qe=je,t(!(rt>>>(At=Se).Xa)),b[Qe]=At.X[rt],rt=!0}rt||t(pe.h==ie(pe))}if(g.Pb&&pe.h&&je<X)t(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&Le(g.s.vb,g.s.Wa);else{if(pe.h)break e;te!=null&&te(g,ae>$?$:ae),g.a=0,g.$=je-I}return 1}return g.a=3,0}function _r(g){t(g!=null),g.vc=null,g.yc=null,g.Ya=null;var b=g.Wa;b!=null&&(b.X=null),g.vb=null,t(g!=null)}function sr(){var g=new hi;return g==null?null:(g.a=0,g.xb=ng,gn("Predictor","VP8LPredictors"),gn("Predictor","VP8LPredictors_C"),gn("PredictorAdd","VP8LPredictorsAdd"),gn("PredictorAdd","VP8LPredictorsAdd_C"),a=_t,v=ct,C=ft,B=vn,V=Et,ee=ot,ge=gt,R.VP8LMapColor32b=c,R.VP8LMapColor8b=d,g)}function Ni(g,b,I,k,X){var $=1,te=[g],ae=[b],le=k.m,pe=k.s,Ne=null,je=0;e:for(;;){if(I)for(;$&&ye(le,1);){var ke=te,De=ae,Je=k,Ge=1,Se=Je.m,_e=Je.gc[Je.ab],Ze=ye(Se,2);if(Je.Oc&1<<Ze)$=0;else{switch(Je.Oc|=1<<Ze,_e.hc=Ze,_e.Ea=ke[0],_e.nc=De[0],_e.K=[null],++Je.ab,t(4>=Je.ab),Ze){case 0:case 1:_e.b=ye(Se,3)+2,Ge=Ni(Ve(_e.Ea,_e.b),Ve(_e.nc,_e.b),0,Je,_e.K),_e.K=_e.K[0];break;case 3:var rt,Qe=ye(Se,8)+1,At=16<Qe?0:4<Qe?1:2<Qe?2:3;if(ke[0]=Ve(_e.Ea,At),_e.b=At,rt=Ge=Ni(Qe,1,0,Je,_e.K)){var dt,jt=Qe,xt=_e,An=1<<(8>>xt.b),Tn=o(An);if(Tn==null)rt=0;else{var xn=xt.K[0],on=xt.w;for(Tn[0]=xt.K[0][0],dt=1;dt<1*jt;++dt)Tn[dt]=Be(xn[on+dt],Tn[dt-1]);for(;dt<4*An;++dt)Tn[dt]=0;xt.K[0]=null,xt.K[0]=Tn,rt=1}}Ge=rt;break;case 2:break;default:t(0)}$=Ge}}if(te=te[0],ae=ae[0],$&&ye(le,1)&&!($=1<=(je=ye(le,4))&&11>=je)){k.a=3;break e}var Pn;if(Pn=$)t:{var jn,Zt,ji,Ur=k,ki=te,zr=ae,_n=je,$r=I,ea=Ur.m,Ki=Ur.s,cr=[null],Rr=1,Sa=0,as=wy[_n];n:for(;;){if($r&&ye(ea,1)){var Ji=ye(ea,3)+2,_s=Ve(ki,Ji),gl=Ve(zr,Ji),Kl=_s*gl;if(!Ni(_s,gl,0,Ur,cr))break n;for(cr=cr[0],Ki.xc=Ji,jn=0;jn<Kl;++jn){var lo=cr[jn]>>8&65535;cr[jn]=lo,lo>=Rr&&(Rr=lo+1)}}if(ea.h)break n;for(Zt=0;5>Zt;++Zt){var bi=eg[Zt];!Zt&&0<_n&&(bi+=1<<_n),Sa<bi&&(Sa=bi)}var jh=f(Rr*as,L),ug=Rr,fg=f(ug,ce);if(fg==null)var jf=null;else t(65536>=ug),jf=fg;var iu=o(Sa);if(jf==null||iu==null||jh==null){Ur.a=1;break n}var kf=jh;for(jn=ji=0;jn<Rr;++jn){var Ga=jf[jn],Jl=Ga.G,$l=Ga.H,hg=0,Bf=1,dg=0;for(Zt=0;5>Zt;++Zt){bi=eg[Zt],Jl[Zt]=kf,$l[Zt]=ji,!Zt&&0<_n&&(bi+=1<<_n);r:{var Pf,kh=bi,Ff=Ur,ru=iu,Hy=kf,Gy=ji,Bh=0,co=Ff.m,qy=ye(co,1);if(s(ru,0,0,kh),qy){var Vy=ye(co,1)+1,Yy=ye(co,1),gg=ye(co,Yy==0?1:8);ru[gg]=1,Vy==2&&(ru[gg=ye(co,8)]=1);var Uf=1}else{var pg=o(19),mg=ye(co,4)+4;if(19<mg){Ff.a=3;var zf=0;break r}for(Pf=0;Pf<mg;++Pf)pg[by[Pf]]=ye(co,3);var Ph=void 0,au=void 0,xg=Ff,Wy=pg,Hf=kh,yg=ru,Fh=0,uo=xg.m,bg=8,vg=f(128,L);i:for(;F(vg,0,7,Wy,19);){if(ye(uo,1)){var Xy=2+2*ye(uo,3);if((Ph=2+ye(uo,Xy))>Hf)break i}else Ph=Hf;for(au=0;au<Hf&&Ph--;){se(uo);var wg=vg[0+(127&G(uo))];fe(uo,uo.u+wg.g);var ec=wg.value;if(16>ec)yg[au++]=ec,ec!=0&&(bg=ec);else{var Zy=ec==16,Ag=ec-16,Qy=xy[Ag],Ng=ye(uo,my[Ag])+Qy;if(au+Ng>Hf)break i;for(var Ky=Zy?bg:0;0<Ng--;)yg[au++]=Ky}}Fh=1;break i}Fh||(xg.a=3),Uf=Fh}(Uf=Uf&&!co.h)&&(Bh=F(Hy,Gy,8,ru,kh)),Uf&&Bh!=0?zf=Bh:(Ff.a=3,zf=0)}if(zf==0)break n;if(Bf&&yy[Zt]==1&&(Bf=kf[ji].g==0),hg+=kf[ji].g,ji+=zf,3>=Zt){var su,Uh=iu[0];for(su=1;su<bi;++su)iu[su]>Uh&&(Uh=iu[su]);dg+=Uh}}if(Ga.nd=Bf,Ga.Qb=0,Bf&&(Ga.qb=(Jl[3][$l[3]+0].value<<24|Jl[1][$l[1]+0].value<<16|Jl[2][$l[2]+0].value)>>>0,hg==0&&256>Jl[0][$l[0]+0].value&&(Ga.Qb=1,Ga.qb+=Jl[0][$l[0]+0].value<<8)),Ga.jc=!Ga.Qb&&6>dg,Ga.jc){var Gf,Is=Ga;for(Gf=0;Gf<Mn;++Gf){var fo=Gf,ho=Is.pd[fo],qf=Is.G[0][Is.H[0]+fo];256<=qf.value?(ho.g=qf.g+256,ho.value=qf.value):(ho.g=0,ho.value=0,fo>>=hn(qf,8,ho),fo>>=hn(Is.G[1][Is.H[1]+fo],16,ho),fo>>=hn(Is.G[2][Is.H[2]+fo],0,ho),hn(Is.G[3][Is.H[3]+fo],24,ho))}}}Ki.vc=cr,Ki.Wb=Rr,Ki.Ya=jf,Ki.yc=jh,Pn=1;break t}Pn=0}if(!($=Pn)){k.a=3;break e}if(0<je){if(pe.ua=1<<je,!ut(pe.Wa,je)){k.a=1,$=0;break e}}else pe.ua=0;var zh=k,Sg=te,Jy=ae,Hh=zh.s,Gh=Hh.xc;if(zh.c=Sg,zh.i=Jy,Hh.md=Ve(Sg,Gh),Hh.wc=Gh==0?-1:(1<<Gh)-1,I){k.xb=Iy;break e}if((Ne=o(te*ae))==null){k.a=1,$=0;break e}$=($=Zi(k,Ne,0,te,ae,ae,null))&&!le.h;break e}return $?(X!=null?X[0]=Ne:(t(Ne==null),t(I)),k.$=0,I||_r(pe)):_r(pe),$}function vs(g,b){var I=g.c*g.i,k=I+b+16*b;return t(g.c<=b),g.V=o(k),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+I+b,1)}function Qs(g,b){var I=g.C,k=b-I,X=g.V,$=g.Ba+g.c*I;for(t(b<=g.l.o);0<k;){var te=16<k?16:k,ae=g.l.ma,le=g.l.width,pe=le*te,Ne=ae.ca,je=ae.tb+le*I,ke=g.Ta,De=g.Ua;zn(g,te,X,$),_i(ke,De,Ne,je,pe),Tr(ae,I,I+te,Ne,je,le),k-=te,X+=te*g.c,I+=te}t(I==b),g.C=g.Ma=b}function or(){this.ub=this.yd=this.td=this.Rb=0}function mi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function wn(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Ko(){this.Yb=function(){var g=[];return function b(I,k,X){for(var $=X[k],te=0;te<$&&(I.push(X.length>k+1?[]:0),!(X.length<k+1));te++)b(I[te],k+1,X)}(g,0,[3,11]),g}()}function pa(){this.jb=o(3),this.Wc=p([4,8],Ko),this.Xc=p([4,17],Ko)}function Jo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Ke(){this.ld=this.La=this.dd=this.tc=0}function Yl(){this.Na=this.la=0}function Gn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ma(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Kc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ke),this.Y=0,this.ya=Array(new ma),this.aa=0,this.l=new Xt}function ln(){this.y=o(16),this.f=o(8),this.ea=o(8)}function cn(){this.cb=this.a=0,this.sc="",this.m=new xe,this.Od=new or,this.Kc=new mi,this.ed=new Jo,this.Qa=new wn,this.Ic=this.$c=this.Aa=0,this.D=new Kc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=f(8,xe),this.ia=0,this.pb=f(4,Gn),this.Pa=new pa,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ln),this.Hd=0,this.rb=Array(new Yl),this.sb=0,this.wa=Array(new Ke),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ma),this.L=this.aa=0,this.gd=p([4,2],Ke),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function $o(){var g=new cn;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,tu||(tu=Zr)),g}function Zn(g,b,I){return g.a==0&&(g.a=b,g.sc=I,g.cb=0),0}function Ks(g,b,I){return 3<=I&&g[b+0]==157&&g[b+1]==1&&g[b+2]==42}function ti(g,b){if(g==null)return 0;if(g.a=0,g.sc="OK",b==null)return Zn(g,2,"null VP8Io passed to VP8GetHeaders()");var I=b.data,k=b.w,X=b.ha;if(4>X)return Zn(g,7,"Truncated header.");var $=I[k+0]|I[k+1]<<8|I[k+2]<<16,te=g.Od;if(te.Rb=!(1&$),te.td=$>>1&7,te.yd=$>>4&1,te.ub=$>>5,3<te.td)return Zn(g,3,"Incorrect keyframe parameters.");if(!te.yd)return Zn(g,4,"Frame not displayable.");k+=3,X-=3;var ae=g.Kc;if(te.Rb){if(7>X)return Zn(g,7,"cannot parse picture header");if(!Ks(I,k,X))return Zn(g,3,"Bad code word");ae.c=16383&(I[k+4]<<8|I[k+3]),ae.Td=I[k+4]>>6,ae.i=16383&(I[k+6]<<8|I[k+5]),ae.Ud=I[k+6]>>6,k+=7,X-=7,g.za=ae.c+15>>4,g.Ub=ae.i+15>>4,b.width=ae.c,b.height=ae.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,s(($=g.Pa).jb,0,255,$.jb.length),t(($=g.Qa)!=null),$.Cb=0,$.Bb=0,$.Fb=1,s($.Zb,0,0,$.Zb.length),s($.Lb,0,0,$.Lb)}if(te.ub>X)return Zn(g,7,"bad partition length");ne($=g.m,I,k,te.ub),k+=te.ub,X-=te.ub,te.Rb&&(ae.Ld=be($),ae.Kd=be($)),ae=g.Qa;var le,pe=g.Pa;if(t($!=null),t(ae!=null),ae.Cb=be($),ae.Cb){if(ae.Bb=be($),be($)){for(ae.Fb=be($),le=0;4>le;++le)ae.Zb[le]=be($)?W($,7):0;for(le=0;4>le;++le)ae.Lb[le]=be($)?W($,6):0}if(ae.Bb)for(le=0;3>le;++le)pe.jb[le]=be($)?Q($,8):255}else ae.Bb=0;if($.Ka)return Zn(g,3,"cannot parse segment header");if((ae=g.ed).zd=be($),ae.Tb=Q($,6),ae.wb=Q($,3),ae.Pc=be($),ae.Pc&&be($)){for(pe=0;4>pe;++pe)be($)&&(ae.vd[pe]=W($,6));for(pe=0;4>pe;++pe)be($)&&(ae.od[pe]=W($,6))}if(g.L=ae.Tb==0?0:ae.zd?1:2,$.Ka)return Zn(g,3,"cannot parse filter header");var Ne=X;if(X=le=k,k=le+Ne,ae=Ne,g.Xb=(1<<Q(g.m,2))-1,Ne<3*(pe=g.Xb))I=7;else{for(le+=3*pe,ae-=3*pe,Ne=0;Ne<pe;++Ne){var je=I[X+0]|I[X+1]<<8|I[X+2]<<16;je>ae&&(je=ae),ne(g.Jc[+Ne],I,le,je),le+=je,ae-=je,X+=3}ne(g.Jc[+pe],I,le,ae),I=le<k?0:5}if(I!=0)return Zn(g,I,"cannot parse partitions");for(I=Q(le=g.m,7),X=be(le)?W(le,4):0,k=be(le)?W(le,4):0,ae=be(le)?W(le,4):0,pe=be(le)?W(le,4):0,le=be(le)?W(le,4):0,Ne=g.Qa,je=0;4>je;++je){if(Ne.Cb){var ke=Ne.Zb[je];Ne.Fb||(ke+=I)}else{if(0<je){g.pb[je]=g.pb[0];continue}ke=I}var De=g.pb[je];De.Sc[0]=Oh[xi(ke+X,127)],De.Sc[1]=Lh[xi(ke+0,127)],De.Eb[0]=2*Oh[xi(ke+k,127)],De.Eb[1]=101581*Lh[xi(ke+ae,127)]>>16,8>De.Eb[1]&&(De.Eb[1]=8),De.Qc[0]=Oh[xi(ke+pe,117)],De.Qc[1]=Lh[xi(ke+le,127)],De.lc=ke+le}if(!te.Rb)return Zn(g,4,"Not a key frame.");for(be($),te=g.Pa,I=0;4>I;++I){for(X=0;8>X;++X)for(k=0;3>k;++k)for(ae=0;11>ae;++ae)pe=Ce($,Ty[I][X][k][ae])?Q($,8):Cy[I][X][k][ae],te.Wc[I][X].Yb[k][ae]=pe;for(X=0;17>X;++X)te.Xc[I][X]=te.Wc[I][_y[X]]}return g.kc=be($),g.kc&&(g.Bd=Q($,8)),g.cb=1}function Zr(g,b,I,k,X,$,te){var ae=b[X].Yb[I];for(I=0;16>X;++X){if(!Ce(g,ae[I+0]))return X;for(;!Ce(g,ae[I+1]);)if(ae=b[++X].Yb[0],I=0,X==16)return 16;var le=b[X+1].Yb;if(Ce(g,ae[I+2])){var pe=g,Ne=0;if(Ce(pe,(ke=ae)[(je=I)+3]))if(Ce(pe,ke[je+6])){for(ae=0,je=2*(Ne=Ce(pe,ke[je+8]))+(ke=Ce(pe,ke[je+9+Ne])),Ne=0,ke=Ny[je];ke[ae];++ae)Ne+=Ne+Ce(pe,ke[ae]);Ne+=3+(8<<je)}else Ce(pe,ke[je+7])?(Ne=7+2*Ce(pe,165),Ne+=Ce(pe,145)):Ne=5+Ce(pe,159);else Ne=Ce(pe,ke[je+4])?3+Ce(pe,ke[je+5]):2;ae=le[2]}else Ne=1,ae=le[1];le=te+Sy[X],0>(pe=g).b&&Ee(pe);var je,ke=pe.b,De=(je=pe.Ca>>1)-(pe.I>>ke)>>31;--pe.b,pe.Ca+=De,pe.Ca|=1,pe.I-=(je+1&De)<<ke,$[le]=((Ne^De)-De)*k[(0<X)+0]}return 16}function el(g){var b=g.rb[g.sb-1];b.la=0,b.Na=0,s(g.zc,0,0,g.zc.length),g.ja=0}function Qn(g,b){if(g==null)return 0;if(b==null)return Zn(g,2,"NULL VP8Io parameter in VP8Decode().");if(!g.cb&&!ti(g,b))return 0;if(t(g.cb),b.ac==null||b.ac(b)){b.ob&&(g.L=0);var I=Mf[g.L];if(g.L==2?(g.yb=0,g.zb=0):(g.yb=b.v-I>>4,g.zb=b.j-I>>4,0>g.yb&&(g.yb=0),0>g.zb&&(g.zb=0)),g.Va=b.o+15+I>>4,g.Hb=b.va+15+I>>4,g.Hb>g.za&&(g.Hb=g.za),g.Va>g.Ub&&(g.Va=g.Ub),0<g.L){var k=g.ed;for(I=0;4>I;++I){var X;if(g.Qa.Cb){var $=g.Qa.Lb[I];g.Qa.Fb||($+=k.Tb)}else $=k.Tb;for(X=0;1>=X;++X){var te=g.gd[I][X],ae=$;if(k.Pc&&(ae+=k.vd[0],X&&(ae+=k.od[0])),0<(ae=0>ae?0:63<ae?63:ae)){var le=ae;0<k.wb&&(le=4<k.wb?le>>2:le>>1)>9-k.wb&&(le=9-k.wb),1>le&&(le=1),te.dd=le,te.tc=2*ae+le,te.ld=40<=ae?2:15<=ae?1:0}else te.tc=0;te.La=X}}}I=0}else Zn(g,6,"Frame setup failed"),I=g.a;if(I=I==0){if(I){g.$c=0,0<g.Aa||(g.Ic=zy);e:{I=g.Ic,k=4*(le=g.za);var pe=32*le,Ne=le+1,je=0<g.L?le*(0<g.Aa?2:1):0,ke=(g.Aa==2?2:1)*le;if((te=k+832+(X=3*(16*I+Mf[g.L])/2*pe)+($=g.Fa!=null&&0<g.Fa.length?g.Kc.c*g.Kc.i:0))!=te)I=0;else{if(te>g.Vb){if(g.Vb=0,g.Ec=o(te),g.Fc=0,g.Ec==null){I=Zn(g,1,"no memory during frame initialization.");break e}g.Vb=te}te=g.Ec,ae=g.Fc,g.Ac=te,g.Bc=ae,ae+=k,g.Gd=f(pe,ln),g.Hd=0,g.rb=f(Ne+1,Yl),g.sb=1,g.wa=je?f(je,Ke):null,g.Y=0,g.D.Nb=0,g.D.wa=g.wa,g.D.Y=g.Y,0<g.Aa&&(g.D.Y+=le),t(!0),g.oc=te,g.pc=ae,ae+=832,g.ya=f(ke,ma),g.aa=0,g.D.ya=g.ya,g.D.aa=g.aa,g.Aa==2&&(g.D.aa+=le),g.R=16*le,g.B=8*le,le=(pe=Mf[g.L])*g.R,pe=pe/2*g.B,g.sa=te,g.ta=ae+le,g.qa=g.sa,g.ra=g.ta+16*I*g.R+pe,g.Ha=g.qa,g.Ia=g.ra+8*I*g.B+pe,g.$c=0,ae+=X,g.mb=$?te:null,g.nb=$?ae:null,t(ae+$<=g.Fc+g.Vb),el(g),s(g.Ac,g.Bc,0,k),I=1}}if(I){if(b.ka=0,b.y=g.sa,b.O=g.ta,b.f=g.qa,b.N=g.ra,b.ea=g.Ha,b.Vd=g.Ia,b.fa=g.R,b.Rc=g.B,b.F=null,b.J=0,!Cf){for(I=-255;255>=I;++I)Hi[255+I]=0>I?-I:I;for(I=-1020;1020>=I;++I)Es[1020+I]=-128>I?-128:127<I?127:I;for(I=-112;112>=I;++I)eu[112+I]=-16>I?-16:15<I?15:I;for(I=-255;510>=I;++I)Ql[255+I]=0>I?0:255<I?255:I;Cf=1}ve=gr,Ae=Me,Fe=he,nt=It,st=ui,Ie=Ci,it=es,Qt=mr,Pt=Yt,yi=fi,zi=$c,di=Pe,un=ts,ai=ul,Ti=cl,Dr=ba,wa=za,Pr=Jc,Ha[0]=Dt,Ha[1]=nl,Ha[2]=As,Ha[3]=xa,Ha[4]=Xl,Ha[5]=ni,Ha[6]=Gt,Ha[7]=rl,Ha[8]=Zl,Ha[9]=al,so[0]=eo,so[1]=Ot,so[2]=pn,so[3]=ws,so[4]=Ei,so[5]=il,so[6]=Wl,Ts[0]=kr,Ts[1]=pr,Ts[2]=Fa,Ts[3]=sl,Ts[4]=$a,Ts[5]=Ns,Ts[6]=Ua,I=1}else I=0}I&&(I=function(De,Je){for(De.M=0;De.M<De.Va;++De.M){var Ge,Se=De.Jc[De.M&De.Xb],_e=De.m,Ze=De;for(Ge=0;Ge<Ze.za;++Ge){var rt=_e,Qe=Ze,At=Qe.Ac,dt=Qe.Bc+4*Ge,jt=Qe.zc,xt=Qe.ya[Qe.aa+Ge];if(Qe.Qa.Bb?xt.$b=Ce(rt,Qe.Pa.jb[0])?2+Ce(rt,Qe.Pa.jb[2]):Ce(rt,Qe.Pa.jb[1]):xt.$b=0,Qe.kc&&(xt.Ad=Ce(rt,Qe.Bd)),xt.Za=!Ce(rt,145)+0,xt.Za){var An=xt.Ob,Tn=0;for(Qe=0;4>Qe;++Qe){var xn,on=jt[0+Qe];for(xn=0;4>xn;++xn){on=Ey[At[dt+xn]][on];for(var Pn=tg[Ce(rt,on[0])];0<Pn;)Pn=tg[2*Pn+Ce(rt,on[Pn])];on=-Pn,At[dt+xn]=on}r(An,Tn,At,dt,4),Tn+=4,jt[0+Qe]=on}}else on=Ce(rt,156)?Ce(rt,128)?1:3:Ce(rt,163)?2:0,xt.Ob[0]=on,s(At,dt,on,4),s(jt,0,on,4);xt.Dd=Ce(rt,142)?Ce(rt,114)?Ce(rt,183)?1:3:2:0}if(Ze.m.Ka)return Zn(De,7,"Premature end-of-partition0 encountered.");for(;De.ja<De.za;++De.ja){if(Ze=Se,rt=(_e=De).rb[_e.sb-1],At=_e.rb[_e.sb+_e.ja],Ge=_e.ya[_e.aa+_e.ja],dt=_e.kc?Ge.Ad:0)rt.la=At.la=0,Ge.Za||(rt.Na=At.Na=0),Ge.Hc=0,Ge.Gc=0,Ge.ia=0;else{var jn,Zt;if(rt=At,At=Ze,dt=_e.Pa.Xc,jt=_e.ya[_e.aa+_e.ja],xt=_e.pb[jt.$b],Qe=jt.ad,An=0,Tn=_e.rb[_e.sb-1],on=xn=0,s(Qe,An,0,384),jt.Za)var ji=0,Ur=dt[3];else{Pn=o(16);var ki=rt.Na+Tn.Na;if(ki=tu(At,dt[1],ki,xt.Eb,0,Pn,0),rt.Na=Tn.Na=(0<ki)+0,1<ki)ve(Pn,0,Qe,An);else{var zr=Pn[0]+3>>3;for(Pn=0;256>Pn;Pn+=16)Qe[An+Pn]=zr}ji=1,Ur=dt[0]}var _n=15&rt.la,$r=15&Tn.la;for(Pn=0;4>Pn;++Pn){var ea=1&$r;for(zr=Zt=0;4>zr;++zr)_n=_n>>1|(ea=(ki=tu(At,Ur,ki=ea+(1&_n),xt.Sc,ji,Qe,An))>ji)<<7,Zt=Zt<<2|(3<ki?3:1<ki?2:Qe[An+0]!=0),An+=16;_n>>=4,$r=$r>>1|ea<<7,xn=(xn<<8|Zt)>>>0}for(Ur=_n,ji=$r>>4,jn=0;4>jn;jn+=2){for(Zt=0,_n=rt.la>>4+jn,$r=Tn.la>>4+jn,Pn=0;2>Pn;++Pn){for(ea=1&$r,zr=0;2>zr;++zr)ki=ea+(1&_n),_n=_n>>1|(ea=0<(ki=tu(At,dt[2],ki,xt.Qc,0,Qe,An)))<<3,Zt=Zt<<2|(3<ki?3:1<ki?2:Qe[An+0]!=0),An+=16;_n>>=2,$r=$r>>1|ea<<5}on|=Zt<<4*jn,Ur|=_n<<4<<jn,ji|=(240&$r)<<jn}rt.la=Ur,Tn.la=ji,jt.Hc=xn,jt.Gc=on,jt.ia=43690&on?0:xt.ia,dt=!(xn|on)}if(0<_e.L&&(_e.wa[_e.Y+_e.ja]=_e.gd[Ge.$b][Ge.Za],_e.wa[_e.Y+_e.ja].La|=!dt),Ze.Ka)return Zn(De,7,"Premature end-of-file encountered.")}if(el(De),_e=Je,Ze=1,Ge=(Se=De).D,rt=0<Se.L&&Se.M>=Se.zb&&Se.M<=Se.Va,Se.Aa==0)e:{if(Ge.M=Se.M,Ge.uc=rt,yr(Se,Ge),Ze=1,Ge=(Zt=Se.D).Nb,rt=(on=Mf[Se.L])*Se.R,At=on/2*Se.B,Pn=16*Ge*Se.R,zr=8*Ge*Se.B,dt=Se.sa,jt=Se.ta-rt+Pn,xt=Se.qa,Qe=Se.ra-At+zr,An=Se.Ha,Tn=Se.Ia-At+zr,$r=(_n=Zt.M)==0,xn=_n>=Se.Va-1,Se.Aa==2&&yr(Se,Zt),Zt.uc)for(ea=(ki=Se).D.M,t(ki.D.uc),Zt=ki.yb;Zt<ki.Hb;++Zt){ji=Zt,Ur=ea;var Ki=(cr=(bi=ki).D).Nb;jn=bi.R;var cr=cr.wa[cr.Y+ji],Rr=bi.sa,Sa=bi.ta+16*Ki*jn+16*ji,as=cr.dd,Ji=cr.tc;if(Ji!=0)if(t(3<=Ji),bi.L==1)0<ji&&Dr(Rr,Sa,jn,Ji+4),cr.La&&Pr(Rr,Sa,jn,Ji),0<Ur&&Ti(Rr,Sa,jn,Ji+4),cr.La&&wa(Rr,Sa,jn,Ji);else{var _s=bi.B,gl=bi.qa,Kl=bi.ra+8*Ki*_s+8*ji,lo=bi.Ha,bi=bi.Ia+8*Ki*_s+8*ji;Ki=cr.ld,0<ji&&(Qt(Rr,Sa,jn,Ji+4,as,Ki),yi(gl,Kl,lo,bi,_s,Ji+4,as,Ki)),cr.La&&(di(Rr,Sa,jn,Ji,as,Ki),ai(gl,Kl,lo,bi,_s,Ji,as,Ki)),0<Ur&&(it(Rr,Sa,jn,Ji+4,as,Ki),Pt(gl,Kl,lo,bi,_s,Ji+4,as,Ki)),cr.La&&(zi(Rr,Sa,jn,Ji,as,Ki),un(gl,Kl,lo,bi,_s,Ji,as,Ki))}}if(Se.ia&&alert("todo:DitherRow"),_e.put!=null){if(Zt=16*_n,_n=16*(_n+1),$r?(_e.y=Se.sa,_e.O=Se.ta+Pn,_e.f=Se.qa,_e.N=Se.ra+zr,_e.ea=Se.Ha,_e.W=Se.Ia+zr):(Zt-=on,_e.y=dt,_e.O=jt,_e.f=xt,_e.N=Qe,_e.ea=An,_e.W=Tn),xn||(_n-=on),_n>_e.o&&(_n=_e.o),_e.F=null,_e.J=null,Se.Fa!=null&&0<Se.Fa.length&&Zt<_n&&(_e.J=mn(Se,_e,Zt,_n-Zt),_e.F=Se.mb,_e.F==null&&_e.F.length==0)){Ze=Zn(Se,3,"Could not decode alpha data.");break e}Zt<_e.j&&(on=_e.j-Zt,Zt=_e.j,t(!(1&on)),_e.O+=Se.R*on,_e.N+=Se.B*(on>>1),_e.W+=Se.B*(on>>1),_e.F!=null&&(_e.J+=_e.width*on)),Zt<_n&&(_e.O+=_e.v,_e.N+=_e.v>>1,_e.W+=_e.v>>1,_e.F!=null&&(_e.J+=_e.v),_e.ka=Zt-_e.j,_e.U=_e.va-_e.v,_e.T=_n-Zt,Ze=_e.put(_e))}Ge+1!=Se.Ic||xn||(r(Se.sa,Se.ta-rt,dt,jt+16*Se.R,rt),r(Se.qa,Se.ra-At,xt,Qe+8*Se.B,At),r(Se.Ha,Se.Ia-At,An,Tn+8*Se.B,At))}if(!Ze)return Zn(De,6,"Output aborted.")}return 1}(g,b)),b.bc!=null&&b.bc(b),I&=1}return I?(g.cb=0,I):0}function Mi(g,b,I,k,X){X=g[b+I+32*k]+(X>>3),g[b+I+32*k]=-256&X?0>X?0:255:X}function Js(g,b,I,k,X,$){Mi(g,b,0,I,k+X),Mi(g,b,1,I,k+$),Mi(g,b,2,I,k-$),Mi(g,b,3,I,k-X)}function Si(g){return(20091*g>>16)+g}function yn(g,b,I,k){var X,$=0,te=o(16);for(X=0;4>X;++X){var ae=g[b+0]+g[b+8],le=g[b+0]-g[b+8],pe=(35468*g[b+4]>>16)-Si(g[b+12]),Ne=Si(g[b+4])+(35468*g[b+12]>>16);te[$+0]=ae+Ne,te[$+1]=le+pe,te[$+2]=le-pe,te[$+3]=ae-Ne,$+=4,b++}for(X=$=0;4>X;++X)ae=(g=te[$+0]+4)+te[$+8],le=g-te[$+8],pe=(35468*te[$+4]>>16)-Si(te[$+12]),Mi(I,k,0,0,ae+(Ne=Si(te[$+4])+(35468*te[$+12]>>16))),Mi(I,k,1,0,le+pe),Mi(I,k,2,0,le-pe),Mi(I,k,3,0,ae-Ne),$++,k+=32}function Ci(g,b,I,k){var X=g[b+0]+4,$=35468*g[b+4]>>16,te=Si(g[b+4]),ae=35468*g[b+1]>>16;Js(I,k,0,X+te,g=Si(g[b+1]),ae),Js(I,k,1,X+$,g,ae),Js(I,k,2,X-$,g,ae),Js(I,k,3,X-te,g,ae)}function Me(g,b,I,k,X){yn(g,b,I,k),X&&yn(g,b+16,I,k+4)}function he(g,b,I,k){Ae(g,b+0,I,k,1),Ae(g,b+32,I,k+128,1)}function It(g,b,I,k){var X;for(g=g[b+0]+4,X=0;4>X;++X)for(b=0;4>b;++b)Mi(I,k,b,X,g)}function ui(g,b,I,k){g[b+0]&&nt(g,b+0,I,k),g[b+16]&&nt(g,b+16,I,k+4),g[b+32]&&nt(g,b+32,I,k+128),g[b+48]&&nt(g,b+48,I,k+128+4)}function gr(g,b,I,k){var X,$=o(16);for(X=0;4>X;++X){var te=g[b+0+X]+g[b+12+X],ae=g[b+4+X]+g[b+8+X],le=g[b+4+X]-g[b+8+X],pe=g[b+0+X]-g[b+12+X];$[0+X]=te+ae,$[8+X]=te-ae,$[4+X]=pe+le,$[12+X]=pe-le}for(X=0;4>X;++X)te=(g=$[0+4*X]+3)+$[3+4*X],ae=$[1+4*X]+$[2+4*X],le=$[1+4*X]-$[2+4*X],pe=g-$[3+4*X],I[k+0]=te+ae>>3,I[k+16]=pe+le>>3,I[k+32]=te-ae>>3,I[k+48]=pe-le>>3,k+=64}function tl(g,b,I){var k,X=b-32,$=Jr,te=255-g[X-1];for(k=0;k<I;++k){var ae,le=$,pe=te+g[b-1];for(ae=0;ae<I;++ae)g[b+ae]=le[pe+g[X+ae]];b+=32}}function nl(g,b){tl(g,b,4)}function pr(g,b){tl(g,b,8)}function Ot(g,b){tl(g,b,16)}function pn(g,b){var I;for(I=0;16>I;++I)r(g,b+32*I,g,b-32,16)}function ws(g,b){var I;for(I=16;0<I;--I)s(g,b,g[b-1],16),b+=32}function $s(g,b,I){var k;for(k=0;16>k;++k)s(b,I+32*k,g,16)}function eo(g,b){var I,k=16;for(I=0;16>I;++I)k+=g[b-1+32*I]+g[b+I-32];$s(k>>5,g,b)}function Ei(g,b){var I,k=8;for(I=0;16>I;++I)k+=g[b-1+32*I];$s(k>>4,g,b)}function il(g,b){var I,k=8;for(I=0;16>I;++I)k+=g[b+I-32];$s(k>>4,g,b)}function Wl(g,b){$s(128,g,b)}function Ct(g,b,I){return g+2*b+I+2>>2}function As(g,b){var I,k=b-32;for(k=new Uint8Array([Ct(g[k-1],g[k+0],g[k+1]),Ct(g[k+0],g[k+1],g[k+2]),Ct(g[k+1],g[k+2],g[k+3]),Ct(g[k+2],g[k+3],g[k+4])]),I=0;4>I;++I)r(g,b+32*I,k,0,k.length)}function xa(g,b){var I=g[b-1],k=g[b-1+32],X=g[b-1+64],$=g[b-1+96];We(g,b+0,16843009*Ct(g[b-1-32],I,k)),We(g,b+32,16843009*Ct(I,k,X)),We(g,b+64,16843009*Ct(k,X,$)),We(g,b+96,16843009*Ct(X,$,$))}function Dt(g,b){var I,k=4;for(I=0;4>I;++I)k+=g[b+I-32]+g[b-1+32*I];for(k>>=3,I=0;4>I;++I)s(g,b+32*I,k,4)}function Xl(g,b){var I=g[b-1+0],k=g[b-1+32],X=g[b-1+64],$=g[b-1-32],te=g[b+0-32],ae=g[b+1-32],le=g[b+2-32],pe=g[b+3-32];g[b+0+96]=Ct(k,X,g[b-1+96]),g[b+1+96]=g[b+0+64]=Ct(I,k,X),g[b+2+96]=g[b+1+64]=g[b+0+32]=Ct($,I,k),g[b+3+96]=g[b+2+64]=g[b+1+32]=g[b+0+0]=Ct(te,$,I),g[b+3+64]=g[b+2+32]=g[b+1+0]=Ct(ae,te,$),g[b+3+32]=g[b+2+0]=Ct(le,ae,te),g[b+3+0]=Ct(pe,le,ae)}function Gt(g,b){var I=g[b+1-32],k=g[b+2-32],X=g[b+3-32],$=g[b+4-32],te=g[b+5-32],ae=g[b+6-32],le=g[b+7-32];g[b+0+0]=Ct(g[b+0-32],I,k),g[b+1+0]=g[b+0+32]=Ct(I,k,X),g[b+2+0]=g[b+1+32]=g[b+0+64]=Ct(k,X,$),g[b+3+0]=g[b+2+32]=g[b+1+64]=g[b+0+96]=Ct(X,$,te),g[b+3+32]=g[b+2+64]=g[b+1+96]=Ct($,te,ae),g[b+3+64]=g[b+2+96]=Ct(te,ae,le),g[b+3+96]=Ct(ae,le,le)}function ni(g,b){var I=g[b-1+0],k=g[b-1+32],X=g[b-1+64],$=g[b-1-32],te=g[b+0-32],ae=g[b+1-32],le=g[b+2-32],pe=g[b+3-32];g[b+0+0]=g[b+1+64]=$+te+1>>1,g[b+1+0]=g[b+2+64]=te+ae+1>>1,g[b+2+0]=g[b+3+64]=ae+le+1>>1,g[b+3+0]=le+pe+1>>1,g[b+0+96]=Ct(X,k,I),g[b+0+64]=Ct(k,I,$),g[b+0+32]=g[b+1+96]=Ct(I,$,te),g[b+1+32]=g[b+2+96]=Ct($,te,ae),g[b+2+32]=g[b+3+96]=Ct(te,ae,le),g[b+3+32]=Ct(ae,le,pe)}function rl(g,b){var I=g[b+0-32],k=g[b+1-32],X=g[b+2-32],$=g[b+3-32],te=g[b+4-32],ae=g[b+5-32],le=g[b+6-32],pe=g[b+7-32];g[b+0+0]=I+k+1>>1,g[b+1+0]=g[b+0+64]=k+X+1>>1,g[b+2+0]=g[b+1+64]=X+$+1>>1,g[b+3+0]=g[b+2+64]=$+te+1>>1,g[b+0+32]=Ct(I,k,X),g[b+1+32]=g[b+0+96]=Ct(k,X,$),g[b+2+32]=g[b+1+96]=Ct(X,$,te),g[b+3+32]=g[b+2+96]=Ct($,te,ae),g[b+3+64]=Ct(te,ae,le),g[b+3+96]=Ct(ae,le,pe)}function al(g,b){var I=g[b-1+0],k=g[b-1+32],X=g[b-1+64],$=g[b-1+96];g[b+0+0]=I+k+1>>1,g[b+2+0]=g[b+0+32]=k+X+1>>1,g[b+2+32]=g[b+0+64]=X+$+1>>1,g[b+1+0]=Ct(I,k,X),g[b+3+0]=g[b+1+32]=Ct(k,X,$),g[b+3+32]=g[b+1+64]=Ct(X,$,$),g[b+3+64]=g[b+2+64]=g[b+0+96]=g[b+1+96]=g[b+2+96]=g[b+3+96]=$}function Zl(g,b){var I=g[b-1+0],k=g[b-1+32],X=g[b-1+64],$=g[b-1+96],te=g[b-1-32],ae=g[b+0-32],le=g[b+1-32],pe=g[b+2-32];g[b+0+0]=g[b+2+32]=I+te+1>>1,g[b+0+32]=g[b+2+64]=k+I+1>>1,g[b+0+64]=g[b+2+96]=X+k+1>>1,g[b+0+96]=$+X+1>>1,g[b+3+0]=Ct(ae,le,pe),g[b+2+0]=Ct(te,ae,le),g[b+1+0]=g[b+3+32]=Ct(I,te,ae),g[b+1+32]=g[b+3+64]=Ct(k,I,te),g[b+1+64]=g[b+3+96]=Ct(X,k,I),g[b+1+96]=Ct($,X,k)}function Fa(g,b){var I;for(I=0;8>I;++I)r(g,b+32*I,g,b-32,8)}function sl(g,b){var I;for(I=0;8>I;++I)s(g,b,g[b-1],8),b+=32}function Qr(g,b,I){var k;for(k=0;8>k;++k)s(b,I+32*k,g,8)}function kr(g,b){var I,k=8;for(I=0;8>I;++I)k+=g[b+I-32]+g[b-1+32*I];Qr(k>>4,g,b)}function Ns(g,b){var I,k=4;for(I=0;8>I;++I)k+=g[b+I-32];Qr(k>>3,g,b)}function $a(g,b){var I,k=4;for(I=0;8>I;++I)k+=g[b-1+32*I];Qr(k>>3,g,b)}function Ua(g,b){Qr(128,g,b)}function ya(g,b,I){var k=g[b-I],X=g[b+0],$=3*(X-k)+Th[1020+g[b-2*I]-g[b+I]],te=Ef[112+($+4>>3)];g[b-I]=Jr[255+k+Ef[112+($+3>>3)]],g[b+0]=Jr[255+X-te]}function Fi(g,b,I,k){var X=g[b+0],$=g[b+I];return Aa[255+g[b-2*I]-g[b-I]]>k||Aa[255+$-X]>k}function ol(g,b,I,k){return 4*Aa[255+g[b-I]-g[b+0]]+Aa[255+g[b-2*I]-g[b+I]]<=k}function ll(g,b,I,k,X){var $=g[b-3*I],te=g[b-2*I],ae=g[b-I],le=g[b+0],pe=g[b+I],Ne=g[b+2*I],je=g[b+3*I];return 4*Aa[255+ae-le]+Aa[255+te-pe]>k?0:Aa[255+g[b-4*I]-$]<=X&&Aa[255+$-te]<=X&&Aa[255+te-ae]<=X&&Aa[255+je-Ne]<=X&&Aa[255+Ne-pe]<=X&&Aa[255+pe-le]<=X}function cl(g,b,I,k){var X=2*k+1;for(k=0;16>k;++k)ol(g,b+k,I,X)&&ya(g,b+k,I)}function ba(g,b,I,k){var X=2*k+1;for(k=0;16>k;++k)ol(g,b+k*I,1,X)&&ya(g,b+k*I,1)}function za(g,b,I,k){var X;for(X=3;0<X;--X)cl(g,b+=4*I,I,k)}function Jc(g,b,I,k){var X;for(X=3;0<X;--X)ba(g,b+=4,I,k)}function tn(g,b,I,k,X,$,te,ae){for($=2*$+1;0<X--;){if(ll(g,b,I,$,te))if(Fi(g,b,I,ae))ya(g,b,I);else{var le=g,pe=b,Ne=I,je=le[pe-2*Ne],ke=le[pe-Ne],De=le[pe+0],Je=le[pe+Ne],Ge=le[pe+2*Ne],Se=27*(Ze=Th[1020+3*(De-ke)+Th[1020+je-Je]])+63>>7,_e=18*Ze+63>>7,Ze=9*Ze+63>>7;le[pe-3*Ne]=Jr[255+le[pe-3*Ne]+Ze],le[pe-2*Ne]=Jr[255+je+_e],le[pe-Ne]=Jr[255+ke+Se],le[pe+0]=Jr[255+De-Se],le[pe+Ne]=Jr[255+Je-_e],le[pe+2*Ne]=Jr[255+Ge-Ze]}b+=k}}function Br(g,b,I,k,X,$,te,ae){for($=2*$+1;0<X--;){if(ll(g,b,I,$,te))if(Fi(g,b,I,ae))ya(g,b,I);else{var le=g,pe=b,Ne=I,je=le[pe-Ne],ke=le[pe+0],De=le[pe+Ne],Je=Ef[112+((Ge=3*(ke-je))+4>>3)],Ge=Ef[112+(Ge+3>>3)],Se=Je+1>>1;le[pe-2*Ne]=Jr[255+le[pe-2*Ne]+Se],le[pe-Ne]=Jr[255+je+Ge],le[pe+0]=Jr[255+ke-Je],le[pe+Ne]=Jr[255+De-Se]}b+=k}}function es(g,b,I,k,X,$){tn(g,b,I,1,16,k,X,$)}function mr(g,b,I,k,X,$){tn(g,b,1,I,16,k,X,$)}function $c(g,b,I,k,X,$){var te;for(te=3;0<te;--te)Br(g,b+=4*I,I,1,16,k,X,$)}function Pe(g,b,I,k,X,$){var te;for(te=3;0<te;--te)Br(g,b+=4,1,I,16,k,X,$)}function Yt(g,b,I,k,X,$,te,ae){tn(g,b,X,1,8,$,te,ae),tn(I,k,X,1,8,$,te,ae)}function fi(g,b,I,k,X,$,te,ae){tn(g,b,1,X,8,$,te,ae),tn(I,k,1,X,8,$,te,ae)}function ts(g,b,I,k,X,$,te,ae){Br(g,b+4*X,X,1,8,$,te,ae),Br(I,k+4*X,X,1,8,$,te,ae)}function ul(g,b,I,k,X,$,te,ae){Br(g,b+4,1,X,8,$,te,ae),Br(I,k+4,1,X,8,$,te,ae)}function to(){this.ba=new Vt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Xn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function fl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function hl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function no(){this.ua=0,this.Wa=new me,this.vb=new me,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ce,this.yc=new L}function hi(){this.xb=this.a=0,this.l=new Xt,this.ca=new Vt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new no,this.ab=0,this.gc=f(4,hl),this.Oc=0}function ns(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Cn(g,b,I,k,X,$,te){for(g=g==null?0:g[b+0],b=0;b<te;++b)X[$+b]=g+I[k+b]&255,g=X[$+b]}function is(g,b,I,k,X,$,te){var ae;if(g==null)Cn(null,null,I,k,X,$,te);else for(ae=0;ae<te;++ae)X[$+ae]=g[b+ae]+I[k+ae]&255}function xr(g,b,I,k,X,$,te){if(g==null)Cn(null,null,I,k,X,$,te);else{var ae,le=g[b+0],pe=le,Ne=le;for(ae=0;ae<te;++ae)pe=Ne+(le=g[b+ae])-pe,Ne=I[k+ae]+(-256&pe?0>pe?0:255:pe)&255,pe=le,X[$+ae]=Ne}}function mn(g,b,I,k){var X=b.width,$=b.o;if(t(g!=null&&b!=null),0>I||0>=k||I+k>$)return null;if(!g.Cc){if(g.ga==null){var te;if(g.ga=new ns,(te=g.ga==null)||(te=b.width*b.o,t(g.Gb.length==0),g.Gb=o(te),g.Uc=0,g.Gb==null?te=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,te=1),te=!te),!te){te=g.ga;var ae=g.Fa,le=g.P,pe=g.qc,Ne=g.mb,je=g.nb,ke=le+1,De=pe-1,Je=te.l;if(t(ae!=null&&Ne!=null&&b!=null),oo[0]=null,oo[1]=Cn,oo[2]=is,oo[3]=xr,te.ca=Ne,te.tb=je,te.c=b.width,te.i=b.height,t(0<te.c&&0<te.i),1>=pe)b=0;else if(te.$a=ae[le+0]>>0&3,te.Z=ae[le+0]>>2&3,te.Lc=ae[le+0]>>4&3,le=ae[le+0]>>6&3,0>te.$a||1<te.$a||4<=te.Z||1<te.Lc||le)b=0;else if(Je.put=ar,Je.ac=fn,Je.bc=Er,Je.ma=te,Je.width=b.width,Je.height=b.height,Je.Da=b.Da,Je.v=b.v,Je.va=b.va,Je.j=b.j,Je.o=b.o,te.$a)e:{t(te.$a==1),b=sr();t:for(;;){if(b==null){b=0;break e}if(t(te!=null),te.mc=b,b.c=te.c,b.i=te.i,b.l=te.l,b.l.ma=te,b.l.width=te.c,b.l.height=te.i,b.a=0,ue(b.m,ae,ke,De),!Ni(te.c,te.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&dr(b.s)?(te.ic=1,ae=b.c*b.i,b.Ta=null,b.Ua=0,b.V=o(ae),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(te.ic=0,b=vs(b,te.c)),!b))break t;b=1;break e}te.mc=null,b=0}else b=De>=te.c*te.i;te=!b}if(te)return null;g.ga.Lc!=1?g.Ga=0:k=$-I}t(g.ga!=null),t(I+k<=$);e:{if(b=(ae=g.ga).c,$=ae.l.o,ae.$a==0){if(ke=g.rc,De=g.Vc,Je=g.Fa,le=g.P+1+I*b,pe=g.mb,Ne=g.nb+I*b,t(le<=g.P+g.qc),ae.Z!=0)for(t(oo[ae.Z]!=null),te=0;te<k;++te)oo[ae.Z](ke,De,Je,le,pe,Ne,b),ke=pe,De=Ne,Ne+=b,le+=b;else for(te=0;te<k;++te)r(pe,Ne,Je,le,b),ke=pe,De=Ne,Ne+=b,le+=b;g.rc=ke,g.Vc=De}else{if(t(ae.mc!=null),b=I+k,t((te=ae.mc)!=null),t(b<=te.i),te.C>=b)b=1;else if(ae.ic||Re(),ae.ic){ae=te.V,ke=te.Ba,De=te.c;var Ge=te.i,Se=(Je=1,le=te.$/De,pe=te.$%De,Ne=te.m,je=te.s,te.$),_e=De*Ge,Ze=De*b,rt=je.wc,Qe=Se<Ze?Ln(je,pe,le):null;t(Se<=_e),t(b<=Ge),t(dr(je));t:for(;;){for(;!Ne.h&&Se<Ze;){if(pe&rt||(Qe=Ln(je,pe,le)),t(Qe!=null),se(Ne),256>(Ge=Xi(Qe.G[0],Qe.H[0],Ne)))ae[ke+Se]=Ge,++Se,++pe>=De&&(pe=0,++le<=b&&!(le%16)&&Hn(te,le));else{if(!(280>Ge)){Je=0;break t}Ge=Xr(Ge-256,Ne);var At,dt=Xi(Qe.G[4],Qe.H[4],Ne);if(se(Ne),!(Se>=(dt=Wi(De,dt=Xr(dt,Ne)))&&_e-Se>=Ge)){Je=0;break t}for(At=0;At<Ge;++At)ae[ke+Se+At]=ae[ke+Se+At-dt];for(Se+=Ge,pe+=Ge;pe>=De;)pe-=De,++le<=b&&!(le%16)&&Hn(te,le);Se<Ze&&pe&rt&&(Qe=Ln(je,pe,le))}t(Ne.h==ie(Ne))}Hn(te,le>b?b:le);break t}!Je||Ne.h&&Se<_e?(Je=0,te.a=Ne.h?5:3):te.$=Se,b=Je}else b=Zi(te,te.V,te.Ba,te.c,te.i,b,Qs);if(!b){k=0;break e}}I+k>=$&&(g.Cc=1),k=1}if(!k)return null;if(g.Cc&&((k=g.ga)!=null&&(k.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+I*X}function N(g,b,I,k,X,$){for(;0<X--;){var te,ae=g,le=b+(I?1:0),pe=g,Ne=b+(I?0:3);for(te=0;te<k;++te){var je=pe[Ne+4*te];je!=255&&(je*=32897,ae[le+4*te+0]=ae[le+4*te+0]*je>>23,ae[le+4*te+1]=ae[le+4*te+1]*je>>23,ae[le+4*te+2]=ae[le+4*te+2]*je>>23)}b+=$}}function Z(g,b,I,k,X){for(;0<k--;){var $;for($=0;$<I;++$){var te=g[b+2*$+0],ae=15&(pe=g[b+2*$+1]),le=4369*ae,pe=(240&pe|pe>>4)*le>>16;g[b+2*$+0]=(240&te|te>>4)*le>>16&240|(15&te|te<<4)*le>>16>>4&15,g[b+2*$+1]=240&pe|ae}b+=X}}function de(g,b,I,k,X,$,te,ae){var le,pe,Ne=255;for(pe=0;pe<X;++pe){for(le=0;le<k;++le){var je=g[b+le];$[te+4*le]=je,Ne&=je}b+=I,te+=ae}return Ne!=255}function we(g,b,I,k,X){var $;for($=0;$<X;++$)I[k+$]=g[b+$]>>8}function Re(){Fr=N,qn=Z,Vn=de,_i=we}function Ye(g,b,I){R[g]=function(k,X,$,te,ae,le,pe,Ne,je,ke,De,Je,Ge,Se,_e,Ze,rt){var Qe,At=rt-1>>1,dt=ae[le+0]|pe[Ne+0]<<16,jt=je[ke+0]|De[Je+0]<<16;t(k!=null);var xt=3*dt+jt+131074>>2;for(b(k[X+0],255&xt,xt>>16,Ge,Se),$!=null&&(xt=3*jt+dt+131074>>2,b($[te+0],255&xt,xt>>16,_e,Ze)),Qe=1;Qe<=At;++Qe){var An=ae[le+Qe]|pe[Ne+Qe]<<16,Tn=je[ke+Qe]|De[Je+Qe]<<16,xn=dt+An+jt+Tn+524296,on=xn+2*(An+jt)>>3;xt=on+dt>>1,dt=(xn=xn+2*(dt+Tn)>>3)+An>>1,b(k[X+2*Qe-1],255&xt,xt>>16,Ge,Se+(2*Qe-1)*I),b(k[X+2*Qe-0],255&dt,dt>>16,Ge,Se+(2*Qe-0)*I),$!=null&&(xt=xn+jt>>1,dt=on+Tn>>1,b($[te+2*Qe-1],255&xt,xt>>16,_e,Ze+(2*Qe-1)*I),b($[te+2*Qe+0],255&dt,dt>>16,_e,Ze+(2*Qe+0)*I)),dt=An,jt=Tn}1&rt||(xt=3*dt+jt+131074>>2,b(k[X+rt-1],255&xt,xt>>16,Ge,Se+(rt-1)*I),$!=null&&(xt=3*jt+dt+131074>>2,b($[te+rt-1],255&xt,xt>>16,_e,Ze+(rt-1)*I)))}}function $e(){Na[Tf]=Dy,Na[_f]=ig,Na[J2]=Ry,Na[If]=rg,Na[Df]=ag,Na[_h]=sg,Na[$2]=Oy,Na[Ih]=ig,Na[Dh]=rg,Na[Rf]=ag,Na[Rh]=sg}function yt(g){return g&-16384?0>g?0:255:g>>Ly}function Rt(g,b){return yt((19077*g>>8)+(26149*b>>8)-14234)}function zt(g,b,I){return yt((19077*g>>8)-(6419*b>>8)-(13320*I>>8)+8708)}function Ht(g,b){return yt((19077*g>>8)+(33050*b>>8)-17685)}function nn(g,b,I,k,X){k[X+0]=Rt(g,I),k[X+1]=zt(g,b,I),k[X+2]=Ht(g,b)}function Kn(g,b,I,k,X){k[X+0]=Ht(g,b),k[X+1]=zt(g,b,I),k[X+2]=Rt(g,I)}function En(g,b,I,k,X){var $=zt(g,b,I);b=$<<3&224|Ht(g,b)>>3,k[X+0]=248&Rt(g,I)|$>>5,k[X+1]=b}function ii(g,b,I,k,X){var $=240&Ht(g,b)|15;k[X+0]=240&Rt(g,I)|zt(g,b,I)>>4,k[X+1]=$}function Qi(g,b,I,k,X){k[X+0]=255,nn(g,b,I,k,X+1)}function ri(g,b,I,k,X){Kn(g,b,I,k,X),k[X+3]=255}function Kr(g,b,I,k,X){nn(g,b,I,k,X),k[X+3]=255}function xi(g,b){return 0>g?0:g>b?b:g}function Ir(g,b,I){R[g]=function(k,X,$,te,ae,le,pe,Ne,je){for(var ke=Ne+(-2&je)*I;Ne!=ke;)b(k[X+0],$[te+0],ae[le+0],pe,Ne),b(k[X+1],$[te+0],ae[le+0],pe,Ne+I),X+=2,++te,++le,Ne+=2*I;1&je&&b(k[X+0],$[te+0],ae[le+0],pe,Ne)}}function lr(g,b,I){return I==0?g==0?b==0?6:5:b==0?4:0:I}function io(g,b,I,k,X){switch(g>>>30){case 3:Ae(b,I,k,X,0);break;case 2:Ie(b,I,k,X);break;case 1:nt(b,I,k,X)}}function yr(g,b){var I,k,X=b.M,$=b.Nb,te=g.oc,ae=g.pc+40,le=g.oc,pe=g.pc+584,Ne=g.oc,je=g.pc+600;for(I=0;16>I;++I)te[ae+32*I-1]=129;for(I=0;8>I;++I)le[pe+32*I-1]=129,Ne[je+32*I-1]=129;for(0<X?te[ae-1-32]=le[pe-1-32]=Ne[je-1-32]=129:(s(te,ae-32-1,127,21),s(le,pe-32-1,127,9),s(Ne,je-32-1,127,9)),k=0;k<g.za;++k){var ke=b.ya[b.aa+k];if(0<k){for(I=-1;16>I;++I)r(te,ae+32*I-4,te,ae+32*I+12,4);for(I=-1;8>I;++I)r(le,pe+32*I-4,le,pe+32*I+4,4),r(Ne,je+32*I-4,Ne,je+32*I+4,4)}var De=g.Gd,Je=g.Hd+k,Ge=ke.ad,Se=ke.Hc;if(0<X&&(r(te,ae-32,De[Je].y,0,16),r(le,pe-32,De[Je].f,0,8),r(Ne,je-32,De[Je].ea,0,8)),ke.Za){var _e=te,Ze=ae-32+16;for(0<X&&(k>=g.za-1?s(_e,Ze,De[Je].y[15],4):r(_e,Ze,De[Je+1].y,0,4)),I=0;4>I;I++)_e[Ze+128+I]=_e[Ze+256+I]=_e[Ze+384+I]=_e[Ze+0+I];for(I=0;16>I;++I,Se<<=2)_e=te,Ze=ae+lg[I],Ha[ke.Ob[I]](_e,Ze),io(Se,Ge,16*+I,_e,Ze)}else if(_e=lr(k,X,ke.Ob[0]),so[_e](te,ae),Se!=0)for(I=0;16>I;++I,Se<<=2)io(Se,Ge,16*+I,te,ae+lg[I]);for(I=ke.Gc,_e=lr(k,X,ke.Dd),Ts[_e](le,pe),Ts[_e](Ne,je),Se=Ge,_e=le,Ze=pe,255&(ke=I>>0)&&(170&ke?Fe(Se,256,_e,Ze):st(Se,256,_e,Ze)),ke=Ne,Se=je,255&(I>>=8)&&(170&I?Fe(Ge,320,ke,Se):st(Ge,320,ke,Se)),X<g.Ub-1&&(r(De[Je].y,0,te,ae+480,16),r(De[Je].f,0,le,pe+224,8),r(De[Je].ea,0,Ne,je+224,8)),I=8*$*g.B,De=g.sa,Je=g.ta+16*k+16*$*g.R,Ge=g.qa,ke=g.ra+8*k+I,Se=g.Ha,_e=g.Ia+8*k+I,I=0;16>I;++I)r(De,Je+I*g.R,te,ae+32*I,16);for(I=0;8>I;++I)r(Ge,ke+I*g.B,le,pe+32*I,8),r(Se,_e+I*g.B,Ne,je+32*I,8)}}function ro(g,b,I,k,X,$,te,ae,le){var pe=[0],Ne=[0],je=0,ke=le!=null?le.kd:0,De=le??new fl;if(g==null||12>I)return 7;De.data=g,De.w=b,De.ha=I,b=[b],I=[I],De.gb=[De.gb];e:{var Je=b,Ge=I,Se=De.gb;if(t(g!=null),t(Ge!=null),t(Se!=null),Se[0]=0,12<=Ge[0]&&!n(g,Je[0],"RIFF")){if(n(g,Je[0]+8,"WEBP")){Se=3;break e}var _e=qe(g,Je[0]+4);if(12>_e||4294967286<_e){Se=3;break e}if(ke&&_e>Ge[0]-8){Se=7;break e}Se[0]=_e,Je[0]+=12,Ge[0]-=12}Se=0}if(Se!=0)return Se;for(_e=0<De.gb[0],I=I[0];;){e:{var Ze=g;Ge=b,Se=I;var rt=pe,Qe=Ne,At=Je=[0];if((xt=je=[je])[0]=0,8>Se[0])Se=7;else{if(!n(Ze,Ge[0],"VP8X")){if(qe(Ze,Ge[0]+4)!=10){Se=3;break e}if(18>Se[0]){Se=7;break e}var dt=qe(Ze,Ge[0]+8),jt=1+tt(Ze,Ge[0]+12);if(2147483648<=jt*(Ze=1+tt(Ze,Ge[0]+15))){Se=3;break e}At!=null&&(At[0]=dt),rt!=null&&(rt[0]=jt),Qe!=null&&(Qe[0]=Ze),Ge[0]+=18,Se[0]-=18,xt[0]=1}Se=0}}if(je=je[0],Je=Je[0],Se!=0)return Se;if(Ge=!!(2&Je),!_e&&je)return 3;if($!=null&&($[0]=!!(16&Je)),te!=null&&(te[0]=Ge),ae!=null&&(ae[0]=0),te=pe[0],Je=Ne[0],je&&Ge&&le==null){Se=0;break}if(4>I){Se=7;break}if(_e&&je||!_e&&!je&&!n(g,b[0],"ALPH")){I=[I],De.na=[De.na],De.P=[De.P],De.Sa=[De.Sa];e:{dt=g,Se=b,_e=I;var xt=De.gb;rt=De.na,Qe=De.P,At=De.Sa,jt=22,t(dt!=null),t(_e!=null),Ze=Se[0];var An=_e[0];for(t(rt!=null),t(At!=null),rt[0]=null,Qe[0]=null,At[0]=0;;){if(Se[0]=Ze,_e[0]=An,8>An){Se=7;break e}var Tn=qe(dt,Ze+4);if(4294967286<Tn){Se=3;break e}var xn=8+Tn+1&-2;if(jt+=xn,0<xt&&jt>xt){Se=3;break e}if(!n(dt,Ze,"VP8 ")||!n(dt,Ze,"VP8L")){Se=0;break e}if(An[0]<xn){Se=7;break e}n(dt,Ze,"ALPH")||(rt[0]=dt,Qe[0]=Ze+8,At[0]=Tn),Ze+=xn,An-=xn}}if(I=I[0],De.na=De.na[0],De.P=De.P[0],De.Sa=De.Sa[0],Se!=0)break}I=[I],De.Ja=[De.Ja],De.xa=[De.xa];e:if(xt=g,Se=b,_e=I,rt=De.gb[0],Qe=De.Ja,At=De.xa,dt=Se[0],Ze=!n(xt,dt,"VP8 "),jt=!n(xt,dt,"VP8L"),t(xt!=null),t(_e!=null),t(Qe!=null),t(At!=null),8>_e[0])Se=7;else{if(Ze||jt){if(xt=qe(xt,dt+4),12<=rt&&xt>rt-12){Se=3;break e}if(ke&&xt>_e[0]-8){Se=7;break e}Qe[0]=xt,Se[0]+=8,_e[0]-=8,At[0]=jt}else At[0]=5<=_e[0]&&xt[dt+0]==47&&!(xt[dt+4]>>5),Qe[0]=_e[0];Se=0}if(I=I[0],De.Ja=De.Ja[0],De.xa=De.xa[0],b=b[0],Se!=0)break;if(4294967286<De.Ja)return 3;if(ae==null||Ge||(ae[0]=De.xa?2:1),te=[te],Je=[Je],De.xa){if(5>I){Se=7;break}ae=te,ke=Je,Ge=$,g==null||5>I?g=0:5<=I&&g[b+0]==47&&!(g[b+4]>>5)?(_e=[0],xt=[0],rt=[0],ue(Qe=new z,g,b,I),Tt(Qe,_e,xt,rt)?(ae!=null&&(ae[0]=_e[0]),ke!=null&&(ke[0]=xt[0]),Ge!=null&&(Ge[0]=rt[0]),g=1):g=0):g=0}else{if(10>I){Se=7;break}ae=Je,g==null||10>I||!Ks(g,b+3,I-3)?g=0:(ke=g[b+0]|g[b+1]<<8|g[b+2]<<16,Ge=16383&(g[b+7]<<8|g[b+6]),g=16383&(g[b+9]<<8|g[b+8]),1&ke||3<(ke>>1&7)||!(ke>>4&1)||ke>>5>=De.Ja||!Ge||!g?g=0:(te&&(te[0]=Ge),ae&&(ae[0]=g),g=1))}if(!g||(te=te[0],Je=Je[0],je&&(pe[0]!=te||Ne[0]!=Je)))return 3;le!=null&&(le[0]=De,le.offset=b-le.w,t(4294967286>b-le.w),t(le.offset==le.ha-I));break}return Se==0||Se==7&&je&&le==null?($!=null&&($[0]|=De.na!=null&&0<De.na.length),k!=null&&(k[0]=te),X!=null&&(X[0]=Je),0):Se}function Ss(g,b,I){var k=b.width,X=b.height,$=0,te=0,ae=k,le=X;if(b.Da=g!=null&&0<g.Da,b.Da&&(ae=g.cd,le=g.bd,$=g.v,te=g.j,11>I||($&=-2,te&=-2),0>$||0>te||0>=ae||0>=le||$+ae>k||te+le>X))return 0;if(b.v=$,b.j=te,b.va=$+ae,b.o=te+le,b.U=ae,b.T=le,b.da=g!=null&&0<g.da,b.da){if(!pt(ae,le,I=[g.ib],$=[g.hb]))return 0;b.ib=I[0],b.hb=$[0]}return b.ob=g!=null&&g.ob,b.Kb=g==null||!g.Sd,b.da&&(b.ob=b.ib<3*k/4&&b.hb<3*X/4,b.Kb=0),1}function dl(g){if(g==null)return 2;if(11>g.S){var b=g.f.RGBA;b.fb+=(g.height-1)*b.A,b.A=-b.A}else b=g.f.kb,g=g.height,b.O+=(g-1)*b.fa,b.fa=-b.fa,b.N+=(g-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(g-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(g-1)*b.lb,b.lb=-b.lb);return 0}function Cs(g,b,I,k){if(k==null||0>=g||0>=b)return 2;if(I!=null){if(I.Da){var X=I.cd,$=I.bd,te=-2&I.v,ae=-2&I.j;if(0>te||0>ae||0>=X||0>=$||te+X>g||ae+$>b)return 2;g=X,b=$}if(I.da){if(!pt(g,b,X=[I.ib],$=[I.hb]))return 2;g=X[0],b=$[0]}}k.width=g,k.height=b;e:{var le=k.width,pe=k.height;if(g=k.S,0>=le||0>=pe||!(g>=Tf&&13>g))g=2;else{if(0>=k.Rd&&k.sd==null){te=$=X=b=0;var Ne=(ae=le*cg[g])*pe;if(11>g||($=(pe+1)/2*(b=(le+1)/2),g==12&&(te=(X=le)*pe)),(pe=o(Ne+2*$+te))==null){g=1;break e}k.sd=pe,11>g?((le=k.f.RGBA).eb=pe,le.fb=0,le.A=ae,le.size=Ne):((le=k.f.kb).y=pe,le.O=0,le.fa=ae,le.Fd=Ne,le.f=pe,le.N=0+Ne,le.Ab=b,le.Cd=$,le.ea=pe,le.W=0+Ne+$,le.Db=b,le.Ed=$,g==12&&(le.F=pe,le.J=0+Ne+2*$),le.Tc=te,le.lb=X)}if(b=1,X=k.S,$=k.width,te=k.height,X>=Tf&&13>X)if(11>X)g=k.f.RGBA,b&=(ae=Math.abs(g.A))*(te-1)+$<=g.size,b&=ae>=$*cg[X],b&=g.eb!=null;else{g=k.f.kb,ae=($+1)/2,Ne=(te+1)/2,le=Math.abs(g.fa),pe=Math.abs(g.Ab);var je=Math.abs(g.Db),ke=Math.abs(g.lb),De=ke*(te-1)+$;b&=le*(te-1)+$<=g.Fd,b&=pe*(Ne-1)+ae<=g.Cd,b=(b&=je*(Ne-1)+ae<=g.Ed)&le>=$&pe>=ae&je>=ae,b&=g.y!=null,b&=g.f!=null,b&=g.ea!=null,X==12&&(b&=ke>=$,b&=De<=g.Tc,b&=g.F!=null)}else b=0;g=b?0:2}}return g!=0||I!=null&&I.fd&&(g=dl(k)),g}var Mn=64,ao=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],rs=24,va=32,$t=8,Ui=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];lt("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(g){return g},R.Predictor2=function(g,b,I){return b[I+0]},R.Predictor3=function(g,b,I){return b[I+1]},R.Predictor4=function(g,b,I){return b[I-1]},R.Predictor5=function(g,b,I){return Te(Te(g,b[I+1]),b[I+0])},R.Predictor6=function(g,b,I){return Te(g,b[I-1])},R.Predictor7=function(g,b,I){return Te(g,b[I+0])},R.Predictor8=function(g,b,I){return Te(b[I-1],b[I+0])},R.Predictor9=function(g,b,I){return Te(b[I+0],b[I+1])},R.Predictor10=function(g,b,I){return Te(Te(g,b[I-1]),Te(b[I+0],b[I+1]))},R.Predictor11=function(g,b,I){var k=b[I+0];return 0>=vt(k>>24&255,g>>24&255,(b=b[I-1])>>24&255)+vt(k>>16&255,g>>16&255,b>>16&255)+vt(k>>8&255,g>>8&255,b>>8&255)+vt(255&k,255&g,255&b)?k:g},R.Predictor12=function(g,b,I){var k=b[I+0];return(ze((g>>24&255)+(k>>24&255)-((b=b[I-1])>>24&255))<<24|ze((g>>16&255)+(k>>16&255)-(b>>16&255))<<16|ze((g>>8&255)+(k>>8&255)-(b>>8&255))<<8|ze((255&g)+(255&k)-(255&b)))>>>0},R.Predictor13=function(g,b,I){var k=b[I-1];return(Xe((g=Te(g,b[I+0]))>>24&255,k>>24&255)<<24|Xe(g>>16&255,k>>16&255)<<16|Xe(g>>8&255,k>>8&255)<<8|Xe(g>>0&255,k>>0&255))>>>0};var Y=R.PredictorAdd0;R.PredictorAdd1=mt,lt("Predictor2","PredictorAdd2"),lt("Predictor3","PredictorAdd3"),lt("Predictor4","PredictorAdd4"),lt("Predictor5","PredictorAdd5"),lt("Predictor6","PredictorAdd6"),lt("Predictor7","PredictorAdd7"),lt("Predictor8","PredictorAdd8"),lt("Predictor9","PredictorAdd9"),lt("Predictor10","PredictorAdd10"),lt("Predictor11","PredictorAdd11"),lt("Predictor12","PredictorAdd12"),lt("Predictor13","PredictorAdd13");var i=R.PredictorAdd2;Mt("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),Mt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var a,l=R.ColorIndexInverseTransform,c=R.MapARGB,u=R.VP8LColorIndexInverseTransformAlpha,d=R.MapAlpha,x=R.VP8LPredictorsAdd=[];x.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var v,C,B,V,ee,ge,ve,Ae,Ie,Fe,nt,st,it,Qt,Pt,yi,zi,di,un,ai,Ti,Dr,wa,Pr,Fr,qn,Vn,_i,Hi=o(511),Es=o(2041),eu=o(225),Ql=o(767),Cf=0,Th=Es,Ef=eu,Jr=Ql,Aa=Hi,Tf=0,_f=1,J2=2,If=3,Df=4,_h=5,$2=6,Ih=7,Dh=8,Rf=9,Rh=10,my=[2,3,7],xy=[3,3,11],eg=[280,256,256,256,40],yy=[0,1,1,1,0],by=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],vy=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],wy=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ay=8,Oh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Lh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],tu=null,Ny=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Sy=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],tg=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Cy=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ey=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ty=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_y=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],so=[],Ha=[],Ts=[],Iy=1,ng=2,oo=[],Na=[];Ye("UpsampleRgbLinePair",nn,3),Ye("UpsampleBgrLinePair",Kn,3),Ye("UpsampleRgbaLinePair",Kr,4),Ye("UpsampleBgraLinePair",ri,4),Ye("UpsampleArgbLinePair",Qi,4),Ye("UpsampleRgba4444LinePair",ii,2),Ye("UpsampleRgb565LinePair",En,2);var Dy=R.UpsampleRgbLinePair,Ry=R.UpsampleBgrLinePair,ig=R.UpsampleRgbaLinePair,rg=R.UpsampleBgraLinePair,ag=R.UpsampleArgbLinePair,sg=R.UpsampleRgba4444LinePair,Oy=R.UpsampleRgb565LinePair,Of=16,Lf=1<<Of-1,nu=-227,Mh=482,Ly=6,og=0,My=o(256),jy=o(256),ky=o(256),By=o(256),Py=o(Mh-nu),Fy=o(Mh-nu);Ir("YuvToRgbRow",nn,3),Ir("YuvToBgrRow",Kn,3),Ir("YuvToRgbaRow",Kr,4),Ir("YuvToBgraRow",ri,4),Ir("YuvToArgbRow",Qi,4),Ir("YuvToRgba4444Row",ii,2),Ir("YuvToRgb565Row",En,2);var lg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Mf=[0,2,8],Uy=[8,7,6,4,4,2,2,2,1,1,1,1],zy=1;this.WebPDecodeRGBA=function(g,b,I,k,X){var $=_f,te=new to,ae=new Vt;te.ba=ae,ae.S=$,ae.width=[ae.width],ae.height=[ae.height];var le=ae.width,pe=ae.height,Ne=new rr;if(Ne==null||g==null)var je=2;else t(Ne!=null),je=ro(g,b,I,Ne.width,Ne.height,Ne.Pd,Ne.Qd,Ne.format,null);if(je!=0?le=0:(le!=null&&(le[0]=Ne.width[0]),pe!=null&&(pe[0]=Ne.height[0]),le=1),le){ae.width=ae.width[0],ae.height=ae.height[0],k!=null&&(k[0]=ae.width),X!=null&&(X[0]=ae.height);e:{if(k=new Xt,(X=new fl).data=g,X.w=b,X.ha=I,X.kd=1,b=[0],t(X!=null),((g=ro(X.data,X.w,X.ha,null,null,null,b,null,X))==0||g==7)&&b[0]&&(g=4),(b=g)==0){if(t(te!=null),k.data=X.data,k.w=X.w+X.offset,k.ha=X.ha-X.offset,k.put=ar,k.ac=fn,k.bc=Er,k.ma=te,X.xa){if((g=sr())==null){te=1;break e}if(function(ke,De){var Je=[0],Ge=[0],Se=[0];t:for(;;){if(ke==null)return 0;if(De==null)return ke.a=2,0;if(ke.l=De,ke.a=0,ue(ke.m,De.data,De.w,De.ha),!Tt(ke.m,Je,Ge,Se)){ke.a=3;break t}if(ke.xb=ng,De.width=Je[0],De.height=Ge[0],!Ni(Je[0],Ge[0],1,ke,null))break t;return 1}return t(ke.a!=0),0}(g,k)){if(k=(b=Cs(k.width,k.height,te.Oa,te.ba))==0){t:{k=g;n:for(;;){if(k==null){k=0;break t}if(t(k.s.yc!=null),t(k.s.Ya!=null),t(0<k.s.Wb),t((I=k.l)!=null),t((X=I.ma)!=null),k.xb!=0){if(k.ca=X.ba,k.tb=X.tb,t(k.ca!=null),!Ss(X.Oa,I,If)){k.a=2;break n}if(!vs(k,I.width)||I.da)break n;if((I.da||sn(k.ca.S))&&Re(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&Re()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!ut(k.s.vb,k.s.Wa.Xa)){k.a=1;break n}k.xb=0}if(!Zi(k,k.V,k.Ba,k.c,k.i,I.o,bt))break n;X.Dc=k.Ma,k=1;break t}t(k.a!=0),k=0}k=!k}k&&(b=g.a)}else b=g.a}else{if((g=new $o)==null){te=1;break e}if(g.Fa=X.na,g.P=X.P,g.qc=X.Sa,ti(g,k)){if((b=Cs(k.width,k.height,te.Oa,te.ba))==0){if(g.Aa=0,I=te.Oa,t((X=g)!=null),I!=null){if(0<(le=0>(le=I.Md)?0:100<le?255:255*le/100)){for(pe=Ne=0;4>pe;++pe)12>(je=X.pb[pe]).lc&&(je.ia=le*Uy[0>je.lc?0:je.lc]>>3),Ne|=je.ia;Ne&&(alert("todo:VP8InitRandom"),X.ia=1)}X.Ga=I.Id,100<X.Ga?X.Ga=100:0>X.Ga&&(X.Ga=0)}Qn(g,k)||(b=g.a)}}else b=g.a}b==0&&te.Oa!=null&&te.Oa.fd&&(b=dl(te.ba))}te=b}$=te!=0?null:11>$?ae.f.RGBA.eb:ae.f.kb.y}else $=null;return $};var cg=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function y(R,M){for(var J="",F=0;F<4;F++)J+=String.fromCharCode(R[M++]);return J}function S(R,M){return(R[M+0]<<0|R[M+1]<<8|R[M+2]<<16)>>>0}function w(R,M){return(R[M+0]<<0|R[M+1]<<8|R[M+2]<<16|R[M+3]<<24)>>>0}new m;var E=[0],A=[0],U=[],O=new m,H=e,_=function(R,M){var J={},F=0,L=!1,re=0,ce=0;if(J.frames=[],!function(G,ie,fe,se){for(var Ee=0;Ee<se;Ee++)if(G[ie+Ee]!=fe.charCodeAt(Ee))return!0;return!1}(R,M,"RIFF",4)){var ne,Q;for(w(R,M+=4),M+=8;M<R.length;){var W=y(R,M),ue=w(R,M+=4);M+=4;var oe=ue+(1&ue);switch(W){case"VP8 ":case"VP8L":J.frames[F]===void 0&&(J.frames[F]={}),(z=J.frames[F]).src_off=L?ce:M-8,z.src_size=re+ue+8,F++,L&&(L=!1,re=0,ce=0);break;case"VP8X":(z=J.header={}).feature_flags=R[M];var ye=M+4;z.canvas_width=1+S(R,ye),ye+=3,z.canvas_height=1+S(R,ye),ye+=3;break;case"ALPH":L=!0,re=oe+8,ce=M-8;break;case"ANIM":(z=J.header).bgcolor=w(R,M),ye=M+4,z.loop_count=(ne=R)[(Q=ye)+0]<<0|ne[Q+1]<<8,ye+=2;break;case"ANMF":var xe,z;(z=J.frames[F]={}).offset_x=2*S(R,M),M+=3,z.offset_y=2*S(R,M),M+=3,z.width=1+S(R,M),M+=3,z.height=1+S(R,M),M+=3,z.duration=S(R,M),M+=3,xe=R[M++],z.dispose=1&xe,z.blend=xe>>1&1}W!="ANMF"&&(M+=oe)}return J}}(H,0);_.response=H,_.rgbaoutput=!0,_.dataurl=!1;var T=_.header?_.header:null,D=_.frames?_.frames:null;if(T){T.loop_counter=T.loop_count,E=[T.canvas_height],A=[T.canvas_width];for(var j=0;j<D.length&&D[j].blend!=0;j++);}var q=D[0],K=O.WebPDecodeRGBA(H,q.src_off,q.src_size,A,E);q.rgba=K,q.imgwidth=A[0],q.imgheight=E[0];for(var P=0;P<A[0]*E[0]*4;P++)U[P]=K[P];return this.width=A,this.height=E,this.data=U,this}(function(e){var t=function(){return typeof k1=="function"},n=function(E,A,U,O){var H=4,_=f;switch(O){case e.image_compression.FAST:H=1,_=o;break;case e.image_compression.MEDIUM:H=6,_=p;break;case e.image_compression.SLOW:H=9,_=m}E=r(E,A,U,_);var T=k1(E,{level:H});return e.__addimage__.arrayBufferToBinaryString(T)},r=function(E,A,U,O){for(var H,_,T,D=E.length/A,j=new Uint8Array(E.length+D),q=S(),K=0;K<D;K+=1){if(T=K*A,H=E.subarray(T,T+A),O)j.set(O(H,U,_),T+K);else{for(var P,R=q.length,M=[];P<R;P+=1)M[P]=q[P](H,U,_);var J=w(M.concat());j.set(M[J],T+K)}_=H}return j},s=function(E){var A=Array.apply([],E);return A.unshift(0),A},o=function(E,A){var U,O=[],H=E.length;O[0]=1;for(var _=0;_<H;_+=1)U=E[_-A]||0,O[_+1]=E[_]-U+256&255;return O},f=function(E,A,U){var O,H=[],_=E.length;H[0]=2;for(var T=0;T<_;T+=1)O=U&&U[T]||0,H[T+1]=E[T]-O+256&255;return H},p=function(E,A,U){var O,H,_=[],T=E.length;_[0]=3;for(var D=0;D<T;D+=1)O=E[D-A]||0,H=U&&U[D]||0,_[D+1]=E[D]+256-(O+H>>>1)&255;return _},m=function(E,A,U){var O,H,_,T,D=[],j=E.length;D[0]=4;for(var q=0;q<j;q+=1)O=E[q-A]||0,H=U&&U[q]||0,_=U&&U[q-A]||0,T=y(O,H,_),D[q+1]=E[q]-T+256&255;return D},y=function(E,A,U){if(E===A&&A===U)return E;var O=Math.abs(A-U),H=Math.abs(E-U),_=Math.abs(E+A-U-U);return O<=H&&O<=_?E:H<=_?A:U},S=function(){return[s,o,f,p,m]},w=function(E){var A=E.map(function(U){return U.reduce(function(O,H){return O+Math.abs(H)},0)});return A.indexOf(Math.min.apply(null,A))};e.processPNG=function(E,A,U,O){var H,_,T,D,j,q,K,P,R,M,J,F,L,re,ce,ne=this.decode.FLATE_DECODE,Q="";if(this.__addimage__.isArrayBuffer(E)&&(E=new Uint8Array(E)),this.__addimage__.isArrayBufferView(E)){if(E=(T=new Qw(E)).imgData,_=T.bits,H=T.colorSpace,j=T.colors,[4,6].indexOf(T.colorType)!==-1){if(T.bits===8){R=(P=T.pixelBitlength==32?new Uint32Array(T.decodePixels().buffer):T.pixelBitlength==16?new Uint16Array(T.decodePixels().buffer):new Uint8Array(T.decodePixels().buffer)).length,J=new Uint8Array(R*T.colors),M=new Uint8Array(R);var W,ue=T.pixelBitlength-T.bits;for(re=0,ce=0;re<R;re++){for(L=P[re],W=0;W<ue;)J[ce++]=L>>>W&255,W+=T.bits;M[re]=L>>>W&255}}if(T.bits===16){R=(P=new Uint32Array(T.decodePixels().buffer)).length,J=new Uint8Array(R*(32/T.pixelBitlength)*T.colors),M=new Uint8Array(R*(32/T.pixelBitlength)),F=T.colors>1,re=0,ce=0;for(var oe=0;re<R;)L=P[re++],J[ce++]=L>>>0&255,F&&(J[ce++]=L>>>16&255,L=P[re++],J[ce++]=L>>>0&255),M[oe++]=L>>>16&255;_=8}O!==e.image_compression.NONE&&t()?(E=n(J,T.width*T.colors,T.colors,O),K=n(M,T.width,1,O)):(E=J,K=M,ne=void 0)}if(T.colorType===3&&(H=this.color_spaces.INDEXED,q=T.palette,T.transparency.indexed)){var ye=T.transparency.indexed,xe=0;for(re=0,R=ye.length;re<R;++re)xe+=ye[re];if((xe/=255)===R-1&&ye.indexOf(0)!==-1)D=[ye.indexOf(0)];else if(xe!==R){for(P=T.decodePixels(),M=new Uint8Array(P.length),re=0,R=P.length;re<R;re++)M[re]=ye[P[re]];K=n(M,T.width,1)}}var z=function(G){var ie;switch(G){case e.image_compression.FAST:ie=11;break;case e.image_compression.MEDIUM:ie=13;break;case e.image_compression.SLOW:ie=14;break;default:ie=12}return ie}(O);return ne===this.decode.FLATE_DECODE&&(Q="/Predictor "+z+" "),Q+="/Colors "+j+" /BitsPerComponent "+_+" /Columns "+T.width,(this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),(K&&this.__addimage__.isArrayBuffer(K)||this.__addimage__.isArrayBufferView(K))&&(K=this.__addimage__.arrayBufferToBinaryString(K)),{alias:U,data:E,index:A,filter:ne,decodeParameters:Q,transparency:D,palette:q,sMask:K,predictor:z,width:T.width,height:T.height,bitsPerComponent:_,colorSpace:H}}}})(kt.API),function(e){e.processGIF89A=function(t,n,r,s){var o=new Kw(t),f=o.width,p=o.height,m=[];o.decodeAndBlitFrameRGBA(0,m);var y={data:m,width:f,height:p},S=new Ld(100).encode(y,100);return e.processJPEG.call(this,S,n,r,s)},e.processGIF87A=e.processGIF89A}(kt.API),Va.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Va.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Fn.log("bit decode error:"+n)}},Va.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var o=this.datav.getUint8(this.pos++,!0),f=r*this.width*4+8*s*4,p=0;p<8&&8*s+p<this.width;p++){var m=this.palette[o>>7-p&1];this.data[f+4*p]=m.blue,this.data[f+4*p+1]=m.green,this.data[f+4*p+2]=m.red,this.data[f+4*p+3]=255}n!==0&&(this.pos+=4-n)}},Va.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<e;s++){var o=this.datav.getUint8(this.pos++,!0),f=r*this.width*4+2*s*4,p=o>>4,m=15&o,y=this.palette[p];if(this.data[f]=y.blue,this.data[f+1]=y.green,this.data[f+2]=y.red,this.data[f+3]=255,2*s+1>=this.width)break;y=this.palette[m],this.data[f+4]=y.blue,this.data[f+4+1]=y.green,this.data[f+4+2]=y.red,this.data[f+4+3]=255}t!==0&&(this.pos+=4-t)}},Va.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(s<this.palette.length){var f=this.palette[s];this.data[o]=f.red,this.data[o+1]=f.green,this.data[o+2]=f.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},Va.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(o&t)/t*255|0,p=(o>>5&t)/t*255|0,m=(o>>10&t)/t*255|0,y=o>>15?255:0,S=r*this.width*4+4*s;this.data[S]=m,this.data[S+1]=p,this.data[S+2]=f,this.data[S+3]=y}this.pos+=e}},Va.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var f=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(f&t)/t*255|0,m=(f>>5&n)/n*255|0,y=(f>>11)/t*255|0,S=s*this.width*4+4*o;this.data[S]=y,this.data[S+1]=m,this.data[S+2]=p,this.data[S+3]=255}this.pos+=e}},Va.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),f=t*this.width*4+4*n;this.data[f]=o,this.data[f+1]=s,this.data[f+2]=r,this.data[f+3]=255}this.pos+=this.width%4}},Va.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),p=t*this.width*4+4*n;this.data[p]=o,this.data[p+1]=s,this.data[p+2]=r,this.data[p+3]=f}},Va.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,s){var o=new Va(t,!1),f=o.width,p=o.height,m={data:o.getData(),width:f,height:p},y=new Ld(100).encode(m,100);return e.processJPEG.call(this,y,n,r,s)}}(kt.API),vm.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,s){var o=new vm(t),f=o.width,p=o.height,m={data:o.getData(),width:f,height:p},y=new Ld(100).encode(m,100);return e.processJPEG.call(this,y,n,r,s)}}(kt.API),kt.API.processRGBA=function(e,t,n){for(var r=e.data,s=r.length,o=new Uint8Array(s/4*3),f=new Uint8Array(s/4),p=0,m=0,y=0;y<s;y+=4){var S=r[y],w=r[y+1],E=r[y+2],A=r[y+3];o[p++]=S,o[p++]=w,o[p++]=E,f[m++]=A}var U=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(f),data:U,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},kt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},rc=kt.API,c0=rc.getCharWidthsArray=function(e,t){var n,r,s=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),f=t.charSpace||this.internal.getCharSpace(),p=t.widths?t.widths:s.metadata.Unicode.widths,m=p.fof?p.fof:1,y=t.kerning?t.kerning:s.metadata.Unicode.kerning,S=y.fof?y.fof:1,w=t.doKerning!==!1,E=0,A=e.length,U=0,O=p[0]||m,H=[];for(n=0;n<A;n++)r=e.charCodeAt(n),typeof s.metadata.widthOfString=="function"?H.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+f*(1e3/o)||0)/1e3):(E=w&&On(y[r])==="object"&&!isNaN(parseInt(y[r][U],10))?y[r][U]/S:0,H.push((p[r]||O)/m+E)),U=r;return H},mm=rc.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return rc.processArabic&&(e=rc.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,s)/n:c0.apply(this,arguments).reduce(function(o,f){return o+f},0)},xm=function(e,t,n,r){for(var s=[],o=0,f=e.length,p=0;o!==f&&p+t[o]<n;)p+=t[o],o++;s.push(e.slice(0,o));var m=o;for(p=0;o!==f;)p+t[o]>r&&(s.push(e.slice(m,o)),p=0,m=o),p+=t[o],o++;return m!==o&&s.push(e.slice(m,o)),s},ym=function(e,t,n){n||(n={});var r,s,o,f,p,m,y,S=[],w=[S],E=n.textIndent||0,A=0,U=0,O=e.split(" "),H=c0.apply(this,[" ",n])[0];if(m=n.lineIndent===-1?O[0].length+2:n.lineIndent||0){var _=Array(m).join(" "),T=[];O.map(function(j){(j=j.split(/\s*\n/)).length>1?T=T.concat(j.map(function(q,K){return(K&&q.length?`
`:"")+q})):T.push(j[0])}),O=T,m=mm.apply(this,[_,n])}for(o=0,f=O.length;o<f;o++){var D=0;if(r=O[o],m&&r[0]==`
`&&(r=r.substr(1),D=1),E+A+(U=(s=c0.apply(this,[r,n])).reduce(function(j,q){return j+q},0))>t||D){if(U>t){for(p=xm.apply(this,[r,s,t-(E+A),t]),S.push(p.shift()),S=[p.pop()];p.length;)w.push([p.shift()]);U=s.slice(r.length-(S[0]?S[0].length:0)).reduce(function(j,q){return j+q},0)}else S=[r];w.push(S),E=U+m,A=H}else S.push(r),E+=A+U,A=H}return y=m?function(j,q){return(q?_:"")+j.join(" ")}:function(j){return j.join(" ")},w.map(y)},rc.splitTextToSize=function(e,t,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(S){if(S.widths&&S.kerning)return{widths:S.widths,kerning:S.kerning};var w=this.internal.getFont(S.fontName,S.fontStyle);return w.metadata.Unicode?{widths:w.metadata.Unicode.widths||{0:1},kerning:w.metadata.Unicode.kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var f=1*this.internal.scaleFactor*t/s;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,o.lineIndent=n.lineIndent;var p,m,y=[];for(p=0,m=r.length;p<m;p++)y=y.concat(ym.apply(this,[r[p],f,o]));return y},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},s=0;s<t.length;s++)n[t[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=t[s];var o=function(w){return"0x"+parseInt(w,10).toString(16)},f=e.__fontmetrics__.compress=function(w){var E,A,U,O,H=["{"];for(var _ in w){if(E=w[_],isNaN(parseInt(_,10))?A="'"+_+"'":(_=parseInt(_,10),A=(A=o(_).slice(2)).slice(0,-1)+r[A.slice(-1)]),typeof E=="number")E<0?(U=o(E).slice(3),O="-"):(U=o(E).slice(2),O=""),U=O+U.slice(0,-1)+r[U.slice(-1)];else{if(On(E)!=="object")throw new Error("Don't know what to do with value type "+On(E)+".");U=f(E)}H.push(A+U)}return H.push("}"),H.join("")},p=e.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var E,A,U,O,H={},_=1,T=H,D=[],j="",q="",K=w.length-1,P=1;P<K;P+=1)(O=w[P])=="'"?E?(U=E.join(""),E=void 0):E=[]:E?E.push(O):O=="{"?(D.push([T,U]),T={},U=void 0):O=="}"?((A=D.pop())[0][A[1]]=T,U=void 0,T=A[0]):O=="-"?_=-1:U===void 0?n.hasOwnProperty(O)?(j+=n[O],U=parseInt(j,16)*_,_=1,j=""):j+=O:n.hasOwnProperty(O)?(q+=n[O],T[U]=parseInt(q,16)*_,_=1,U=void 0,q=""):q+=O;return H},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:p("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},y={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},S={Unicode:{"Courier-Oblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":p("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":p("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:p("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:p("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":p("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":p("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(w){var E=w.font,A=S.Unicode[E.postScriptName];A&&(E.metadata.Unicode={},E.metadata.Unicode.widths=A.widths,E.metadata.Unicode.kerning=A.kerning);var U=y.Unicode[E.postScriptName];U&&(E.metadata.Unicode.encoding=U,E.encoding=U.codePages[0])}])}(kt.API),function(e){var t=function(n){for(var r=n.length,s=new Uint8Array(r),o=0;o<r;o++)s[o]=n.charCodeAt(o);return s};e.API.events.push(["addFont",function(n){var r=void 0,s=n.font,o=n.instance;if(!s.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=o.existsFileInVFS(s.postScriptName)===!1?o.loadFile(s.postScriptName):o.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(f,p){p=/^\x00\x01\x00\x00/.test(p)?t(p):t(Fu(p)),f.metadata=e.API.TTFFont.open(p),f.metadata.Unicode=f.metadata.Unicode||{encoding:{},kerning:{},widths:[]},f.metadata.glyIdsUsed=[0]})(s,r)}}])}(kt),function(e){function t(){return(Bt.canvg?Promise.resolve(Bt.canvg):R1(()=>import("./index.es-CoOUkmQ1.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}kt.API.addSvgAsImage=function(n,r,s,o,f,p,m,y){if(isNaN(r)||isNaN(s))throw Fn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(f))throw Fn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var S=document.createElement("canvas");S.width=o,S.height=f;var w=S.getContext("2d");w.fillStyle="#fff",w.fillRect(0,0,S.width,S.height);var E={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return t().then(function(U){return U.fromString(w,n,E)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(U){return U.render(E)}).then(function(){A.addImage(S.toDataURL("image/jpeg",1),r,s,o,f,m,y)})}}(),kt.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(t,n);return this},kt.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,s,o,f={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},p=Object.keys(f),m=[],y=0,S=0,w=0;function E(U,O){var H,_=!1;for(H=0;H<U.length;H+=1)U[H]===O&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(f)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var A=p.length;for(w=0;w<A;w+=1)n[p[w]].value=n[p[w]].defaultValue,n[p[w]].explicitSet=!1}if(On(e)==="object"){for(s in e)if(o=e[s],E(p,s)&&o!==void 0){if(n[s].type==="boolean"&&typeof o=="boolean")n[s].value=o;else if(n[s].type==="name"&&E(n[s].valueSet,o))n[s].value=o;else if(n[s].type==="integer"&&Number.isInteger(o))n[s].value=o;else if(n[s].type==="array"){for(y=0;y<o.length;y+=1)if(r=!0,o[y].length===1&&typeof o[y][0]=="number")m.push(String(o[y]-1));else if(o[y].length>1){for(S=0;S<o[y].length;S+=1)typeof o[y][S]!="number"&&(r=!1);r===!0&&m.push([o[y][0]-1,o[y][1]-1].join(" "))}n[s].value="["+m.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var U,O=[];for(U in n)n[U].explicitSet===!0&&(n[U].type==="name"?O.push("/"+U+" /"+n[U].value):O.push("/"+U+" "+n[U].value));O.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+O.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),f=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),p=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),m=unescape(encodeURIComponent("</x:xmpmeta>")),y=o.length+f.length+p.length+s.length+m.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+y+" >>"),this.internal.write("stream"),this.internal.write(s+o+f+p+m),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(kt.API),function(e){var t=e.API,n=t.pdfEscape16=function(o,f){for(var p,m=f.metadata.Unicode.widths,y=["","0","00","000","0000"],S=[""],w=0,E=o.length;w<E;++w){if(p=f.metadata.characterToGlyph(o.charCodeAt(w)),f.metadata.glyIdsUsed.push(p),f.metadata.toUnicode[p]=o.charCodeAt(w),m.indexOf(p)==-1&&(m.push(p),m.push([parseInt(f.metadata.widthOfGlyph(p),10)])),p=="0")return S.join("");p=p.toString(16),S.push(y[4-p.length],p)}return S.join("")},r=function(o){var f,p,m,y,S,w,E;for(S=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,m=[],w=0,E=(p=Object.keys(o).sort(function(A,U){return A-U})).length;w<E;w++)f=p[w],m.length>=100&&(S+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar`,m=[]),o[f]!==void 0&&o[f]!==null&&typeof o[f].toString=="function"&&(y=("0000"+o[f].toString(16)).slice(-4),f=("0000"+(+f).toString(16)).slice(-4),m.push("<"+f+"><"+y+">"));return m.length&&(S+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar
`),S+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(f){var p=f.font,m=f.out,y=f.newObject,S=f.putStream;if(p.metadata instanceof e.API.TTFFont&&p.encoding==="Identity-H"){for(var w=p.metadata.Unicode.widths,E=p.metadata.subset.encode(p.metadata.glyIdsUsed,1),A="",U=0;U<E.length;U++)A+=String.fromCharCode(E[U]);var O=y();S({data:A,addLength1:!0,objectId:O}),m("endobj");var H=y();S({data:r(p.metadata.toUnicode),addLength1:!0,objectId:H}),m("endobj");var _=y();m("<<"),m("/Type /FontDescriptor"),m("/FontName /"+uc(p.fontName)),m("/FontFile2 "+O+" 0 R"),m("/FontBBox "+e.API.PDFObject.convert(p.metadata.bbox)),m("/Flags "+p.metadata.flags),m("/StemV "+p.metadata.stemV),m("/ItalicAngle "+p.metadata.italicAngle),m("/Ascent "+p.metadata.ascender),m("/Descent "+p.metadata.decender),m("/CapHeight "+p.metadata.capHeight),m(">>"),m("endobj");var T=y();m("<<"),m("/Type /Font"),m("/BaseFont /"+uc(p.fontName)),m("/FontDescriptor "+_+" 0 R"),m("/W "+e.API.PDFObject.convert(w)),m("/CIDToGIDMap /Identity"),m("/DW 1000"),m("/Subtype /CIDFontType2"),m("/CIDSystemInfo"),m("<<"),m("/Supplement 0"),m("/Registry (Adobe)"),m("/Ordering ("+p.encoding+")"),m(">>"),m(">>"),m("endobj"),p.objectNumber=y(),m("<<"),m("/Type /Font"),m("/Subtype /Type0"),m("/ToUnicode "+H+" 0 R"),m("/BaseFont /"+uc(p.fontName)),m("/Encoding /"+p.encoding),m("/DescendantFonts ["+T+" 0 R]"),m(">>"),m("endobj"),p.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(f){var p=f.font,m=f.out,y=f.newObject,S=f.putStream;if(p.metadata instanceof e.API.TTFFont&&p.encoding==="WinAnsiEncoding"){for(var w=p.metadata.rawData,E="",A=0;A<w.length;A++)E+=String.fromCharCode(w[A]);var U=y();S({data:E,addLength1:!0,objectId:U}),m("endobj");var O=y();S({data:r(p.metadata.toUnicode),addLength1:!0,objectId:O}),m("endobj");var H=y();m("<<"),m("/Descent "+p.metadata.decender),m("/CapHeight "+p.metadata.capHeight),m("/StemV "+p.metadata.stemV),m("/Type /FontDescriptor"),m("/FontFile2 "+U+" 0 R"),m("/Flags 96"),m("/FontBBox "+e.API.PDFObject.convert(p.metadata.bbox)),m("/FontName /"+uc(p.fontName)),m("/ItalicAngle "+p.metadata.italicAngle),m("/Ascent "+p.metadata.ascender),m(">>"),m("endobj"),p.objectNumber=y();for(var _=0;_<p.metadata.hmtx.widths.length;_++)p.metadata.hmtx.widths[_]=parseInt(p.metadata.hmtx.widths[_]*(1e3/p.metadata.head.unitsPerEm));m("<</Subtype/TrueType/Type/Font/ToUnicode "+O+" 0 R/BaseFont/"+uc(p.fontName)+"/FontDescriptor "+H+" 0 R/Encoding/"+p.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(p.metadata.hmtx.widths)+">>"),m("endobj"),p.isAlreadyPutted=!0}})(o)}]);var s=function(o){var f,p=o.text||"",m=o.x,y=o.y,S=o.options||{},w=o.mutex||{},E=w.pdfEscape,A=w.activeFontKey,U=w.fonts,O=A,H="",_=0,T="",D=U[O].encoding;if(U[O].encoding!=="Identity-H")return{text:p,x:m,y,options:S,mutex:w};for(T=p,O=A,Array.isArray(p)&&(T=p[0]),_=0;_<T.length;_+=1)U[O].metadata.hasOwnProperty("cmap")&&(f=U[O].metadata.cmap.unicode.codeMap[T[_].charCodeAt(0)]),f||T[_].charCodeAt(0)<256&&U[O].metadata.hasOwnProperty("Unicode")?H+=T[_]:H+="";var j="";return parseInt(O.slice(1))<14||D==="WinAnsiEncoding"?j=E(H,O).split("").map(function(q){return q.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(j=n(H,U[O])),w.isHex=!0,{text:j,x:m,y,options:S,mutex:w}};t.events.push(["postProcessText",function(o){var f=o.text||"",p=[],m={text:f,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(f)){var y=0;for(y=0;y<f.length;y+=1)Array.isArray(f[y])&&f[y].length===3?p.push([s(Object.assign({},m,{text:f[y][0]})).text,f[y][1],f[y][2]]):p.push(s(Object.assign({},m,{text:f[y]})).text);o.text=p}else o.text=s(Object.assign({},m,{text:f})).text}])}(kt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(kt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var s,o,f,p,m,y,S,w=t,E=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],A=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],U={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},O={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},H=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,D=0;this.__bidiEngine__={};var j=function(F){var L=F.charCodeAt(),re=L>>8,ce=O[re];return ce!==void 0?w[256*ce+(255&L)]:re===252||re===253?"AL":_.test(re)?"L":re===8?"R":"N"},q=function(F){for(var L,re=0;re<F.length;re++){if((L=j(F.charAt(re)))==="L")return!1;if(L==="R")return!0}return!1},K=function(F,L,re,ce){var ne,Q,W,ue,oe=L[ce];switch(oe){case"L":case"R":T=!1;break;case"N":case"AN":break;case"EN":T&&(oe="AN");break;case"AL":T=!0,oe="R";break;case"WS":oe="N";break;case"CS":ce<1||ce+1>=L.length||(ne=re[ce-1])!=="EN"&&ne!=="AN"||(Q=L[ce+1])!=="EN"&&Q!=="AN"?oe="N":T&&(Q="AN"),oe=Q===ne?Q:"N";break;case"ES":oe=(ne=ce>0?re[ce-1]:"B")==="EN"&&ce+1<L.length&&L[ce+1]==="EN"?"EN":"N";break;case"ET":if(ce>0&&re[ce-1]==="EN"){oe="EN";break}if(T){oe="N";break}for(W=ce+1,ue=L.length;W<ue&&L[W]==="ET";)W++;oe=W<ue&&L[W]==="EN"?"EN":"N";break;case"NSM":if(f&&!p){for(ue=L.length,W=ce+1;W<ue&&L[W]==="NSM";)W++;if(W<ue){var ye=F[ce],xe=ye>=1425&&ye<=2303||ye===64286;if(ne=L[W],xe&&(ne==="R"||ne==="AL")){oe="R";break}}}oe=ce<1||(ne=L[ce-1])==="B"?"N":re[ce-1];break;case"B":T=!1,s=!0,oe=D;break;case"S":o=!0,oe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"BN":oe="N"}return oe},P=function(F,L,re){var ce=F.split("");return re&&R(ce,re,{hiLevel:D}),ce.reverse(),L&&L.reverse(),ce.join("")},R=function(F,L,re){var ce,ne,Q,W,ue,oe=-1,ye=F.length,xe=0,z=[],G=D?A:E,ie=[];for(T=!1,s=!1,o=!1,ne=0;ne<ye;ne++)ie[ne]=j(F[ne]);for(Q=0;Q<ye;Q++){if(ue=xe,z[Q]=K(F,ie,z,Q),ce=240&(xe=G[ue][U[z[Q]]]),xe&=15,L[Q]=W=G[xe][5],ce>0)if(ce===16){for(ne=oe;ne<Q;ne++)L[ne]=1;oe=-1}else oe=-1;if(G[xe][6])oe===-1&&(oe=Q);else if(oe>-1){for(ne=oe;ne<Q;ne++)L[ne]=W;oe=-1}ie[Q]==="B"&&(L[Q]=0),re.hiLevel|=W}o&&function(fe,se,Ee){for(var be=0;be<Ee;be++)if(fe[be]==="S"){se[be]=D;for(var Ce=be-1;Ce>=0&&fe[Ce]==="WS";Ce--)se[Ce]=D}}(ie,L,ye)},M=function(F,L,re,ce,ne){if(!(ne.hiLevel<F)){if(F===1&&D===1&&!s)return L.reverse(),void(re&&re.reverse());for(var Q,W,ue,oe,ye=L.length,xe=0;xe<ye;){if(ce[xe]>=F){for(ue=xe+1;ue<ye&&ce[ue]>=F;)ue++;for(oe=xe,W=ue-1;oe<W;oe++,W--)Q=L[oe],L[oe]=L[W],L[W]=Q,re&&(Q=re[oe],re[oe]=re[W],re[W]=Q);xe=ue}xe++}}},J=function(F,L,re){var ce=F.split(""),ne={hiLevel:D};return re||(re=[]),R(ce,re,ne),function(Q,W,ue){if(ue.hiLevel!==0&&S)for(var oe,ye=0;ye<Q.length;ye++)W[ye]===1&&(oe=H.indexOf(Q[ye]))>=0&&(Q[ye]=H[oe+1])}(ce,re,ne),M(2,ce,L,re,ne),M(1,ce,L,re,ne),ce.join("")};return this.__bidiEngine__.doBidiReorder=function(F,L,re){if(function(ne,Q){if(Q)for(var W=0;W<ne.length;W++)Q[W]=W;p===void 0&&(p=q(ne)),y===void 0&&(y=q(ne))}(F,L),f||!m||y)if(f&&m&&p^y)D=p?1:0,F=P(F,L,re);else if(!f&&m&&y)D=p?1:0,F=J(F,L,re),F=P(F,L);else if(!f||p||m||y){if(f&&!m&&p^y)F=P(F,L),p?(D=0,F=J(F,L,re)):(D=1,F=J(F,L,re),F=P(F,L));else if(f&&p&&!m&&y)D=1,F=J(F,L,re),F=P(F,L);else if(!f&&!m&&p^y){var ce=S;p?(D=1,F=J(F,L,re),D=0,S=!1,F=J(F,L,re),S=ce):(D=0,F=J(F,L,re),F=P(F,L),D=1,S=!1,F=J(F,L,re),S=ce,F=P(F,L))}}else D=0,F=J(F,L,re);else D=p?1:0,F=J(F,L,re);return F},this.__bidiEngine__.setOptions=function(F){F&&(f=F.isInputVisual,m=F.isOutputVisual,p=F.isInputRtl,y=F.isOutputRtl,S=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var s=r.text,o=(r.x,r.y,r.options||{}),f=(r.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(s)==="[object Array]"){var p=0;for(f=[],p=0;p<s.length;p+=1)Object.prototype.toString.call(s[p])==="[object Array]"?f.push([n.doBidiReorder(s[p][0]),s[p][1],s[p][2]]):f.push([n.doBidiReorder(s[p])]);r.text=f}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(kt),kt.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Yo(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new h6(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Jw(this.contents),this.head=new e6(this),this.name=new a6(this),this.cmap=new ay(this),this.toUnicode={},this.hhea=new t6(this),this.maxp=new s6(this),this.hmtx=new o6(this),this.post=new i6(this),this.os2=new n6(this),this.loca=new f6(this),this.glyf=new l6(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,s,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var f,p,m,y;for(y=[],f=0,p=(m=this.bbox).length;f<p;f++)t=m[f],y.push(Math.round(t*this.scaleFactor));return y}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(n=s>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var s,o,f,p;for(f=0,o=0,p=(t=""+t).length;0<=p?o<p:o>p;o=0<=p?++o:--o)s=t.charCodeAt(o),f+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return f*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Ja,Yo=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,s;for(s=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(t.charCodeAt(n)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,s,o,f,p,m;return t=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),o=this.readByte(),f=this.readByte(),p=this.readByte(),m=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^o)+65536*(255^f)+256*(255^p)+(255^m)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*s+16777216*o+65536*f+256*p+m},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,s,o;for(o=[],r=0,s=t.length;r<s;r++)n=t[r],o.push(this.writeByte(n));return o},e}(),Jw=function(){var e;function t(n){var r,s,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,o=this.tableCount;0<=o?s<o:s>o;s=0<=o?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,s,o,f,p,m,y,S,w,E,A,U,O;for(O in A=Object.keys(n).length,m=Math.log(2),w=16*Math.floor(Math.log(A)/m),f=Math.floor(w/m),S=16*A-w,(s=new Yo).writeInt(this.scalarType),s.writeShort(A),s.writeShort(w),s.writeShort(f),s.writeShort(S),o=16*A,y=s.pos+o,p=null,U=[],n)for(E=n[O],s.writeString(O),s.writeInt(e(E)),s.writeInt(y),s.writeInt(E.length),U=U.concat(E),O==="head"&&(p=y),y+=E.length;y%4;)U.push(0),y++;return s.write(U),r=2981146554-e(s.data),s.pos=p+8,s.writeUInt32(r),s.data},e=function(n){var r,s,o,f;for(n=sy.call(n);n.length%4;)n.push(0);for(o=new Yo(n),s=0,r=0,f=n.length;r<f;r=r+=4)s+=o.readUInt32();return 4294967295&s},t}(),$w={}.hasOwnProperty,bs=function(e,t){for(var n in t)$w.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Ja=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var e6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bs(t,Ja),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new Yo).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),wm=function(){function e(t,n){var r,s,o,f,p,m,y,S,w,E,A,U,O,H,_,T,D;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),w=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(m=0;m<256;++m)this.codeMap[m]=t.readByte();break;case 4:for(A=t.readUInt16(),E=A/2,t.pos+=6,o=function(){var j,q;for(q=[],m=j=0;0<=E?j<E:j>E;m=0<=E?++j:--j)q.push(t.readUInt16());return q}(),t.pos+=2,O=function(){var j,q;for(q=[],m=j=0;0<=E?j<E:j>E;m=0<=E?++j:--j)q.push(t.readUInt16());return q}(),y=function(){var j,q;for(q=[],m=j=0;0<=E?j<E:j>E;m=0<=E?++j:--j)q.push(t.readUInt16());return q}(),S=function(){var j,q;for(q=[],m=j=0;0<=E?j<E:j>E;m=0<=E?++j:--j)q.push(t.readUInt16());return q}(),s=(this.length-t.pos+this.offset)/2,p=function(){var j,q;for(q=[],m=j=0;0<=s?j<s:j>s;m=0<=s?++j:--j)q.push(t.readUInt16());return q}(),m=_=0,D=o.length;_<D;m=++_)for(H=o[m],r=T=U=O[m];U<=H?T<=H:T>=H;r=U<=H?++T:--T)S[m]===0?f=r+y[m]:(f=p[S[m]/2+(r-U)-(E-m)]||0)!==0&&(f+=y[m]),this.codeMap[r]=65535&f}t.pos=w}return e.encode=function(t,n){var r,s,o,f,p,m,y,S,w,E,A,U,O,H,_,T,D,j,q,K,P,R,M,J,F,L,re,ce,ne,Q,W,ue,oe,ye,xe,z,G,ie,fe,se,Ee,be,Ce,We,Oe,tt;switch(ce=new Yo,f=Object.keys(t).sort(function(qe,ut){return qe-ut}),n){case"macroman":for(O=0,H=function(){var qe=[];for(U=0;U<256;++U)qe.push(0);return qe}(),T={0:0},o={},ne=0,oe=f.length;ne<oe;ne++)T[Ce=t[s=f[ne]]]==null&&(T[Ce]=++O),o[s]={old:t[s],new:T[t[s]]},H[s]=T[t[s]];return ce.writeUInt16(1),ce.writeUInt16(0),ce.writeUInt32(12),ce.writeUInt16(0),ce.writeUInt16(262),ce.writeUInt16(0),ce.write(H),{charMap:o,subtable:ce.data,maxGlyphID:O+1};case"unicode":for(L=[],w=[],D=0,T={},r={},_=y=null,Q=0,ye=f.length;Q<ye;Q++)T[q=t[s=f[Q]]]==null&&(T[q]=++D),r[s]={old:q,new:T[q]},p=T[q]-s,_!=null&&p===y||(_&&w.push(_),L.push(s),y=p),_=s;for(_&&w.push(_),w.push(65535),L.push(65535),J=2*(M=L.length),R=2*Math.pow(Math.log(M)/Math.LN2,2),E=Math.log(R/2)/Math.LN2,P=2*M-R,m=[],K=[],A=[],U=W=0,xe=L.length;W<xe;U=++W){if(F=L[U],S=w[U],F===65535){m.push(0),K.push(0);break}if(F-(re=r[F].new)>=32768)for(m.push(0),K.push(2*(A.length+M-U)),s=ue=F;F<=S?ue<=S:ue>=S;s=F<=S?++ue:--ue)A.push(r[s].new);else m.push(re-F),K.push(0)}for(ce.writeUInt16(3),ce.writeUInt16(1),ce.writeUInt32(12),ce.writeUInt16(4),ce.writeUInt16(16+8*M+2*A.length),ce.writeUInt16(0),ce.writeUInt16(J),ce.writeUInt16(R),ce.writeUInt16(E),ce.writeUInt16(P),Ee=0,z=w.length;Ee<z;Ee++)s=w[Ee],ce.writeUInt16(s);for(ce.writeUInt16(0),be=0,G=L.length;be<G;be++)s=L[be],ce.writeUInt16(s);for(We=0,ie=m.length;We<ie;We++)p=m[We],ce.writeUInt16(p);for(Oe=0,fe=K.length;Oe<fe;Oe++)j=K[Oe],ce.writeUInt16(j);for(tt=0,se=A.length;tt<se;tt++)O=A[tt],ce.writeUInt16(O);return{charMap:r,subtable:ce.data,maxGlyphID:D+1}}},e}(),ay=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bs(t,Ja),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,s,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=o?s<o:s>o;s=0<=o?++s:--s)r=new wm(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var s,o;return r==null&&(r="macroman"),s=wm.encode(n,r),(o=new Yo).writeUInt16(0),o.writeUInt16(1),s.table=o.data.concat(s.subtable),s},t}(),t6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bs(t,Ja),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),n6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bs(t,Ja),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(n.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(n.readInt());return s}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(n.readInt());return s}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),i6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bs(t,Ja),t.prototype.tag="post",t.prototype.parse=function(n){var r,s,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var f;for(s=n.readUInt16(),this.glyphNameIndex=[],f=0;0<=s?f<s:f>s;f=0<=s?++f:--f)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)r=n.readByte(),o.push(this.names.push(n.readString(r)));return o;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 196608:break;case 262144:return this.map=(function(){var p,m,y;for(y=[],f=p=0,m=this.file.maxp.numGlyphs;0<=m?p<m:p>m;f=0<=m?++p:--p)y.push(n.readUInt32());return y}).call(this)}},t}(),r6=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},a6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bs(t,Ja),t.prototype.tag="name",t.prototype.parse=function(n){var r,s,o,f,p,m,y,S,w,E,A;for(n.pos=this.offset,n.readShort(),r=n.readShort(),m=n.readShort(),s=[],f=0;0<=r?f<r:f>r;f=0<=r?++f:--f)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+m+n.readShort()});for(y={},f=w=0,E=s.length;w<E;f=++w)o=s[f],n.pos=o.offset,S=n.readString(o.length),p=new r6(S,o),y[A=o.nameID]==null&&(y[A]=[]),y[o.nameID].push(p);this.strings=y,this.copyright=y[0],this.fontFamily=y[1],this.fontSubfamily=y[2],this.uniqueSubfamily=y[3],this.fontName=y[4],this.version=y[5];try{this.postscriptName=y[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=y[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=y[7],this.manufacturer=y[8],this.designer=y[9],this.description=y[10],this.vendorUrl=y[11],this.designerUrl=y[12],this.license=y[13],this.licenseUrl=y[14],this.preferredFamily=y[15],this.preferredSubfamily=y[17],this.compatibleFull=y[18],this.sampleText=y[19]},t}(),s6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bs(t,Ja),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),o6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bs(t,Ja),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,s,o,f,p,m,y;for(n.pos=this.offset,this.metrics=[],r=0,m=this.file.hhea.numberOfMetrics;0<=m?r<m:r>m;r=0<=m?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var S,w;for(w=[],r=S=0;0<=o?S<o:S>o;r=0<=o?++S:--S)w.push(n.readInt16());return w}(),this.widths=(function(){var S,w,E,A;for(A=[],S=0,w=(E=this.metrics).length;S<w;S++)f=E[S],A.push(f.advance);return A}).call(this),s=this.widths[this.widths.length-1],y=[],r=p=0;0<=o?p<o:p>o;r=0<=o?++p:--p)y.push(this.widths.push(s));return y},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),sy=[].slice,l6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bs(t,Ja),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,s,o,f,p,m,y,S,w,E;return n in this.cache?this.cache[n]:(f=this.file.loca,r=this.file.contents,s=f.indexOf(n),(o=f.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+s,p=(m=new Yo(r.read(o))).readShort(),S=m.readShort(),E=m.readShort(),y=m.readShort(),w=m.readShort(),this.cache[n]=p===-1?new u6(m,S,E,y,w):new c6(m,p,S,E,y,w),this.cache[n]))},t.prototype.encode=function(n,r,s){var o,f,p,m,y;for(p=[],f=[],m=0,y=r.length;m<y;m++)o=n[r[m]],f.push(p.length),o&&(p=p.concat(o.encode(s)));return f.push(p.length),{table:p,offsets:f}},t}(),c6=function(){function e(t,n,r,s,o,f){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=o,this.yMax=f,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),u6=function(){function e(t,n,r,s,o){var f,p;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],f=this.raw;p=f.readShort(),this.glyphOffsets.push(f.pos),this.glyphIDs.push(f.readUInt16()),32&p;)f.pos+=1&p?4:2,128&p?f.pos+=8:64&p?f.pos+=4:8&p&&(f.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Yo(sy.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),f6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bs(t,Ja),t.prototype.tag="loca",t.prototype.parse=function(n){var r,s;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var o,f;for(f=[],s=0,o=this.length;s<o;s+=2)f.push(2*n.readUInt16());return f}).call(this):(function(){var o,f;for(f=[],s=0,o=this.length;s<o;s+=4)f.push(n.readUInt32());return f}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var s=new Uint32Array(this.offsets.length),o=0,f=0,p=0;p<s.length;++p)if(s[p]=o,f<r.length&&r[f]==p){++f,s[p]=o;var m=this.offsets[p],y=this.offsets[p+1]-m;y>0&&(o+=y)}for(var S=new Array(4*s.length),w=0;w<s.length;++w)S[4*w+3]=255&s[w],S[4*w+2]=(65280&s[w])>>8,S[4*w+1]=(16711680&s[w])>>16,S[4*w]=(4278190080&s[w])>>24;return S},t}(),h6=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,s,o;for(n in s=this.font.cmap.tables[0].codeMap,t={},o=this.subset)r=o[n],t[n]=s[r];return t},e.prototype.glyphsFor=function(t){var n,r,s,o,f,p,m;for(s={},f=0,p=t.length;f<p;f++)s[o=t[f]]=this.font.glyf.glyphFor(o);for(o in n=[],s)(r=s[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in m=this.glyphsFor(n))r=m[o],s[o]=r;return s},e.prototype.encode=function(t,n){var r,s,o,f,p,m,y,S,w,E,A,U,O,H,_;for(s in r=ay.encode(this.generateCmap(),"unicode"),f=this.glyphsFor(t),A={0:0},_=r.charMap)A[(m=_[s]).old]=m.new;for(U in E=r.maxGlyphID,f)U in A||(A[U]=E++);return S=function(T){var D,j;for(D in j={},T)j[T[D]]=D;return j}(A),w=Object.keys(S).sort(function(T,D){return T-D}),O=function(){var T,D,j;for(j=[],T=0,D=w.length;T<D;T++)p=w[T],j.push(S[p]);return j}(),o=this.font.glyf.encode(f,O,A),y=this.font.loca.encode(o.offsets,O),H={cmap:this.font.cmap.raw(),glyf:o.table,loca:y,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(H["OS/2"]=this.font.os2.raw()),this.font.directory.encode(H)},e}();kt.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,s,o,f;if(Array.isArray(n))return"["+function(){var p,m,y;for(y=[],p=0,m=n.length;p<m;p++)r=n[p],y.push(t.convert(r));return y}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in o=["<<"],n)f=n[s],o.push("/"+s+" "+t.convert(f));return o.push(">>"),o.join(`
`)}return""+n},t}();const d6=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:qw,AcroFormAppearance:St,AcroFormButton:Gi,AcroFormCheckBox:Hu,AcroFormChoiceField:Il,AcroFormComboBox:Rl,AcroFormEditBox:Uu,AcroFormListBox:Dl,AcroFormPasswordField:Gu,AcroFormPushButton:zu,AcroFormRadioButton:Ol,AcroFormTextField:zo,GState:lf,ShadingPattern:Eo,TilingPattern:vl,default:kt,jsPDF:kt},Symbol.toStringTag,{value:"Module"}));var g6={exports:{}};const p6=eb(d6);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(e,t){(function(r,s){e.exports=s(function(){try{return p6}catch{}}())})(typeof globalThis<"u"?globalThis:typeof Ms<"u"?Ms:typeof window<"u"?window:typeof self<"u"?self:Ms,function(n){return function(){var r={172:function(p,m){var y=this&&this.__extends||function(){var E=function(A,U){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,H){O.__proto__=H}||function(O,H){for(var _ in H)Object.prototype.hasOwnProperty.call(H,_)&&(O[_]=H[_])},E(A,U)};return function(A,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");E(A,U);function O(){this.constructor=A}A.prototype=U===null?Object.create(U):(O.prototype=U.prototype,new O)}}();Object.defineProperty(m,"__esModule",{value:!0}),m.CellHookData=m.HookData=void 0;var S=function(){function E(A,U,O){this.table=U,this.pageNumber=U.pageNumber,this.pageCount=this.pageNumber,this.settings=U.settings,this.cursor=O,this.doc=A.getDocument()}return E}();m.HookData=S;var w=function(E){y(A,E);function A(U,O,H,_,T,D){var j=E.call(this,U,O,D)||this;return j.cell=H,j.row=_,j.column=T,j.section=_.section,j}return A}(S);m.CellHookData=w},340:function(p,m,y){Object.defineProperty(m,"__esModule",{value:!0});var S=y(4),w=y(136),E=y(744),A=y(776),U=y(664),O=y(972);function H(_){_.API.autoTable=function(){for(var T=[],D=0;D<arguments.length;D++)T[D]=arguments[D];var j;T.length===1?j=T[0]:(console.error("Use of deprecated autoTable initiation"),j=T[2]||{},j.columns=T[0],j.body=T[1]);var q=(0,A.parseInput)(this,j),K=(0,O.createTable)(this,q);return(0,U.drawTable)(this,K),this},_.API.lastAutoTable=!1,_.API.previousAutoTable=!1,_.API.autoTable.previous=!1,_.API.autoTableText=function(T,D,j,q){(0,w.default)(T,D,j,q,this)},_.API.autoTableSetDefaults=function(T){return E.DocHandler.setDefaults(T,this),this},_.autoTableSetDefaults=function(T,D){E.DocHandler.setDefaults(T,D)},_.API.autoTableHtmlToJson=function(T,D){var j;if(D===void 0&&(D=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var q=new E.DocHandler(this),K=(0,S.parseHtml)(q,T,window,D,!1),P=K.head,R=K.body,M=((j=P[0])===null||j===void 0?void 0:j.map(function(J){return J.content}))||[];return{columns:M,rows:R,data:R}},_.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var T=this.lastAutoTable;return T&&T.finalY?T.finalY:0},_.API.autoTableAddPageContent=function(T){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),_.API.autoTable.globalDefaults||(_.API.autoTable.globalDefaults={}),_.API.autoTable.globalDefaults.addPageContent=T,this},_.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}m.default=H},136:function(p,m){Object.defineProperty(m,"__esModule",{value:!0});function y(S,w,E,A,U){A=A||{};var O=1.15,H=U.internal.scaleFactor,_=U.internal.getFontSize()/H,T=U.getLineHeightFactor?U.getLineHeightFactor():O,D=_*T,j=/\r\n|\r|\n/g,q="",K=1;if((A.valign==="middle"||A.valign==="bottom"||A.halign==="center"||A.halign==="right")&&(q=typeof S=="string"?S.split(j):S,K=q.length||1),E+=_*(2-O),A.valign==="middle"?E-=K/2*D:A.valign==="bottom"&&(E-=K*D),A.halign==="center"||A.halign==="right"){var P=_;if(A.halign==="center"&&(P*=.5),q&&K>=1){for(var R=0;R<q.length;R++)U.text(q[R],w-U.getStringUnitWidth(q[R])*P,E),E+=D;return U}w-=U.getStringUnitWidth(S)*P}return A.halign==="justify"?U.text(S,w,E,{maxWidth:A.maxWidth||100,align:"justify"}):U.text(S,w,E),U}m.default=y},420:function(p,m){Object.defineProperty(m,"__esModule",{value:!0}),m.getPageAvailableWidth=m.parseSpacing=m.getFillStyle=m.addTableBorder=m.getStringWidth=void 0;function y(U,O,H){H.applyStyles(O,!0);var _=Array.isArray(U)?U:[U],T=_.map(function(D){return H.getTextWidth(D)}).reduce(function(D,j){return Math.max(D,j)},0);return T}m.getStringWidth=y;function S(U,O,H,_){var T=O.settings.tableLineWidth,D=O.settings.tableLineColor;U.applyStyles({lineWidth:T,lineColor:D});var j=w(T,!1);j&&U.rect(H.x,H.y,O.getWidth(U.pageSize().width),_.y-H.y,j)}m.addTableBorder=S;function w(U,O){var H=U>0,_=O||O===0;return H&&_?"DF":H?"S":_?"F":null}m.getFillStyle=w;function E(U,O){var H,_,T,D;if(U=U||O,Array.isArray(U)){if(U.length>=4)return{top:U[0],right:U[1],bottom:U[2],left:U[3]};if(U.length===3)return{top:U[0],right:U[1],bottom:U[2],left:U[1]};if(U.length===2)return{top:U[0],right:U[1],bottom:U[0],left:U[1]};U.length===1?U=U[0]:U=O}return typeof U=="object"?(typeof U.vertical=="number"&&(U.top=U.vertical,U.bottom=U.vertical),typeof U.horizontal=="number"&&(U.right=U.horizontal,U.left=U.horizontal),{left:(H=U.left)!==null&&H!==void 0?H:O,top:(_=U.top)!==null&&_!==void 0?_:O,right:(T=U.right)!==null&&T!==void 0?T:O,bottom:(D=U.bottom)!==null&&D!==void 0?D:O}):(typeof U!="number"&&(U=O),{top:U,right:U,bottom:U,left:U})}m.parseSpacing=E;function A(U,O){var H=E(O.settings.margin,0);return U.pageSize().width-(H.left+H.right)}m.getPageAvailableWidth=A},796:function(p,m){var y=this&&this.__extends||function(){var A=function(U,O){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,_){H.__proto__=_}||function(H,_){for(var T in _)Object.prototype.hasOwnProperty.call(_,T)&&(H[T]=_[T])},A(U,O)};return function(U,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");A(U,O);function H(){this.constructor=U}U.prototype=O===null?Object.create(O):(H.prototype=O.prototype,new H)}}();Object.defineProperty(m,"__esModule",{value:!0}),m.getTheme=m.defaultStyles=m.HtmlRowInput=void 0;var S=function(A){y(U,A);function U(O){var H=A.call(this)||this;return H._element=O,H}return U}(Array);m.HtmlRowInput=S;function w(A){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/A,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}m.defaultStyles=w;function E(A){var U={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return U[A]}m.getTheme=E},903:function(p,m,y){Object.defineProperty(m,"__esModule",{value:!0}),m.parseCss=void 0;var S=y(420);function w(H,_,T,D,j){var q={},K=1.3333333333333333,P=A(_,function(oe){return j.getComputedStyle(oe).backgroundColor});P!=null&&(q.fillColor=P);var R=A(_,function(oe){return j.getComputedStyle(oe).color});R!=null&&(q.textColor=R);var M=O(D,T);M&&(q.cellPadding=M);var J="borderTopColor",F=K*T,L=D.borderTopWidth;if(D.borderBottomWidth===L&&D.borderRightWidth===L&&D.borderLeftWidth===L){var re=(parseFloat(L)||0)/F;re&&(q.lineWidth=re)}else q.lineWidth={top:(parseFloat(D.borderTopWidth)||0)/F,right:(parseFloat(D.borderRightWidth)||0)/F,bottom:(parseFloat(D.borderBottomWidth)||0)/F,left:(parseFloat(D.borderLeftWidth)||0)/F},q.lineWidth.top||(q.lineWidth.right?J="borderRightColor":q.lineWidth.bottom?J="borderBottomColor":q.lineWidth.left&&(J="borderLeftColor"));var ce=A(_,function(oe){return j.getComputedStyle(oe)[J]});ce!=null&&(q.lineColor=ce);var ne=["left","right","center","justify"];ne.indexOf(D.textAlign)!==-1&&(q.halign=D.textAlign),ne=["middle","bottom","top"],ne.indexOf(D.verticalAlign)!==-1&&(q.valign=D.verticalAlign);var Q=parseInt(D.fontSize||"");isNaN(Q)||(q.fontSize=Q/K);var W=E(D);W&&(q.fontStyle=W);var ue=(D.fontFamily||"").toLowerCase();return H.indexOf(ue)!==-1&&(q.font=ue),q}m.parseCss=w;function E(H){var _="";return(H.fontWeight==="bold"||H.fontWeight==="bolder"||parseInt(H.fontWeight)>=700)&&(_="bold"),(H.fontStyle==="italic"||H.fontStyle==="oblique")&&(_+="italic"),_}function A(H,_){var T=U(H,_);if(!T)return null;var D=T.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!D||!Array.isArray(D))return null;var j=[parseInt(D[1]),parseInt(D[2]),parseInt(D[3])],q=parseInt(D[4]);return q===0||isNaN(j[0])||isNaN(j[1])||isNaN(j[2])?null:j}function U(H,_){var T=_(H);return T==="rgba(0, 0, 0, 0)"||T==="transparent"||T==="initial"||T==="inherit"?H.parentElement==null?null:U(H.parentElement,_):T}function O(H,_){var T=[H.paddingTop,H.paddingRight,H.paddingBottom,H.paddingLeft],D=96/(72/_),j=(parseInt(H.lineHeight)-parseInt(H.fontSize))/_/2,q=T.map(function(P){return parseInt(P||"0")/D}),K=(0,S.parseSpacing)(q,0);return j>K.top&&(K.top=j),j>K.bottom&&(K.bottom=j),K}},744:function(p,m){Object.defineProperty(m,"__esModule",{value:!0}),m.DocHandler=void 0;var y={},S=function(){function w(E){this.jsPDFDocument=E,this.userStyles={textColor:E.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:E.internal.getFontSize(),fontStyle:E.internal.getFont().fontStyle,font:E.internal.getFont().fontName,lineWidth:E.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:E.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return w.setDefaults=function(E,A){A===void 0&&(A=null),A?A.__autoTableDocumentDefaults=E:y=E},w.unifyColor=function(E){return Array.isArray(E)?E:typeof E=="number"?[E,E,E]:typeof E=="string"?[E]:null},w.prototype.applyStyles=function(E,A){var U,O,H;A===void 0&&(A=!1),E.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(E.fontStyle);var _=this.jsPDFDocument.internal.getFont(),T=_.fontStyle,D=_.fontName;if(E.font&&(D=E.font),E.fontStyle){T=E.fontStyle;var j=this.getFontList()[D];j&&j.indexOf(T)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(j[0]),T=j[0])}if(this.jsPDFDocument.setFont(D,T),E.fontSize&&this.jsPDFDocument.setFontSize(E.fontSize),!A){var q=w.unifyColor(E.fillColor);q&&(U=this.jsPDFDocument).setFillColor.apply(U,q),q=w.unifyColor(E.textColor),q&&(O=this.jsPDFDocument).setTextColor.apply(O,q),q=w.unifyColor(E.lineColor),q&&(H=this.jsPDFDocument).setDrawColor.apply(H,q),typeof E.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(E.lineWidth)}},w.prototype.splitTextToSize=function(E,A,U){return this.jsPDFDocument.splitTextToSize(E,A,U)},w.prototype.rect=function(E,A,U,O,H){return this.jsPDFDocument.rect(E,A,U,O,H)},w.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},w.prototype.getTextWidth=function(E){return this.jsPDFDocument.getTextWidth(E)},w.prototype.getDocument=function(){return this.jsPDFDocument},w.prototype.setPage=function(E){this.jsPDFDocument.setPage(E)},w.prototype.addPage=function(){return this.jsPDFDocument.addPage()},w.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},w.prototype.getGlobalOptions=function(){return y||{}},w.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},w.prototype.pageSize=function(){var E=this.jsPDFDocument.internal.pageSize;return E.width==null&&(E={width:E.getWidth(),height:E.getHeight()}),E},w.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},w.prototype.getLineHeightFactor=function(){var E=this.jsPDFDocument;return E.getLineHeightFactor?E.getLineHeightFactor():1.15},w.prototype.getLineHeight=function(E){return E/this.scaleFactor()*this.getLineHeightFactor()},w.prototype.pageNumber=function(){var E=this.jsPDFDocument.internal.getCurrentPageInfo();return E?E.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},w}();m.DocHandler=S},4:function(p,m,y){Object.defineProperty(m,"__esModule",{value:!0}),m.parseHtml=void 0;var S=y(903),w=y(796);function E(O,H,_,T,D){var j,q;T===void 0&&(T=!1),D===void 0&&(D=!1);var K;typeof H=="string"?K=_.document.querySelector(H):K=H;var P=Object.keys(O.getFontList()),R=O.scaleFactor(),M=[],J=[],F=[];if(!K)return console.error("Html table could not be found with input: ",H),{head:M,body:J,foot:F};for(var L=0;L<K.rows.length;L++){var re=K.rows[L],ce=(q=(j=re==null?void 0:re.parentElement)===null||j===void 0?void 0:j.tagName)===null||q===void 0?void 0:q.toLowerCase(),ne=A(P,R,_,re,T,D);ne&&(ce==="thead"?M.push(ne):ce==="tfoot"?F.push(ne):J.push(ne))}return{head:M,body:J,foot:F}}m.parseHtml=E;function A(O,H,_,T,D,j){for(var q=new w.HtmlRowInput(T),K=0;K<T.cells.length;K++){var P=T.cells[K],R=_.getComputedStyle(P);if(D||R.display!=="none"){var M=void 0;j&&(M=(0,S.parseCss)(O,P,H,R,_)),q.push({rowSpan:P.rowSpan,colSpan:P.colSpan,styles:M,_element:P,content:U(P)})}}var J=_.getComputedStyle(T);if(q.length>0&&(D||J.display!=="none"))return q}function U(O){var H=O.cloneNode(!0);return H.innerHTML=H.innerHTML.replace(/\n/g,"").replace(/ +/g," "),H.innerHTML=H.innerHTML.split(/<br.*?>/).map(function(_){return _.trim()}).join(`
`),H.innerText||H.textContent||""}},776:function(p,m,y){Object.defineProperty(m,"__esModule",{value:!0}),m.parseInput=void 0;var S=y(4),w=y(356),E=y(420),A=y(744),U=y(792);function O(K,P){var R=new A.DocHandler(K),M=R.getDocumentOptions(),J=R.getGlobalOptions();(0,U.default)(R,J,M,P);var F=(0,w.assign)({},J,M,P),L;typeof window<"u"&&(L=window);var re=H(J,M,P),ce=_(J,M,P),ne=T(R,F),Q=j(R,F,L);return{id:P.tableId,content:Q,hooks:ce,styles:re,settings:ne}}m.parseInput=O;function H(K,P,R){for(var M={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},J=function(ce){if(ce==="columnStyles"){var ne=K[ce],Q=P[ce],W=R[ce];M.columnStyles=(0,w.assign)({},ne,Q,W)}else{var ue=[K,P,R],oe=ue.map(function(ye){return ye[ce]||{}});M[ce]=(0,w.assign)({},oe[0],oe[1],oe[2])}},F=0,L=Object.keys(M);F<L.length;F++){var re=L[F];J(re)}return M}function _(K,P,R){for(var M=[K,P,R],J={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},F=0,L=M;F<L.length;F++){var re=L[F];re.didParseCell&&J.didParseCell.push(re.didParseCell),re.willDrawCell&&J.willDrawCell.push(re.willDrawCell),re.didDrawCell&&J.didDrawCell.push(re.didDrawCell),re.willDrawPage&&J.willDrawPage.push(re.willDrawPage),re.didDrawPage&&J.didDrawPage.push(re.didDrawPage)}return J}function T(K,P){var R,M,J,F,L,re,ce,ne,Q,W,ue,oe,ye=(0,E.parseSpacing)(P.margin,40/K.scaleFactor()),xe=(R=D(K,P.startY))!==null&&R!==void 0?R:ye.top,z;P.showFoot===!0?z="everyPage":P.showFoot===!1?z="never":z=(M=P.showFoot)!==null&&M!==void 0?M:"everyPage";var G;P.showHead===!0?G="everyPage":P.showHead===!1?G="never":G=(J=P.showHead)!==null&&J!==void 0?J:"everyPage";var ie=(F=P.useCss)!==null&&F!==void 0?F:!1,fe=P.theme||(ie?"plain":"striped"),se=!!P.horizontalPageBreak,Ee=(L=P.horizontalPageBreakRepeat)!==null&&L!==void 0?L:null;return{includeHiddenHtml:(re=P.includeHiddenHtml)!==null&&re!==void 0?re:!1,useCss:ie,theme:fe,startY:xe,margin:ye,pageBreak:(ce=P.pageBreak)!==null&&ce!==void 0?ce:"auto",rowPageBreak:(ne=P.rowPageBreak)!==null&&ne!==void 0?ne:"auto",tableWidth:(Q=P.tableWidth)!==null&&Q!==void 0?Q:"auto",showHead:G,showFoot:z,tableLineWidth:(W=P.tableLineWidth)!==null&&W!==void 0?W:0,tableLineColor:(ue=P.tableLineColor)!==null&&ue!==void 0?ue:200,horizontalPageBreak:se,horizontalPageBreakRepeat:Ee,horizontalPageBreakBehaviour:(oe=P.horizontalPageBreakBehaviour)!==null&&oe!==void 0?oe:"afterAllRows"}}function D(K,P){var R=K.getLastAutoTable(),M=K.scaleFactor(),J=K.pageNumber(),F=!1;if(R&&R.startPageNumber){var L=R.startPageNumber+R.pageNumber-1;F=L===J}return typeof P=="number"?P:(P==null||P===!1)&&F&&(R==null?void 0:R.finalY)!=null?R.finalY+20/M:null}function j(K,P,R){var M=P.head||[],J=P.body||[],F=P.foot||[];if(P.html){var L=P.includeHiddenHtml;if(R){var re=(0,S.parseHtml)(K,P.html,R,L,P.useCss)||{};M=re.head||M,J=re.body||M,F=re.foot||M}else console.error("Cannot parse html in non browser environment")}var ce=P.columns||q(M,J,F);return{columns:ce,head:M,body:J,foot:F}}function q(K,P,R){var M=K[0]||P[0]||R[0]||[],J=[];return Object.keys(M).filter(function(F){return F!=="_element"}).forEach(function(F){var L=1,re;Array.isArray(M)?re=M[parseInt(F)]:re=M[F],typeof re=="object"&&!Array.isArray(re)&&(L=(re==null?void 0:re.colSpan)||1);for(var ce=0;ce<L;ce++){var ne=void 0;Array.isArray(M)?ne=J.length:ne=F+(ce>0?"_".concat(ce):"");var Q={dataKey:ne};J.push(Q)}}),J}},792:function(p,m){Object.defineProperty(m,"__esModule",{value:!0});function y(w,E,A,U){for(var O=function(D){D&&typeof D!="object"&&console.error("The options parameter should be of type object, is: "+typeof D),typeof D.extendWidth<"u"&&(D.tableWidth=D.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof D.margins<"u"&&(typeof D.margin>"u"&&(D.margin=D.margins),console.error("Use of deprecated option: margins, use margin instead.")),D.startY&&typeof D.startY!="number"&&(console.error("Invalid value for startY option",D.startY),delete D.startY),!D.didDrawPage&&(D.afterPageContent||D.beforePageContent||D.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),D.didDrawPage=function(F){w.applyStyles(w.userStyles),D.beforePageContent&&D.beforePageContent(F),w.applyStyles(w.userStyles),D.afterPageContent&&D.afterPageContent(F),w.applyStyles(w.userStyles),D.afterPageAdd&&F.pageNumber>1&&F.afterPageAdd(F),w.applyStyles(w.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(F){D[F]&&console.error('The "'.concat(F,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(F){var L=F[0],re=F[1];D[re]&&(console.error("Use of deprecated option ".concat(re,". Use ").concat(L," instead")),D[L]=D[re])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(F){var L=typeof F=="string"?F:F[0],re=typeof F=="string"?F:F[1];typeof D[L]<"u"&&(typeof D.styles[re]>"u"&&(D.styles[re]=D[L]),console.error("Use of deprecated option: "+L+", use the style "+re+" instead."))});for(var j=0,q=["styles","bodyStyles","headStyles","footStyles"];j<q.length;j++){var K=q[j];S(D[K]||{})}for(var P=D.columnStyles||{},R=0,M=Object.keys(P);R<M.length;R++){var J=M[R];S(P[J]||{})}},H=0,_=[E,A,U];H<_.length;H++){var T=_[H];O(T)}}m.default=y;function S(w){w.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),w.minCellHeight||(w.minCellHeight=w.rowHeight)):w.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),w.cellWidth||(w.cellWidth=w.columnWidth))}},260:function(p,m,y){Object.defineProperty(m,"__esModule",{value:!0}),m.Column=m.Cell=m.Row=m.Table=void 0;var S=y(796),w=y(172),E=y(420),A=function(){function _(T,D){this.pageNumber=1,this.pageCount=1,this.id=T.id,this.settings=T.settings,this.styles=T.styles,this.hooks=T.hooks,this.columns=D.columns,this.head=D.head,this.body=D.body,this.foot=D.foot}return _.prototype.getHeadHeight=function(T){return this.head.reduce(function(D,j){return D+j.getMaxCellHeight(T)},0)},_.prototype.getFootHeight=function(T){return this.foot.reduce(function(D,j){return D+j.getMaxCellHeight(T)},0)},_.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},_.prototype.callCellHooks=function(T,D,j,q,K,P){for(var R=0,M=D;R<M.length;R++){var J=M[R],F=new w.CellHookData(T,this,j,q,K,P),L=J(F)===!1;if(j.text=Array.isArray(j.text)?j.text:[j.text],L)return!1}return!0},_.prototype.callEndPageHooks=function(T,D){T.applyStyles(T.userStyles);for(var j=0,q=this.hooks.didDrawPage;j<q.length;j++){var K=q[j];K(new w.HookData(T,this,D))}},_.prototype.callWillDrawPageHooks=function(T,D){for(var j=0,q=this.hooks.willDrawPage;j<q.length;j++){var K=q[j];K(new w.HookData(T,this,D))}},_.prototype.getWidth=function(T){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var D=this.columns.reduce(function(q,K){return q+K.wrappedWidth},0);return D}else{var j=this.settings.margin;return T-j.left-j.right}},_}();m.Table=A;var U=function(){function _(T,D,j,q,K){K===void 0&&(K=!1),this.height=0,this.raw=T,T instanceof S.HtmlRowInput&&(this.raw=T._element,this.element=T._element),this.index=D,this.section=j,this.cells=q,this.spansMultiplePages=K}return _.prototype.getMaxCellHeight=function(T){var D=this;return T.reduce(function(j,q){var K;return Math.max(j,((K=D.cells[q.index])===null||K===void 0?void 0:K.height)||0)},0)},_.prototype.hasRowSpan=function(T){var D=this;return T.filter(function(j){var q=D.cells[j.index];return q?q.rowSpan>1:!1}).length>0},_.prototype.canEntireRowFit=function(T,D){return this.getMaxCellHeight(D)<=T},_.prototype.getMinimumRowHeight=function(T,D){var j=this;return T.reduce(function(q,K){var P=j.cells[K.index];if(!P)return 0;var R=D.getLineHeight(P.styles.fontSize),M=P.padding("vertical"),J=M+R;return J>q?J:q},0)},_}();m.Row=U;var O=function(){function _(T,D,j){var q,K;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=D,this.section=j,this.raw=T;var P=T;T!=null&&typeof T=="object"&&!Array.isArray(T)?(this.rowSpan=T.rowSpan||1,this.colSpan=T.colSpan||1,P=(K=(q=T.content)!==null&&q!==void 0?q:T.title)!==null&&K!==void 0?K:T,T._element&&(this.raw=T._element)):(this.rowSpan=1,this.colSpan=1);var R=P!=null?""+P:"",M=/\r\n|\r|\n/g;this.text=R.split(M)}return _.prototype.getTextPos=function(){var T;if(this.styles.valign==="top")T=this.y+this.padding("top");else if(this.styles.valign==="bottom")T=this.y+this.height-this.padding("bottom");else{var D=this.height-this.padding("vertical");T=this.y+D/2+this.padding("top")}var j;if(this.styles.halign==="right")j=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var q=this.width-this.padding("horizontal");j=this.x+q/2+this.padding("left")}else j=this.x+this.padding("left");return{x:j,y:T}},_.prototype.getContentHeight=function(T,D){D===void 0&&(D=1.15);var j=Array.isArray(this.text)?this.text.length:1,q=this.styles.fontSize/T*D,K=j*q+this.padding("vertical");return Math.max(K,this.styles.minCellHeight)},_.prototype.padding=function(T){var D=(0,E.parseSpacing)(this.styles.cellPadding,0);return T==="vertical"?D.top+D.bottom:T==="horizontal"?D.left+D.right:D[T]},_}();m.Cell=O;var H=function(){function _(T,D,j){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=T,this.raw=D,this.index=j}return _.prototype.getMaxCustomCellWidth=function(T){for(var D=0,j=0,q=T.allRows();j<q.length;j++){var K=q[j],P=K.cells[this.index];P&&typeof P.styles.cellWidth=="number"&&(D=Math.max(D,P.styles.cellWidth))}return D},_}();m.Column=H},356:function(p,m){Object.defineProperty(m,"__esModule",{value:!0}),m.assign=void 0;function y(S,w,E,A,U){if(S==null)throw new TypeError("Cannot convert undefined or null to object");for(var O=Object(S),H=1;H<arguments.length;H++){var _=arguments[H];if(_!=null)for(var T in _)Object.prototype.hasOwnProperty.call(_,T)&&(O[T]=_[T])}return O}m.assign=y},972:function(p,m,y){Object.defineProperty(m,"__esModule",{value:!0}),m.createTable=void 0;var S=y(744),w=y(260),E=y(324),A=y(796),U=y(356);function O(K,P){var R=new S.DocHandler(K),M=H(P,R.scaleFactor()),J=new w.Table(P,M);return(0,E.calculateWidths)(R,J),R.applyStyles(R.userStyles),J}m.createTable=O;function H(K,P){var R=K.content,M=j(R.columns);if(R.head.length===0){var J=T(M,"head");J&&R.head.push(J)}if(R.foot.length===0){var J=T(M,"foot");J&&R.foot.push(J)}var F=K.settings.theme,L=K.styles;return{columns:M,head:_("head",R.head,M,L,F,P),body:_("body",R.body,M,L,F,P),foot:_("foot",R.foot,M,L,F,P)}}function _(K,P,R,M,J,F){var L={},re=P.map(function(ce,ne){for(var Q=0,W={},ue=0,oe=0,ye=0,xe=R;ye<xe.length;ye++){var z=xe[ye];if(L[z.index]==null||L[z.index].left===0)if(oe===0){var G=void 0;Array.isArray(ce)?G=ce[z.index-ue-Q]:G=ce[z.dataKey];var ie={};typeof G=="object"&&!Array.isArray(G)&&(ie=(G==null?void 0:G.styles)||{});var fe=q(K,z,ne,J,M,F,ie),se=new w.Cell(G,fe,K);W[z.dataKey]=se,W[z.index]=se,oe=se.colSpan-1,L[z.index]={left:se.rowSpan-1,times:oe}}else oe--,ue++;else L[z.index].left--,oe=L[z.index].times,Q++}return new w.Row(ce,ne,K,W)});return re}function T(K,P){var R={};return K.forEach(function(M){if(M.raw!=null){var J=D(P,M.raw);J!=null&&(R[M.dataKey]=J)}}),Object.keys(R).length>0?R:null}function D(K,P){if(K==="head"){if(typeof P=="object")return P.header||P.title||null;if(typeof P=="string"||typeof P=="number")return P}else if(K==="foot"&&typeof P=="object")return P.footer;return null}function j(K){return K.map(function(P,R){var M,J,F;return typeof P=="object"?F=(J=(M=P.dataKey)!==null&&M!==void 0?M:P.key)!==null&&J!==void 0?J:R:F=R,new w.Column(F,P,R)})}function q(K,P,R,M,J,F,L){var re=(0,A.getTheme)(M),ce;K==="head"?ce=J.headStyles:K==="body"?ce=J.bodyStyles:K==="foot"&&(ce=J.footStyles);var ne=(0,U.assign)({},re.table,re[K],J.styles,ce),Q=J.columnStyles[P.dataKey]||J.columnStyles[P.index]||{},W=K==="body"?Q:{},ue=K==="body"&&R%2===0?(0,U.assign)({},re.alternateRow,J.alternateRowStyles):{},oe=(0,A.defaultStyles)(F),ye=(0,U.assign)({},oe,ne,ue,W);return(0,U.assign)(ye,L)}},664:function(p,m,y){Object.defineProperty(m,"__esModule",{value:!0}),m.addPage=m.drawTable=void 0;var S=y(420),w=y(260),E=y(744),A=y(356),U=y(136),O=y(224);function H(Q,W){var ue=W.settings,oe=ue.startY,ye=ue.margin,xe={x:ye.left,y:oe},z=W.getHeadHeight(W.columns)+W.getFootHeight(W.columns),G=oe+ye.bottom+z;if(ue.pageBreak==="avoid"){var ie=W.body,fe=ie.reduce(function(be,Ce){return be+Ce.height},0);G+=fe}var se=new E.DocHandler(Q);(ue.pageBreak==="always"||ue.startY!=null&&G>se.pageSize().height)&&(ne(se),xe.y=ye.top),W.callWillDrawPageHooks(se,xe);var Ee=(0,A.assign)({},xe);W.startPageNumber=se.pageNumber(),ue.horizontalPageBreak?_(se,W,Ee,xe):(se.applyStyles(se.userStyles),(ue.showHead==="firstPage"||ue.showHead==="everyPage")&&W.head.forEach(function(be){return J(se,W,be,xe,W.columns)}),se.applyStyles(se.userStyles),W.body.forEach(function(be,Ce){var We=Ce===W.body.length-1;M(se,W,be,We,Ee,xe,W.columns)}),se.applyStyles(se.userStyles),(ue.showFoot==="lastPage"||ue.showFoot==="everyPage")&&W.foot.forEach(function(be){return J(se,W,be,xe,W.columns)})),(0,S.addTableBorder)(se,W,Ee,xe),W.callEndPageHooks(se,xe),W.finalY=xe.y,Q.lastAutoTable=W,Q.previousAutoTable=W,Q.autoTable&&(Q.autoTable.previous=W),se.applyStyles(se.userStyles)}m.drawTable=H;function _(Q,W,ue,oe){var ye=(0,O.calculateAllColumnsCanFitInPage)(Q,W),xe=W.settings;if(xe.horizontalPageBreakBehaviour==="afterAllRows")ye.forEach(function(fe,se){Q.applyStyles(Q.userStyles),se>0?ce(Q,W,ue,oe,fe.columns,!0):T(Q,W,oe,fe.columns),D(Q,W,ue,oe,fe.columns),q(Q,W,oe,fe.columns)});else for(var z=-1,G=ye[0],ie=function(){var fe=z;if(G){Q.applyStyles(Q.userStyles);var se=G.columns;z>=0?ce(Q,W,ue,oe,se,!0):T(Q,W,oe,se),fe=j(Q,W,z+1,oe,se),q(Q,W,oe,se)}var Ee=fe-z;ye.slice(1).forEach(function(be){Q.applyStyles(Q.userStyles),ce(Q,W,ue,oe,be.columns,!0),j(Q,W,z+1,oe,be.columns,Ee),q(Q,W,oe,be.columns)}),z=fe};z<W.body.length-1;)ie()}function T(Q,W,ue,oe){var ye=W.settings;Q.applyStyles(Q.userStyles),(ye.showHead==="firstPage"||ye.showHead==="everyPage")&&W.head.forEach(function(xe){return J(Q,W,xe,ue,oe)})}function D(Q,W,ue,oe,ye){Q.applyStyles(Q.userStyles),W.body.forEach(function(xe,z){var G=z===W.body.length-1;M(Q,W,xe,G,ue,oe,ye)})}function j(Q,W,ue,oe,ye,xe){Q.applyStyles(Q.userStyles),xe=xe??W.body.length;var z=Math.min(ue+xe,W.body.length),G=-1;return W.body.slice(ue,z).forEach(function(ie,fe){var se=ue+fe===W.body.length-1,Ee=re(Q,W,se,oe);ie.canEntireRowFit(Ee,ye)&&(J(Q,W,ie,oe,ye),G=ue+fe)}),G}function q(Q,W,ue,oe){var ye=W.settings;Q.applyStyles(Q.userStyles),(ye.showFoot==="lastPage"||ye.showFoot==="everyPage")&&W.foot.forEach(function(xe){return J(Q,W,xe,ue,oe)})}function K(Q,W,ue){var oe=ue.getLineHeight(Q.styles.fontSize),ye=Q.padding("vertical"),xe=Math.floor((W-ye)/oe);return Math.max(0,xe)}function P(Q,W,ue,oe){var ye={};Q.spansMultiplePages=!0,Q.height=0;for(var xe=0,z=0,G=ue.columns;z<G.length;z++){var ie=G[z],fe=Q.cells[ie.index];if(fe){Array.isArray(fe.text)||(fe.text=[fe.text]);var se=new w.Cell(fe.raw,fe.styles,fe.section);se=(0,A.assign)(se,fe),se.text=[];var Ee=K(fe,W,oe);fe.text.length>Ee&&(se.text=fe.text.splice(Ee,fe.text.length));var be=oe.scaleFactor(),Ce=oe.getLineHeightFactor();fe.contentHeight=fe.getContentHeight(be,Ce),fe.contentHeight>=W&&(fe.contentHeight=W,se.styles.minCellHeight-=W),fe.contentHeight>Q.height&&(Q.height=fe.contentHeight),se.contentHeight=se.getContentHeight(be,Ce),se.contentHeight>xe&&(xe=se.contentHeight),ye[ie.index]=se}}var We=new w.Row(Q.raw,-1,Q.section,ye,!0);We.height=xe;for(var Oe=0,tt=ue.columns;Oe<tt.length;Oe++){var ie=tt[Oe],se=We.cells[ie.index];se&&(se.height=We.height);var fe=Q.cells[ie.index];fe&&(fe.height=Q.height)}return We}function R(Q,W,ue,oe){var ye=Q.pageSize().height,xe=oe.settings.margin,z=xe.top+xe.bottom,G=ye-z;W.section==="body"&&(G-=oe.getHeadHeight(oe.columns)+oe.getFootHeight(oe.columns));var ie=W.getMinimumRowHeight(oe.columns,Q),fe=ie<ue;if(ie>G)return console.error("Will not be able to print row ".concat(W.index," correctly since it's minimum height is larger than page height")),!0;if(!fe)return!1;var se=W.hasRowSpan(oe.columns),Ee=W.getMaxCellHeight(oe.columns)>G;return Ee?(se&&console.error("The content of row ".concat(W.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(se||oe.settings.rowPageBreak==="avoid")}function M(Q,W,ue,oe,ye,xe,z){var G=re(Q,W,oe,xe);if(ue.canEntireRowFit(G,z))J(Q,W,ue,xe,z);else if(R(Q,ue,G,W)){var ie=P(ue,G,W,Q);J(Q,W,ue,xe,z),ce(Q,W,ye,xe,z),M(Q,W,ie,oe,ye,xe,z)}else ce(Q,W,ye,xe,z),M(Q,W,ue,oe,ye,xe,z)}function J(Q,W,ue,oe,ye){oe.x=W.settings.margin.left;for(var xe=0,z=ye;xe<z.length;xe++){var G=z[xe],ie=ue.cells[G.index];if(!ie){oe.x+=G.width;continue}Q.applyStyles(ie.styles),ie.x=oe.x,ie.y=oe.y;var fe=W.callCellHooks(Q,W.hooks.willDrawCell,ie,ue,G,oe);if(fe===!1){oe.x+=G.width;continue}F(Q,ie,oe);var se=ie.getTextPos();(0,U.default)(ie.text,se.x,se.y,{halign:ie.styles.halign,valign:ie.styles.valign,maxWidth:Math.ceil(ie.width-ie.padding("left")-ie.padding("right"))},Q.getDocument()),W.callCellHooks(Q,W.hooks.didDrawCell,ie,ue,G,oe),oe.x+=G.width}oe.y+=ue.height}function F(Q,W,ue){var oe=W.styles;if(Q.getDocument().setFillColor(Q.getDocument().getFillColor()),typeof oe.lineWidth=="number"){var ye=(0,S.getFillStyle)(oe.lineWidth,oe.fillColor);ye&&Q.rect(W.x,ue.y,W.width,W.height,ye)}else typeof oe.lineWidth=="object"&&(oe.fillColor&&Q.rect(W.x,ue.y,W.width,W.height,"F"),L(Q,W,ue,oe.lineWidth))}function L(Q,W,ue,oe){var ye,xe,z,G;oe.top&&(ye=ue.x,xe=ue.y,z=ue.x+W.width,G=ue.y,oe.right&&(z+=.5*oe.right),oe.left&&(ye-=.5*oe.left),ie(oe.top,ye,xe,z,G)),oe.bottom&&(ye=ue.x,xe=ue.y+W.height,z=ue.x+W.width,G=ue.y+W.height,oe.right&&(z+=.5*oe.right),oe.left&&(ye-=.5*oe.left),ie(oe.bottom,ye,xe,z,G)),oe.left&&(ye=ue.x,xe=ue.y,z=ue.x,G=ue.y+W.height,oe.top&&(xe-=.5*oe.top),oe.bottom&&(G+=.5*oe.bottom),ie(oe.left,ye,xe,z,G)),oe.right&&(ye=ue.x+W.width,xe=ue.y,z=ue.x+W.width,G=ue.y+W.height,oe.top&&(xe-=.5*oe.top),oe.bottom&&(G+=.5*oe.bottom),ie(oe.right,ye,xe,z,G));function ie(fe,se,Ee,be,Ce){Q.getDocument().setLineWidth(fe),Q.getDocument().line(se,Ee,be,Ce,"S")}}function re(Q,W,ue,oe){var ye=W.settings.margin.bottom,xe=W.settings.showFoot;return(xe==="everyPage"||xe==="lastPage"&&ue)&&(ye+=W.getFootHeight(W.columns)),Q.pageSize().height-oe.y-ye}function ce(Q,W,ue,oe,ye,xe){ye===void 0&&(ye=[]),xe===void 0&&(xe=!1),Q.applyStyles(Q.userStyles),W.settings.showFoot==="everyPage"&&!xe&&W.foot.forEach(function(G){return J(Q,W,G,oe,ye)}),W.callEndPageHooks(Q,oe);var z=W.settings.margin;(0,S.addTableBorder)(Q,W,ue,oe),ne(Q),W.pageNumber++,W.pageCount++,oe.x=z.left,oe.y=z.top,ue.y=z.top,W.callWillDrawPageHooks(Q,oe),W.settings.showHead==="everyPage"&&(W.head.forEach(function(G){return J(Q,W,G,oe,ye)}),Q.applyStyles(Q.userStyles))}m.addPage=ce;function ne(Q){var W=Q.pageNumber();Q.setPage(W+1);var ue=Q.pageNumber();return ue===W?(Q.addPage(),!0):!1}},224:function(p,m,y){Object.defineProperty(m,"__esModule",{value:!0}),m.calculateAllColumnsCanFitInPage=void 0;var S=y(420);function w(A,U,O){var H;O===void 0&&(O={});var _=(0,S.getPageAvailableWidth)(A,U),T=new Map,D=[],j=[],q=[];U.settings.horizontalPageBreakRepeat,Array.isArray(U.settings.horizontalPageBreakRepeat)?q=U.settings.horizontalPageBreakRepeat:(typeof U.settings.horizontalPageBreakRepeat=="string"||typeof U.settings.horizontalPageBreakRepeat=="number")&&(q=[U.settings.horizontalPageBreakRepeat]),q.forEach(function(M){var J=U.columns.find(function(F){return F.dataKey===M||F.index===M});J&&!T.has(J.index)&&(T.set(J.index,!0),D.push(J.index),j.push(U.columns[J.index]),_-=J.wrappedWidth)});for(var K=!0,P=(H=O==null?void 0:O.start)!==null&&H!==void 0?H:0;P<U.columns.length;){if(T.has(P)){P++;continue}var R=U.columns[P].wrappedWidth;if(K||_>=R)K=!1,D.push(P),j.push(U.columns[P]),_-=R;else break;P++}return{colIndexes:D,columns:j,lastIndex:P-1}}function E(A,U){for(var O=[],H=0;H<U.columns.length;H++){var _=w(A,U,{start:H});_.columns.length&&(O.push(_),H=_.lastIndex)}return O}m.calculateAllColumnsCanFitInPage=E},324:function(p,m,y){Object.defineProperty(m,"__esModule",{value:!0}),m.ellipsize=m.resizeColumns=m.calculateWidths=void 0;var S=y(420);function w(D,j){E(D,j);var q=[],K=0;j.columns.forEach(function(R){var M=R.getMaxCustomCellWidth(j);M?R.width=M:(R.width=R.wrappedWidth,q.push(R)),K+=R.width});var P=j.getWidth(D.pageSize().width)-K;P&&(P=A(q,P,function(R){return Math.max(R.minReadableWidth,R.minWidth)})),P&&(P=A(q,P,function(R){return R.minWidth})),P=Math.abs(P),!j.settings.horizontalPageBreak&&P>.1/D.scaleFactor()&&(P=P<1?P:Math.round(P),console.warn("Of the table content, ".concat(P," units width could not fit page"))),O(j),H(j,D),U(j)}m.calculateWidths=w;function E(D,j){var q=D.scaleFactor(),K=j.settings.horizontalPageBreak,P=(0,S.getPageAvailableWidth)(D,j);j.allRows().forEach(function(R){for(var M=0,J=j.columns;M<J.length;M++){var F=J[M],L=R.cells[F.index];if(L){var re=j.hooks.didParseCell;j.callCellHooks(D,re,L,R,F,null);var ce=L.padding("horizontal");L.contentWidth=(0,S.getStringWidth)(L.text,L.styles,D)+ce;var ne=(0,S.getStringWidth)(L.text.join(" ").split(/[^\S\u00A0]+/),L.styles,D);if(L.minReadableWidth=ne+L.padding("horizontal"),typeof L.styles.cellWidth=="number")L.minWidth=L.styles.cellWidth,L.wrappedWidth=L.styles.cellWidth;else if(L.styles.cellWidth==="wrap"||K===!0)L.contentWidth>P?(L.minWidth=P,L.wrappedWidth=P):(L.minWidth=L.contentWidth,L.wrappedWidth=L.contentWidth);else{var Q=10/q;L.minWidth=L.styles.minCellWidth||Q,L.wrappedWidth=L.contentWidth,L.minWidth>L.wrappedWidth&&(L.wrappedWidth=L.minWidth)}}}}),j.allRows().forEach(function(R){for(var M=0,J=j.columns;M<J.length;M++){var F=J[M],L=R.cells[F.index];if(L&&L.colSpan===1)F.wrappedWidth=Math.max(F.wrappedWidth,L.wrappedWidth),F.minWidth=Math.max(F.minWidth,L.minWidth),F.minReadableWidth=Math.max(F.minReadableWidth,L.minReadableWidth);else{var re=j.styles.columnStyles[F.dataKey]||j.styles.columnStyles[F.index]||{},ce=re.cellWidth||re.minCellWidth;ce&&typeof ce=="number"&&(F.minWidth=ce,F.wrappedWidth=ce)}L&&(L.colSpan>1&&!F.minWidth&&(F.minWidth=L.minWidth),L.colSpan>1&&!F.wrappedWidth&&(F.wrappedWidth=L.minWidth))}})}function A(D,j,q){for(var K=j,P=D.reduce(function(Q,W){return Q+W.wrappedWidth},0),R=0;R<D.length;R++){var M=D[R],J=M.wrappedWidth/P,F=K*J,L=M.width+F,re=q(M),ce=L<re?re:L;j-=ce-M.width,M.width=ce}if(j=Math.round(j*1e10)/1e10,j){var ne=D.filter(function(Q){return j<0?Q.width>q(Q):!0});ne.length&&(j=A(ne,j,q))}return j}m.resizeColumns=A;function U(D){for(var j={},q=1,K=D.allRows(),P=0;P<K.length;P++)for(var R=K[P],M=0,J=D.columns;M<J.length;M++){var F=J[M],L=j[F.index];if(q>1)q--,delete R.cells[F.index];else if(L)L.cell.height+=R.height,q=L.cell.colSpan,delete R.cells[F.index],L.left--,L.left<=1&&delete j[F.index];else{var re=R.cells[F.index];if(!re)continue;if(re.height=R.height,re.rowSpan>1){var ce=K.length-P,ne=re.rowSpan>ce?ce:re.rowSpan;j[F.index]={cell:re,left:ne,row:R}}}}}function O(D){for(var j=D.allRows(),q=0;q<j.length;q++)for(var K=j[q],P=null,R=0,M=0,J=0;J<D.columns.length;J++){var F=D.columns[J];if(M-=1,M>1&&D.columns[J+1])R+=F.width,delete K.cells[F.index];else if(P){var L=P;delete K.cells[F.index],P=null,L.width=F.width+R}else{var L=K.cells[F.index];if(!L)continue;if(M=L.colSpan,R=0,L.colSpan>1){P=L,R+=F.width;continue}L.width=F.width+R}}}function H(D,j){for(var q={count:0,height:0},K=0,P=D.allRows();K<P.length;K++){for(var R=P[K],M=0,J=D.columns;M<J.length;M++){var F=J[M],L=R.cells[F.index];if(L){j.applyStyles(L.styles,!0);var re=L.width-L.padding("horizontal");if(L.styles.overflow==="linebreak")L.text=j.splitTextToSize(L.text,re+1/j.scaleFactor(),{fontSize:L.styles.fontSize});else if(L.styles.overflow==="ellipsize")L.text=_(L.text,re,L.styles,j,"...");else if(L.styles.overflow==="hidden")L.text=_(L.text,re,L.styles,j,"");else if(typeof L.styles.overflow=="function"){var ce=L.styles.overflow(L.text,re);typeof ce=="string"?L.text=[ce]:L.text=ce}L.contentHeight=L.getContentHeight(j.scaleFactor(),j.getLineHeightFactor());var ne=L.contentHeight/L.rowSpan;L.rowSpan>1&&q.count*q.height<ne*L.rowSpan?q={height:ne,count:L.rowSpan}:q&&q.count>0&&q.height>ne&&(ne=q.height),ne>R.height&&(R.height=ne)}}q.count--}}function _(D,j,q,K,P){return D.map(function(R){return T(R,j,q,K,P)})}m.ellipsize=_;function T(D,j,q,K,P){var R=1e4*K.scaleFactor();if(j=Math.ceil(j*R)/R,j>=(0,S.getStringWidth)(D,q,K))return D;for(;j<(0,S.getStringWidth)(D+P,q,K)&&!(D.length<=1);)D=D.substring(0,D.length-1);return D.trim()+P}},964:function(p){if(typeof n>"u"){var m=new Error("Cannot find module 'undefined'");throw m.code="MODULE_NOT_FOUND",m}p.exports=n}},s={};function o(p){var m=s[p];if(m!==void 0)return m.exports;var y=s[p]={exports:{}};return r[p].call(y.exports,y,y.exports,o),y.exports}var f={};return function(){var p=f;Object.defineProperty(p,"__esModule",{value:!0}),p.Cell=p.Column=p.Row=p.Table=p.CellHookData=p.__drawTable=p.__createTable=p.applyPlugin=void 0;var m=o(340),y=o(776),S=o(664),w=o(972),E=o(260);Object.defineProperty(p,"Table",{enumerable:!0,get:function(){return E.Table}});var A=o(172);Object.defineProperty(p,"CellHookData",{enumerable:!0,get:function(){return A.CellHookData}});var U=o(260);Object.defineProperty(p,"Cell",{enumerable:!0,get:function(){return U.Cell}}),Object.defineProperty(p,"Column",{enumerable:!0,get:function(){return U.Column}}),Object.defineProperty(p,"Row",{enumerable:!0,get:function(){return U.Row}});function O(j){(0,m.default)(j)}p.applyPlugin=O;function H(j,q){var K=(0,y.parseInput)(j,q),P=(0,w.createTable)(j,K);(0,S.drawTable)(j,P)}function _(j,q){var K=(0,y.parseInput)(j,q);return(0,w.createTable)(j,K)}p.__createTable=_;function T(j,q){(0,S.drawTable)(j,q)}p.__drawTable=T;try{var D=o(964);D.jsPDF&&(D=D.jsPDF),O(D)}catch{}p.default=H}(),f}()})})(g6);const m6=e=>{const t=String(e??"");return/[",\n]/.test(t)?`"${t.replace(/"/g,'""')}"`:t},Wo=(e,t,n)=>{const s=[e.join(","),...t.map(p=>p.map(m6).join(","))].join(`
`),o=new Blob([s],{type:"text/csv;charset=utf-8;"}),f=document.createElement("a");if(f.download!==void 0){const p=URL.createObjectURL(o);f.setAttribute("href",p),f.setAttribute("download",`${n}.csv`),f.style.visibility="hidden",document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(p)}},Eh=({status:e})=>{const t={[at.PENDING_ASSIGNMENT]:"bg-yellow-100 text-yellow-800",[at.ASSIGNED_TO_COURIER]:"bg-blue-100 text-blue-800",[at.PICKED_UP]:"bg-indigo-100 text-indigo-800",[at.IN_TRANSIT]:"bg-purple-100 text-purple-800",[at.OUT_FOR_DELIVERY]:"bg-cyan-100 text-cyan-800",[at.DELIVERED]:"bg-green-100 text-green-800",[at.DELIVERY_FAILED]:"bg-red-100 text-red-800",[at.RETURN_REQUESTED]:"bg-orange-100 text-orange-800",[at.RETURN_IN_PROGRESS]:"bg-fuchsia-100 text-fuchsia-800",[at.RETURNED]:"bg-slate-100 text-slate-800"};return h.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${t[e]}`,children:e})},Z2=({shipments:e,onSelect:t,showClientFee:n=!1,showCourierCommission:r=!1,showNetProfit:s=!1,showEditableFees:o=!1,updateShipmentFees:f})=>{const[p,m]=He.useState(null),[y,S]=He.useState(""),w=O=>![at.DELIVERED,at.RETURNED,at.DELIVERY_FAILED].includes(O),E=(O,H)=>{m({shipmentId:O.id,field:H});const _=H==="clientFee"?O.clientFlatRateFee:O.courierCommission;S(String(_||""))},A=()=>{if(!p||!f)return;const O=parseFloat(y);if(!isNaN(O)&&O>=0){const H=p.field==="clientFee"?{clientFlatRateFee:O}:{courierCommission:O};f(p.shipmentId,H)}m(null),S("")},U=(O,H)=>{const _=(p==null?void 0:p.shipmentId)===O.id&&(p==null?void 0:p.field)===H,T=H==="clientFee"?O.clientFlatRateFee:O.courierCommission,D=typeof T=="number"?`${T.toFixed(2)} EGP`:"N/A",j=o&&w(O.status)&&f;return _?h.jsx("input",{type:"number",value:y,onChange:q=>S(q.target.value),onBlur:A,onKeyDown:q=>q.key==="Enter"&&A(),autoFocus:!0,className:"w-24 p-1 border border-primary-500 rounded-md"}):h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("span",{children:D}),j&&h.jsx("button",{onClick:()=>E(O,H),className:"p-1 text-slate-400 hover:text-primary-600 rounded-md opacity-0 group-hover:opacity-100 transition",title:`Edit ${H==="clientFee"?"Client Fee":"Courier Commission"}`,children:h.jsx(Ah,{className:"w-3.5 h-3.5"})})]})};return h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-sm font-semibold text-slate-600",children:"ID"}),h.jsx("th",{className:"px-6 py-3 text-sm font-semibold text-slate-600",children:"From"}),h.jsx("th",{className:"px-6 py-3 text-sm font-semibold text-slate-600",children:"Recipient"}),h.jsx("th",{className:"px-6 py-3 text-sm font-semibold text-slate-600",children:"Date"}),h.jsx("th",{className:"px-6 py-3 text-sm font-semibold text-slate-600",children:"Status"}),h.jsx("th",{className:"px-6 py-3 text-sm font-semibold text-slate-600",children:"Price"}),n&&h.jsx("th",{className:"px-6 py-3 text-sm font-semibold text-slate-600",children:"Client Fee"}),r&&h.jsx("th",{className:"px-6 py-3 text-sm font-semibold text-slate-600",children:"Courier Commission"}),s&&h.jsx("th",{className:"px-6 py-3 text-sm font-semibold text-slate-600",children:"Net Profit"}),t&&h.jsx("th",{className:"px-6 py-3 text-sm font-semibold text-slate-600"})]})}),h.jsxs("tbody",{className:"divide-y divide-slate-200",children:[e.map(O=>{const H=O.clientFlatRateFee,_=O.courierCommission;let T=0,D="N/A";return s&&typeof H=="number"&&typeof _=="number"?(T=H-_,D=`${T.toFixed(2)} EGP`):s&&typeof H=="number"&&(D=`${H.toFixed(2)} EGP`),h.jsxs("tr",{className:"hover:bg-slate-50 transition group",children:[h.jsx("td",{className:"px-6 py-4 font-mono text-sm text-slate-600",children:O.id}),h.jsx("td",{className:"px-6 py-4 text-slate-800 font-medium",children:O.clientName}),h.jsx("td",{className:"px-6 py-4 text-slate-800 font-medium",children:O.recipientName}),h.jsx("td",{className:"px-6 py-4 text-slate-600",children:new Date(O.creationDate).toLocaleDateString()}),h.jsx("td",{className:"px-6 py-4",children:h.jsx(Eh,{status:O.status})}),h.jsxs("td",{className:"px-6 py-4 font-semibold text-slate-800",children:[O.price.toFixed(2)," EGP"]}),n&&h.jsx("td",{className:"px-6 py-4 font-semibold text-orange-600",children:U(O,"clientFee")}),r&&h.jsx("td",{className:"px-6 py-4 font-semibold text-indigo-600",children:U(O,"courierCommission")}),s&&h.jsx("td",{className:`px-6 py-4 font-bold ${T>0?"text-green-600":T<0?"text-red-600":"text-slate-600"}`,children:D}),t&&h.jsx("td",{className:"px-6 py-4",children:h.jsx("button",{onClick:()=>t(O),className:"text-primary-600 hover:text-primary-800 font-semibold",children:"Details"})})]},O.id)}),e.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:10,className:"text-center py-8 text-slate-500",children:"No shipments found for the selected period."})})]})]})})},x6=({onSelectShipment:e})=>{const{currentUser:t,shipments:n,users:r,updateShipmentFees:s,getCourierName:o}=ci(),[f,p]=He.useState(""),[m,y]=He.useState("all"),[S,w]=He.useState("all"),[E,A]=He.useState(""),U=r.filter(T=>T.role===ht.CLIENT);if(!t)return null;const O=t.role===ht.ADMIN||t.role===ht.SUPER_USER,H=He.useMemo(()=>{let T=n;t.role===ht.CLIENT&&(T=n.filter(j=>j.clientId===t.id));let D=T;return E&&(D=D.filter(j=>j.creationDate.startsWith(E))),t.role===ht.ADMIN&&(m!=="all"&&(D=D.filter(j=>j.clientId===m)),f.trim()!==""&&(D=D.filter(j=>j.id.toLowerCase().includes(f.trim().toLowerCase()))),S!=="all"&&(D=D.filter(j=>j.status===S))),D.sort((j,q)=>new Date(q.creationDate).getTime()-new Date(j.creationDate).getTime())},[t,n,E,f,m,S]),_=()=>{if(!t)return;const T=H;if(O){const D=["ID","Client","Recipient","Recipient Phone","Date","Status","Courier","Price (EGP)","Client Fee (EGP)","Courier Commission (EGP)","Net Profit (EGP)"],j=T.map(q=>{const K=o(q.courierId),P=q.clientFlatRateFee||0,R=q.courierCommission||0;let M=0;return q.courierId&&q.clientFlatRateFee&&q.courierCommission&&(M=P-R),[q.id,q.clientName,q.recipientName,q.recipientPhone,new Date(q.creationDate).toLocaleDateString(),q.status,K,q.price.toFixed(2),P.toFixed(2),R.toFixed(2),M.toFixed(2)]});Wo(D,j,"All_Shipments_Report")}else if(t.role===ht.CLIENT){const D=["ID","Recipient","Date","Status","Price (EGP)"],j=T.map(q=>[q.id,q.recipientName,new Date(q.creationDate).toLocaleDateString(),q.status,q.price.toFixed(2)]);Wo(D,j,`Client_Shipments_${t.name.replace(/\s/g,"_")}`)}};return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex justify-between items-center mb-4",children:h.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t.role===ht.CLIENT?"My Shipments":"All Shipments"})}),(t.role===ht.CLIENT||t.role===ht.ADMIN)&&h.jsxs("div",{className:"mb-6 bg-white p-4 rounded-xl shadow-sm flex flex-col md:flex-row gap-4 items-center flex-wrap",children:[t.role===ht.ADMIN&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex-grow w-full md:w-auto",children:h.jsx("input",{type:"text",placeholder:"Search by Shipment ID...",value:f,onChange:T=>p(T.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500"})}),h.jsx("div",{className:"flex-grow w-full md:w-auto",children:h.jsxs("select",{value:m,onChange:T=>y(T.target.value==="all"?"all":Number(T.target.value)),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 bg-white",children:[h.jsx("option",{value:"all",children:"All Clients"}),U.map(T=>h.jsx("option",{value:T.id,children:T.name},T.id))]})}),h.jsx("div",{className:"flex-grow w-full md:w-auto",children:h.jsxs("select",{value:S,onChange:T=>w(T.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 bg-white",children:[h.jsx("option",{value:"all",children:"All Statuses"}),Object.values(at).map(T=>h.jsx("option",{value:T,children:T},T))]})})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"date",value:E,onChange:T=>A(T.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 bg-white","aria-label":"Filter by creation date"}),E&&h.jsx("button",{onClick:()=>A(""),className:"px-4 py-2 text-sm font-semibold text-slate-600 rounded-lg hover:bg-slate-200 transition","aria-label":"Clear date filter",children:"Clear"})]}),h.jsx("div",{className:"md:ml-auto",children:h.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[h.jsx(Pl,{className:"w-5 h-5"}),"Export as CSV"]})})]}),h.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:h.jsx(Z2,{shipments:H,onSelect:e,showClientFee:O,showCourierCommission:O,showNetProfit:O,showEditableFees:O,updateShipmentFees:s})})]})};var oy={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,r)=>{e.exports=r()})(Ms,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s,o=!r.document&&!!r.postMessage,f=r.IS_PAPA_WORKER||!1,p={},m=0,y={};function S(R){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(M){var J=q(M);J.chunkSize=parseInt(J.chunkSize),M.step||M.chunk||(J.chunkSize=null),this._handle=new O(J),(this._handle.streamer=this)._config=J}).call(this,R),this.parseChunk=function(M,J){var F=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<F){let re=this._config.newline;re||(L=this._config.quoteChar||'"',re=this._handle.guessLineEndings(M,L)),M=[...M.split(re).slice(F)].join(re)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(L=this._config.beforeFirstChunk(M))!==void 0&&(M=L),this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+M,L=(this._partialLine="",this._handle.parse(F,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(M=L.meta.cursor,F=(this._finished||(this._partialLine=F.substring(M-this._baseIndex),this._baseIndex=M),L&&L.data&&(this._rowCount+=L.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),f)r.postMessage({results:L,workerId:y.WORKER_ID,finished:F});else if(P(this._config.chunk)&&!J){if(this._config.chunk(L,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=L=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(L.data),this._completeResults.errors=this._completeResults.errors.concat(L.errors),this._completeResults.meta=L.meta),this._completed||!F||!P(this._config.complete)||L&&L.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),F||L&&L.meta.paused||this._nextChunk(),L}this._halted=!0},this._sendError=function(M){P(this._config.error)?this._config.error(M):f&&this._config.error&&r.postMessage({workerId:y.WORKER_ID,error:M,finished:!1})}}function w(R){var M;(R=R||{}).chunkSize||(R.chunkSize=y.RemoteChunkSize),S.call(this,R),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(J){this._input=J,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(M=new XMLHttpRequest,this._config.withCredentials&&(M.withCredentials=this._config.withCredentials),o||(M.onload=K(this._chunkLoaded,this),M.onerror=K(this._chunkError,this)),M.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var J,F=this._config.downloadRequestHeaders;for(J in F)M.setRequestHeader(J,F[J])}var L;this._config.chunkSize&&(L=this._start+this._config.chunkSize-1,M.setRequestHeader("Range","bytes="+this._start+"-"+L));try{M.send(this._config.downloadRequestBody)}catch(re){this._chunkError(re.message)}o&&M.status===0&&this._chunkError()}},this._chunkLoaded=function(){M.readyState===4&&(M.status<200||400<=M.status?this._chunkError():(this._start+=this._config.chunkSize||M.responseText.length,this._finished=!this._config.chunkSize||this._start>=(J=>(J=J.getResponseHeader("Content-Range"))!==null?parseInt(J.substring(J.lastIndexOf("/")+1)):-1)(M),this.parseChunk(M.responseText)))},this._chunkError=function(J){J=M.statusText||J,this._sendError(new Error(J))}}function E(R){(R=R||{}).chunkSize||(R.chunkSize=y.LocalChunkSize),S.call(this,R);var M,J,F=typeof FileReader<"u";this.stream=function(L){this._input=L,J=L.slice||L.webkitSlice||L.mozSlice,F?((M=new FileReader).onload=K(this._chunkLoaded,this),M.onerror=K(this._chunkError,this)):M=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var L=this._input,re=(this._config.chunkSize&&(re=Math.min(this._start+this._config.chunkSize,this._input.size),L=J.call(L,this._start,re)),M.readAsText(L,this._config.encoding));F||this._chunkLoaded({target:{result:re}})},this._chunkLoaded=function(L){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(L.target.result)},this._chunkError=function(){this._sendError(M.error)}}function A(R){var M;S.call(this,R=R||{}),this.stream=function(J){return M=J,this._nextChunk()},this._nextChunk=function(){var J,F;if(!this._finished)return J=this._config.chunkSize,M=J?(F=M.substring(0,J),M.substring(J)):(F=M,""),this._finished=!M,this.parseChunk(F)}}function U(R){S.call(this,R=R||{});var M=[],J=!0,F=!1;this.pause=function(){S.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){S.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(L){this._input=L,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){F&&M.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),M.length?this.parseChunk(M.shift()):J=!0},this._streamData=K(function(L){try{M.push(typeof L=="string"?L:L.toString(this._config.encoding)),J&&(J=!1,this._checkIsFinished(),this.parseChunk(M.shift()))}catch(re){this._streamError(re)}},this),this._streamError=K(function(L){this._streamCleanUp(),this._sendError(L)},this),this._streamEnd=K(function(){this._streamCleanUp(),F=!0,this._streamData("")},this),this._streamCleanUp=K(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function O(R){var M,J,F,L,re=Math.pow(2,53),ce=-re,ne=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,W=this,ue=0,oe=0,ye=!1,xe=!1,z=[],G={data:[],errors:[],meta:{}};function ie(be){return R.skipEmptyLines==="greedy"?be.join("").trim()==="":be.length===1&&be[0].length===0}function fe(){if(G&&F&&(Ee("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+y.DefaultDelimiter+"'"),F=!1),R.skipEmptyLines&&(G.data=G.data.filter(function(Oe){return!ie(Oe)})),se()){let Oe=function(tt,qe){P(R.transformHeader)&&(tt=R.transformHeader(tt,qe)),z.push(tt)};if(G)if(Array.isArray(G.data[0])){for(var be=0;se()&&be<G.data.length;be++)G.data[be].forEach(Oe);G.data.splice(0,1)}else G.data.forEach(Oe)}function Ce(Oe,tt){for(var qe=R.header?{}:[],ut=0;ut<Oe.length;ut++){var Le=ut,me=Oe[ut],me=((pt,Ve)=>(Be=>(R.dynamicTypingFunction&&R.dynamicTyping[Be]===void 0&&(R.dynamicTyping[Be]=R.dynamicTypingFunction(Be)),(R.dynamicTyping[Be]||R.dynamicTyping)===!0))(pt)?Ve==="true"||Ve==="TRUE"||Ve!=="false"&&Ve!=="FALSE"&&((Be=>{if(ne.test(Be)&&(Be=parseFloat(Be),ce<Be&&Be<re))return 1})(Ve)?parseFloat(Ve):Q.test(Ve)?new Date(Ve):Ve===""?null:Ve):Ve)(Le=R.header?ut>=z.length?"__parsed_extra":z[ut]:Le,me=R.transform?R.transform(me,Le):me);Le==="__parsed_extra"?(qe[Le]=qe[Le]||[],qe[Le].push(me)):qe[Le]=me}return R.header&&(ut>z.length?Ee("FieldMismatch","TooManyFields","Too many fields: expected "+z.length+" fields but parsed "+ut,oe+tt):ut<z.length&&Ee("FieldMismatch","TooFewFields","Too few fields: expected "+z.length+" fields but parsed "+ut,oe+tt)),qe}var We;G&&(R.header||R.dynamicTyping||R.transform)&&(We=1,!G.data.length||Array.isArray(G.data[0])?(G.data=G.data.map(Ce),We=G.data.length):G.data=Ce(G.data,0),R.header&&G.meta&&(G.meta.fields=z),oe+=We)}function se(){return R.header&&z.length===0}function Ee(be,Ce,We,Oe){be={type:be,code:Ce,message:We},Oe!==void 0&&(be.row=Oe),G.errors.push(be)}P(R.step)&&(L=R.step,R.step=function(be){G=be,se()?fe():(fe(),G.data.length!==0&&(ue+=be.data.length,R.preview&&ue>R.preview?J.abort():(G.data=G.data[0],L(G,W))))}),this.parse=function(be,Ce,We){var Oe=R.quoteChar||'"',Oe=(R.newline||(R.newline=this.guessLineEndings(be,Oe)),F=!1,R.delimiter?P(R.delimiter)&&(R.delimiter=R.delimiter(be),G.meta.delimiter=R.delimiter):((Oe=((tt,qe,ut,Le,me)=>{var pt,Ve,Be,lt;me=me||[",","	","|",";",y.RECORD_SEP,y.UNIT_SEP];for(var Ue=0;Ue<me.length;Ue++){for(var Te,ze=me[Ue],Xe=0,vt=0,mt=0,_t=(Be=void 0,new _({comments:Le,delimiter:ze,newline:qe,preview:10}).parse(tt)),Lt=0;Lt<_t.data.length;Lt++)ut&&ie(_t.data[Lt])?mt++:(Te=_t.data[Lt].length,vt+=Te,Be===void 0?Be=Te:0<Te&&(Xe+=Math.abs(Te-Be),Be=Te));0<_t.data.length&&(vt/=_t.data.length-mt),(Ve===void 0||Xe<=Ve)&&(lt===void 0||lt<vt)&&1.99<vt&&(Ve=Xe,pt=ze,lt=vt)}return{successful:!!(R.delimiter=pt),bestDelimiter:pt}})(be,R.newline,R.skipEmptyLines,R.comments,R.delimitersToGuess)).successful?R.delimiter=Oe.bestDelimiter:(F=!0,R.delimiter=y.DefaultDelimiter),G.meta.delimiter=R.delimiter),q(R));return R.preview&&R.header&&Oe.preview++,M=be,J=new _(Oe),G=J.parse(M,Ce,We),fe(),ye?{meta:{paused:!0}}:G||{meta:{paused:!1}}},this.paused=function(){return ye},this.pause=function(){ye=!0,J.abort(),M=P(R.chunk)?"":M.substring(J.getCharIndex())},this.resume=function(){W.streamer._halted?(ye=!1,W.streamer.parseChunk(M,!0)):setTimeout(W.resume,3)},this.aborted=function(){return xe},this.abort=function(){xe=!0,J.abort(),G.meta.aborted=!0,P(R.complete)&&R.complete(G),M=""},this.guessLineEndings=function(tt,Oe){tt=tt.substring(0,1048576);var Oe=new RegExp(H(Oe)+"([^]*?)"+H(Oe),"gm"),We=(tt=tt.replace(Oe,"")).split("\r"),Oe=tt.split(`
`),tt=1<Oe.length&&Oe[0].length<We[0].length;if(We.length===1||tt)return`
`;for(var qe=0,ut=0;ut<We.length;ut++)We[ut][0]===`
`&&qe++;return qe>=We.length/2?`\r
`:"\r"}}function H(R){return R.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(R){var M=(R=R||{}).delimiter,J=R.newline,F=R.comments,L=R.step,re=R.preview,ce=R.fastMode,ne=null,Q=!1,W=R.quoteChar==null?'"':R.quoteChar,ue=W;if(R.escapeChar!==void 0&&(ue=R.escapeChar),(typeof M!="string"||-1<y.BAD_DELIMITERS.indexOf(M))&&(M=","),F===M)throw new Error("Comment character same as delimiter");F===!0?F="#":(typeof F!="string"||-1<y.BAD_DELIMITERS.indexOf(F))&&(F=!1),J!==`
`&&J!=="\r"&&J!==`\r
`&&(J=`
`);var oe=0,ye=!1;this.parse=function(xe,z,G){if(typeof xe!="string")throw new Error("Input must be a string");var ie=xe.length,fe=M.length,se=J.length,Ee=F.length,be=P(L),Ce=[],We=[],Oe=[],tt=oe=0;if(!xe)return Xe();if(ce||ce!==!1&&xe.indexOf(W)===-1){for(var qe=xe.split(J),ut=0;ut<qe.length;ut++){if(Oe=qe[ut],oe+=Oe.length,ut!==qe.length-1)oe+=J.length;else if(G)return Xe();if(!F||Oe.substring(0,Ee)!==F){if(be){if(Ce=[],lt(Oe.split(M)),vt(),ye)return Xe()}else lt(Oe.split(M));if(re&&re<=ut)return Ce=Ce.slice(0,re),Xe(!0)}}return Xe()}for(var Le=xe.indexOf(M,oe),me=xe.indexOf(J,oe),pt=new RegExp(H(ue)+H(W),"g"),Ve=xe.indexOf(W,oe);;)if(xe[oe]===W)for(Ve=oe,oe++;;){if((Ve=xe.indexOf(W,Ve+1))===-1)return G||We.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ce.length,index:oe}),Te();if(Ve===ie-1)return Te(xe.substring(oe,Ve).replace(pt,W));if(W===ue&&xe[Ve+1]===ue)Ve++;else if(W===ue||Ve===0||xe[Ve-1]!==ue){Le!==-1&&Le<Ve+1&&(Le=xe.indexOf(M,Ve+1));var Be=Ue((me=me!==-1&&me<Ve+1?xe.indexOf(J,Ve+1):me)===-1?Le:Math.min(Le,me));if(xe.substr(Ve+1+Be,fe)===M){Oe.push(xe.substring(oe,Ve).replace(pt,W)),xe[oe=Ve+1+Be+fe]!==W&&(Ve=xe.indexOf(W,oe)),Le=xe.indexOf(M,oe),me=xe.indexOf(J,oe);break}if(Be=Ue(me),xe.substring(Ve+1+Be,Ve+1+Be+se)===J){if(Oe.push(xe.substring(oe,Ve).replace(pt,W)),ze(Ve+1+Be+se),Le=xe.indexOf(M,oe),Ve=xe.indexOf(W,oe),be&&(vt(),ye))return Xe();if(re&&Ce.length>=re)return Xe(!0);break}We.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ce.length,index:oe}),Ve++}}else if(F&&Oe.length===0&&xe.substring(oe,oe+Ee)===F){if(me===-1)return Xe();oe=me+se,me=xe.indexOf(J,oe),Le=xe.indexOf(M,oe)}else if(Le!==-1&&(Le<me||me===-1))Oe.push(xe.substring(oe,Le)),oe=Le+fe,Le=xe.indexOf(M,oe);else{if(me===-1)break;if(Oe.push(xe.substring(oe,me)),ze(me+se),be&&(vt(),ye))return Xe();if(re&&Ce.length>=re)return Xe(!0)}return Te();function lt(mt){Ce.push(mt),tt=oe}function Ue(mt){var _t=0;return _t=mt!==-1&&(mt=xe.substring(Ve+1,mt))&&mt.trim()===""?mt.length:_t}function Te(mt){return G||(mt===void 0&&(mt=xe.substring(oe)),Oe.push(mt),oe=ie,lt(Oe),be&&vt()),Xe()}function ze(mt){oe=mt,lt(Oe),Oe=[],me=xe.indexOf(J,oe)}function Xe(mt){if(R.header&&!z&&Ce.length&&!Q){var _t=Ce[0],Lt=Object.create(null),ct=new Set(_t);let Mt=!1;for(let ft=0;ft<_t.length;ft++){let vn=_t[ft];if(Lt[vn=P(R.transformHeader)?R.transformHeader(vn,ft):vn]){let Et,ot=Lt[vn];for(;Et=vn+"_"+ot,ot++,ct.has(Et););ct.add(Et),_t[ft]=Et,Lt[vn]++,Mt=!0,(ne=ne===null?{}:ne)[Et]=vn}else Lt[vn]=1,_t[ft]=vn;ct.add(vn)}Mt&&console.warn("Duplicate headers found and renamed."),Q=!0}return{data:Ce,errors:We,meta:{delimiter:M,linebreak:J,aborted:ye,truncated:!!mt,cursor:tt+(z||0),renamedHeaders:ne}}}function vt(){L(Xe()),Ce=[],We=[]}},this.abort=function(){ye=!0},this.getCharIndex=function(){return oe}}function T(R){var M=R.data,J=p[M.workerId],F=!1;if(M.error)J.userError(M.error,M.file);else if(M.results&&M.results.data){var L={abort:function(){F=!0,D(M.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(P(J.userStep)){for(var re=0;re<M.results.data.length&&(J.userStep({data:M.results.data[re],errors:M.results.errors,meta:M.results.meta},L),!F);re++);delete M.results}else P(J.userChunk)&&(J.userChunk(M.results,L,M.file),delete M.results)}M.finished&&!F&&D(M.workerId,M.results)}function D(R,M){var J=p[R];P(J.userComplete)&&J.userComplete(M),J.terminate(),delete p[R]}function j(){throw new Error("Not implemented.")}function q(R){if(typeof R!="object"||R===null)return R;var M,J=Array.isArray(R)?[]:{};for(M in R)J[M]=q(R[M]);return J}function K(R,M){return function(){R.apply(M,arguments)}}function P(R){return typeof R=="function"}return y.parse=function(R,M){var J=(M=M||{}).dynamicTyping||!1;if(P(J)&&(M.dynamicTypingFunction=J,J={}),M.dynamicTyping=J,M.transform=!!P(M.transform)&&M.transform,!M.worker||!y.WORKERS_SUPPORTED)return J=null,y.NODE_STREAM_INPUT,typeof R=="string"?(R=(F=>F.charCodeAt(0)!==65279?F:F.slice(1))(R),J=new(M.download?w:A)(M)):R.readable===!0&&P(R.read)&&P(R.on)?J=new U(M):(r.File&&R instanceof File||R instanceof Object)&&(J=new E(M)),J.stream(R);(J=(()=>{var F;return!!y.WORKERS_SUPPORTED&&(F=(()=>{var L=r.URL||r.webkitURL||null,re=n.toString();return y.BLOB_URL||(y.BLOB_URL=L.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",re,")();"],{type:"text/javascript"})))})(),(F=new r.Worker(F)).onmessage=T,F.id=m++,p[F.id]=F)})()).userStep=M.step,J.userChunk=M.chunk,J.userComplete=M.complete,J.userError=M.error,M.step=P(M.step),M.chunk=P(M.chunk),M.complete=P(M.complete),M.error=P(M.error),delete M.worker,J.postMessage({input:R,config:M,workerId:J.id})},y.unparse=function(R,M){var J=!1,F=!0,L=",",re=`\r
`,ce='"',ne=ce+ce,Q=!1,W=null,ue=!1,oe=((()=>{if(typeof M=="object"){if(typeof M.delimiter!="string"||y.BAD_DELIMITERS.filter(function(z){return M.delimiter.indexOf(z)!==-1}).length||(L=M.delimiter),typeof M.quotes!="boolean"&&typeof M.quotes!="function"&&!Array.isArray(M.quotes)||(J=M.quotes),typeof M.skipEmptyLines!="boolean"&&typeof M.skipEmptyLines!="string"||(Q=M.skipEmptyLines),typeof M.newline=="string"&&(re=M.newline),typeof M.quoteChar=="string"&&(ce=M.quoteChar),typeof M.header=="boolean"&&(F=M.header),Array.isArray(M.columns)){if(M.columns.length===0)throw new Error("Option columns is empty");W=M.columns}M.escapeChar!==void 0&&(ne=M.escapeChar+ce),M.escapeFormulae instanceof RegExp?ue=M.escapeFormulae:typeof M.escapeFormulae=="boolean"&&M.escapeFormulae&&(ue=/^[=+\-@\t\r].*$/)}})(),new RegExp(H(ce),"g"));if(typeof R=="string"&&(R=JSON.parse(R)),Array.isArray(R)){if(!R.length||Array.isArray(R[0]))return ye(null,R,Q);if(typeof R[0]=="object")return ye(W||Object.keys(R[0]),R,Q)}else if(typeof R=="object")return typeof R.data=="string"&&(R.data=JSON.parse(R.data)),Array.isArray(R.data)&&(R.fields||(R.fields=R.meta&&R.meta.fields||W),R.fields||(R.fields=Array.isArray(R.data[0])?R.fields:typeof R.data[0]=="object"?Object.keys(R.data[0]):[]),Array.isArray(R.data[0])||typeof R.data[0]=="object"||(R.data=[R.data])),ye(R.fields||[],R.data||[],Q);throw new Error("Unable to serialize unrecognized input");function ye(z,G,ie){var fe="",se=(typeof z=="string"&&(z=JSON.parse(z)),typeof G=="string"&&(G=JSON.parse(G)),Array.isArray(z)&&0<z.length),Ee=!Array.isArray(G[0]);if(se&&F){for(var be=0;be<z.length;be++)0<be&&(fe+=L),fe+=xe(z[be],be);0<G.length&&(fe+=re)}for(var Ce=0;Ce<G.length;Ce++){var We=(se?z:G[Ce]).length,Oe=!1,tt=se?Object.keys(G[Ce]).length===0:G[Ce].length===0;if(ie&&!se&&(Oe=ie==="greedy"?G[Ce].join("").trim()==="":G[Ce].length===1&&G[Ce][0].length===0),ie==="greedy"&&se){for(var qe=[],ut=0;ut<We;ut++){var Le=Ee?z[ut]:ut;qe.push(G[Ce][Le])}Oe=qe.join("").trim()===""}if(!Oe){for(var me=0;me<We;me++){0<me&&!tt&&(fe+=L);var pt=se&&Ee?z[me]:me;fe+=xe(G[Ce][pt],me)}Ce<G.length-1&&(!ie||0<We&&!tt)&&(fe+=re)}}return fe}function xe(z,G){var ie,fe;return z==null?"":z.constructor===Date?JSON.stringify(z).slice(1,25):(fe=!1,ue&&typeof z=="string"&&ue.test(z)&&(z="'"+z,fe=!0),ie=z.toString().replace(oe,ne),(fe=fe||J===!0||typeof J=="function"&&J(z,G)||Array.isArray(J)&&J[G]||((se,Ee)=>{for(var be=0;be<Ee.length;be++)if(-1<se.indexOf(Ee[be]))return!0;return!1})(ie,y.BAD_DELIMITERS)||-1<ie.indexOf(L)||ie.charAt(0)===" "||ie.charAt(ie.length-1)===" ")?ce+ie+ce:ie)}},y.RECORD_SEP="",y.UNIT_SEP="",y.BYTE_ORDER_MARK="\uFEFF",y.BAD_DELIMITERS=["\r",`
`,'"',y.BYTE_ORDER_MARK],y.WORKERS_SUPPORTED=!o&&!!r.Worker,y.NODE_STREAM_INPUT=1,y.LocalChunkSize=10485760,y.RemoteChunkSize=5242880,y.DefaultDelimiter=",",y.Parser=_,y.ParserHandle=O,y.NetworkStreamer=w,y.FileStreamer=E,y.StringStreamer=A,y.ReadableStreamStreamer=U,r.jQuery&&((s=r.jQuery).fn.parse=function(R){var M=R.config||{},J=[];return this.each(function(re){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var ce=0;ce<this.files.length;ce++)J.push({file:this.files[ce],inputElem:this,instanceConfig:s.extend({},M)})}),F(),this;function F(){if(J.length===0)P(R.complete)&&R.complete();else{var re,ce,ne,Q,W=J[0];if(P(R.before)){var ue=R.before(W.file,W.inputElem);if(typeof ue=="object"){if(ue.action==="abort")return re="AbortError",ce=W.file,ne=W.inputElem,Q=ue.reason,void(P(R.error)&&R.error({name:re},ce,ne,Q));if(ue.action==="skip")return void L();typeof ue.config=="object"&&(W.instanceConfig=s.extend(W.instanceConfig,ue.config))}else if(ue==="skip")return void L()}var oe=W.instanceConfig.complete;W.instanceConfig.complete=function(ye){P(oe)&&oe(ye,W.file,W.inputElem),L()},y.parse(W.file,W.instanceConfig)}}function L(){J.splice(0,1),F()}}),f&&(r.onmessage=function(R){R=R.data,y.WORKER_ID===void 0&&R&&(y.WORKER_ID=R.workerId),typeof R.input=="string"?r.postMessage({workerId:y.WORKER_ID,results:y.parse(R.input,R.config),finished:!0}):(r.File&&R.input instanceof File||R.input instanceof Object)&&(R=y.parse(R.input,R.config))&&r.postMessage({workerId:y.WORKER_ID,results:R,finished:!0})}),(w.prototype=Object.create(S.prototype)).constructor=w,(E.prototype=Object.create(S.prototype)).constructor=E,(A.prototype=Object.create(A.prototype)).constructor=A,(U.prototype=Object.create(S.prototype)).constructor=U,y})})(oy);var y6=oy.exports;const Am=ih(y6),b6=()=>{const{currentUser:e,addShipment:t,addToast:n,calculatePriorityPrice:r}=ci(),[s,o]=He.useState("single"),[f,p]=He.useState(""),[m,y]=He.useState(""),[S,w]=He.useState({street:"",city:"Cairo",zone:Ia.CAIRO_DOWNTOWN,details:""}),[E,A]=He.useState(""),[U,O]=He.useState(Or.COD),[H,_]=He.useState(bn.STANDARD),[T,D]=He.useState(""),[j,q]=He.useState(null),[K,P]=He.useState([]),[R,M]=He.useState([]),J=(e==null?void 0:e.flatRateFee)||0,F=e?r(J,H,e):J,L=parseFloat(T)||0,re=L+F,ce=G=>{if(G.preventDefault(),!e)return;const ie={clientId:e.id,clientName:e.name,recipientName:f,recipientPhone:m,fromAddress:e.address||{street:"",city:"Cairo",zone:Ia.CAIRO_DOWNTOWN,details:""},toAddress:S,packageDescription:E,isLargeOrder:!1,price:re,paymentMethod:U,priority:H,packageValue:L,clientFlatRateFee:F};t(ie),n("Shipment created successfully!","success"),p(""),y(""),w({street:"",city:"Cairo",zone:Ia.CAIRO_DOWNTOWN,details:""}),A(""),O(Or.COD),_(bn.STANDARD),D("")},ne=G=>Object.values(Ia).filter(ie=>ie.startsWith(G)),Q=ne(S.city),W=G=>{G.target.files&&(q(G.target.files[0]),P([]),M([]))},ue=()=>{if(!j){n("Please select a file to upload.","error");return}Am.parse(j,{header:!0,skipEmptyLines:!0,complete:G=>{const fe=G.data.map(se=>({recipientName:se["Recipient Name"],recipientPhone:se["Recipient Phone"],toAddress:{street:se["Recipient Street"],city:se.City||"Cairo",zone:se.Zone,details:se["Address Details"]||""},packageDescription:se["Package Description"],paymentMethod:se["Payment Method"],priority:se.Priority,packageValue:parseFloat(se["Package Value"])}));P(fe),oe(fe)}})},oe=G=>{const ie=G.map(fe=>{const se=[];return fe.recipientName||se.push("Recipient Name is required."),fe.recipientPhone||se.push("Recipient Phone is required."),fe.toAddress.street||se.push("Recipient Street is required."),Object.values(Ia).includes(fe.toAddress.zone)||se.push("Invalid Zone."),Object.values(Or).includes(fe.paymentMethod)||se.push("Invalid Payment Method."),Object.values(bn).includes(fe.priority)||se.push("Invalid Priority."),(isNaN(fe.packageValue)||fe.packageValue<=0)&&se.push("Invalid Package Value."),{isValid:se.length===0,errors:se}});M(ie)},ye=()=>{if(!(e!=null&&e.address)){n("Please complete your profile address before creating shipments.","error");return}const G=K.filter((ie,fe)=>{var se;return(se=R[fe])==null?void 0:se.isValid});if(G.length===0){n("No valid shipments to upload.","error");return}G.forEach(ie=>{const fe=r(J,ie.priority,e),se=ie.packageValue+fe;if(ie.paymentMethod===Or.WALLET&&((e==null?void 0:e.walletBalance)??0)<se){n(`Skipping shipment for ${ie.recipientName} due to insufficient wallet balance.`,"error");return}t({...ie,fromAddress:e.address,isLargeOrder:!1,price:se,clientFlatRateFee:fe})}),n(`${G.length} shipments uploaded successfully!`,"success"),q(null),P([]),M([])},xe=()=>{const G=["Recipient Name","Recipient Phone","Recipient Street","City","Zone","Address Details","Package Description","Payment Method","Priority","Package Value"],ie=(e==null?void 0:e.flatRateFee)||75,fe=e?r(ie,bn.STANDARD,e):ie,se=e?r(ie,bn.URGENT,e):ie*1.5,Ee=e?r(ie,bn.EXPRESS,e):ie*2,be=[G,["Enter recipient full name","Enter phone with country code","Enter full street address","Cairo, Giza, Alexandria, or Other","Select from available zones","Additional address details","Describe package contents",`${Object.values(Or).join(" or ")}`,`Standard (${fe.toFixed(2)} EGP), Urgent (${se.toFixed(2)} EGP), Express (${Ee.toFixed(2)} EGP)`,"Package value in EGP"],["Ahmed Mohamed","01012345678","123 Tahrir Square","Cairo","Cairo - Downtown (El Alfy)","Apartment 5, Floor 3","Electronics - Mobile Phone","COD","Standard","500.00"],["=== AVAILABLE OPTIONS ===","","","","","","","","",""],["CITIES:",Object.values(["Cairo","Giza","Alexandria","Other"]).join(", "),"","","","","","","",""],["ZONES (sample):",Object.values(Ia).slice(0,10).join(", "),"...and more","","","","","","",""],["PAYMENT METHODS:",Object.values(Or).join(", "),"","","","","","","",""],["PRIORITY PRICING:",`Standard: ${fe.toFixed(2)} EGP (base rate)`,`Urgent: ${se.toFixed(2)} EGP (${(se/ie).toFixed(1)}x base)`,`Express: ${Ee.toFixed(2)} EGP (${(Ee/ie).toFixed(1)}x base)`,"","","","","",""]],Ce=Am.unparse(be),We=new Blob([Ce],{type:"text/csv;charset=utf-8;"}),Oe=document.createElement("a");Oe.href=URL.createObjectURL(We),Oe.setAttribute("download","bulk_upload_template.csv"),document.body.appendChild(Oe),Oe.click(),document.body.removeChild(Oe)},z=R.length>0&&R.every(G=>G.isValid);return h.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm max-w-6xl mx-auto",children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:"Create Shipments"}),h.jsx("div",{className:"border-b border-slate-200 mb-6",children:h.jsxs("nav",{className:"-mb-px flex space-x-6",children:[h.jsx("button",{onClick:()=>o("single"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${s==="single"?"border-primary-500 text-primary-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Create Single Shipment"}),h.jsx("button",{onClick:()=>o("bulk"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${s==="bulk"?"border-primary-500 text-primary-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Bulk Upload Shipments"})]})}),s==="single"&&h.jsxs("form",{onSubmit:ce,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Recipient Name"}),h.jsx("input",{type:"text",value:f,onChange:G=>p(G.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Recipient Phone"}),h.jsx("input",{type:"tel",value:m,onChange:G=>y(G.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Recipient Street Address"}),h.jsx("input",{type:"text",value:S.street,onChange:G=>w(ie=>({...ie,street:G.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., 123 Main St",required:!0})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"City"}),h.jsxs("select",{value:S.city,onChange:G=>w(ie=>({...ie,city:G.target.value,zone:ne(G.target.value)[0]})),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",children:[h.jsx("option",{value:"Cairo",children:"Cairo"}),h.jsx("option",{value:"Giza",children:"Giza"}),h.jsx("option",{value:"Alexandria",children:"Alexandria"}),h.jsx("option",{value:"Other",children:"Other Governorates"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Zone"}),h.jsx("select",{value:S.zone,onChange:G=>w(ie=>({...ie,zone:G.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",children:Q.map(G=>h.jsx("option",{value:G,children:G},G))})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Package Description"}),h.jsx("textarea",{value:E,onChange:G=>A(G.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",rows:3})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Package Priority"}),h.jsx("select",{value:H,onChange:G=>_(G.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",children:Object.values(bn).map(G=>{const ie=e?r(J,G,e):J;return h.jsxs("option",{value:G,children:[G," - ",ie.toFixed(2)," EGP"]},G)})}),h.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Base fee: ",J.toFixed(2)," EGP  Selected: ",F.toFixed(2)," EGP"]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Price of Package Contents (EGP)"}),h.jsx("input",{type:"number",value:T,onChange:G=>D(G.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",required:!0,placeholder:"e.g. 500",min:"0.01",step:"0.01"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Payment Method"}),h.jsx("div",{className:"flex gap-4",children:Object.values(Or).map(G=>h.jsx("button",{type:"button",onClick:()=>O(G),className:`px-4 py-2 rounded-lg border-2 transition font-semibold ${U===G?"bg-primary-600 text-white border-primary-600":"bg-white text-slate-700 border-slate-300 hover:border-primary-500"}`,children:G},G))})]}),h.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg text-right",children:[h.jsxs("div",{className:"text-sm text-slate-600",children:["Price of Contents: ",h.jsxs("span",{className:"font-semibold",children:[L.toFixed(2)," EGP"]})]}),h.jsxs("div",{className:"text-sm text-slate-600",children:["Shipping Fee: ",h.jsxs("span",{className:"font-semibold",children:[F.toFixed(2)," EGP"]})]}),h.jsxs("div",{className:"text-lg font-bold text-slate-800 mt-1",children:["Total (Price + Shipping): ",h.jsxs("span",{className:"text-primary-600",children:[re.toFixed(2)," EGP"]})]}),U===Or.COD&&h.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Total amount to be collected by courier."})]}),h.jsx("div",{className:"text-right pt-2",children:h.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center px-6 py-3 bg-primary-600 text-white font-semibold rounded-lg shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition",children:[h.jsx(q2,{className:"w-5 h-5 mr-2"}),"Create Shipment"]})})]}),s==="bulk"&&h.jsxs("div",{children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"p-6 border-2 border-dashed border-slate-300 rounded-lg text-center",children:[h.jsx(ow,{className:"mx-auto h-12 w-12 text-slate-400"}),h.jsx("label",{htmlFor:"file-upload",className:"mt-2 block text-sm font-medium text-slate-700",children:"Select a CSV file to upload"}),h.jsx("input",{id:"file-upload",type:"file",accept:".csv",onChange:W,className:"mt-1 block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("button",{onClick:xe,className:"inline-flex items-center px-4 py-2 bg-slate-600 text-white font-semibold rounded-lg shadow-sm hover:bg-slate-700",children:[h.jsx(sw,{className:"w-5 h-5 mr-2"}),"Download Template"]}),h.jsx("button",{onClick:ue,disabled:!j,className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white font-semibold rounded-lg shadow-sm hover:bg-primary-700 disabled:bg-slate-300",children:"Verify Data"})]})]}),h.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[h.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-2",children:"Verification Status"}),K.length===0&&h.jsx("p",{className:"text-sm text-slate-500",children:'Upload a file and click "Verify Data" to see the results.'}),K.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:`p-3 rounded-lg mb-4 ${z?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:h.jsx("p",{className:"font-semibold",children:z?"All rows are valid and ready for upload.":"Some rows have errors. Please fix them before uploading."})}),h.jsx("button",{onClick:ye,disabled:!z,className:"w-full inline-flex items-center justify-center px-6 py-3 bg-green-600 text-white font-semibold rounded-lg shadow-sm hover:bg-green-700 disabled:bg-slate-300",children:"Upload Valid Shipments"})]})]})]}),K.length>0&&h.jsx("div",{className:"mt-8 overflow-x-auto",children:h.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[h.jsx("thead",{className:"bg-slate-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),Object.keys(K[0]).map(G=>h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:G.replace(/([A-Z])/g," $1").trim()},G))]})}),h.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:K.map((G,ie)=>{var fe,se,Ee;return h.jsxs("tr",{className:(fe=R[ie])!=null&&fe.isValid?"":"bg-red-50",children:[h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(se=R[ie])!=null&&se.isValid?h.jsx(ql,{className:"w-6 h-6 text-green-500"}):h.jsxs("div",{className:"relative group",children:[h.jsx(Bl,{className:"w-6 h-6 text-red-500"}),h.jsx("div",{className:"absolute z-10 hidden group-hover:block bg-slate-800 text-white text-xs rounded py-1 px-2 bottom-full left-1/2 -translate-x-1/2 w-48",children:(Ee=R[ie])==null?void 0:Ee.errors.join(" ")})]})}),Object.values(G).map((be,Ce)=>h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700",children:typeof be=="object"?JSON.stringify(be):String(be)},Ce))]},ie)})})]})})]})]})},v6=()=>{const{shipments:e,users:t,assignShipmentToCourier:n,canCourierReceiveAssignment:r,addToast:s}=ci(),o=e.filter(m=>m.status===at.PENDING_ASSIGNMENT),f=t.filter(m=>m.role===ht.COURIER),p=async(m,y)=>{if(!y){s("Please select a courier","error");return}try{if(await n(m,parseInt(y))){const w=document.querySelector(`select[data-shipment-id="${m}"]`);w&&(w.value="")}}catch{s("Failed to assign shipment","error")}};return h.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[h.jsxs("div",{className:"p-5 border-b border-slate-200",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Assign Shipments"}),h.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:"Assign pending shipments to available couriers based on their zone."})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{className:"bg-slate-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Shipment ID"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Destination Zone"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Assign To"})]})}),h.jsxs("tbody",{className:"divide-y divide-slate-200",children:[o.map(m=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-6 py-4 font-mono text-slate-600",children:m.id}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"px-2 py-1 bg-slate-200 text-slate-700 rounded text-sm font-medium",children:m.toAddress.zone})}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("select",{onChange:y=>p(m.id,y.target.value),defaultValue:"","data-shipment-id":m.id,className:"w-full max-w-xs px-3 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",children:[h.jsx("option",{value:"",disabled:!0,children:"Select an available courier..."}),f.filter(y=>y.zone===m.toAddress.zone&&r(y.id)).map(y=>h.jsxs("option",{value:y.id,children:[y.name," (",y.zone,")"]},y.id)),f.filter(y=>y.zone===m.toAddress.zone&&r(y.id)).length===0&&h.jsxs("option",{value:"",disabled:!0,children:["No available couriers in ",m.toAddress.zone]})]})})]},m.id)),o.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:3,className:"text-center py-8 text-slate-500",children:"No shipments pending assignment."})})]})]})})]})};var Nt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Nt||(Nt={}));var Nm=new Map([[Nt.QR_CODE,"QR_CODE"],[Nt.AZTEC,"AZTEC"],[Nt.CODABAR,"CODABAR"],[Nt.CODE_39,"CODE_39"],[Nt.CODE_93,"CODE_93"],[Nt.CODE_128,"CODE_128"],[Nt.DATA_MATRIX,"DATA_MATRIX"],[Nt.MAXICODE,"MAXICODE"],[Nt.ITF,"ITF"],[Nt.EAN_13,"EAN_13"],[Nt.EAN_8,"EAN_8"],[Nt.PDF_417,"PDF_417"],[Nt.RSS_14,"RSS_14"],[Nt.RSS_EXPANDED,"RSS_EXPANDED"],[Nt.UPC_A,"UPC_A"],[Nt.UPC_E,"UPC_E"],[Nt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Sm;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(Sm||(Sm={}));function w6(e){return Object.values(Nt).includes(e)}var Xo;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Xo||(Xo={}));var Xa=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Xo.SCAN_TYPE_CAMERA,Xo.SCAN_TYPE_FILE],e}(),ly=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Nm.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Nm.get(t))},e}(),Cm=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),G1;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(G1||(G1={}));var cy=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:G1.UNKWOWN_ERROR}},e}(),uy=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function ls(e){return typeof e>"u"||e===null}function A6(e,t,n){return e>n?n:e<t?t:e}var Sc=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Dn=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Em=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),fy=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(s),f=Object.keys(t),p=0,m=f;p<m.length;p++){var y=m[p];if(o.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},e}(),q1={exports:{}};(function(e,t){(function(n,r){r(t)})(Ms,function(n){function r(Y){return Y==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,i){Y.__proto__=i}||function(Y,i){for(var a in i)i.hasOwnProperty(a)&&(Y[a]=i[a])};function o(Y,i){s(Y,i);function a(){this.constructor=Y}Y.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}function f(Y,i){var a=Object.setPrototypeOf;a?a(Y,i):Y.__proto__=i}function p(Y,i){i===void 0&&(i=Y.constructor);var a=Error.captureStackTrace;a&&a(Y,i)}var m=function(Y){o(i,Y);function i(a){var l=this.constructor,c=Y.call(this,a)||this;return Object.defineProperty(c,"name",{value:l.name,enumerable:!1}),f(c,l.prototype),p(c),c}return i}(Error);class y extends m{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}y.kind="Exception";class S extends y{}S.kind="ArgumentException";class w extends y{}w.kind="IllegalArgumentException";class E{constructor(i){if(this.binarizer=i,i===null)throw new w("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,a){return this.binarizer.getBlackRow(i,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,a,l,c){const u=this.binarizer.getLuminanceSource().crop(i,a,l,c);return new E(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new E(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new E(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class A extends y{static getChecksumInstance(){return new A}}A.kind="ChecksumException";class U{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class O{static arraycopy(i,a,l,c,u){for(;u--;)l[c++]=i[a++]}static currentTimeMillis(){return Date.now()}}class H extends y{}H.kind="IndexOutOfBoundsException";class _ extends H{constructor(i=void 0,a=void 0){super(a),this.index=i,this.message=a}}_.kind="ArrayIndexOutOfBoundsException";class T{static fill(i,a){for(let l=0,c=i.length;l<c;l++)i[l]=a}static fillWithin(i,a,l,c){T.rangeCheck(i.length,a,l);for(let u=a;u<l;u++)i[u]=c}static rangeCheck(i,a,l){if(a>l)throw new w("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new _(a);if(l>i)throw new _(l)}static asList(...i){return i}static create(i,a,l){return Array.from({length:i}).map(u=>Array.from({length:a}).fill(l))}static createInt32Array(i,a,l){return Array.from({length:i}).map(u=>Int32Array.from({length:a}).fill(l))}static equals(i,a){if(!i||!a||!i.length||!a.length||i.length!==a.length)return!1;for(let l=0,c=i.length;l<c;l++)if(i[l]!==a[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let a=1;for(const l of i)a=31*a+l;return a}static fillUint8Array(i,a){for(let l=0;l!==i.length;l++)i[l]=a}static copyOf(i,a){return i.slice(0,a)}static copyOfUint8Array(i,a){if(i.length<=a){const l=new Uint8Array(a);return l.set(i),l}return i.slice(0,a)}static copyOfRange(i,a,l){const c=l-a,u=new Int32Array(c);return O.arraycopy(i,a,u,0,c),u}static binarySearch(i,a,l){l===void 0&&(l=T.numberComparator);let c=0,u=i.length-1;for(;c<=u;){const d=u+c>>1,x=l(a,i[d]);if(x>0)c=d+1;else if(x<0)u=d-1;else return d}return-c-1}static numberComparator(i,a){return i-a}}class D{static numberOfTrailingZeros(i){let a;if(i===0)return 32;let l=31;return a=i<<16,a!==0&&(l-=16,i=a),a=i<<8,a!==0&&(l-=8,i=a),a=i<<4,a!==0&&(l-=4,i=a),a=i<<2,a!==0&&(l-=2,i=a),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let a=1;return i>>>16||(a+=16,i<<=16),i>>>24||(a+=8,i<<=8),i>>>28||(a+=4,i<<=4),i>>>30||(a+=2,i<<=2),a-=i>>>31,a}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,a){return Math.trunc(i/a)}static parseInt(i,a=void 0){return parseInt(i,a)}}D.MIN_VALUE_32_BITS=-2147483648,D.MAX_VALUE=Number.MAX_SAFE_INTEGER;class j{constructor(i,a){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,a==null?this.bits=j.makeArray(i):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const a=j.makeArray(i);O.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const a=this.size;if(i>=a)return a;const l=this.bits;let c=Math.floor(i/32),u=l[c];u&=~((1<<(i&31))-1);const d=l.length;for(;u===0;){if(++c===d)return a;u=l[c]}const x=c*32+D.numberOfTrailingZeros(u);return x>a?a:x}getNextUnset(i){const a=this.size;if(i>=a)return a;const l=this.bits;let c=Math.floor(i/32),u=~l[c];u&=~((1<<(i&31))-1);const d=l.length;for(;u===0;){if(++c===d)return a;u=~l[c]}const x=c*32+D.numberOfTrailingZeros(u);return x>a?a:x}setBulk(i,a){this.bits[Math.floor(i/32)]=a}setRange(i,a){if(a<i||i<0||a>this.size)throw new w;if(a===i)return;a--;const l=Math.floor(i/32),c=Math.floor(a/32),u=this.bits;for(let d=l;d<=c;d++){const x=d>l?0:i&31,C=(2<<(d<c?31:a&31))-(1<<x);u[d]|=C}}clear(){const i=this.bits.length,a=this.bits;for(let l=0;l<i;l++)a[l]=0}isRange(i,a,l){if(a<i||i<0||a>this.size)throw new w;if(a===i)return!0;a--;const c=Math.floor(i/32),u=Math.floor(a/32),d=this.bits;for(let x=c;x<=u;x++){const v=x>c?0:i&31,B=(2<<(x<u?31:a&31))-(1<<v)&4294967295;if((d[x]&B)!==(l?B:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,a){if(a<0||a>32)throw new w("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const a=i.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new w("Sizes don't match");const a=this.bits;for(let l=0,c=a.length;l<c;l++)a[l]^=i.bits[l]}toBytes(i,a,l,c){for(let u=0;u<c;u++){let d=0;for(let x=0;x<8;x++)this.get(i)&&(d|=1<<7-x),i++;a[l+u]=d}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,c=this.bits;for(let u=0;u<l;u++){let d=c[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,i[a-u]=d}if(this.size!==l*32){const u=l*32-this.size;let d=i[0]>>>u;for(let x=1;x<l;x++){const v=i[x];d|=v<<32-u,i[x-1]=d,d=v>>>u}i[l-1]=d}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof j))return!1;const a=i;return this.size===a.size&&T.equals(this.bits,a.bits)}hashCode(){return 31*this.size+T.hashCode(this.bits)}toString(){let i="";for(let a=0,l=this.size;a<l;a++)a&7||(i+=" "),i+=this.get(a)?"X":".";return i}clone(){return new j(this.size,this.bits.slice())}}var q;(function(Y){Y[Y.OTHER=0]="OTHER",Y[Y.PURE_BARCODE=1]="PURE_BARCODE",Y[Y.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",Y[Y.TRY_HARDER=3]="TRY_HARDER",Y[Y.CHARACTER_SET=4]="CHARACTER_SET",Y[Y.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",Y[Y.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",Y[Y.ASSUME_GS1=7]="ASSUME_GS1",Y[Y.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",Y[Y.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",Y[Y.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(q||(q={}));var K=q;class P extends y{static getFormatInstance(){return new P}}P.kind="FormatException";var R;(function(Y){Y[Y.Cp437=0]="Cp437",Y[Y.ISO8859_1=1]="ISO8859_1",Y[Y.ISO8859_2=2]="ISO8859_2",Y[Y.ISO8859_3=3]="ISO8859_3",Y[Y.ISO8859_4=4]="ISO8859_4",Y[Y.ISO8859_5=5]="ISO8859_5",Y[Y.ISO8859_6=6]="ISO8859_6",Y[Y.ISO8859_7=7]="ISO8859_7",Y[Y.ISO8859_8=8]="ISO8859_8",Y[Y.ISO8859_9=9]="ISO8859_9",Y[Y.ISO8859_10=10]="ISO8859_10",Y[Y.ISO8859_11=11]="ISO8859_11",Y[Y.ISO8859_13=12]="ISO8859_13",Y[Y.ISO8859_14=13]="ISO8859_14",Y[Y.ISO8859_15=14]="ISO8859_15",Y[Y.ISO8859_16=15]="ISO8859_16",Y[Y.SJIS=16]="SJIS",Y[Y.Cp1250=17]="Cp1250",Y[Y.Cp1251=18]="Cp1251",Y[Y.Cp1252=19]="Cp1252",Y[Y.Cp1256=20]="Cp1256",Y[Y.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",Y[Y.UTF8=22]="UTF8",Y[Y.ASCII=23]="ASCII",Y[Y.Big5=24]="Big5",Y[Y.GB18030=25]="GB18030",Y[Y.EUC_KR=26]="EUC_KR"})(R||(R={}));class M{constructor(i,a,l,...c){this.valueIdentifier=i,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=c,M.VALUE_IDENTIFIER_TO_ECI.set(i,this),M.NAME_TO_ECI.set(l,this);const u=this.values;for(let d=0,x=u.length;d!==x;d++){const v=u[d];M.VALUES_TO_ECI.set(v,this)}for(const d of c)M.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new P("incorect value");const a=M.VALUES_TO_ECI.get(i);if(a===void 0)throw new P("incorect value");return a}static getCharacterSetECIByName(i){const a=M.NAME_TO_ECI.get(i);if(a===void 0)throw new P("incorect value");return a}equals(i){if(!(i instanceof M))return!1;const a=i;return this.getName()===a.getName()}}M.VALUE_IDENTIFIER_TO_ECI=new Map,M.VALUES_TO_ECI=new Map,M.NAME_TO_ECI=new Map,M.Cp437=new M(R.Cp437,Int32Array.from([0,2]),"Cp437"),M.ISO8859_1=new M(R.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),M.ISO8859_2=new M(R.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),M.ISO8859_3=new M(R.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),M.ISO8859_4=new M(R.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),M.ISO8859_5=new M(R.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),M.ISO8859_6=new M(R.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),M.ISO8859_7=new M(R.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),M.ISO8859_8=new M(R.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),M.ISO8859_9=new M(R.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),M.ISO8859_10=new M(R.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),M.ISO8859_11=new M(R.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),M.ISO8859_13=new M(R.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),M.ISO8859_14=new M(R.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),M.ISO8859_15=new M(R.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),M.ISO8859_16=new M(R.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),M.SJIS=new M(R.SJIS,20,"SJIS","Shift_JIS"),M.Cp1250=new M(R.Cp1250,21,"Cp1250","windows-1250"),M.Cp1251=new M(R.Cp1251,22,"Cp1251","windows-1251"),M.Cp1252=new M(R.Cp1252,23,"Cp1252","windows-1252"),M.Cp1256=new M(R.Cp1256,24,"Cp1256","windows-1256"),M.UnicodeBigUnmarked=new M(R.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),M.UTF8=new M(R.UTF8,26,"UTF8","UTF-8"),M.ASCII=new M(R.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),M.Big5=new M(R.Big5,28,"Big5"),M.GB18030=new M(R.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),M.EUC_KR=new M(R.EUC_KR,30,"EUC_KR","EUC-KR");class J extends y{}J.kind="UnsupportedOperationException";class F{static decode(i,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!F.isBrowser()&&i==="ISO-8859-1"}static encode(i,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof M?i:M.getCharacterSetECIByName(i)}static decodeFallback(i,a){const l=this.encodingCharacterSet(a);if(F.isDecodeFallbackSupported(l)){let c="";for(let u=0,d=i.length;u<d;u++){let x=i[u].toString(16);x.length<2&&(x="0"+x),c+="%"+x}return decodeURIComponent(c)}if(l.equals(M.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new J(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(M.UTF8)||i.equals(M.ISO8859_1)||i.equals(M.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),c=[];for(let u=0;u<l.length;u++)c.push(l[u].charCodeAt(0));return new Uint8Array(c)}}class L{static castAsNonUtf8Char(i,a=null){const l=a?a.getName():this.ISO88591;return F.decode(new Uint8Array([i]),l)}static guessEncoding(i,a){if(a!=null&&a.get(K.CHARACTER_SET)!==void 0)return a.get(K.CHARACTER_SET).toString();const l=i.length;let c=!0,u=!0,d=!0,x=0,v=0,C=0,B=0,V=0,ee=0,ge=0,ve=0,Ae=0,Ie=0,Fe=0;const nt=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let st=0;st<l&&(c||u||d);st++){const it=i[st]&255;d&&(x>0?it&128?x--:d=!1:it&128&&(it&64?(x++,it&32?(x++,it&16?(x++,it&8?d=!1:B++):C++):v++):d=!1)),c&&(it>127&&it<160?c=!1:it>159&&(it<192||it===215||it===247)&&Fe++),u&&(V>0?it<64||it===127||it>252?u=!1:V--:it===128||it===160||it>239?u=!1:it>160&&it<224?(ee++,ve=0,ge++,ge>Ae&&(Ae=ge)):it>127?(V++,ge=0,ve++,ve>Ie&&(Ie=ve)):(ge=0,ve=0))}return d&&x>0&&(d=!1),u&&V>0&&(u=!1),d&&(nt||v+C+B>0)?L.UTF8:u&&(L.ASSUME_SHIFT_JIS||Ae>=3||Ie>=3)?L.SHIFT_JIS:c&&u?Ae===2&&ee===2||Fe*10>=l?L.SHIFT_JIS:L.ISO88591:c?L.ISO88591:u?L.SHIFT_JIS:d?L.UTF8:L.PLATFORM_DEFAULT_ENCODING}static format(i,...a){let l=-1;function c(d,x,v,C,B,V){if(d==="%%")return"%";if(a[++l]===void 0)return;d=C?parseInt(C.substr(1)):void 0;let ee=B?parseInt(B.substr(1)):void 0,ge;switch(V){case"s":ge=a[l];break;case"c":ge=a[l][0];break;case"f":ge=parseFloat(a[l]).toFixed(d);break;case"p":ge=parseFloat(a[l]).toPrecision(d);break;case"e":ge=parseFloat(a[l]).toExponential(d);break;case"x":ge=parseInt(a[l]).toString(ee||16);break;case"d":ge=parseFloat(parseInt(a[l],ee||10).toPrecision(d)).toFixed(0);break}ge=typeof ge=="object"?JSON.stringify(ge):(+ge).toString(ee);let ve=parseInt(v),Ae=v&&v[0]+""=="0"?"0":" ";for(;ge.length<ve;)ge=x!==void 0?ge+Ae:Ae+ge;return ge}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(u,c)}static getBytes(i,a){return F.encode(i,a)}static getCharCode(i,a=0){return i.charCodeAt(a)}static getCharAt(i){return String.fromCharCode(i)}}L.SHIFT_JIS=M.SJIS.getName(),L.GB2312="GB2312",L.ISO88591=M.ISO8859_1.getName(),L.EUC_JP="EUC_JP",L.UTF8=M.UTF8.getName(),L.PLATFORM_DEFAULT_ENCODING=L.UTF8,L.ASSUME_SHIFT_JIS=!1;class re{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=L.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,a,l){for(let c=a;a<a+l;c++)this.append(i[c]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,a){this.value=this.value.substr(0,i)+a+this.value.substr(i+1)}substring(i,a){return this.value.substring(i,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,a){this.value=this.value.substr(0,i)+a+this.value.substr(i+a.length)}}class ce{constructor(i,a,l,c){if(this.width=i,this.height=a,this.rowSize=l,this.bits=c,a==null&&(a=i),this.height=a,i<1||a<1)throw new w("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const a=i.length,l=i[0].length,c=new ce(l,a);for(let u=0;u<a;u++){const d=i[u];for(let x=0;x<l;x++)d[x]&&c.set(x,u)}return c}static parseFromString(i,a,l){if(i===null)throw new w("stringRepresentation cannot be null");const c=new Array(i.length);let u=0,d=0,x=-1,v=0,C=0;for(;C<i.length;)if(i.charAt(C)===`
`||i.charAt(C)==="\r"){if(u>d){if(x===-1)x=u-d;else if(u-d!==x)throw new w("row lengths do not match");d=u,v++}C++}else if(i.substring(C,C+a.length)===a)C+=a.length,c[u]=!0,u++;else if(i.substring(C,C+l.length)===l)C+=l.length,c[u]=!1,u++;else throw new w("illegal character encountered: "+i.substring(C));if(u>d){if(x===-1)x=u-d;else if(u-d!==x)throw new w("row lengths do not match");v++}const B=new ce(x,v);for(let V=0;V<u;V++)c[V]&&B.set(Math.floor(V%x),Math.floor(V/x));return B}get(i,a){const l=a*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new w("input matrix dimensions do not match");const a=new j(Math.floor(this.width/32)+1),l=this.rowSize,c=this.bits;for(let u=0,d=this.height;u<d;u++){const x=u*l,v=i.getRow(u,a).getBitArray();for(let C=0;C<l;C++)c[x+C]^=v[C]}}clear(){const i=this.bits,a=i.length;for(let l=0;l<a;l++)i[l]=0}setRegion(i,a,l,c){if(a<0||i<0)throw new w("Left and top must be nonnegative");if(c<1||l<1)throw new w("Height and width must be at least 1");const u=i+l,d=a+c;if(d>this.height||u>this.width)throw new w("The region must fit inside the matrix");const x=this.rowSize,v=this.bits;for(let C=a;C<d;C++){const B=C*x;for(let V=i;V<u;V++)v[B+Math.floor(V/32)]|=1<<(V&31)&4294967295}}getRow(i,a){a==null||a.getSize()<this.width?a=new j(this.width):a.clear();const l=this.rowSize,c=this.bits,u=i*l;for(let d=0;d<l;d++)a.setBulk(d*32,c[u+d]);return a}setRow(i,a){O.arraycopy(a.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),a=this.getHeight();let l=new j(i),c=new j(i);for(let u=0,d=Math.floor((a+1)/2);u<d;u++)l=this.getRow(u,l),c=this.getRow(a-1-u,c),l.reverse(),c.reverse(),this.setRow(u,c),this.setRow(a-1-u,l)}getEnclosingRectangle(){const i=this.width,a=this.height,l=this.rowSize,c=this.bits;let u=i,d=a,x=-1,v=-1;for(let C=0;C<a;C++)for(let B=0;B<l;B++){const V=c[C*l+B];if(V!==0){if(C<d&&(d=C),C>v&&(v=C),B*32<u){let ee=0;for(;!(V<<31-ee&4294967295);)ee++;B*32+ee<u&&(u=B*32+ee)}if(B*32+31>x){let ee=31;for(;!(V>>>ee);)ee--;B*32+ee>x&&(x=B*32+ee)}}}return x<u||v<d?null:Int32Array.from([u,d,x-u+1,v-d+1])}getTopLeftOnBit(){const i=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const c=l/i;let u=l%i*32;const d=a[l];let x=0;for(;!(d<<31-x&4294967295);)x++;return u+=x,Int32Array.from([u,c])}getBottomRightOnBit(){const i=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const c=Math.floor(l/i);let u=Math.floor(l%i)*32;const d=a[l];let x=31;for(;!(d>>>x);)x--;return u+=x,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof ce))return!1;const a=i;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&T.equals(this.bits,a.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+T.hashCode(this.bits),i}toString(i="X ",a="  ",l=`
`){return this.buildToString(i,a,l)}buildToString(i,a,l){let c=new re;for(let u=0,d=this.height;u<d;u++){for(let x=0,v=this.width;x<v;x++)c.append(this.get(x,u)?i:a);c.append(l)}return c.toString()}clone(){return new ce(this.width,this.height,this.rowSize,this.bits.slice())}}class ne extends y{static getNotFoundInstance(){return new ne}}ne.kind="NotFoundException";class Q extends U{constructor(i){super(i),this.luminances=Q.EMPTY,this.buckets=new Int32Array(Q.LUMINANCE_BUCKETS)}getBlackRow(i,a){const l=this.getLuminanceSource(),c=l.getWidth();a==null||a.getSize()<c?a=new j(c):a.clear(),this.initArrays(c);const u=l.getRow(i,this.luminances),d=this.buckets;for(let v=0;v<c;v++)d[(u[v]&255)>>Q.LUMINANCE_SHIFT]++;const x=Q.estimateBlackPoint(d);if(c<3)for(let v=0;v<c;v++)(u[v]&255)<x&&a.set(v);else{let v=u[0]&255,C=u[1]&255;for(let B=1;B<c-1;B++){const V=u[B+1]&255;(C*4-v-V)/2<x&&a.set(B),v=C,C=V}}return a}getBlackMatrix(){const i=this.getLuminanceSource(),a=i.getWidth(),l=i.getHeight(),c=new ce(a,l);this.initArrays(a);const u=this.buckets;for(let v=1;v<5;v++){const C=Math.floor(l*v/5),B=i.getRow(C,this.luminances),V=Math.floor(a*4/5);for(let ee=Math.floor(a/5);ee<V;ee++){const ge=B[ee]&255;u[ge>>Q.LUMINANCE_SHIFT]++}}const d=Q.estimateBlackPoint(u),x=i.getMatrix();for(let v=0;v<l;v++){const C=v*a;for(let B=0;B<a;B++)(x[C+B]&255)<d&&c.set(B,v)}return c}createBinarizer(i){return new Q(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const a=this.buckets;for(let l=0;l<Q.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(i){const a=i.length;let l=0,c=0,u=0;for(let B=0;B<a;B++)i[B]>u&&(c=B,u=i[B]),i[B]>l&&(l=i[B]);let d=0,x=0;for(let B=0;B<a;B++){const V=B-c,ee=i[B]*V*V;ee>x&&(d=B,x=ee)}if(c>d){const B=c;c=d,d=B}if(d-c<=a/16)throw new ne;let v=d-1,C=-1;for(let B=d-1;B>c;B--){const V=B-c,ee=V*V*(d-B)*(l-i[B]);ee>C&&(v=B,C=ee)}return v<<Q.LUMINANCE_SHIFT}}Q.LUMINANCE_BITS=5,Q.LUMINANCE_SHIFT=8-Q.LUMINANCE_BITS,Q.LUMINANCE_BUCKETS=1<<Q.LUMINANCE_BITS,Q.EMPTY=Uint8ClampedArray.from([0]);class W extends Q{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),a=i.getWidth(),l=i.getHeight();if(a>=W.MINIMUM_DIMENSION&&l>=W.MINIMUM_DIMENSION){const c=i.getMatrix();let u=a>>W.BLOCK_SIZE_POWER;a&W.BLOCK_SIZE_MASK&&u++;let d=l>>W.BLOCK_SIZE_POWER;l&W.BLOCK_SIZE_MASK&&d++;const x=W.calculateBlackPoints(c,u,d,a,l),v=new ce(a,l);W.calculateThresholdForBlock(c,u,d,a,l,x,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new W(i)}static calculateThresholdForBlock(i,a,l,c,u,d,x){const v=u-W.BLOCK_SIZE,C=c-W.BLOCK_SIZE;for(let B=0;B<l;B++){let V=B<<W.BLOCK_SIZE_POWER;V>v&&(V=v);const ee=W.cap(B,2,l-3);for(let ge=0;ge<a;ge++){let ve=ge<<W.BLOCK_SIZE_POWER;ve>C&&(ve=C);const Ae=W.cap(ge,2,a-3);let Ie=0;for(let nt=-2;nt<=2;nt++){const st=d[ee+nt];Ie+=st[Ae-2]+st[Ae-1]+st[Ae]+st[Ae+1]+st[Ae+2]}const Fe=Ie/25;W.thresholdBlock(i,ve,V,Fe,c,x)}}}static cap(i,a,l){return i<a?a:i>l?l:i}static thresholdBlock(i,a,l,c,u,d){for(let x=0,v=l*u+a;x<W.BLOCK_SIZE;x++,v+=u)for(let C=0;C<W.BLOCK_SIZE;C++)(i[v+C]&255)<=c&&d.set(a+C,l+x)}static calculateBlackPoints(i,a,l,c,u){const d=u-W.BLOCK_SIZE,x=c-W.BLOCK_SIZE,v=new Array(l);for(let C=0;C<l;C++){v[C]=new Int32Array(a);let B=C<<W.BLOCK_SIZE_POWER;B>d&&(B=d);for(let V=0;V<a;V++){let ee=V<<W.BLOCK_SIZE_POWER;ee>x&&(ee=x);let ge=0,ve=255,Ae=0;for(let Fe=0,nt=B*c+ee;Fe<W.BLOCK_SIZE;Fe++,nt+=c){for(let st=0;st<W.BLOCK_SIZE;st++){const it=i[nt+st]&255;ge+=it,it<ve&&(ve=it),it>Ae&&(Ae=it)}if(Ae-ve>W.MIN_DYNAMIC_RANGE)for(Fe++,nt+=c;Fe<W.BLOCK_SIZE;Fe++,nt+=c)for(let st=0;st<W.BLOCK_SIZE;st++)ge+=i[nt+st]&255}let Ie=ge>>W.BLOCK_SIZE_POWER*2;if(Ae-ve<=W.MIN_DYNAMIC_RANGE&&(Ie=ve/2,C>0&&V>0)){const Fe=(v[C-1][V]+2*v[C][V-1]+v[C-1][V-1])/4;ve<Fe&&(Ie=Fe)}v[C][V]=Ie}}return v}}W.BLOCK_SIZE_POWER=3,W.BLOCK_SIZE=1<<W.BLOCK_SIZE_POWER,W.BLOCK_SIZE_MASK=W.BLOCK_SIZE-1,W.MINIMUM_DIMENSION=W.BLOCK_SIZE*5,W.MIN_DYNAMIC_RANGE=24;class ue{constructor(i,a){this.width=i,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,a,l,c){throw new J("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new J("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new J("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let a=new re;for(let l=0;l<this.height;l++){const c=this.getRow(l,i);for(let u=0;u<this.width;u++){const d=c[u]&255;let x;d<64?x="#":d<128?x="+":d<192?x=".":x=" ",a.append(x)}a.append(`
`)}return a.toString()}}class oe extends ue{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,a){const l=this.delegate.getRow(i,a),c=this.getWidth();for(let u=0;u<c;u++)l[u]=255-(l[u]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let c=0;c<a;c++)l[c]=255-(i[c]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,a,l,c){return new oe(this.delegate.crop(i,a,l,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new oe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new oe(this.delegate.rotateCounterClockwise45())}}class ye extends ue{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=ye.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const a=i.getContext("2d").getImageData(0,0,i.width,i.height);return ye.toGrayscaleBuffer(a.data,i.width,i.height)}static toGrayscaleBuffer(i,a,l){const c=new Uint8ClampedArray(a*l);for(let u=0,d=0,x=i.length;u<x;u+=4,d++){let v;if(i[u+3]===0)v=255;else{const B=i[u],V=i[u+1],ee=i[u+2];v=306*B+601*V+117*ee+512>>10}c[d]=v}return c}getRow(i,a){if(i<0||i>=this.getHeight())throw new w("Requested row is outside the image: "+i);const l=this.getWidth(),c=i*l;return a===null?a=this.buffer.slice(c,c+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(c,c+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,a,l,c){return super.crop(i,a,l,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const a=this.getTempCanvasElement(),l=a.getContext("2d"),c=i*ye.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*d),v=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*d);return a.width=x,a.height=v,l.translate(x/2,v/2),l.rotate(c),l.drawImage(this.canvas,u/-2,d/-2),this.buffer=ye.makeBufferFromCanvasImageData(a),this}invert(){return new oe(this)}}ye.DEGREE_TO_RADIANS=Math.PI/180;class xe{constructor(i,a,l){this.deviceId=i,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var z=(globalThis||Ms||self||window||void 0)&&(globalThis||Ms||self||window||void 0).__awaiter||function(Y,i,a,l){function c(u){return u instanceof a?u:new a(function(d){d(u)})}return new(a||(a=Promise))(function(u,d){function x(B){try{C(l.next(B))}catch(V){d(V)}}function v(B){try{C(l.throw(B))}catch(V){d(V)}}function C(B){B.done?u(B.value):c(B.value).then(x,v)}C((l=l.apply(Y,i||[])).next())})};class G{constructor(i,a=500,l){this.reader=i,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return z(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of i){const c=l.kind==="video"?"videoinput":l.kind;if(c!=="videoinput")continue;const u=l.deviceId||l.id,d=l.label||`Video device ${a.length+1}`,x=l.groupId,v={deviceId:u,label:d,kind:c,groupId:x};a.push(v)}return a})}getVideoInputDevices(){return z(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new xe(a.deviceId,a.label))})}findDeviceById(i){return z(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,a){return z(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,a)})}decodeOnceFromVideoDevice(i,a){return z(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeOnceFromConstraints(c,a)})}decodeOnceFromConstraints(i,a){return z(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(i,a){return z(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,a,l){return z(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,a,l)})}decodeFromVideoDevice(i,a,l){return z(this,void 0,void 0,function*(){let c;i?c={deviceId:{exact:i}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,a,l)})}decodeFromConstraints(i,a,l){return z(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(c,a,l)})}decodeFromStream(i,a,l){return z(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(i,a);return yield this.decodeContinuously(c,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,a){return z(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((a,l)=>this.playVideoOnLoad(i,()=>a()))}playVideoOnLoad(i,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",a),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return z(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,a){const l=document.getElementById(i);if(!l)throw new S(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new S(`element with id '${i}' must be an ${a} element`);return l}decodeFromImage(i,a){if(!i&&!a)throw new S("either imageElement with a src set or an url must be provided");return a&&!i?this.decodeFromImageUrl(a):this.decodeFromImageElement(i)}decodeFromVideo(i,a){if(!i&&!a)throw new S("Either an element with a src set or an URL must be provided");return a&&!i?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,a,l){if(i===void 0&&a===void 0)throw new S("Either an element with a src set or an URL must be provided");return a&&!i?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new S("An image element must be provided.");this.reset();const a=this.prepareImageElement(i);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(i){const a=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(i,a){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(i){if(!i)throw new S("A video element must be provided.");this.reset();const a=this.prepareVideoElement(i);return this.videoElement=a,a}decodeFromImageUrl(i){if(!i)throw new S("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=i,l}decodeFromVideoUrl(i){if(!i)throw new S("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=i,l}decodeFromVideoUrlContinuously(i,a){if(!i)throw new S("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(l,a);return l.src=i,c}_decodeOnLoadImage(i){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(a,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return z(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,a){return z(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,a)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let a;return typeof i>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof i=="string"&&(a=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(a=i),a}prepareVideoElement(i){let a;return!i&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof i=="string"&&(a=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(a=i),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(i,a=!0,l=!0){this._stopAsyncDecode=!1;const c=(u,d)=>{if(this._stopAsyncDecode){d(new ne("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(i);u(x)}catch(x){const v=a&&x instanceof ne,B=(x instanceof A||x instanceof P)&&l;if(v||B)return setTimeout(c,this._timeBetweenDecodingAttempts,u,d);d(x)}};return new Promise((u,d)=>c(u,d))}decodeContinuously(i,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(i);a(c,null),setTimeout(l,this.timeBetweenScansMillis)}catch(c){a(null,c);const u=c instanceof A||c instanceof P,d=c instanceof ne;(u||d)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const a=this.createBinaryBitmap(i);return this.decodeBitmap(a)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,a,l){a||(a={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(i,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const a=this.getCaptureCanvas(i),l=new ye(a),c=new W(l);return new E(c)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const a=this.createCaptureCanvas(i);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,c;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,c=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,c=i.naturalHeight||i.height)),a.style.width=l+"px",a.style.height=c+"px",a.width=l,a.height=c,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,a){try{i.srcObject=a}catch{i.src=URL.createObjectURL(a)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class ie{constructor(i,a,l=a==null?0:8*a.length,c,u,d=O.currentTimeMillis()){this.text=i,this.rawBytes=a,this.numBits=l,this.resultPoints=c,this.format=u,this.timestamp=d,this.text=i,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=c,this.format=u,this.resultMetadata=null,d==null?this.timestamp=O.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,a)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const a=this.resultPoints;if(a===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(a.length+i.length);O.arraycopy(a,0,l,0,a.length),O.arraycopy(i,0,l,a.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var fe;(function(Y){Y[Y.AZTEC=0]="AZTEC",Y[Y.CODABAR=1]="CODABAR",Y[Y.CODE_39=2]="CODE_39",Y[Y.CODE_93=3]="CODE_93",Y[Y.CODE_128=4]="CODE_128",Y[Y.DATA_MATRIX=5]="DATA_MATRIX",Y[Y.EAN_8=6]="EAN_8",Y[Y.EAN_13=7]="EAN_13",Y[Y.ITF=8]="ITF",Y[Y.MAXICODE=9]="MAXICODE",Y[Y.PDF_417=10]="PDF_417",Y[Y.QR_CODE=11]="QR_CODE",Y[Y.RSS_14=12]="RSS_14",Y[Y.RSS_EXPANDED=13]="RSS_EXPANDED",Y[Y.UPC_A=14]="UPC_A",Y[Y.UPC_E=15]="UPC_E",Y[Y.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(fe||(fe={}));var se=fe,Ee;(function(Y){Y[Y.OTHER=0]="OTHER",Y[Y.ORIENTATION=1]="ORIENTATION",Y[Y.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",Y[Y.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",Y[Y.ISSUE_NUMBER=4]="ISSUE_NUMBER",Y[Y.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",Y[Y.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",Y[Y.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",Y[Y.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",Y[Y.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",Y[Y.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ee||(Ee={}));var be=Ee;class Ce{constructor(i,a,l,c,u=-1,d=-1){this.rawBytes=i,this.text=a,this.byteSegments=l,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class We{exp(i){return this.expTable[i]}log(i){if(i===0)throw new w;return this.logTable[i]}static addOrSubtract(i,a){return i^a}}class Oe{constructor(i,a){if(a.length===0)throw new w;this.field=i;const l=a.length;if(l>1&&a[0]===0){let c=1;for(;c<l&&a[c]===0;)c++;c===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-c),O.arraycopy(a,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(i===1){l=0;for(let d=0,x=a.length;d!==x;d++){const v=a[d];l=We.addOrSubtract(l,v)}return l}l=a[0];const c=a.length,u=this.field;for(let d=1;d<c;d++)l=We.addOrSubtract(u.multiply(i,l),a[d]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let a=this.coefficients,l=i.coefficients;if(a.length>l.length){const d=a;a=l,l=d}let c=new Int32Array(l.length);const u=l.length-a.length;O.arraycopy(l,0,c,0,u);for(let d=u;d<l.length;d++)c[d]=We.addOrSubtract(a[d-u],l[d]);return new Oe(this.field,c)}multiply(i){if(!this.field.equals(i.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,c=i.coefficients,u=c.length,d=new Int32Array(l+u-1),x=this.field;for(let v=0;v<l;v++){const C=a[v];for(let B=0;B<u;B++)d[v+B]=We.addOrSubtract(d[v+B],x.multiply(C,c[B]))}return new Oe(x,d)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const a=this.coefficients.length,l=this.field,c=new Int32Array(a),u=this.coefficients;for(let d=0;d<a;d++)c[d]=l.multiply(u[d],i);return new Oe(l,c)}multiplyByMonomial(i,a){if(i<0)throw new w;if(a===0)return this.field.getZero();const l=this.coefficients,c=l.length,u=new Int32Array(c+i),d=this.field;for(let x=0;x<c;x++)u[x]=d.multiply(l[x],a);return new Oe(d,u)}divide(i){if(!this.field.equals(i.field))throw new w("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new w("Divide by 0");const a=this.field;let l=a.getZero(),c=this;const u=i.getCoefficient(i.getDegree()),d=a.inverse(u);for(;c.getDegree()>=i.getDegree()&&!c.isZero();){const x=c.getDegree()-i.getDegree(),v=a.multiply(c.getCoefficient(c.getDegree()),d),C=i.multiplyByMonomial(x,v),B=a.buildMonomial(x,v);l=l.addOrSubtract(B),c=c.addOrSubtract(C)}return[l,c]}toString(){let i="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),a===0||l!==1){const c=this.field.log(l);c===0?i+="1":c===1?i+="a":(i+="a^",i+=c)}a!==0&&(a===1?i+="x":(i+="x^",i+=a))}}return i}}class tt extends y{}tt.kind="ArithmeticException";class qe extends We{constructor(i,a,l){super(),this.primitive=i,this.size=a,this.generatorBase=l;const c=new Int32Array(a);let u=1;for(let x=0;x<a;x++)c[x]=u,u*=2,u>=a&&(u^=i,u&=a-1);this.expTable=c;const d=new Int32Array(a);for(let x=0;x<a-1;x++)d[c[x]]=x;this.logTable=d,this.zero=new Oe(this,Int32Array.from([0])),this.one=new Oe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,a){if(i<0)throw new w;if(a===0)return this.zero;const l=new Int32Array(i+1);return l[0]=a,new Oe(this,l)}inverse(i){if(i===0)throw new tt;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,a){return i===0||a===0?0:this.expTable[(this.logTable[i]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+D.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}qe.AZTEC_DATA_12=new qe(4201,4096,1),qe.AZTEC_DATA_10=new qe(1033,1024,1),qe.AZTEC_DATA_6=new qe(67,64,1),qe.AZTEC_PARAM=new qe(19,16,1),qe.QR_CODE_FIELD_256=new qe(285,256,0),qe.DATA_MATRIX_FIELD_256=new qe(301,256,1),qe.AZTEC_DATA_8=qe.DATA_MATRIX_FIELD_256,qe.MAXICODE_FIELD_64=qe.AZTEC_DATA_6;class ut extends y{}ut.kind="ReedSolomonException";class Le extends y{}Le.kind="IllegalStateException";class me{constructor(i){this.field=i}decode(i,a){const l=this.field,c=new Oe(l,i),u=new Int32Array(a);let d=!0;for(let ge=0;ge<a;ge++){const ve=c.evaluateAt(l.exp(ge+l.getGeneratorBase()));u[u.length-1-ge]=ve,ve!==0&&(d=!1)}if(d)return;const x=new Oe(l,u),v=this.runEuclideanAlgorithm(l.buildMonomial(a,1),x,a),C=v[0],B=v[1],V=this.findErrorLocations(C),ee=this.findErrorMagnitudes(B,V);for(let ge=0;ge<V.length;ge++){const ve=i.length-1-l.log(V[ge]);if(ve<0)throw new ut("Bad error location");i[ve]=qe.addOrSubtract(i[ve],ee[ge])}}runEuclideanAlgorithm(i,a,l){if(i.getDegree()<a.getDegree()){const ge=i;i=a,a=ge}const c=this.field;let u=i,d=a,x=c.getZero(),v=c.getOne();for(;d.getDegree()>=(l/2|0);){let ge=u,ve=x;if(u=d,x=v,u.isZero())throw new ut("r_{i-1} was zero");d=ge;let Ae=c.getZero();const Ie=u.getCoefficient(u.getDegree()),Fe=c.inverse(Ie);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const nt=d.getDegree()-u.getDegree(),st=c.multiply(d.getCoefficient(d.getDegree()),Fe);Ae=Ae.addOrSubtract(c.buildMonomial(nt,st)),d=d.addOrSubtract(u.multiplyByMonomial(nt,st))}if(v=Ae.multiply(x).addOrSubtract(ve),d.getDegree()>=u.getDegree())throw new Le("Division algorithm failed to reduce polynomial?")}const C=v.getCoefficient(0);if(C===0)throw new ut("sigmaTilde(0) was zero");const B=c.inverse(C),V=v.multiplyScalar(B),ee=d.multiplyScalar(B);return[V,ee]}findErrorLocations(i){const a=i.getDegree();if(a===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(a);let c=0;const u=this.field;for(let d=1;d<u.getSize()&&c<a;d++)i.evaluateAt(d)===0&&(l[c]=u.inverse(d),c++);if(c!==a)throw new ut("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,a){const l=a.length,c=new Int32Array(l),u=this.field;for(let d=0;d<l;d++){const x=u.inverse(a[d]);let v=1;for(let C=0;C<l;C++)if(d!==C){const B=u.multiply(a[C],x),V=B&1?B&-2:B|1;v=u.multiply(v,V)}c[d]=u.multiply(i.evaluateAt(x),u.inverse(v)),u.getGeneratorBase()!==0&&(c[d]=u.multiply(c[d],x))}return c}}var pt;(function(Y){Y[Y.UPPER=0]="UPPER",Y[Y.LOWER=1]="LOWER",Y[Y.MIXED=2]="MIXED",Y[Y.DIGIT=3]="DIGIT",Y[Y.PUNCT=4]="PUNCT",Y[Y.BINARY=5]="BINARY"})(pt||(pt={}));class Ve{decode(i){this.ddata=i;let a=i.getBits(),l=this.extractBits(a),c=this.correctBits(l),u=Ve.convertBoolArrayToByteArray(c),d=Ve.getEncodedData(c),x=new Ce(u,d,null,null);return x.setNumBits(c.length),x}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let a=i.length,l=pt.UPPER,c=pt.UPPER,u="",d=0;for(;d<a;)if(c===pt.BINARY){if(a-d<5)break;let x=Ve.readCode(i,d,5);if(d+=5,x===0){if(a-d<11)break;x=Ve.readCode(i,d,11)+31,d+=11}for(let v=0;v<x;v++){if(a-d<8){d=a;break}const C=Ve.readCode(i,d,8);u+=L.castAsNonUtf8Char(C),d+=8}c=l}else{let x=c===pt.DIGIT?4:5;if(a-d<x)break;let v=Ve.readCode(i,d,x);d+=x;let C=Ve.getCharacter(c,v);C.startsWith("CTRL_")?(l=c,c=Ve.getTable(C.charAt(5)),C.charAt(6)==="L"&&(l=c)):(u+=C,c=l)}return u}static getTable(i){switch(i){case"L":return pt.LOWER;case"P":return pt.PUNCT;case"M":return pt.MIXED;case"D":return pt.DIGIT;case"B":return pt.BINARY;case"U":default:return pt.UPPER}}static getCharacter(i,a){switch(i){case pt.UPPER:return Ve.UPPER_TABLE[a];case pt.LOWER:return Ve.LOWER_TABLE[a];case pt.MIXED:return Ve.MIXED_TABLE[a];case pt.PUNCT:return Ve.PUNCT_TABLE[a];case pt.DIGIT:return Ve.DIGIT_TABLE[a];default:throw new Le("Bad table")}}correctBits(i){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=qe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=qe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=qe.AZTEC_DATA_10):(l=12,a=qe.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=i.length/l;if(u<c)throw new P;let d=i.length%l,x=new Int32Array(u);for(let ee=0;ee<u;ee++,d+=l)x[ee]=Ve.readCode(i,d,l);try{new me(a).decode(x,u-c)}catch(ee){throw new P(ee)}let v=(1<<l)-1,C=0;for(let ee=0;ee<c;ee++){let ge=x[ee];if(ge===0||ge===v)throw new P;(ge===1||ge===v-1)&&C++}let B=new Array(c*l-C),V=0;for(let ee=0;ee<c;ee++){let ge=x[ee];if(ge===1||ge===v-1)B.fill(ge>1,V,V+l-1),V+=l-1;else for(let ve=l-1;ve>=0;--ve)B[V++]=(ge&1<<ve)!==0}return B}extractBits(i){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),c=(a?11:14)+l*4,u=new Int32Array(c),d=new Array(this.totalBitsInLayer(l,a));if(a)for(let x=0;x<u.length;x++)u[x]=x;else{let x=c+1+2*D.truncDivision(D.truncDivision(c,2)-1,15),v=c/2,C=D.truncDivision(x,2);for(let B=0;B<v;B++){let V=B+D.truncDivision(B,15);u[v-B-1]=C-V-1,u[v+B]=C+V+1}}for(let x=0,v=0;x<l;x++){let C=(l-x)*4+(a?9:12),B=x*2,V=c-1-B;for(let ee=0;ee<C;ee++){let ge=ee*2;for(let ve=0;ve<2;ve++)d[v+ge+ve]=i.get(u[B+ve],u[B+ee]),d[v+2*C+ge+ve]=i.get(u[B+ee],u[V-ve]),d[v+4*C+ge+ve]=i.get(u[V-ve],u[V-ee]),d[v+6*C+ge+ve]=i.get(u[V-ee],u[B+ve])}v+=C*8}return d}static readCode(i,a,l){let c=0;for(let u=a;u<a+l;u++)c<<=1,i[u]&&(c|=1);return c}static readByte(i,a){let l=i.length-a;return l>=8?Ve.readCode(i,a,8):Ve.readCode(i,a,l)<<8-l}static convertBoolArrayToByteArray(i){let a=new Uint8Array((i.length+7)/8);for(let l=0;l<a.length;l++)a[l]=Ve.readByte(i,8*l);return a}totalBitsInLayer(i,a){return((a?88:112)+16*i)*i}}Ve.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ve.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ve.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ve.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ve.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Be{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,a,l,c){const u=i-l,d=a-c;return Math.sqrt(u*u+d*d)}static sum(i){let a=0;for(let l=0,c=i.length;l!==c;l++){const u=i[l];a+=u}return a}}class lt{static floatToIntBits(i){return i}}lt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ue{constructor(i,a){this.x=i,this.y=a}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Ue){const a=i;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*lt.floatToIntBits(this.x)+lt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const a=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),c=this.distance(i[0],i[2]);let u,d,x;if(l>=a&&l>=c?(d=i[0],u=i[1],x=i[2]):c>=l&&c>=a?(d=i[1],u=i[0],x=i[2]):(d=i[2],u=i[0],x=i[1]),this.crossProductZ(u,d,x)<0){const v=u;u=x,x=v}i[0]=u,i[1]=d,i[2]=x}static distance(i,a){return Be.distance(i.x,i.y,a.x,a.y)}static crossProductZ(i,a,l){const c=a.x,u=a.y;return(l.x-c)*(i.y-u)-(l.y-u)*(i.x-c)}}class Te{constructor(i,a){this.bits=i,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class ze extends Te{constructor(i,a,l,c,u){super(i,a),this.compact=l,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Xe{constructor(i,a,l,c){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),a==null&&(a=Xe.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),c==null&&(c=i.getHeight()/2|0);const u=a/2|0;if(this.leftInit=l-u,this.rightInit=l+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ne}detect(){let i=this.leftInit,a=this.rightInit,l=this.upInit,c=this.downInit,u=!1,d=!0,x=!1,v=!1,C=!1,B=!1,V=!1;const ee=this.width,ge=this.height;for(;d;){d=!1;let ve=!0;for(;(ve||!v)&&a<ee;)ve=this.containsBlackPoint(l,c,a,!1),ve?(a++,d=!0,v=!0):v||a++;if(a>=ee){u=!0;break}let Ae=!0;for(;(Ae||!C)&&c<ge;)Ae=this.containsBlackPoint(i,a,c,!0),Ae?(c++,d=!0,C=!0):C||c++;if(c>=ge){u=!0;break}let Ie=!0;for(;(Ie||!B)&&i>=0;)Ie=this.containsBlackPoint(l,c,i,!1),Ie?(i--,d=!0,B=!0):B||i--;if(i<0){u=!0;break}let Fe=!0;for(;(Fe||!V)&&l>=0;)Fe=this.containsBlackPoint(i,a,l,!0),Fe?(l--,d=!0,V=!0):V||l--;if(l<0){u=!0;break}d&&(x=!0)}if(!u&&x){const ve=a-i;let Ae=null;for(let st=1;Ae===null&&st<ve;st++)Ae=this.getBlackPointOnSegment(i,c-st,i+st,c);if(Ae==null)throw new ne;let Ie=null;for(let st=1;Ie===null&&st<ve;st++)Ie=this.getBlackPointOnSegment(i,l+st,i+st,l);if(Ie==null)throw new ne;let Fe=null;for(let st=1;Fe===null&&st<ve;st++)Fe=this.getBlackPointOnSegment(a,l+st,a-st,l);if(Fe==null)throw new ne;let nt=null;for(let st=1;nt===null&&st<ve;st++)nt=this.getBlackPointOnSegment(a,c-st,a-st,c);if(nt==null)throw new ne;return this.centerEdges(nt,Ae,Fe,Ie)}else throw new ne}getBlackPointOnSegment(i,a,l,c){const u=Be.round(Be.distance(i,a,l,c)),d=(l-i)/u,x=(c-a)/u,v=this.image;for(let C=0;C<u;C++){const B=Be.round(i+C*d),V=Be.round(a+C*x);if(v.get(B,V))return new Ue(B,V)}return null}centerEdges(i,a,l,c){const u=i.getX(),d=i.getY(),x=a.getX(),v=a.getY(),C=l.getX(),B=l.getY(),V=c.getX(),ee=c.getY(),ge=Xe.CORR;return u<this.width/2?[new Ue(V-ge,ee+ge),new Ue(x+ge,v+ge),new Ue(C-ge,B-ge),new Ue(u+ge,d-ge)]:[new Ue(V+ge,ee+ge),new Ue(x+ge,v-ge),new Ue(C-ge,B+ge),new Ue(u-ge,d-ge)]}containsBlackPoint(i,a,l,c){const u=this.image;if(c){for(let d=i;d<=a;d++)if(u.get(d,l))return!0}else for(let d=i;d<=a;d++)if(u.get(l,d))return!0;return!1}}Xe.INIT_SIZE=10,Xe.CORR=1;class vt{static checkAndNudgePoints(i,a){const l=i.getWidth(),c=i.getHeight();let u=!0;for(let d=0;d<a.length&&u;d+=2){const x=Math.floor(a[d]),v=Math.floor(a[d+1]);if(x<-1||x>l||v<-1||v>c)throw new ne;u=!1,x===-1?(a[d]=0,u=!0):x===l&&(a[d]=l-1,u=!0),v===-1?(a[d+1]=0,u=!0):v===c&&(a[d+1]=c-1,u=!0)}u=!0;for(let d=a.length-2;d>=0&&u;d-=2){const x=Math.floor(a[d]),v=Math.floor(a[d+1]);if(x<-1||x>l||v<-1||v>c)throw new ne;u=!1,x===-1?(a[d]=0,u=!0):x===l&&(a[d]=l-1,u=!0),v===-1?(a[d+1]=0,u=!0):v===c&&(a[d+1]=c-1,u=!0)}}}class mt{constructor(i,a,l,c,u,d,x,v,C){this.a11=i,this.a21=a,this.a31=l,this.a12=c,this.a22=u,this.a32=d,this.a13=x,this.a23=v,this.a33=C}static quadrilateralToQuadrilateral(i,a,l,c,u,d,x,v,C,B,V,ee,ge,ve,Ae,Ie){const Fe=mt.quadrilateralToSquare(i,a,l,c,u,d,x,v);return mt.squareToQuadrilateral(C,B,V,ee,ge,ve,Ae,Ie).times(Fe)}transformPoints(i){const a=i.length,l=this.a11,c=this.a12,u=this.a13,d=this.a21,x=this.a22,v=this.a23,C=this.a31,B=this.a32,V=this.a33;for(let ee=0;ee<a;ee+=2){const ge=i[ee],ve=i[ee+1],Ae=u*ge+v*ve+V;i[ee]=(l*ge+d*ve+C)/Ae,i[ee+1]=(c*ge+x*ve+B)/Ae}}transformPointsWithValues(i,a){const l=this.a11,c=this.a12,u=this.a13,d=this.a21,x=this.a22,v=this.a23,C=this.a31,B=this.a32,V=this.a33,ee=i.length;for(let ge=0;ge<ee;ge++){const ve=i[ge],Ae=a[ge],Ie=u*ve+v*Ae+V;i[ge]=(l*ve+d*Ae+C)/Ie,a[ge]=(c*ve+x*Ae+B)/Ie}}static squareToQuadrilateral(i,a,l,c,u,d,x,v){const C=i-l+u-x,B=a-c+d-v;if(C===0&&B===0)return new mt(l-i,u-l,i,c-a,d-c,a,0,0,1);{const V=l-u,ee=x-u,ge=c-d,ve=v-d,Ae=V*ve-ee*ge,Ie=(C*ve-ee*B)/Ae,Fe=(V*B-C*ge)/Ae;return new mt(l-i+Ie*l,x-i+Fe*x,i,c-a+Ie*c,v-a+Fe*v,a,Ie,Fe,1)}}static quadrilateralToSquare(i,a,l,c,u,d,x,v){return mt.squareToQuadrilateral(i,a,l,c,u,d,x,v).buildAdjoint()}buildAdjoint(){return new mt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new mt(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class _t extends vt{sampleGrid(i,a,l,c,u,d,x,v,C,B,V,ee,ge,ve,Ae,Ie,Fe,nt,st){const it=mt.quadrilateralToQuadrilateral(c,u,d,x,v,C,B,V,ee,ge,ve,Ae,Ie,Fe,nt,st);return this.sampleGridWithTransform(i,a,l,it)}sampleGridWithTransform(i,a,l,c){if(a<=0||l<=0)throw new ne;const u=new ce(a,l),d=new Float32Array(2*a);for(let x=0;x<l;x++){const v=d.length,C=x+.5;for(let B=0;B<v;B+=2)d[B]=B/2+.5,d[B+1]=C;c.transformPoints(d),vt.checkAndNudgePoints(i,d);try{for(let B=0;B<v;B+=2)i.get(Math.floor(d[B]),Math.floor(d[B+1]))&&u.set(B/2,x)}catch{throw new ne}}return u}}class Lt{static setGridSampler(i){Lt.gridSampler=i}static getInstance(){return Lt.gridSampler}}Lt.gridSampler=new _t;class ct{constructor(i,a){this.x=i,this.y=a}toResultPoint(){return new Ue(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Mt{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(i){let d=l[0];l[0]=l[2],l[2]=d}this.extractParameters(l);let c=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),u=this.getMatrixCornerPoints(l);return new ze(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new ne;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],a),this.sampleLine(i[1],i[2],a),this.sampleLine(i[2],i[3],a),this.sampleLine(i[3],i[0],a)]);this.shift=this.getRotation(l,a);let c=0;for(let d=0;d<4;d++){let x=l[(this.shift+d)%4];this.compact?(c<<=7,c+=x>>1&127):(c<<=10,c+=(x>>2&992)+(x>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(i,a){let l=0;i.forEach((c,u,d)=>{let x=(c>>a-2<<1)+(c&1);l=(l<<3)+x}),l=((l&1)<<11)+(l>>1);for(let c=0;c<4;c++)if(D.bitCount(l^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new ne}getCorrectedParameterData(i,a){let l,c;a?(l=7,c=2):(l=10,c=4);let u=l-c,d=new Int32Array(l);for(let v=l-1;v>=0;--v)d[v]=i&15,i>>=4;try{new me(qe.AZTEC_PARAM).decode(d,u)}catch{throw new ne}let x=0;for(let v=0;v<c;v++)x=(x<<4)+d[v];return x}getBullsEyeCorners(i){let a=i,l=i,c=i,u=i,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let V=this.getFirstDifferent(a,d,1,-1),ee=this.getFirstDifferent(l,d,1,1),ge=this.getFirstDifferent(c,d,-1,1),ve=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let Ae=this.distancePoint(ve,V)*this.nbCenterLayers/(this.distancePoint(u,a)*(this.nbCenterLayers+2));if(Ae<.75||Ae>1.25||!this.isWhiteOrBlackRectangle(V,ee,ge,ve))break}a=V,l=ee,c=ge,u=ve,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ne;this.compact=this.nbCenterLayers===5;let x=new Ue(a.getX()+.5,a.getY()-.5),v=new Ue(l.getX()+.5,l.getY()+.5),C=new Ue(c.getX()-.5,c.getY()+.5),B=new Ue(u.getX()-.5,u.getY()-.5);return this.expandSquare([x,v,C,B],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,a,l,c;try{let x=new Xe(this.image).detect();i=x[0],a=x[1],l=x[2],c=x[3]}catch{let v=this.image.getWidth()/2,C=this.image.getHeight()/2;i=this.getFirstDifferent(new ct(v+7,C-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new ct(v+7,C+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new ct(v-7,C+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new ct(v-7,C-7),!1,-1,-1).toResultPoint()}let u=Be.round((i.getX()+c.getX()+a.getX()+l.getX())/4),d=Be.round((i.getY()+c.getY()+a.getY()+l.getY())/4);try{let x=new Xe(this.image,15,u,d).detect();i=x[0],a=x[1],l=x[2],c=x[3]}catch{i=this.getFirstDifferent(new ct(u+7,d-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new ct(u+7,d+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new ct(u-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new ct(u-7,d-7),!1,-1,-1).toResultPoint()}return u=Be.round((i.getX()+c.getX()+a.getX()+l.getX())/4),d=Be.round((i.getY()+c.getY()+a.getY()+l.getY())/4),new ct(u,d)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,a,l,c,u){let d=Lt.getInstance(),x=this.getDimension(),v=x/2-this.nbCenterLayers,C=x/2+this.nbCenterLayers;return d.sampleGrid(i,x,x,v,v,C,v,C,C,v,C,a.getX(),a.getY(),l.getX(),l.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(i,a,l){let c=0,u=this.distanceResultPoint(i,a),d=u/l,x=i.getX(),v=i.getY(),C=d*(a.getX()-i.getX())/u,B=d*(a.getY()-i.getY())/u;for(let V=0;V<l;V++)this.image.get(Be.round(x+V*C),Be.round(v+V*B))&&(c|=1<<l-V-1);return c}isWhiteOrBlackRectangle(i,a,l,c){let u=3;i=new ct(i.getX()-u,i.getY()+u),a=new ct(a.getX()-u,a.getY()-u),l=new ct(l.getX()+u,l.getY()-u),c=new ct(c.getX()+u,c.getY()+u);let d=this.getColor(c,i);if(d===0)return!1;let x=this.getColor(i,a);return x!==d||(x=this.getColor(a,l),x!==d)?!1:(x=this.getColor(l,c),x===d)}getColor(i,a){let l=this.distancePoint(i,a),c=(a.getX()-i.getX())/l,u=(a.getY()-i.getY())/l,d=0,x=i.getX(),v=i.getY(),C=this.image.get(i.getX(),i.getY()),B=Math.ceil(l);for(let ee=0;ee<B;ee++)x+=c,v+=u,this.image.get(Be.round(x),Be.round(v))!==C&&d++;let V=d/l;return V>.1&&V<.9?0:V<=.1===C?1:-1}getFirstDifferent(i,a,l,c){let u=i.getX()+l,d=i.getY()+c;for(;this.isValid(u,d)&&this.image.get(u,d)===a;)u+=l,d+=c;for(u-=l,d-=c;this.isValid(u,d)&&this.image.get(u,d)===a;)u+=l;for(u-=l;this.isValid(u,d)&&this.image.get(u,d)===a;)d+=c;return d-=c,new ct(u,d)}expandSquare(i,a,l){let c=l/(2*a),u=i[0].getX()-i[2].getX(),d=i[0].getY()-i[2].getY(),x=(i[0].getX()+i[2].getX())/2,v=(i[0].getY()+i[2].getY())/2,C=new Ue(x+c*u,v+c*d),B=new Ue(x-c*u,v-c*d);u=i[1].getX()-i[3].getX(),d=i[1].getY()-i[3].getY(),x=(i[1].getX()+i[3].getX())/2,v=(i[1].getY()+i[3].getY())/2;let V=new Ue(x+c*u,v+c*d),ee=new Ue(x-c*u,v-c*d);return[C,V,B,ee]}isValid(i,a){return i>=0&&i<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(i){let a=Be.round(i.getX()),l=Be.round(i.getY());return this.isValid(a,l)}distancePoint(i,a){return Be.distance(i.getX(),i.getY(),a.getX(),a.getY())}distanceResultPoint(i,a){return Be.distance(i.getX(),i.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(D.truncDivision(this.nbLayers-4,8)+1)+15}}class ft{decode(i,a=null){let l=null,c=new Mt(i.getBlackMatrix()),u=null,d=null;try{let B=c.detectMirror(!1);u=B.getPoints(),this.reportFoundResultPoints(a,u),d=new Ve().decode(B)}catch(B){l=B}if(d==null)try{let B=c.detectMirror(!0);u=B.getPoints(),this.reportFoundResultPoints(a,u),d=new Ve().decode(B)}catch(B){throw l??B}let x=new ie(d.getText(),d.getRawBytes(),d.getNumBits(),u,se.AZTEC,O.currentTimeMillis()),v=d.getByteSegments();v!=null&&x.putMetadata(be.BYTE_SEGMENTS,v);let C=d.getECLevel();return C!=null&&x.putMetadata(be.ERROR_CORRECTION_LEVEL,C),x}reportFoundResultPoints(i,a){if(i!=null){let l=i.get(K.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((c,u,d)=>{l.foundPossibleResultPoint(c)})}}reset(){}}class vn extends G{constructor(i=500){super(new ft,i)}}class Et{decode(i,a){try{return this.doDecode(i,a)}catch{if(a&&a.get(K.TRY_HARDER)===!0&&i.isRotateSupported()){const u=i.rotateCounterClockwise(),d=this.doDecode(u,a),x=d.getResultMetadata();let v=270;x!==null&&x.get(be.ORIENTATION)===!0&&(v=v+x.get(be.ORIENTATION)%360),d.putMetadata(be.ORIENTATION,v);const C=d.getResultPoints();if(C!==null){const B=u.getHeight();for(let V=0;V<C.length;V++)C[V]=new Ue(B-C[V].getY()-1,C[V].getX())}return d}else throw new ne}}reset(){}doDecode(i,a){const l=i.getWidth(),c=i.getHeight();let u=new j(l);const d=a&&a.get(K.TRY_HARDER)===!0,x=Math.max(1,c>>(d?8:5));let v;d?v=c:v=15;const C=Math.trunc(c/2);for(let B=0;B<v;B++){const V=Math.trunc((B+1)/2),ee=(B&1)===0,ge=C+x*(ee?V:-V);if(ge<0||ge>=c)break;try{u=i.getBlackRow(ge,u)}catch{continue}for(let ve=0;ve<2;ve++){if(ve===1&&(u.reverse(),a&&a.get(K.NEED_RESULT_POINT_CALLBACK)===!0)){const Ae=new Map;a.forEach((Ie,Fe)=>Ae.set(Fe,Ie)),Ae.delete(K.NEED_RESULT_POINT_CALLBACK),a=Ae}try{const Ae=this.decodeRow(ge,u,a);if(ve===1){Ae.putMetadata(be.ORIENTATION,180);const Ie=Ae.getResultPoints();Ie!==null&&(Ie[0]=new Ue(l-Ie[0].getX()-1,Ie[0].getY()),Ie[1]=new Ue(l-Ie[1].getX()-1,Ie[1].getY()))}return Ae}catch{}}}throw new ne}static recordPattern(i,a,l){const c=l.length;for(let C=0;C<c;C++)l[C]=0;const u=i.getSize();if(a>=u)throw new ne;let d=!i.get(a),x=0,v=a;for(;v<u;){if(i.get(v)!==d)l[x]++;else{if(++x===c)break;l[x]=1,d=!d}v++}if(!(x===c||x===c-1&&v===u))throw new ne}static recordPatternInReverse(i,a,l){let c=l.length,u=i.get(a);for(;a>0&&c>=0;)i.get(--a)!==u&&(c--,u=!u);if(c>=0)throw new ne;Et.recordPattern(i,a+1,l)}static patternMatchVariance(i,a,l){const c=i.length;let u=0,d=0;for(let C=0;C<c;C++)u+=i[C],d+=a[C];if(u<d)return Number.POSITIVE_INFINITY;const x=u/d;l*=x;let v=0;for(let C=0;C<c;C++){const B=i[C],V=a[C]*x,ee=B>V?B-V:V-B;if(ee>l)return Number.POSITIVE_INFINITY;v+=ee}return v/u}}class ot extends Et{static findStartPattern(i){const a=i.getSize(),l=i.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),d=l,x=!1;const v=6;for(let C=l;C<a;C++)if(i.get(C)!==x)u[c]++;else{if(c===v-1){let B=ot.MAX_AVG_VARIANCE,V=-1;for(let ee=ot.CODE_START_A;ee<=ot.CODE_START_C;ee++){const ge=Et.patternMatchVariance(u,ot.CODE_PATTERNS[ee],ot.MAX_INDIVIDUAL_VARIANCE);ge<B&&(B=ge,V=ee)}if(V>=0&&i.isRange(Math.max(0,d-(C-d)/2),d,!1))return Int32Array.from([d,C,V]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,x=!x}throw new ne}static decodeCode(i,a,l){Et.recordPattern(i,l,a);let c=ot.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<ot.CODE_PATTERNS.length;d++){const x=ot.CODE_PATTERNS[d],v=this.patternMatchVariance(a,x,ot.MAX_INDIVIDUAL_VARIANCE);v<c&&(c=v,u=d)}if(u>=0)return u;throw new ne}decodeRow(i,a,l){const c=l&&l.get(K.ASSUME_GS1)===!0,u=ot.findStartPattern(a),d=u[2];let x=0;const v=new Uint8Array(20);v[x++]=d;let C;switch(d){case ot.CODE_START_A:C=ot.CODE_CODE_A;break;case ot.CODE_START_B:C=ot.CODE_CODE_B;break;case ot.CODE_START_C:C=ot.CODE_CODE_C;break;default:throw new P}let B=!1,V=!1,ee="",ge=u[0],ve=u[1];const Ae=Int32Array.from([0,0,0,0,0,0]);let Ie=0,Fe=0,nt=d,st=0,it=!0,Qt=!1,Pt=!1;for(;!B;){const wa=V;switch(V=!1,Ie=Fe,Fe=ot.decodeCode(a,Ae,ve),v[x++]=Fe,Fe!==ot.CODE_STOP&&(it=!0),Fe!==ot.CODE_STOP&&(st++,nt+=st*Fe),ge=ve,ve+=Ae.reduce((Pr,Fr)=>Pr+Fr,0),Fe){case ot.CODE_START_A:case ot.CODE_START_B:case ot.CODE_START_C:throw new P}switch(C){case ot.CODE_CODE_A:if(Fe<64)Pt===Qt?ee+=String.fromCharCode(32+Fe):ee+=String.fromCharCode(32+Fe+128),Pt=!1;else if(Fe<96)Pt===Qt?ee+=String.fromCharCode(Fe-64):ee+=String.fromCharCode(Fe+64),Pt=!1;else switch(Fe!==ot.CODE_STOP&&(it=!1),Fe){case ot.CODE_FNC_1:c&&(ee.length===0?ee+="]C1":ee+="");break;case ot.CODE_FNC_2:case ot.CODE_FNC_3:break;case ot.CODE_FNC_4_A:!Qt&&Pt?(Qt=!0,Pt=!1):Qt&&Pt?(Qt=!1,Pt=!1):Pt=!0;break;case ot.CODE_SHIFT:V=!0,C=ot.CODE_CODE_B;break;case ot.CODE_CODE_B:C=ot.CODE_CODE_B;break;case ot.CODE_CODE_C:C=ot.CODE_CODE_C;break;case ot.CODE_STOP:B=!0;break}break;case ot.CODE_CODE_B:if(Fe<96)Pt===Qt?ee+=String.fromCharCode(32+Fe):ee+=String.fromCharCode(32+Fe+128),Pt=!1;else switch(Fe!==ot.CODE_STOP&&(it=!1),Fe){case ot.CODE_FNC_1:c&&(ee.length===0?ee+="]C1":ee+="");break;case ot.CODE_FNC_2:case ot.CODE_FNC_3:break;case ot.CODE_FNC_4_B:!Qt&&Pt?(Qt=!0,Pt=!1):Qt&&Pt?(Qt=!1,Pt=!1):Pt=!0;break;case ot.CODE_SHIFT:V=!0,C=ot.CODE_CODE_A;break;case ot.CODE_CODE_A:C=ot.CODE_CODE_A;break;case ot.CODE_CODE_C:C=ot.CODE_CODE_C;break;case ot.CODE_STOP:B=!0;break}break;case ot.CODE_CODE_C:if(Fe<100)Fe<10&&(ee+="0"),ee+=Fe;else switch(Fe!==ot.CODE_STOP&&(it=!1),Fe){case ot.CODE_FNC_1:c&&(ee.length===0?ee+="]C1":ee+="");break;case ot.CODE_CODE_A:C=ot.CODE_CODE_A;break;case ot.CODE_CODE_B:C=ot.CODE_CODE_B;break;case ot.CODE_STOP:B=!0;break}break}wa&&(C=C===ot.CODE_CODE_A?ot.CODE_CODE_B:ot.CODE_CODE_A)}const yi=ve-ge;if(ve=a.getNextUnset(ve),!a.isRange(ve,Math.min(a.getSize(),ve+(ve-ge)/2),!1))throw new ne;if(nt-=st*Ie,nt%103!==Ie)throw new A;const zi=ee.length;if(zi===0)throw new ne;zi>0&&it&&(C===ot.CODE_CODE_C?ee=ee.substring(0,zi-2):ee=ee.substring(0,zi-1));const di=(u[1]+u[0])/2,un=ge+yi/2,ai=v.length,Ti=new Uint8Array(ai);for(let wa=0;wa<ai;wa++)Ti[wa]=v[wa];const Dr=[new Ue(di,i),new Ue(un,i)];return new ie(ee,Ti,0,Dr,se.CODE_128,new Date().getTime())}}ot.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ot.MAX_AVG_VARIANCE=.25,ot.MAX_INDIVIDUAL_VARIANCE=.7,ot.CODE_SHIFT=98,ot.CODE_CODE_C=99,ot.CODE_CODE_B=100,ot.CODE_CODE_A=101,ot.CODE_FNC_1=102,ot.CODE_FNC_2=97,ot.CODE_FNC_3=96,ot.CODE_FNC_4_A=101,ot.CODE_FNC_4_B=100,ot.CODE_START_A=103,ot.CODE_START_B=104,ot.CODE_START_C=105,ot.CODE_STOP=106;class gt extends Et{constructor(i=!1,a=!1){super(),this.usingCheckDigit=i,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,a,l){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=gt.findAsteriskPattern(a,c),d=a.getNextSet(u[1]),x=a.getSize(),v,C;do{gt.recordPattern(a,d,c);let Ae=gt.toNarrowWidePattern(c);if(Ae<0)throw new ne;v=gt.patternToChar(Ae),this.decodeRowResult+=v,C=d;for(let Ie of c)d+=Ie;d=a.getNextSet(d)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let B=0;for(let Ae of c)B+=Ae;let V=d-C-B;if(d!==x&&V*2<B)throw new ne;if(this.usingCheckDigit){let Ae=this.decodeRowResult.length-1,Ie=0;for(let Fe=0;Fe<Ae;Fe++)Ie+=gt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Fe));if(this.decodeRowResult.charAt(Ae)!==gt.ALPHABET_STRING.charAt(Ie%43))throw new A;this.decodeRowResult=this.decodeRowResult.substring(0,Ae)}if(this.decodeRowResult.length===0)throw new ne;let ee;this.extendedMode?ee=gt.decodeExtended(this.decodeRowResult):ee=this.decodeRowResult;let ge=(u[1]+u[0])/2,ve=C+B/2;return new ie(ee,null,0,[new Ue(ge,i),new Ue(ve,i)],se.CODE_39,new Date().getTime())}static findAsteriskPattern(i,a){let l=i.getSize(),c=i.getNextSet(0),u=0,d=c,x=!1,v=a.length;for(let C=c;C<l;C++)if(i.get(C)!==x)a[u]++;else{if(u===v-1){if(this.toNarrowWidePattern(a)===gt.ASTERISK_ENCODING&&i.isRange(Math.max(0,d-Math.floor((C-d)/2)),d,!1))return[d,C];d+=a[0]+a[1],a.copyWithin(0,2,2+u-1),a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,x=!x}throw new ne}static toNarrowWidePattern(i){let a=i.length,l=0,c;do{let u=2147483647;for(let v of i)v<u&&v>l&&(u=v);l=u,c=0;let d=0,x=0;for(let v=0;v<a;v++){let C=i[v];C>l&&(x|=1<<a-1-v,c++,d+=C)}if(c===3){for(let v=0;v<a&&c>0;v++){let C=i[v];if(C>l&&(c--,C*2>=d))return-1}return x}}while(c>3);return-1}static patternToChar(i){for(let a=0;a<gt.CHARACTER_ENCODINGS.length;a++)if(gt.CHARACTER_ENCODINGS[a]===i)return gt.ALPHABET_STRING.charAt(a);if(i===gt.ASTERISK_ENCODING)return"*";throw new ne}static decodeExtended(i){let a=i.length,l="";for(let c=0;c<a;c++){let u=i.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let d=i.charAt(c+1),x="\0";switch(u){case"+":if(d>="A"&&d<="Z")x=String.fromCharCode(d.charCodeAt(0)+32);else throw new P;break;case"$":if(d>="A"&&d<="Z")x=String.fromCharCode(d.charCodeAt(0)-64);else throw new P;break;case"%":if(d>="A"&&d<="E")x=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")x=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")x=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")x=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")x="\0";else if(d==="V")x="@";else if(d==="W")x="`";else if(d==="X"||d==="Y"||d==="Z")x="";else throw new P;break;case"/":if(d>="A"&&d<="O")x=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")x=":";else throw new P;break}l+=x,c++}else l+=u}return l}}gt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",gt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],gt.ASTERISK_ENCODING=148;class wt extends Et{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,a,l){let c=this.decodeStart(a),u=this.decodeEnd(a),d=new re;wt.decodeMiddle(a,c[1],u[0],d);let x=d.toString(),v=null;l!=null&&(v=l.get(K.ALLOWED_LENGTHS)),v==null&&(v=wt.DEFAULT_ALLOWED_LENGTHS);let C=x.length,B=!1,V=0;for(let ve of v){if(C===ve){B=!0;break}ve>V&&(V=ve)}if(!B&&C>V&&(B=!0),!B)throw new P;const ee=[new Ue(c[1],i),new Ue(u[0],i)];return new ie(x,null,0,ee,se.ITF,new Date().getTime())}static decodeMiddle(i,a,l,c){let u=new Int32Array(10),d=new Int32Array(5),x=new Int32Array(5);for(u.fill(0),d.fill(0),x.fill(0);a<l;){Et.recordPattern(i,a,u);for(let C=0;C<5;C++){let B=2*C;d[C]=u[B],x[C]=u[B+1]}let v=wt.decodeDigit(d);c.append(v.toString()),v=this.decodeDigit(x),c.append(v.toString()),u.forEach(function(C){a+=C})}}decodeStart(i){let a=wt.skipWhiteSpace(i),l=wt.findGuardPattern(i,a,wt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let c=a-1;l>0&&c>=0&&!i.get(c);c--)l--;if(l!==0)throw new ne}static skipWhiteSpace(i){const a=i.getSize(),l=i.getNextSet(0);if(l===a)throw new ne;return l}decodeEnd(i){i.reverse();try{let a=wt.skipWhiteSpace(i),l;try{l=wt.findGuardPattern(i,a,wt.END_PATTERN_REVERSED[0])}catch(u){u instanceof ne&&(l=wt.findGuardPattern(i,a,wt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let c=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-c,l}finally{i.reverse()}}static findGuardPattern(i,a,l){let c=l.length,u=new Int32Array(c),d=i.getSize(),x=!1,v=0,C=a;u.fill(0);for(let B=a;B<d;B++)if(i.get(B)!==x)u[v]++;else{if(v===c-1){if(Et.patternMatchVariance(u,l,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return[C,B];C+=u[0]+u[1],O.arraycopy(u,2,u,0,v-1),u[v-1]=0,u[v]=0,v--}else v++;u[v]=1,x=!x}throw new ne}static decodeDigit(i){let a=wt.MAX_AVG_VARIANCE,l=-1,c=wt.PATTERNS.length;for(let u=0;u<c;u++){let d=wt.PATTERNS[u],x=Et.patternMatchVariance(i,d,wt.MAX_INDIVIDUAL_VARIANCE);x<a?(a=x,l=u):x===a&&(l=-1)}if(l>=0)return l%10;throw new ne}}wt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],wt.MAX_AVG_VARIANCE=.38,wt.MAX_INDIVIDUAL_VARIANCE=.5,wt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],wt.START_PATTERN=Int32Array.from([1,1,1,1]),wt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class gn extends Et{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let a=!1,l,c=0,u=Int32Array.from([0,0,0]);for(;!a;){u=Int32Array.from([0,0,0]),l=gn.findGuardPattern(i,c,!1,this.START_END_PATTERN,u);let d=l[0];c=l[1];let x=d-(c-d);x>=0&&(a=i.isRange(x,d,!1))}return l}static checkChecksum(i){return gn.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let a=i.length;if(a===0)return!1;let l=parseInt(i.charAt(a-1),10);return gn.getStandardUPCEANChecksum(i.substring(0,a-1))===l}static getStandardUPCEANChecksum(i){let a=i.length,l=0;for(let c=a-1;c>=0;c-=2){let u=i.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new P;l+=u}l*=3;for(let c=a-2;c>=0;c-=2){let u=i.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new P;l+=u}return(1e3-l)%10}static decodeEnd(i,a){return gn.findGuardPattern(i,a,!1,gn.START_END_PATTERN,new Int32Array(gn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,a,l,c){return this.findGuardPattern(i,a,l,c,new Int32Array(c.length))}static findGuardPattern(i,a,l,c,u){let d=i.getSize();a=l?i.getNextUnset(a):i.getNextSet(a);let x=0,v=a,C=c.length,B=l;for(let V=a;V<d;V++)if(i.get(V)!==B)u[x]++;else{if(x===C-1){if(Et.patternMatchVariance(u,c,gn.MAX_INDIVIDUAL_VARIANCE)<gn.MAX_AVG_VARIANCE)return Int32Array.from([v,V]);v+=u[0]+u[1];let ee=u.slice(2,u.length-1);for(let ge=0;ge<x-1;ge++)u[ge]=ee[ge];u[x-1]=0,u[x]=0,x--}else x++;u[x]=1,B=!B}throw new ne}static decodeDigit(i,a,l,c){this.recordPattern(i,l,a);let u=this.MAX_AVG_VARIANCE,d=-1,x=c.length;for(let v=0;v<x;v++){let C=c[v],B=Et.patternMatchVariance(a,C,gn.MAX_INDIVIDUAL_VARIANCE);B<u&&(u=B,d=v)}if(d>=0)return d;throw new ne}}gn.MAX_AVG_VARIANCE=.48,gn.MAX_INDIVIDUAL_VARIANCE=.7,gn.START_END_PATTERN=Int32Array.from([1,1,1]),gn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),gn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),gn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class sn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,a,l){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(a,l,c),d=c.toString(),x=sn.parseExtensionString(d),v=[new Ue((l[0]+l[1])/2,i),new Ue(u,i)],C=new ie(d,null,0,v,se.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&C.putAllMetadata(x),C}decodeMiddle(i,a,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=i.getSize(),d=a[1],x=0;for(let C=0;C<5&&d<u;C++){let B=gn.decodeDigit(i,c,d,gn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+B%10);for(let V of c)d+=V;B>=10&&(x|=1<<4-C),C!==4&&(d=i.getNextSet(d),d=i.getNextUnset(d))}if(l.length!==5)throw new ne;let v=this.determineCheckDigit(x);if(sn.extensionChecksum(l.toString())!==v)throw new ne;return d}static extensionChecksum(i){let a=i.length,l=0;for(let c=a-2;c>=0;c-=2)l+=i.charAt(c).charCodeAt(0)-48;l*=3;for(let c=a-1;c>=0;c-=2)l+=i.charAt(c).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let a=0;a<10;a++)if(i===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new ne}static parseExtensionString(i){if(i.length!==5)return null;let a=sn.parseExtension5String(i);return a==null?null:new Map([[be.SUGGESTED_PRICE,a]])}static parseExtension5String(i){let a;switch(i.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(i.substring(1)),c=(l/100).toString(),u=l%100,d=u<10?"0"+u:u.toString();return a+c+"."+d}}class Ba{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,a,l){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(a,l,c),d=c.toString(),x=Ba.parseExtensionString(d),v=[new Ue((l[0]+l[1])/2,i),new Ue(u,i)],C=new ie(d,null,0,v,se.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&C.putAllMetadata(x),C}decodeMiddle(i,a,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=i.getSize(),d=a[1],x=0;for(let v=0;v<2&&d<u;v++){let C=gn.decodeDigit(i,c,d,gn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let B of c)d+=B;C>=10&&(x|=1<<1-v),v!==1&&(d=i.getNextSet(d),d=i.getNextUnset(d))}if(l.length!==2)throw new ne;if(parseInt(l.toString())%4!==x)throw new ne;return d}static parseExtensionString(i){return i.length!==2?null:new Map([[be.ISSUE_NUMBER,parseInt(i)]])}}class Wn{static decodeRow(i,a,l){let c=gn.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new sn().decodeRow(i,a,c)}catch{return new Ba().decodeRow(i,a,c)}}}Wn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Vt extends gn{constructor(){super(),this.decodeRowStringBuffer="",Vt.L_AND_G_PATTERNS=Vt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let a=Vt.L_PATTERNS[i-10],l=new Int32Array(a.length);for(let c=0;c<a.length;c++)l[c]=a[a.length-c-1];Vt.L_AND_G_PATTERNS[i]=l}}decodeRow(i,a,l){let c=Vt.findStartGuardPattern(a),u=l==null?null:l.get(K.NEED_RESULT_POINT_CALLBACK);if(u!=null){const it=new Ue((c[0]+c[1])/2,i);u.foundPossibleResultPoint(it)}let d=this.decodeMiddle(a,c,this.decodeRowStringBuffer),x=d.rowOffset,v=d.resultString;if(u!=null){const it=new Ue(x,i);u.foundPossibleResultPoint(it)}let C=this.decodeEnd(a,x);if(u!=null){const it=new Ue((C[0]+C[1])/2,i);u.foundPossibleResultPoint(it)}let B=C[1],V=B+(B-C[0]);if(V>=a.getSize()||!a.isRange(B,V,!1))throw new ne;let ee=v.toString();if(ee.length<8)throw new P;if(!Vt.checkChecksum(ee))throw new A;let ge=(c[1]+c[0])/2,ve=(C[1]+C[0])/2,Ae=this.getBarcodeFormat(),Ie=[new Ue(ge,i),new Ue(ve,i)],Fe=new ie(ee,null,0,Ie,Ae,new Date().getTime()),nt=0;try{let it=Wn.decodeRow(i,a,C[1]);Fe.putMetadata(be.UPC_EAN_EXTENSION,it.getText()),Fe.putAllMetadata(it.getResultMetadata()),Fe.addResultPoints(it.getResultPoints()),nt=it.getText().length}catch{}let st=l==null?null:l.get(K.ALLOWED_EAN_EXTENSIONS);if(st!=null){let it=!1;for(let Qt in st)if(nt.toString()===Qt){it=!0;break}if(!it)throw new ne}return Fe}decodeEnd(i,a){return Vt.findGuardPattern(i,a,!1,Vt.START_END_PATTERN,new Int32Array(Vt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return Vt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let a=i.length;if(a===0)return!1;let l=parseInt(i.charAt(a-1),10);return Vt.getStandardUPCEANChecksum(i.substring(0,a-1))===l}static getStandardUPCEANChecksum(i){let a=i.length,l=0;for(let c=a-1;c>=0;c-=2){let u=i.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new P;l+=u}l*=3;for(let c=a-2;c>=0;c-=2){let u=i.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new P;l+=u}return(1e3-l)%10}}class rr extends Vt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,a,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=i.getSize(),d=a[1],x=0;for(let C=0;C<6&&d<u;C++){let B=Vt.decodeDigit(i,c,d,Vt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+B%10);for(let V of c)d+=V;B>=10&&(x|=1<<5-C)}l=rr.determineFirstDigit(l,x),d=Vt.findGuardPattern(i,d,!0,Vt.MIDDLE_PATTERN,new Int32Array(Vt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&d<u;C++){let B=Vt.decodeDigit(i,c,d,Vt.L_PATTERNS);l+=String.fromCharCode(48+B);for(let V of c)d+=V}return{rowOffset:d,resultString:l}}getBarcodeFormat(){return se.EAN_13}static determineFirstDigit(i,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new ne}}rr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Xn extends Vt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,a,l){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=i.getSize(),d=a[1];for(let v=0;v<4&&d<u;v++){let C=Vt.decodeDigit(i,c,d,Vt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let B of c)d+=B}d=Vt.findGuardPattern(i,d,!0,Vt.MIDDLE_PATTERN,new Int32Array(Vt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&d<u;v++){let C=Vt.decodeDigit(i,c,d,Vt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let B of c)d+=B}return{rowOffset:d,resultString:l}}getBarcodeFormat(){return se.EAN_8}}class Ut extends Vt{constructor(){super(...arguments),this.ean13Reader=new rr}getBarcodeFormat(){return se.UPC_A}decode(i,a){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,a,l))}decodeMiddle(i,a,l){return this.ean13Reader.decodeMiddle(i,a,l)}maybeReturnResult(i){let a=i.getText();if(a.charAt(0)==="0"){let l=new ie(a.substring(1),null,null,i.getResultPoints(),se.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new ne}reset(){this.ean13Reader.reset()}}class Wt extends Vt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,a,l){const c=this.decodeMiddleCounters.map(C=>C);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=i.getSize();let d=a[1],x=0;for(let C=0;C<6&&d<u;C++){const B=Wt.decodeDigit(i,c,d,Wt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+B%10);for(let V of c)d+=V;B>=10&&(x|=1<<5-C)}let v=Wt.determineNumSysAndCheckDigit(l,x);return{rowOffset:d,resultString:v}}decodeEnd(i,a){return Wt.findGuardPatternWithoutCounters(i,a,!0,Wt.MIDDLE_END_PATTERN)}checkChecksum(i){return Vt.checkChecksum(Wt.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,a){for(let l=0;l<=1;l++)for(let c=0;c<10;c++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][c]){let u=String.fromCharCode(48+l),d=String.fromCharCode(48+c);return u+i+d}throw ne.getNotFoundInstance()}getBarcodeFormat(){return se.UPC_E}static convertUPCEtoUPCA(i){const a=i.slice(1,7).split("").map(u=>u.charCodeAt(0)),l=new re;l.append(i.charAt(0));let c=a[5];switch(c){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(c),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(c);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}Wt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Wt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Pa extends Et{constructor(i){super();let a=i==null?null:i.get(K.POSSIBLE_FORMATS),l=[];r(a)?(l.push(new rr),l.push(new Ut),l.push(new Xn),l.push(new Wt)):(a.indexOf(se.EAN_13)>-1&&l.push(new rr),a.indexOf(se.UPC_A)>-1&&l.push(new Ut),a.indexOf(se.EAN_8)>-1&&l.push(new Xn),a.indexOf(se.UPC_E)>-1&&l.push(new Wt)),this.readers=l}decodeRow(i,a,l){for(let c of this.readers)try{const u=c.decodeRow(i,a,l),d=u.getBarcodeFormat()===se.EAN_13&&u.getText().charAt(0)==="0",x=l==null?null:l.get(K.POSSIBLE_FORMATS),v=x==null||x.includes(se.UPC_A);if(d&&v){const C=u.getRawBytes(),B=new ie(u.getText().substring(1),C,C?C.length:null,u.getResultPoints(),se.UPC_A);return B.putAllMetadata(u.getResultMetadata()),B}return u}catch{}throw new ne}reset(){for(let i of this.readers)i.reset()}}class fn extends Et{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,a){for(let l=0;l<a.length;l++)if(Et.patternMatchVariance(i,a[l],fn.MAX_INDIVIDUAL_VARIANCE)<fn.MAX_AVG_VARIANCE)return l;throw new ne}static count(i){return Be.sum(new Int32Array(i))}static increment(i,a){let l=0,c=a[0];for(let u=1;u<i.length;u++)a[u]>c&&(c=a[u],l=u);i[l]++}static decrement(i,a){let l=0,c=a[0];for(let u=1;u<i.length;u++)a[u]<c&&(c=a[u],l=u);i[l]--}static isFinderPattern(i){let a=i[0]+i[1],l=a+i[2]+i[3],c=a/l;if(c>=fn.MIN_FINDER_PATTERN_RATIO&&c<=fn.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let x of i)x>d&&(d=x),x<u&&(u=x);return d<10*u}return!1}}fn.MAX_AVG_VARIANCE=.2,fn.MAX_INDIVIDUAL_VARIANCE=.45,fn.MIN_FINDER_PATTERN_RATIO=9.5/12,fn.MAX_FINDER_PATTERN_RATIO=12.5/14;class ar{constructor(i,a){this.value=i,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof ar))return!1;const a=i;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Er{constructor(i,a,l,c,u){this.value=i,this.startEnd=a,this.value=i,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new Ue(l,u)),this.resultPoints.push(new Ue(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof Er))return!1;const a=i;return this.value===a.value}hashCode(){return this.value}}class Tt{constructor(){}static getRSSvalue(i,a,l){let c=0;for(let v of i)c+=v;let u=0,d=0,x=i.length;for(let v=0;v<x-1;v++){let C;for(C=1,d|=1<<v;C<i[v];C++,d&=~(1<<v)){let B=Tt.combins(c-C-1,x-v-2);if(l&&d===0&&c-C-(x-v-1)>=x-v-1&&(B-=Tt.combins(c-C-(x-v),x-v-2)),x-v-1>1){let V=0;for(let ee=c-C-(x-v-2);ee>a;ee--)V+=Tt.combins(c-C-ee-1,x-v-3);B-=V*(x-1-v)}else c-C>a&&B--;u+=B}c-=C}return u}static combins(i,a){let l,c;i-a>a?(c=a,l=i-a):(c=i-a,l=a);let u=1,d=1;for(let x=i;x>l;x--)u*=x,d<=c&&(u/=d,d++);for(;d<=c;)u/=d,d++;return u}}class Xr{static buildBitArray(i){let a=i.length*2-1;i[i.length-1].getRightChar()==null&&(a-=1);let l=12*a,c=new j(l),u=0,x=i[0].getRightChar().getValue();for(let v=11;v>=0;--v)x&1<<v&&c.set(u),u++;for(let v=1;v<i.length;++v){let C=i[v],B=C.getLeftChar().getValue();for(let V=11;V>=0;--V)B&1<<V&&c.set(u),u++;if(C.getRightChar()!=null){let V=C.getRightChar().getValue();for(let ee=11;ee>=0;--ee)V&1<<ee&&c.set(u),u++}}return c}}class Wi{constructor(i,a){a?this.decodedInformation=null:(this.finished=i,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Xi{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class hn extends Xi{constructor(i,a){super(i),this.value=a}getValue(){return this.value}isFNC1(){return this.value===hn.FNC1}}hn.FNC1="$";class Ln extends Xi{constructor(i,a,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class zn extends Xi{constructor(i,a,l){if(super(i),a<0||a>10||l<0||l>10)throw new P;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===zn.FNC1}isSecondDigitFNC1(){return this.secondDigit===zn.FNC1}isAnyFNC1(){return this.firstDigit===zn.FNC1||this.secondDigit===zn.FNC1}}zn.FNC1=10;class bt{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new ne;let a=i.substring(0,2);for(let u of bt.TWO_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===bt.VARIABLE_LENGTH?bt.processVariableAI(2,u[2],i):bt.processFixedAI(2,u[1],i);if(i.length<3)throw new ne;let l=i.substring(0,3);for(let u of bt.THREE_DIGIT_DATA_LENGTH)if(u[0]===l)return u[1]===bt.VARIABLE_LENGTH?bt.processVariableAI(3,u[2],i):bt.processFixedAI(3,u[1],i);for(let u of bt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===l)return u[1]===bt.VARIABLE_LENGTH?bt.processVariableAI(4,u[2],i):bt.processFixedAI(4,u[1],i);if(i.length<4)throw new ne;let c=i.substring(0,4);for(let u of bt.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===bt.VARIABLE_LENGTH?bt.processVariableAI(4,u[2],i):bt.processFixedAI(4,u[1],i);throw new ne}static processFixedAI(i,a,l){if(l.length<i)throw new ne;let c=l.substring(0,i);if(l.length<i+a)throw new ne;let u=l.substring(i,i+a),d=l.substring(i+a),x="("+c+")"+u,v=bt.parseFieldsInGeneralPurpose(d);return v==null?x:x+v}static processVariableAI(i,a,l){let c=l.substring(0,i),u;l.length<i+a?u=l.length:u=i+a;let d=l.substring(i,u),x=l.substring(u),v="("+c+")"+d,C=bt.parseFieldsInGeneralPurpose(x);return C==null?v:v+C}}bt.VARIABLE_LENGTH=[],bt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",bt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",bt.VARIABLE_LENGTH,20],["22",bt.VARIABLE_LENGTH,29],["30",bt.VARIABLE_LENGTH,8],["37",bt.VARIABLE_LENGTH,8],["90",bt.VARIABLE_LENGTH,30],["91",bt.VARIABLE_LENGTH,30],["92",bt.VARIABLE_LENGTH,30],["93",bt.VARIABLE_LENGTH,30],["94",bt.VARIABLE_LENGTH,30],["95",bt.VARIABLE_LENGTH,30],["96",bt.VARIABLE_LENGTH,30],["97",bt.VARIABLE_LENGTH,3],["98",bt.VARIABLE_LENGTH,30],["99",bt.VARIABLE_LENGTH,30]],bt.THREE_DIGIT_DATA_LENGTH=[["240",bt.VARIABLE_LENGTH,30],["241",bt.VARIABLE_LENGTH,30],["242",bt.VARIABLE_LENGTH,6],["250",bt.VARIABLE_LENGTH,30],["251",bt.VARIABLE_LENGTH,30],["253",bt.VARIABLE_LENGTH,17],["254",bt.VARIABLE_LENGTH,20],["400",bt.VARIABLE_LENGTH,30],["401",bt.VARIABLE_LENGTH,30],["402",17],["403",bt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",bt.VARIABLE_LENGTH,20],["421",bt.VARIABLE_LENGTH,15],["422",3],["423",bt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],bt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",bt.VARIABLE_LENGTH,15],["391",bt.VARIABLE_LENGTH,18],["392",bt.VARIABLE_LENGTH,15],["393",bt.VARIABLE_LENGTH,18],["703",bt.VARIABLE_LENGTH,30]],bt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",bt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",bt.VARIABLE_LENGTH,20],["8003",bt.VARIABLE_LENGTH,30],["8004",bt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",bt.VARIABLE_LENGTH,30],["8008",bt.VARIABLE_LENGTH,12],["8018",18],["8020",bt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",bt.VARIABLE_LENGTH,70],["8200",bt.VARIABLE_LENGTH,70]];class dr{constructor(i){this.buffer=new re,this.information=i}decodeAllCodes(i,a){let l=a,c=null;do{let u=this.decodeGeneralPurposeField(l,c),d=bt.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&i.append(d),u.isRemaining()?c=""+u.getRemainingValue():c=null,l===u.getNewPosition())break;l=u.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let a=i;a<i+3;++a)if(this.information.get(a))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(i,4);return u===0?new zn(this.information.getSize(),zn.FNC1,zn.FNC1):new zn(this.information.getSize(),u-1,zn.FNC1)}let a=this.extractNumericValueFromBitArray(i,7),l=(a-8)/11,c=(a-8)%11;return new zn(i+7,l,c)}extractNumericValueFromBitArray(i,a){return dr.extractNumericValueFromBitArray(this.information,i,a)}static extractNumericValueFromBitArray(i,a,l){let c=0;for(let u=0;u<l;++u)i.get(a+u)&&(c|=1<<l-u-1);return c}decodeGeneralPurposeField(i,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Ln(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Ln(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),i=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),i=a.isFinished()):(a=this.parseNumericBlock(),i=a.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let a;return i.isSecondDigitFNC1()?a=new Ln(this.current.getPosition(),this.buffer.toString()):a=new Ln(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new Wi(!0,a)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let a=new Ln(this.current.getPosition(),this.buffer.toString());return new Wi(!0,a)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Wi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let a=new Ln(this.current.getPosition(),this.buffer.toString());return new Wi(!0,a)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Wi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let a=new Ln(this.current.getPosition(),this.buffer.toString());return new Wi(!0,a)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Wi(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,5);if(a>=5&&a<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,8);return c>=232&&c<253}decodeIsoIec646(i){let a=this.extractNumericValueFromBitArray(i,5);if(a===15)return new hn(i+5,hn.FNC1);if(a>=5&&a<15)return new hn(i+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new hn(i+7,""+(l+1));if(l>=90&&l<116)return new hn(i+7,""+(l+7));let c=this.extractNumericValueFromBitArray(i,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new P}return new hn(i+8,u)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,5);if(a>=5&&a<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let a=this.extractNumericValueFromBitArray(i,5);if(a===15)return new hn(i+5,hn.FNC1);if(a>=5&&a<15)return new hn(i+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new hn(i+6,""+(l+33));let c;switch(l){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Le("Decoding invalid alphanumeric value: "+l)}return new hn(i+6,c)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let a=0;a<5&&a+i<this.information.getSize();++a)if(a===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+a))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let a=i;a<i+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let a=0;a<4&&a+i<this.information.getSize();++a)if(this.information.get(i+a))return!1;return!0}}class Tr{constructor(i){this.information=i,this.generalDecoder=new dr(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Hn extends Tr{constructor(i){super(i)}encodeCompressedGtin(i,a){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,a,l)}encodeCompressedGtinWithoutAI(i,a,l){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*c,10);u/100===0&&i.append("0"),u/10===0&&i.append("0"),i.append(u)}Hn.appendCheckDigit(i,l)}static appendCheckDigit(i,a){let l=0;for(let c=0;c<13;c++){let u=i.charAt(c+a).charCodeAt(0)-48;l+=c&1?u:3*u}l=10-l%10,l===10&&(l=0),i.append(l)}}Hn.GTIN_SIZE=40;class Zi extends Hn{constructor(i){super(i)}parseInformation(){let i=new re;i.append("(01)");let a=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Zi.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,Zi.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(i,Zi.HEADER_SIZE+44)}}Zi.HEADER_SIZE=4;class _r extends Tr{constructor(i){super(i)}parseInformation(){let i=new re;return this.getGeneralDecoder().decodeAllCodes(i,_r.HEADER_SIZE)}}_r.HEADER_SIZE=5;class sr extends Hn{constructor(i){super(i)}encodeCompressedWeight(i,a,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(i,c);let u=this.checkWeight(c),d=1e5;for(let x=0;x<5;++x)u/d===0&&i.append("0"),d/=10;i.append(u)}}class Ni extends sr{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Ni.HEADER_SIZE+sr.GTIN_SIZE+Ni.WEIGHT_SIZE)throw new ne;let i=new re;return this.encodeCompressedGtin(i,Ni.HEADER_SIZE),this.encodeCompressedWeight(i,Ni.HEADER_SIZE+sr.GTIN_SIZE,Ni.WEIGHT_SIZE),i.toString()}}Ni.HEADER_SIZE=5,Ni.WEIGHT_SIZE=15;class vs extends Ni{constructor(i){super(i)}addWeightCode(i,a){i.append("(3103)")}checkWeight(i){return i}}class Qs extends Ni{constructor(i){super(i)}addWeightCode(i,a){a<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class or extends Hn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<or.HEADER_SIZE+Hn.GTIN_SIZE)throw new ne;let i=new re;this.encodeCompressedGtin(i,or.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(or.HEADER_SIZE+Hn.GTIN_SIZE,or.LAST_DIGIT_SIZE);i.append("(392"),i.append(a),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(or.HEADER_SIZE+Hn.GTIN_SIZE+or.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}or.HEADER_SIZE=8,or.LAST_DIGIT_SIZE=2;class mi extends Hn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<mi.HEADER_SIZE+Hn.GTIN_SIZE)throw new ne;let i=new re;this.encodeCompressedGtin(i,mi.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(mi.HEADER_SIZE+Hn.GTIN_SIZE,mi.LAST_DIGIT_SIZE);i.append("(393"),i.append(a),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(mi.HEADER_SIZE+Hn.GTIN_SIZE+mi.LAST_DIGIT_SIZE,mi.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let c=this.getGeneralDecoder().decodeGeneralPurposeField(mi.HEADER_SIZE+Hn.GTIN_SIZE+mi.LAST_DIGIT_SIZE+mi.FIRST_THREE_DIGITS_SIZE,null);return i.append(c.getNewString()),i.toString()}}mi.HEADER_SIZE=8,mi.LAST_DIGIT_SIZE=2,mi.FIRST_THREE_DIGITS_SIZE=10;class wn extends sr{constructor(i,a,l){super(i),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=wn.HEADER_SIZE+wn.GTIN_SIZE+wn.WEIGHT_SIZE+wn.DATE_SIZE)throw new ne;let i=new re;return this.encodeCompressedGtin(i,wn.HEADER_SIZE),this.encodeCompressedWeight(i,wn.HEADER_SIZE+wn.GTIN_SIZE,wn.WEIGHT_SIZE),this.encodeCompressedDate(i,wn.HEADER_SIZE+wn.GTIN_SIZE+wn.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,wn.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let c=l%32;l/=32;let u=l%12+1;l/=12;let d=l;d/10==0&&i.append("0"),i.append(d),u/10==0&&i.append("0"),i.append(u),c/10==0&&i.append("0"),i.append(c)}addWeightCode(i,a){i.append("("),i.append(this.firstAIdigits),i.append(a/1e5),i.append(")")}checkWeight(i){return i%1e5}}wn.HEADER_SIZE=8,wn.WEIGHT_SIZE=20,wn.DATE_SIZE=16;function Ko(Y){try{if(Y.get(1))return new Zi(Y);if(!Y.get(2))return new _r(Y);switch(dr.extractNumericValueFromBitArray(Y,1,4)){case 4:return new vs(Y);case 5:return new Qs(Y)}switch(dr.extractNumericValueFromBitArray(Y,1,5)){case 12:return new or(Y);case 13:return new mi(Y)}switch(dr.extractNumericValueFromBitArray(Y,1,7)){case 56:return new wn(Y,"310","11");case 57:return new wn(Y,"320","11");case 58:return new wn(Y,"310","13");case 59:return new wn(Y,"320","13");case 60:return new wn(Y,"310","15");case 61:return new wn(Y,"320","15");case 62:return new wn(Y,"310","17");case 63:return new wn(Y,"320","17")}}catch(i){throw console.log(i),new Le("unknown decoder: "+Y)}}class pa{constructor(i,a,l,c){this.leftchar=i,this.rightchar=a,this.finderpattern=l,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,a){return i instanceof pa?pa.equalsOrNull(i.leftchar,a.leftchar)&&pa.equalsOrNull(i.rightchar,a.rightchar)&&pa.equalsOrNull(i.finderpattern,a.finderpattern):!1}static equalsOrNull(i,a){return i===null?a===null:pa.equals(i,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Jo{constructor(i,a,l){this.pairs=i,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,a){return i instanceof Jo?this.checkEqualitity(i,a)&&i.wasReversed===a.wasReversed:!1}checkEqualitity(i,a){if(!i||!a)return;let l;return i.forEach((c,u)=>{a.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(l=!0)})}),l}}class Ke extends fn{constructor(i){super(...arguments),this.pairs=new Array(Ke.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,a,l){this.pairs.length=0,this.startFromEven=!1;try{return Ke.constructResult(this.decodeRow2pairs(i,a))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,Ke.constructResult(this.decodeRow2pairs(i,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,i))}catch(u){if(u instanceof ne){if(!this.pairs.length)throw new ne;l=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(i,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new ne}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),a}checkRows(i,a){for(let l=a;l<this.rows.length;l++){let c=this.rows[l];this.pairs.length=0;for(let d of i)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!Ke.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(i);u.push(c);try{return this.checkRows(u,l+1)}catch(d){this.verbose&&console.log(d)}}throw new ne}static isValidSequence(i){for(let a of Ke.FINDER_PATTERN_SEQUENCES){if(i.length>a.length)continue;let l=!0;for(let c=0;c<i.length;c++)if(i[c].getFinderPattern().getValue()!=a[c]){l=!1;break}if(l)return!0}return!1}storeRow(i,a){let l=0,c=!1,u=!1;for(;l<this.rows.length;){let d=this.rows[l];if(d.getRowNumber()>i){u=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),l++}u||c||Ke.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Jo(this.pairs,i,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,a){for(let l of a)if(l.getPairs().length!==i.length){for(let c of l.getPairs())for(let u of i)if(pa.equals(c,u))break}}static isPartialRow(i,a){for(let l of a){let c=!0;for(let u of i){let d=!1;for(let x of l.getPairs())if(u.equals(x)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(i){let a=Xr.buildBitArray(i),c=Ko(a).parseInformation(),u=i[0].getFinderPattern().getResultPoints(),d=i[i.length-1].getFinderPattern().getResultPoints(),x=[u[0],u[1],d[0],d[1]];return new ie(c,null,null,x,se.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),a=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let c=l.getChecksumPortion(),u=2;for(let x=1;x<this.pairs.size();++x){let v=this.pairs.get(x);c+=v.getLeftChar().getChecksumPortion(),u++;let C=v.getRightChar();C!=null&&(c+=C.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==a.getValue()}static getNextSecondBar(i,a){let l;return i.get(a)?(l=i.getNextUnset(a),l=i.getNextSet(l)):(l=i.getNextSet(a),l=i.getNextUnset(l)),l}retrieveNextPair(i,a,l){let c=a.length%2==0;this.startFromEven&&(c=!c);let u,d=!0,x=-1;do this.findNextPair(i,a,x),u=this.parseFoundFinderPattern(i,l,c),u==null?x=Ke.getNextSecondBar(i,this.startEnd[0]):d=!1;while(d);let v=this.decodeDataCharacter(i,u,c,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new ne;let C;try{C=this.decodeDataCharacter(i,u,c,!1)}catch(B){C=null,this.verbose&&console.log(B)}return new pa(v,C,u,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,a,l){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=i.getSize(),d;l>=0?d=l:this.isEmptyPair(a)?d=0:d=a[a.length-1].getFinderPattern().getStartEnd()[1];let x=a.length%2!=0;this.startFromEven&&(x=!x);let v=!1;for(;d<u&&(v=!i.get(d),!!v);)d++;let C=0,B=d;for(let V=d;V<u;V++)if(i.get(V)!=v)c[C]++;else{if(C==3){if(x&&Ke.reverseCounters(c),Ke.isFinderPattern(c)){this.startEnd[0]=B,this.startEnd[1]=V;return}x&&Ke.reverseCounters(c),B+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,C--}else C++;c[C]=1,v=!v}throw new ne}static reverseCounters(i){let a=i.length;for(let l=0;l<a/2;++l){let c=i[l];i[l]=i[a-l-1],i[a-l-1]=c}}parseFoundFinderPattern(i,a,l){let c,u,d;if(l){let C=this.startEnd[0]-1;for(;C>=0&&!i.get(C);)C--;C++,c=this.startEnd[0]-C,u=C,d=this.startEnd[1]}else u=this.startEnd[0],d=i.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let x=this.getDecodeFinderCounters();O.arraycopy(x,0,x,1,x.length-1),x[0]=c;let v;try{v=this.parseFinderValue(x,Ke.FINDER_PATTERNS)}catch{return null}return new Er(v,[u,d],u,d,a)}decodeDataCharacter(i,a,l,c){let u=this.getDataCharacterCounters();for(let un=0;un<u.length;un++)u[un]=0;if(c)Ke.recordPatternInReverse(i,a.getStartEnd()[0],u);else{Ke.recordPattern(i,a.getStartEnd()[1],u);for(let un=0,ai=u.length-1;un<ai;un++,ai--){let Ti=u[un];u[un]=u[ai],u[ai]=Ti}}let d=17,x=Be.sum(new Int32Array(u))/d,v=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(x-v)/v>.3)throw new ne;let C=this.getOddCounts(),B=this.getEvenCounts(),V=this.getOddRoundingErrors(),ee=this.getEvenRoundingErrors();for(let un=0;un<u.length;un++){let ai=1*u[un]/x,Ti=ai+.5;if(Ti<1){if(ai<.3)throw new ne;Ti=1}else if(Ti>8){if(ai>8.7)throw new ne;Ti=8}let Dr=un/2;un&1?(B[Dr]=Ti,ee[Dr]=ai-Ti):(C[Dr]=Ti,V[Dr]=ai-Ti)}this.adjustOddEvenCounts(d);let ge=4*a.getValue()+(l?0:2)+(c?0:1)-1,ve=0,Ae=0;for(let un=C.length-1;un>=0;un--){if(Ke.isNotA1left(a,l,c)){let ai=Ke.WEIGHTS[ge][2*un];Ae+=C[un]*ai}ve+=C[un]}let Ie=0;for(let un=B.length-1;un>=0;un--)if(Ke.isNotA1left(a,l,c)){let ai=Ke.WEIGHTS[ge][2*un+1];Ie+=B[un]*ai}let Fe=Ae+Ie;if(ve&1||ve>13||ve<4)throw new ne;let nt=(13-ve)/2,st=Ke.SYMBOL_WIDEST[nt],it=9-st,Qt=Tt.getRSSvalue(C,st,!0),Pt=Tt.getRSSvalue(B,it,!1),yi=Ke.EVEN_TOTAL_SUBSET[nt],zi=Ke.GSUM[nt],di=Qt*yi+Pt+zi;return new ar(di,Fe)}static isNotA1left(i,a,l){return!(i.getValue()==0&&a&&l)}adjustOddEvenCounts(i){let a=Be.sum(new Int32Array(this.getOddCounts())),l=Be.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;a>13?u=!0:a<4&&(c=!0);let d=!1,x=!1;l>13?x=!0:l<4&&(d=!0);let v=a+l-i,C=(a&1)==1,B=(l&1)==0;if(v==1)if(C){if(B)throw new ne;u=!0}else{if(!B)throw new ne;x=!0}else if(v==-1)if(C){if(B)throw new ne;c=!0}else{if(!B)throw new ne;d=!0}else if(v==0){if(C){if(!B)throw new ne;a<l?(c=!0,x=!0):(u=!0,d=!0)}else if(B)throw new ne}else throw new ne;if(c){if(u)throw new ne;Ke.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&Ke.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(x)throw new ne;Ke.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Ke.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ke.SYMBOL_WIDEST=[7,5,4,3,1],Ke.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ke.GSUM=[0,348,1388,2948,3988],Ke.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ke.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ke.FINDER_PAT_A=0,Ke.FINDER_PAT_B=1,Ke.FINDER_PAT_C=2,Ke.FINDER_PAT_D=3,Ke.FINDER_PAT_E=4,Ke.FINDER_PAT_F=5,Ke.FINDER_PATTERN_SEQUENCES=[[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_C,Ke.FINDER_PAT_B,Ke.FINDER_PAT_D],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_E,Ke.FINDER_PAT_B,Ke.FINDER_PAT_D,Ke.FINDER_PAT_C],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_E,Ke.FINDER_PAT_B,Ke.FINDER_PAT_D,Ke.FINDER_PAT_D,Ke.FINDER_PAT_F],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_E,Ke.FINDER_PAT_B,Ke.FINDER_PAT_D,Ke.FINDER_PAT_E,Ke.FINDER_PAT_F,Ke.FINDER_PAT_F],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B,Ke.FINDER_PAT_C,Ke.FINDER_PAT_C,Ke.FINDER_PAT_D,Ke.FINDER_PAT_D],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B,Ke.FINDER_PAT_C,Ke.FINDER_PAT_C,Ke.FINDER_PAT_D,Ke.FINDER_PAT_E,Ke.FINDER_PAT_E],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B,Ke.FINDER_PAT_C,Ke.FINDER_PAT_C,Ke.FINDER_PAT_D,Ke.FINDER_PAT_E,Ke.FINDER_PAT_F,Ke.FINDER_PAT_F],[Ke.FINDER_PAT_A,Ke.FINDER_PAT_A,Ke.FINDER_PAT_B,Ke.FINDER_PAT_B,Ke.FINDER_PAT_C,Ke.FINDER_PAT_D,Ke.FINDER_PAT_D,Ke.FINDER_PAT_E,Ke.FINDER_PAT_E,Ke.FINDER_PAT_F,Ke.FINDER_PAT_F]],Ke.MAX_PAIRS=11;class Yl extends ar{constructor(i,a,l){super(i,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Gn extends fn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,a,l){const c=this.decodePair(a,!1,i,l);Gn.addOrTally(this.possibleLeftPairs,c),a.reverse();let u=this.decodePair(a,!0,i,l);Gn.addOrTally(this.possibleRightPairs,u),a.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&Gn.checkChecksum(d,x))return Gn.constructResult(d,x)}throw new ne}static addOrTally(i,a){if(a==null)return;let l=!1;for(let c of i)if(c.getValue()===a.getValue()){c.incrementCount(),l=!0;break}l||i.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,a){let l=4537077*i.getValue()+a.getValue(),c=new String(l).toString(),u=new re;for(let C=13-c.length;C>0;C--)u.append("0");u.append(c);let d=0;for(let C=0;C<13;C++){let B=u.charAt(C).charCodeAt(0)-48;d+=C&1?B:3*B}d=10-d%10,d===10&&(d=0),u.append(d.toString());let x=i.getFinderPattern().getResultPoints(),v=a.getFinderPattern().getResultPoints();return new ie(u.toString(),null,0,[x[0],x[1],v[0],v[1]],se.RSS_14,new Date().getTime())}static checkChecksum(i,a){let l=(i.getChecksumPortion()+16*a.getChecksumPortion())%79,c=9*i.getFinderPattern().getValue()+a.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,l===c}decodePair(i,a,l,c){try{let u=this.findFinderPattern(i,a),d=this.parseFoundFinderPattern(i,l,a,u),x=c==null?null:c.get(K.NEED_RESULT_POINT_CALLBACK);if(x!=null){let B=(u[0]+u[1])/2;a&&(B=i.getSize()-1-B),x.foundPossibleResultPoint(new Ue(B,l))}let v=this.decodeDataCharacter(i,d,!0),C=this.decodeDataCharacter(i,d,!1);return new Yl(1597*v.getValue()+C.getValue(),v.getChecksumPortion()+4*C.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(i,a,l){let c=this.getDataCharacterCounters();for(let Ie=0;Ie<c.length;Ie++)c[Ie]=0;if(l)Et.recordPatternInReverse(i,a.getStartEnd()[0],c);else{Et.recordPattern(i,a.getStartEnd()[1]+1,c);for(let Ie=0,Fe=c.length-1;Ie<Fe;Ie++,Fe--){let nt=c[Ie];c[Ie]=c[Fe],c[Fe]=nt}}let u=l?16:15,d=Be.sum(new Int32Array(c))/u,x=this.getOddCounts(),v=this.getEvenCounts(),C=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let Ie=0;Ie<c.length;Ie++){let Fe=c[Ie]/d,nt=Math.floor(Fe+.5);nt<1?nt=1:nt>8&&(nt=8);let st=Math.floor(Ie/2);Ie&1?(v[st]=nt,B[st]=Fe-nt):(x[st]=nt,C[st]=Fe-nt)}this.adjustOddEvenCounts(l,u);let V=0,ee=0;for(let Ie=x.length-1;Ie>=0;Ie--)ee*=9,ee+=x[Ie],V+=x[Ie];let ge=0,ve=0;for(let Ie=v.length-1;Ie>=0;Ie--)ge*=9,ge+=v[Ie],ve+=v[Ie];let Ae=ee+3*ge;if(l){if(V&1||V>12||V<4)throw new ne;let Ie=(12-V)/2,Fe=Gn.OUTSIDE_ODD_WIDEST[Ie],nt=9-Fe,st=Tt.getRSSvalue(x,Fe,!1),it=Tt.getRSSvalue(v,nt,!0),Qt=Gn.OUTSIDE_EVEN_TOTAL_SUBSET[Ie],Pt=Gn.OUTSIDE_GSUM[Ie];return new ar(st*Qt+it+Pt,Ae)}else{if(ve&1||ve>10||ve<4)throw new ne;let Ie=(10-ve)/2,Fe=Gn.INSIDE_ODD_WIDEST[Ie],nt=9-Fe,st=Tt.getRSSvalue(x,Fe,!0),it=Tt.getRSSvalue(v,nt,!1),Qt=Gn.INSIDE_ODD_TOTAL_SUBSET[Ie],Pt=Gn.INSIDE_GSUM[Ie];return new ar(it*Qt+st+Pt,Ae)}}findFinderPattern(i,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=i.getSize(),u=!1,d=0;for(;d<c&&(u=!i.get(d),a!==u);)d++;let x=0,v=d;for(let C=d;C<c;C++)if(i.get(C)!==u)l[x]++;else{if(x===3){if(fn.isFinderPattern(l))return[v,C];v+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,u=!u}throw new ne}parseFoundFinderPattern(i,a,l,c){let u=i.get(c[0]),d=c[0]-1;for(;d>=0&&u!==i.get(d);)d--;d++;const x=c[0]-d,v=this.getDecodeFinderCounters(),C=new Int32Array(v.length);O.arraycopy(v,0,C,1,v.length-1),C[0]=x;const B=this.parseFinderValue(C,Gn.FINDER_PATTERNS);let V=d,ee=c[1];return l&&(V=i.getSize()-1-V,ee=i.getSize()-1-ee),new Er(B,[d,c[1]],V,ee,a)}adjustOddEvenCounts(i,a){let l=Be.sum(new Int32Array(this.getOddCounts())),c=Be.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,x=!1,v=!1;i?(l>12?d=!0:l<4&&(u=!0),c>12?v=!0:c<4&&(x=!0)):(l>11?d=!0:l<5&&(u=!0),c>10?v=!0:c<4&&(x=!0));let C=l+c-a,B=(l&1)===(i?1:0),V=(c&1)===1;if(C===1)if(B){if(V)throw new ne;d=!0}else{if(!V)throw new ne;v=!0}else if(C===-1)if(B){if(V)throw new ne;u=!0}else{if(!V)throw new ne;x=!0}else if(C===0){if(B){if(!V)throw new ne;l<c?(u=!0,v=!0):(d=!0,x=!0)}else if(V)throw new ne}else throw new ne;if(u){if(d)throw new ne;fn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&fn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(v)throw new ne;fn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&fn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Gn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Gn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Gn.OUTSIDE_GSUM=[0,161,961,2015,2715],Gn.INSIDE_GSUM=[0,336,1036,1516],Gn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Gn.INSIDE_ODD_WIDEST=[2,4,6,8],Gn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ma extends Et{constructor(i,a){super(),this.readers=[],this.verbose=a===!0;const l=i?i.get(K.POSSIBLE_FORMATS):null,c=i&&i.get(K.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(se.EAN_13)||l.includes(se.UPC_A)||l.includes(se.EAN_8)||l.includes(se.UPC_E))&&this.readers.push(new Pa(i)),l.includes(se.CODE_39)&&this.readers.push(new gt(c)),l.includes(se.CODE_128)&&this.readers.push(new ot),l.includes(se.ITF)&&this.readers.push(new wt),l.includes(se.RSS_14)&&this.readers.push(new Gn),l.includes(se.RSS_EXPANDED)&&this.readers.push(new Ke(this.verbose))):(this.readers.push(new Pa(i)),this.readers.push(new gt),this.readers.push(new Pa(i)),this.readers.push(new ot),this.readers.push(new wt),this.readers.push(new Gn),this.readers.push(new Ke(this.verbose)))}decodeRow(i,a,l){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(i,a,l)}catch{}throw new ne}reset(){this.readers.forEach(i=>i.reset())}}class Kc extends G{constructor(i=500,a){super(new ma(a),i,a)}}class ln{constructor(i,a,l){this.ecCodewords=i,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class cn{constructor(i,a){this.count=i,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Xt{constructor(i,a,l,c,u,d){this.versionNumber=i,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=d;let x=0;const v=d.getECCodewords(),C=d.getECBlocks();for(let B of C)x+=B.getCount()*(B.getDataCodewords()+v);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,a){if(i&1||a&1)throw new P;for(let l of Xt.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===a)return l;throw new P}toString(){return""+this.versionNumber}static buildVersions(){return[new Xt(1,10,10,8,8,new ln(5,new cn(1,3))),new Xt(2,12,12,10,10,new ln(7,new cn(1,5))),new Xt(3,14,14,12,12,new ln(10,new cn(1,8))),new Xt(4,16,16,14,14,new ln(12,new cn(1,12))),new Xt(5,18,18,16,16,new ln(14,new cn(1,18))),new Xt(6,20,20,18,18,new ln(18,new cn(1,22))),new Xt(7,22,22,20,20,new ln(20,new cn(1,30))),new Xt(8,24,24,22,22,new ln(24,new cn(1,36))),new Xt(9,26,26,24,24,new ln(28,new cn(1,44))),new Xt(10,32,32,14,14,new ln(36,new cn(1,62))),new Xt(11,36,36,16,16,new ln(42,new cn(1,86))),new Xt(12,40,40,18,18,new ln(48,new cn(1,114))),new Xt(13,44,44,20,20,new ln(56,new cn(1,144))),new Xt(14,48,48,22,22,new ln(68,new cn(1,174))),new Xt(15,52,52,24,24,new ln(42,new cn(2,102))),new Xt(16,64,64,14,14,new ln(56,new cn(2,140))),new Xt(17,72,72,16,16,new ln(36,new cn(4,92))),new Xt(18,80,80,18,18,new ln(48,new cn(4,114))),new Xt(19,88,88,20,20,new ln(56,new cn(4,144))),new Xt(20,96,96,22,22,new ln(68,new cn(4,174))),new Xt(21,104,104,24,24,new ln(56,new cn(6,136))),new Xt(22,120,120,18,18,new ln(68,new cn(6,175))),new Xt(23,132,132,20,20,new ln(62,new cn(8,163))),new Xt(24,144,144,22,22,new ln(62,new cn(8,156),new cn(2,155))),new Xt(25,8,18,6,16,new ln(7,new cn(1,5))),new Xt(26,8,32,6,14,new ln(11,new cn(1,10))),new Xt(27,12,26,10,24,new ln(14,new cn(1,16))),new Xt(28,12,36,10,16,new ln(18,new cn(1,22))),new Xt(29,16,36,14,16,new ln(24,new cn(1,32))),new Xt(30,16,48,14,22,new ln(28,new cn(1,49)))]}}Xt.VERSIONS=Xt.buildVersions();class $o{constructor(i){const a=i.getHeight();if(a<8||a>144||a&1)throw new P;this.version=$o.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new ce(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const a=i.getHeight(),l=i.getWidth();return Xt.getVersionForDimensions(a,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,c=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let x=!1,v=!1,C=!1,B=!1;do if(l===u&&c===0&&!x)i[a++]=this.readCorner1(u,d)&255,l-=2,c+=2,x=!0;else if(l===u-2&&c===0&&d&3&&!v)i[a++]=this.readCorner2(u,d)&255,l-=2,c+=2,v=!0;else if(l===u+4&&c===2&&!(d&7)&&!C)i[a++]=this.readCorner3(u,d)&255,l-=2,c+=2,C=!0;else if(l===u-2&&c===0&&(d&7)===4&&!B)i[a++]=this.readCorner4(u,d)&255,l-=2,c+=2,B=!0;else{do l<u&&c>=0&&!this.readMappingMatrix.get(c,l)&&(i[a++]=this.readUtah(l,c,u,d)&255),l-=2,c+=2;while(l>=0&&c<d);l+=1,c+=3;do l>=0&&c<d&&!this.readMappingMatrix.get(c,l)&&(i[a++]=this.readUtah(l,c,u,d)&255),l+=2,c-=2;while(l<u&&c>=0);l+=3,c+=1}while(l<u||c<d);if(a!==this.version.getTotalCodewords())throw new P;return i}readModule(i,a,l,c){return i<0&&(i+=l,a+=4-(l+4&7)),a<0&&(a+=c,i+=4-(c+4&7)),this.readMappingMatrix.set(a,i),this.mappingBitMatrix.get(a,i)}readUtah(i,a,l,c){let u=0;return this.readModule(i-2,a-2,l,c)&&(u|=1),u<<=1,this.readModule(i-2,a-1,l,c)&&(u|=1),u<<=1,this.readModule(i-1,a-2,l,c)&&(u|=1),u<<=1,this.readModule(i-1,a-1,l,c)&&(u|=1),u<<=1,this.readModule(i-1,a,l,c)&&(u|=1),u<<=1,this.readModule(i,a-2,l,c)&&(u|=1),u<<=1,this.readModule(i,a-1,l,c)&&(u|=1),u<<=1,this.readModule(i,a,l,c)&&(u|=1),u}readCorner1(i,a){let l=0;return this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,1,i,a)&&(l|=1),l<<=1,this.readModule(i-1,2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(2,a-1,i,a)&&(l|=1),l<<=1,this.readModule(3,a-1,i,a)&&(l|=1),l}readCorner2(i,a){let l=0;return this.readModule(i-3,0,i,a)&&(l|=1),l<<=1,this.readModule(i-2,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(0,a-4,i,a)&&(l|=1),l<<=1,this.readModule(0,a-3,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l}readCorner3(i,a){let l=0;return this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(0,a-3,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-3,i,a)&&(l|=1),l<<=1,this.readModule(1,a-2,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l}readCorner4(i,a){let l=0;return this.readModule(i-3,0,i,a)&&(l|=1),l<<=1,this.readModule(i-2,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(2,a-1,i,a)&&(l|=1),l<<=1,this.readModule(3,a-1,i,a)&&(l|=1),l}extractDataRegion(i){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==a)throw new w("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=a/c|0,x=l/u|0,v=d*c,C=x*u,B=new ce(C,v);for(let V=0;V<d;++V){const ee=V*c;for(let ge=0;ge<x;++ge){const ve=ge*u;for(let Ae=0;Ae<c;++Ae){const Ie=V*(c+2)+1+Ae,Fe=ee+Ae;for(let nt=0;nt<u;++nt){const st=ge*(u+2)+1+nt;if(i.get(st,Ie)){const it=ve+nt;B.set(it,Fe)}}}}}return B}}class Zn{constructor(i,a){this.numDataCodewords=i,this.codewords=a}static getDataBlocks(i,a){const l=a.getECBlocks();let c=0;const u=l.getECBlocks();for(let Ae of u)c+=Ae.getCount();const d=new Array(c);let x=0;for(let Ae of u)for(let Ie=0;Ie<Ae.getCount();Ie++){const Fe=Ae.getDataCodewords(),nt=l.getECCodewords()+Fe;d[x++]=new Zn(Fe,new Uint8Array(nt))}const C=d[0].codewords.length-l.getECCodewords(),B=C-1;let V=0;for(let Ae=0;Ae<B;Ae++)for(let Ie=0;Ie<x;Ie++)d[Ie].codewords[Ae]=i[V++];const ee=a.getVersionNumber()===24,ge=ee?8:x;for(let Ae=0;Ae<ge;Ae++)d[Ae].codewords[C-1]=i[V++];const ve=d[0].codewords.length;for(let Ae=C;Ae<ve;Ae++)for(let Ie=0;Ie<x;Ie++){const Fe=ee?(Ie+8)%x:Ie,nt=ee&&Fe>7?Ae-1:Ae;d[Fe].codewords[nt]=i[V++]}if(V!==i.length)throw new w;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ks{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new w(""+i);let a=0,l=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(l>0){const d=8-l,x=i<d?i:d,v=d-x,C=255>>8-x<<v;a=(u[c]&C)>>v,i-=x,l+=x,l===8&&(l=0,c++)}if(i>0){for(;i>=8;)a=a<<8|u[c]&255,c++,i-=8;if(i>0){const d=8-i,x=255>>d<<d;a=a<<i|(u[c]&x)>>d,l+=i}}return this.bitOffset=l,this.byteOffset=c,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ti;(function(Y){Y[Y.PAD_ENCODE=0]="PAD_ENCODE",Y[Y.ASCII_ENCODE=1]="ASCII_ENCODE",Y[Y.C40_ENCODE=2]="C40_ENCODE",Y[Y.TEXT_ENCODE=3]="TEXT_ENCODE",Y[Y.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",Y[Y.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",Y[Y.BASE256_ENCODE=6]="BASE256_ENCODE"})(ti||(ti={}));class Zr{static decode(i){const a=new Ks(i),l=new re,c=new re,u=new Array;let d=ti.ASCII_ENCODE;do if(d===ti.ASCII_ENCODE)d=this.decodeAsciiSegment(a,l,c);else{switch(d){case ti.C40_ENCODE:this.decodeC40Segment(a,l);break;case ti.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case ti.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case ti.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case ti.BASE256_ENCODE:this.decodeBase256Segment(a,l,u);break;default:throw new P}d=ti.ASCII_ENCODE}while(d!==ti.PAD_ENCODE&&a.available()>0);return c.length()>0&&l.append(c.toString()),new Ce(i,l.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(i,a,l){let c=!1;do{let u=i.readBits(8);if(u===0)throw new P;if(u<=128)return c&&(u+=128),a.append(String.fromCharCode(u-1)),ti.ASCII_ENCODE;if(u===129)return ti.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&a.append("0"),a.append(""+d)}else switch(u){case 230:return ti.C40_ENCODE;case 231:return ti.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return ti.ANSIX12_ENCODE;case 239:return ti.TEXT_ENCODE;case 240:return ti.EDIFACT_ENCODE;case 241:break;default:if(u!==254||i.available()!==0)throw new P;break}}while(i.available()>0);return ti.ASCII_ENCODE}static decodeC40Segment(i,a){let l=!1;const c=[];let u=0;do{if(i.available()===8)return;const d=i.readBits(8);if(d===254)return;this.parseTwoBytes(d,i.readBits(8),c);for(let x=0;x<3;x++){const v=c[x];switch(u){case 0:if(v<3)u=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[v];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else throw new P;break;case 1:l?(a.append(String.fromCharCode(v+128)),l=!1):a.append(String.fromCharCode(v)),u=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[v];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else switch(v){case 27:a.append("");break;case 30:l=!0;break;default:throw new P}u=0;break;case 3:l?(a.append(String.fromCharCode(v+224)),l=!1):a.append(String.fromCharCode(v+96)),u=0;break;default:throw new P}}}while(i.available()>0)}static decodeTextSegment(i,a){let l=!1,c=[],u=0;do{if(i.available()===8)return;const d=i.readBits(8);if(d===254)return;this.parseTwoBytes(d,i.readBits(8),c);for(let x=0;x<3;x++){const v=c[x];switch(u){case 0:if(v<3)u=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[v];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else throw new P;break;case 1:l?(a.append(String.fromCharCode(v+128)),l=!1):a.append(String.fromCharCode(v)),u=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[v];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else switch(v){case 27:a.append("");break;case 30:l=!0;break;default:throw new P}u=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[v];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C),u=0}else throw new P;break;default:throw new P}}}while(i.available()>0)}static decodeAnsiX12Segment(i,a){const l=[];do{if(i.available()===8)return;const c=i.readBits(8);if(c===254)return;this.parseTwoBytes(c,i.readBits(8),l);for(let u=0;u<3;u++){const d=l[u];switch(d){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(d<14)a.append(String.fromCharCode(d+44));else if(d<40)a.append(String.fromCharCode(d+51));else throw new P;break}}}while(i.available()>0)}static parseTwoBytes(i,a,l){let c=(i<<8)+a-1,u=Math.floor(c/1600);l[0]=u,c-=u*1600,u=Math.floor(c/40),l[1]=u,l[2]=c-u*40}static decodeEdifactSegment(i,a){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let c=i.readBits(6);if(c===31){const u=8-i.getBitOffset();u!==8&&i.readBits(u);return}c&32||(c|=64),a.append(String.fromCharCode(c))}}while(i.available()>0)}static decodeBase256Segment(i,a,l){let c=1+i.getByteOffset();const u=this.unrandomize255State(i.readBits(8),c++);let d;if(u===0?d=i.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(i.readBits(8),c++),d<0)throw new P;const x=new Uint8Array(d);for(let v=0;v<d;v++){if(i.available()<8)throw new P;x[v]=this.unrandomize255State(i.readBits(8),c++)}l.push(x);try{a.append(F.decode(x,L.ISO88591))}catch(v){throw new Le("Platform does not support required encoding: "+v.message)}}static unrandomize255State(i,a){const l=149*a%255+1,c=i-l;return c>=0?c:c+256}}Zr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Zr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Zr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Zr.TEXT_SHIFT2_SET_CHARS=Zr.C40_SHIFT2_SET_CHARS,Zr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class el{constructor(){this.rsDecoder=new me(qe.DATA_MATRIX_FIELD_256)}decode(i){const a=new $o(i),l=a.getVersion(),c=a.readCodewords(),u=Zn.getDataBlocks(c,l);let d=0;for(let C of u)d+=C.getNumDataCodewords();const x=new Uint8Array(d),v=u.length;for(let C=0;C<v;C++){const B=u[C],V=B.getCodewords(),ee=B.getNumDataCodewords();this.correctErrors(V,ee);for(let ge=0;ge<ee;ge++)x[ge*v+C]=V[ge]}return Zr.decode(x)}correctErrors(i,a){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-a)}catch{throw new A}for(let c=0;c<a;c++)i[c]=l[c]}}class Qn{constructor(i){this.image=i,this.rectangleDetector=new Xe(this.image)}detect(){const i=this.rectangleDetector.detect();let a=this.detectSolid1(i);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new ne;a=this.shiftToModuleCenter(a);const l=a[0],c=a[1],u=a[2],d=a[3];let x=this.transitionsBetween(l,d)+1,v=this.transitionsBetween(u,d)+1;(x&1)===1&&(x+=1),(v&1)===1&&(v+=1),4*x<7*v&&4*v<7*x&&(x=v=Math.max(x,v));let C=Qn.sampleGrid(this.image,l,c,u,d,x,v);return new Te(C,[l,c,u,d])}static shiftPoint(i,a,l){let c=(a.getX()-i.getX())/(l+1),u=(a.getY()-i.getY())/(l+1);return new Ue(i.getX()+c,i.getY()+u)}static moveAway(i,a,l){let c=i.getX(),u=i.getY();return c<a?c-=1:c+=1,u<l?u-=1:u+=1,new Ue(c,u)}detectSolid1(i){let a=i[0],l=i[1],c=i[3],u=i[2],d=this.transitionsBetween(a,l),x=this.transitionsBetween(l,c),v=this.transitionsBetween(c,u),C=this.transitionsBetween(u,a),B=d,V=[u,a,l,c];return B>x&&(B=x,V[0]=a,V[1]=l,V[2]=c,V[3]=u),B>v&&(B=v,V[0]=l,V[1]=c,V[2]=u,V[3]=a),B>C&&(V[0]=c,V[1]=u,V[2]=a,V[3]=l),V}detectSolid2(i){let a=i[0],l=i[1],c=i[2],u=i[3],d=this.transitionsBetween(a,u),x=Qn.shiftPoint(l,c,(d+1)*4),v=Qn.shiftPoint(c,l,(d+1)*4),C=this.transitionsBetween(x,a),B=this.transitionsBetween(v,u);return C<B?(i[0]=a,i[1]=l,i[2]=c,i[3]=u):(i[0]=l,i[1]=c,i[2]=u,i[3]=a),i}correctTopRight(i){let a=i[0],l=i[1],c=i[2],u=i[3],d=this.transitionsBetween(a,u),x=this.transitionsBetween(l,u),v=Qn.shiftPoint(a,l,(x+1)*4),C=Qn.shiftPoint(c,l,(d+1)*4);d=this.transitionsBetween(v,u),x=this.transitionsBetween(C,u);let B=new Ue(u.getX()+(c.getX()-l.getX())/(d+1),u.getY()+(c.getY()-l.getY())/(d+1)),V=new Ue(u.getX()+(a.getX()-l.getX())/(x+1),u.getY()+(a.getY()-l.getY())/(x+1));if(!this.isValid(B))return this.isValid(V)?V:null;if(!this.isValid(V))return B;let ee=this.transitionsBetween(v,B)+this.transitionsBetween(C,B),ge=this.transitionsBetween(v,V)+this.transitionsBetween(C,V);return ee>ge?B:V}shiftToModuleCenter(i){let a=i[0],l=i[1],c=i[2],u=i[3],d=this.transitionsBetween(a,u)+1,x=this.transitionsBetween(c,u)+1,v=Qn.shiftPoint(a,l,x*4),C=Qn.shiftPoint(c,l,d*4);d=this.transitionsBetween(v,u)+1,x=this.transitionsBetween(C,u)+1,(d&1)===1&&(d+=1),(x&1)===1&&(x+=1);let B=(a.getX()+l.getX()+c.getX()+u.getX())/4,V=(a.getY()+l.getY()+c.getY()+u.getY())/4;a=Qn.moveAway(a,B,V),l=Qn.moveAway(l,B,V),c=Qn.moveAway(c,B,V),u=Qn.moveAway(u,B,V);let ee,ge;return v=Qn.shiftPoint(a,l,x*4),v=Qn.shiftPoint(v,u,d*4),ee=Qn.shiftPoint(l,a,x*4),ee=Qn.shiftPoint(ee,c,d*4),C=Qn.shiftPoint(c,u,x*4),C=Qn.shiftPoint(C,l,d*4),ge=Qn.shiftPoint(u,c,x*4),ge=Qn.shiftPoint(ge,a,d*4),[v,ee,C,ge]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,a,l,c,u,d,x){return Lt.getInstance().sampleGrid(i,d,x,.5,.5,d-.5,.5,d-.5,x-.5,.5,x-.5,a.getX(),a.getY(),u.getX(),u.getY(),c.getX(),c.getY(),l.getX(),l.getY())}transitionsBetween(i,a){let l=Math.trunc(i.getX()),c=Math.trunc(i.getY()),u=Math.trunc(a.getX()),d=Math.trunc(a.getY()),x=Math.abs(d-c)>Math.abs(u-l);if(x){let Ae=l;l=c,c=Ae,Ae=u,u=d,d=Ae}let v=Math.abs(u-l),C=Math.abs(d-c),B=-v/2,V=c<d?1:-1,ee=l<u?1:-1,ge=0,ve=this.image.get(x?c:l,x?l:c);for(let Ae=l,Ie=c;Ae!==u;Ae+=ee){let Fe=this.image.get(x?Ie:Ae,x?Ae:Ie);if(Fe!==ve&&(ge++,ve=Fe),B+=C,B>0){if(Ie===d)break;Ie+=V,B-=v}}return ge}}class Mi{constructor(){this.decoder=new el}decode(i,a=null){let l,c;if(a!=null&&a.has(K.PURE_BARCODE)){const C=Mi.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(C),c=Mi.NO_POINTS}else{const C=new Qn(i.getBlackMatrix()).detect();l=this.decoder.decode(C.getBits()),c=C.getPoints()}const u=l.getRawBytes(),d=new ie(l.getText(),u,8*u.length,c,se.DATA_MATRIX,O.currentTimeMillis()),x=l.getByteSegments();x!=null&&d.putMetadata(be.BYTE_SEGMENTS,x);const v=l.getECLevel();return v!=null&&d.putMetadata(be.ERROR_CORRECTION_LEVEL,v),d}reset(){}static extractPureBits(i){const a=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(a==null||l==null)throw new ne;const c=this.moduleSize(a,i);let u=a[1];const d=l[1];let x=a[0];const C=(l[0]-x+1)/c,B=(d-u+1)/c;if(C<=0||B<=0)throw new ne;const V=c/2;u+=V,x+=V;const ee=new ce(C,B);for(let ge=0;ge<B;ge++){const ve=u+ge*c;for(let Ae=0;Ae<C;Ae++)i.get(x+Ae*c,ve)&&ee.set(Ae,ge)}return ee}static moduleSize(i,a){const l=a.getWidth();let c=i[0];const u=i[1];for(;c<l&&a.get(c,u);)c++;if(c===l)throw new ne;const d=c-i[0];if(d===0)throw new ne;return d}}Mi.NO_POINTS=[];class Js extends G{constructor(i=500){super(new Mi,i)}}var Si;(function(Y){Y[Y.L=0]="L",Y[Y.M=1]="M",Y[Y.Q=2]="Q",Y[Y.H=3]="H"})(Si||(Si={}));class yn{constructor(i,a,l){this.value=i,this.stringValue=a,this.bits=l,yn.FOR_BITS.set(l,this),yn.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return yn.L;case"M":return yn.M;case"Q":return yn.Q;case"H":return yn.H;default:throw new S(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof yn))return!1;const a=i;return this.value===a.value}static forBits(i){if(i<0||i>=yn.FOR_BITS.size)throw new w;return yn.FOR_BITS.get(i)}}yn.FOR_BITS=new Map,yn.FOR_VALUE=new Map,yn.L=new yn(Si.L,"L",1),yn.M=new yn(Si.M,"M",0),yn.Q=new yn(Si.Q,"Q",3),yn.H=new yn(Si.H,"H",2);class Ci{constructor(i){this.errorCorrectionLevel=yn.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,a){return D.bitCount(i^a)}static decodeFormatInformation(i,a){const l=Ci.doDecodeFormatInformation(i,a);return l!==null?l:Ci.doDecodeFormatInformation(i^Ci.FORMAT_INFO_MASK_QR,a^Ci.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,a){let l=Number.MAX_SAFE_INTEGER,c=0;for(const u of Ci.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===i||d===a)return new Ci(u[1]);let x=Ci.numBitsDiffering(i,d);x<l&&(c=u[1],l=x),i!==a&&(x=Ci.numBitsDiffering(a,d),x<l&&(c=u[1],l=x))}return l<=3?new Ci(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Ci))return!1;const a=i;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}Ci.FORMAT_INFO_MASK_QR=21522,Ci.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Me{constructor(i,...a){this.ecCodewordsPerBlock=i,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const a=this.ecBlocks;for(const l of a)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class he{constructor(i,a){this.count=i,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class It{constructor(i,a,...l){this.versionNumber=i,this.alignmentPatternCenters=a,this.ecBlocks=l;let c=0;const u=l[0].getECCodewordsPerBlock(),d=l[0].getECBlocks();for(const x of d)c+=x.getCount()*(x.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new P;try{return this.getVersionForNumber((i-17)/4)}catch{throw new P}}static getVersionForNumber(i){if(i<1||i>40)throw new w;return It.VERSIONS[i-1]}static decodeVersionInformation(i){let a=Number.MAX_SAFE_INTEGER,l=0;for(let c=0;c<It.VERSION_DECODE_INFO.length;c++){const u=It.VERSION_DECODE_INFO[c];if(u===i)return It.getVersionForNumber(c+7);const d=Ci.numBitsDiffering(i,u);d<a&&(l=c+7,a=d)}return a<=3?It.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),a=new ce(i);a.setRegion(0,0,9,9),a.setRegion(i-8,0,8,9),a.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let c=0;c<l;c++){const u=this.alignmentPatternCenters[c]-2;for(let d=0;d<l;d++)c===0&&(d===0||d===l-1)||c===l-1&&d===0||a.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return a.setRegion(6,9,1,i-17),a.setRegion(9,6,i-17,1),this.versionNumber>6&&(a.setRegion(i-11,0,3,6),a.setRegion(0,i-11,6,3)),a}toString(){return""+this.versionNumber}}It.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),It.VERSIONS=[new It(1,new Int32Array(0),new Me(7,new he(1,19)),new Me(10,new he(1,16)),new Me(13,new he(1,13)),new Me(17,new he(1,9))),new It(2,Int32Array.from([6,18]),new Me(10,new he(1,34)),new Me(16,new he(1,28)),new Me(22,new he(1,22)),new Me(28,new he(1,16))),new It(3,Int32Array.from([6,22]),new Me(15,new he(1,55)),new Me(26,new he(1,44)),new Me(18,new he(2,17)),new Me(22,new he(2,13))),new It(4,Int32Array.from([6,26]),new Me(20,new he(1,80)),new Me(18,new he(2,32)),new Me(26,new he(2,24)),new Me(16,new he(4,9))),new It(5,Int32Array.from([6,30]),new Me(26,new he(1,108)),new Me(24,new he(2,43)),new Me(18,new he(2,15),new he(2,16)),new Me(22,new he(2,11),new he(2,12))),new It(6,Int32Array.from([6,34]),new Me(18,new he(2,68)),new Me(16,new he(4,27)),new Me(24,new he(4,19)),new Me(28,new he(4,15))),new It(7,Int32Array.from([6,22,38]),new Me(20,new he(2,78)),new Me(18,new he(4,31)),new Me(18,new he(2,14),new he(4,15)),new Me(26,new he(4,13),new he(1,14))),new It(8,Int32Array.from([6,24,42]),new Me(24,new he(2,97)),new Me(22,new he(2,38),new he(2,39)),new Me(22,new he(4,18),new he(2,19)),new Me(26,new he(4,14),new he(2,15))),new It(9,Int32Array.from([6,26,46]),new Me(30,new he(2,116)),new Me(22,new he(3,36),new he(2,37)),new Me(20,new he(4,16),new he(4,17)),new Me(24,new he(4,12),new he(4,13))),new It(10,Int32Array.from([6,28,50]),new Me(18,new he(2,68),new he(2,69)),new Me(26,new he(4,43),new he(1,44)),new Me(24,new he(6,19),new he(2,20)),new Me(28,new he(6,15),new he(2,16))),new It(11,Int32Array.from([6,30,54]),new Me(20,new he(4,81)),new Me(30,new he(1,50),new he(4,51)),new Me(28,new he(4,22),new he(4,23)),new Me(24,new he(3,12),new he(8,13))),new It(12,Int32Array.from([6,32,58]),new Me(24,new he(2,92),new he(2,93)),new Me(22,new he(6,36),new he(2,37)),new Me(26,new he(4,20),new he(6,21)),new Me(28,new he(7,14),new he(4,15))),new It(13,Int32Array.from([6,34,62]),new Me(26,new he(4,107)),new Me(22,new he(8,37),new he(1,38)),new Me(24,new he(8,20),new he(4,21)),new Me(22,new he(12,11),new he(4,12))),new It(14,Int32Array.from([6,26,46,66]),new Me(30,new he(3,115),new he(1,116)),new Me(24,new he(4,40),new he(5,41)),new Me(20,new he(11,16),new he(5,17)),new Me(24,new he(11,12),new he(5,13))),new It(15,Int32Array.from([6,26,48,70]),new Me(22,new he(5,87),new he(1,88)),new Me(24,new he(5,41),new he(5,42)),new Me(30,new he(5,24),new he(7,25)),new Me(24,new he(11,12),new he(7,13))),new It(16,Int32Array.from([6,26,50,74]),new Me(24,new he(5,98),new he(1,99)),new Me(28,new he(7,45),new he(3,46)),new Me(24,new he(15,19),new he(2,20)),new Me(30,new he(3,15),new he(13,16))),new It(17,Int32Array.from([6,30,54,78]),new Me(28,new he(1,107),new he(5,108)),new Me(28,new he(10,46),new he(1,47)),new Me(28,new he(1,22),new he(15,23)),new Me(28,new he(2,14),new he(17,15))),new It(18,Int32Array.from([6,30,56,82]),new Me(30,new he(5,120),new he(1,121)),new Me(26,new he(9,43),new he(4,44)),new Me(28,new he(17,22),new he(1,23)),new Me(28,new he(2,14),new he(19,15))),new It(19,Int32Array.from([6,30,58,86]),new Me(28,new he(3,113),new he(4,114)),new Me(26,new he(3,44),new he(11,45)),new Me(26,new he(17,21),new he(4,22)),new Me(26,new he(9,13),new he(16,14))),new It(20,Int32Array.from([6,34,62,90]),new Me(28,new he(3,107),new he(5,108)),new Me(26,new he(3,41),new he(13,42)),new Me(30,new he(15,24),new he(5,25)),new Me(28,new he(15,15),new he(10,16))),new It(21,Int32Array.from([6,28,50,72,94]),new Me(28,new he(4,116),new he(4,117)),new Me(26,new he(17,42)),new Me(28,new he(17,22),new he(6,23)),new Me(30,new he(19,16),new he(6,17))),new It(22,Int32Array.from([6,26,50,74,98]),new Me(28,new he(2,111),new he(7,112)),new Me(28,new he(17,46)),new Me(30,new he(7,24),new he(16,25)),new Me(24,new he(34,13))),new It(23,Int32Array.from([6,30,54,78,102]),new Me(30,new he(4,121),new he(5,122)),new Me(28,new he(4,47),new he(14,48)),new Me(30,new he(11,24),new he(14,25)),new Me(30,new he(16,15),new he(14,16))),new It(24,Int32Array.from([6,28,54,80,106]),new Me(30,new he(6,117),new he(4,118)),new Me(28,new he(6,45),new he(14,46)),new Me(30,new he(11,24),new he(16,25)),new Me(30,new he(30,16),new he(2,17))),new It(25,Int32Array.from([6,32,58,84,110]),new Me(26,new he(8,106),new he(4,107)),new Me(28,new he(8,47),new he(13,48)),new Me(30,new he(7,24),new he(22,25)),new Me(30,new he(22,15),new he(13,16))),new It(26,Int32Array.from([6,30,58,86,114]),new Me(28,new he(10,114),new he(2,115)),new Me(28,new he(19,46),new he(4,47)),new Me(28,new he(28,22),new he(6,23)),new Me(30,new he(33,16),new he(4,17))),new It(27,Int32Array.from([6,34,62,90,118]),new Me(30,new he(8,122),new he(4,123)),new Me(28,new he(22,45),new he(3,46)),new Me(30,new he(8,23),new he(26,24)),new Me(30,new he(12,15),new he(28,16))),new It(28,Int32Array.from([6,26,50,74,98,122]),new Me(30,new he(3,117),new he(10,118)),new Me(28,new he(3,45),new he(23,46)),new Me(30,new he(4,24),new he(31,25)),new Me(30,new he(11,15),new he(31,16))),new It(29,Int32Array.from([6,30,54,78,102,126]),new Me(30,new he(7,116),new he(7,117)),new Me(28,new he(21,45),new he(7,46)),new Me(30,new he(1,23),new he(37,24)),new Me(30,new he(19,15),new he(26,16))),new It(30,Int32Array.from([6,26,52,78,104,130]),new Me(30,new he(5,115),new he(10,116)),new Me(28,new he(19,47),new he(10,48)),new Me(30,new he(15,24),new he(25,25)),new Me(30,new he(23,15),new he(25,16))),new It(31,Int32Array.from([6,30,56,82,108,134]),new Me(30,new he(13,115),new he(3,116)),new Me(28,new he(2,46),new he(29,47)),new Me(30,new he(42,24),new he(1,25)),new Me(30,new he(23,15),new he(28,16))),new It(32,Int32Array.from([6,34,60,86,112,138]),new Me(30,new he(17,115)),new Me(28,new he(10,46),new he(23,47)),new Me(30,new he(10,24),new he(35,25)),new Me(30,new he(19,15),new he(35,16))),new It(33,Int32Array.from([6,30,58,86,114,142]),new Me(30,new he(17,115),new he(1,116)),new Me(28,new he(14,46),new he(21,47)),new Me(30,new he(29,24),new he(19,25)),new Me(30,new he(11,15),new he(46,16))),new It(34,Int32Array.from([6,34,62,90,118,146]),new Me(30,new he(13,115),new he(6,116)),new Me(28,new he(14,46),new he(23,47)),new Me(30,new he(44,24),new he(7,25)),new Me(30,new he(59,16),new he(1,17))),new It(35,Int32Array.from([6,30,54,78,102,126,150]),new Me(30,new he(12,121),new he(7,122)),new Me(28,new he(12,47),new he(26,48)),new Me(30,new he(39,24),new he(14,25)),new Me(30,new he(22,15),new he(41,16))),new It(36,Int32Array.from([6,24,50,76,102,128,154]),new Me(30,new he(6,121),new he(14,122)),new Me(28,new he(6,47),new he(34,48)),new Me(30,new he(46,24),new he(10,25)),new Me(30,new he(2,15),new he(64,16))),new It(37,Int32Array.from([6,28,54,80,106,132,158]),new Me(30,new he(17,122),new he(4,123)),new Me(28,new he(29,46),new he(14,47)),new Me(30,new he(49,24),new he(10,25)),new Me(30,new he(24,15),new he(46,16))),new It(38,Int32Array.from([6,32,58,84,110,136,162]),new Me(30,new he(4,122),new he(18,123)),new Me(28,new he(13,46),new he(32,47)),new Me(30,new he(48,24),new he(14,25)),new Me(30,new he(42,15),new he(32,16))),new It(39,Int32Array.from([6,26,54,82,110,138,166]),new Me(30,new he(20,117),new he(4,118)),new Me(28,new he(40,47),new he(7,48)),new Me(30,new he(43,24),new he(22,25)),new Me(30,new he(10,15),new he(67,16))),new It(40,Int32Array.from([6,30,58,86,114,142,170]),new Me(30,new he(19,118),new he(6,119)),new Me(28,new he(18,47),new he(31,48)),new Me(30,new he(34,24),new he(34,25)),new Me(30,new he(20,15),new he(61,16)))];var ui;(function(Y){Y[Y.DATA_MASK_000=0]="DATA_MASK_000",Y[Y.DATA_MASK_001=1]="DATA_MASK_001",Y[Y.DATA_MASK_010=2]="DATA_MASK_010",Y[Y.DATA_MASK_011=3]="DATA_MASK_011",Y[Y.DATA_MASK_100=4]="DATA_MASK_100",Y[Y.DATA_MASK_101=5]="DATA_MASK_101",Y[Y.DATA_MASK_110=6]="DATA_MASK_110",Y[Y.DATA_MASK_111=7]="DATA_MASK_111"})(ui||(ui={}));class gr{constructor(i,a){this.value=i,this.isMasked=a}unmaskBitMatrix(i,a){for(let l=0;l<a;l++)for(let c=0;c<a;c++)this.isMasked(l,c)&&i.flip(c,l)}}gr.values=new Map([[ui.DATA_MASK_000,new gr(ui.DATA_MASK_000,(Y,i)=>(Y+i&1)===0)],[ui.DATA_MASK_001,new gr(ui.DATA_MASK_001,(Y,i)=>(Y&1)===0)],[ui.DATA_MASK_010,new gr(ui.DATA_MASK_010,(Y,i)=>i%3===0)],[ui.DATA_MASK_011,new gr(ui.DATA_MASK_011,(Y,i)=>(Y+i)%3===0)],[ui.DATA_MASK_100,new gr(ui.DATA_MASK_100,(Y,i)=>(Math.floor(Y/2)+Math.floor(i/3)&1)===0)],[ui.DATA_MASK_101,new gr(ui.DATA_MASK_101,(Y,i)=>Y*i%6===0)],[ui.DATA_MASK_110,new gr(ui.DATA_MASK_110,(Y,i)=>Y*i%6<3)],[ui.DATA_MASK_111,new gr(ui.DATA_MASK_111,(Y,i)=>(Y+i+Y*i%3&1)===0)]]);class tl{constructor(i){const a=i.getHeight();if(a<21||(a&3)!==1)throw new P;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let u=0;u<6;u++)i=this.copyBit(u,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let u=5;u>=0;u--)i=this.copyBit(8,u,i);const a=this.bitMatrix.getHeight();let l=0;const c=a-7;for(let u=a-1;u>=c;u--)l=this.copyBit(8,u,l);for(let u=a-8;u<a;u++)l=this.copyBit(u,8,l);if(this.parsedFormatInfo=Ci.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new P}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),a=Math.floor((i-17)/4);if(a<=6)return It.getVersionForNumber(a);let l=0;const c=i-11;for(let d=5;d>=0;d--)for(let x=i-9;x>=c;x--)l=this.copyBit(x,d,l);let u=It.decodeVersionInformation(l);if(u!==null&&u.getDimensionForVersion()===i)return this.parsedVersion=u,u;l=0;for(let d=5;d>=0;d--)for(let x=i-9;x>=c;x--)l=this.copyBit(d,x,l);if(u=It.decodeVersionInformation(l),u!==null&&u.getDimensionForVersion()===i)return this.parsedVersion=u,u;throw new P}copyBit(i,a,l){return(this.isMirror?this.bitMatrix.get(a,i):this.bitMatrix.get(i,a))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),a=this.readVersion(),l=gr.values.get(i.getDataMask()),c=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,c);const u=a.buildFunctionPattern();let d=!0;const x=new Uint8Array(a.getTotalCodewords());let v=0,C=0,B=0;for(let V=c-1;V>0;V-=2){V===6&&V--;for(let ee=0;ee<c;ee++){const ge=d?c-1-ee:ee;for(let ve=0;ve<2;ve++)u.get(V-ve,ge)||(B++,C<<=1,this.bitMatrix.get(V-ve,ge)&&(C|=1),B===8&&(x[v++]=C,B=0,C=0))}d=!d}if(v!==a.getTotalCodewords())throw new P;return x}remask(){if(this.parsedFormatInfo===null)return;const i=gr.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,a)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let a=0,l=i.getWidth();a<l;a++)for(let c=a+1,u=i.getHeight();c<u;c++)i.get(a,c)!==i.get(c,a)&&(i.flip(c,a),i.flip(a,c))}}class nl{constructor(i,a){this.numDataCodewords=i,this.codewords=a}static getDataBlocks(i,a,l){if(i.length!==a.getTotalCodewords())throw new w;const c=a.getECBlocksForLevel(l);let u=0;const d=c.getECBlocks();for(const ve of d)u+=ve.getCount();const x=new Array(u);let v=0;for(const ve of d)for(let Ae=0;Ae<ve.getCount();Ae++){const Ie=ve.getDataCodewords(),Fe=c.getECCodewordsPerBlock()+Ie;x[v++]=new nl(Ie,new Uint8Array(Fe))}const C=x[0].codewords.length;let B=x.length-1;for(;B>=0&&x[B].codewords.length!==C;)B--;B++;const V=C-c.getECCodewordsPerBlock();let ee=0;for(let ve=0;ve<V;ve++)for(let Ae=0;Ae<v;Ae++)x[Ae].codewords[ve]=i[ee++];for(let ve=B;ve<v;ve++)x[ve].codewords[V]=i[ee++];const ge=x[0].codewords.length;for(let ve=V;ve<ge;ve++)for(let Ae=0;Ae<v;Ae++){const Ie=Ae<B?ve:ve+1;x[Ae].codewords[Ie]=i[ee++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var pr;(function(Y){Y[Y.TERMINATOR=0]="TERMINATOR",Y[Y.NUMERIC=1]="NUMERIC",Y[Y.ALPHANUMERIC=2]="ALPHANUMERIC",Y[Y.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",Y[Y.BYTE=4]="BYTE",Y[Y.ECI=5]="ECI",Y[Y.KANJI=6]="KANJI",Y[Y.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",Y[Y.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",Y[Y.HANZI=9]="HANZI"})(pr||(pr={}));class Ot{constructor(i,a,l,c){this.value=i,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=c,Ot.FOR_BITS.set(c,this),Ot.FOR_VALUE.set(i,this)}static forBits(i){const a=Ot.FOR_BITS.get(i);if(a===void 0)throw new w;return a}getCharacterCountBits(i){const a=i.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Ot))return!1;const a=i;return this.value===a.value}toString(){return this.stringValue}}Ot.FOR_BITS=new Map,Ot.FOR_VALUE=new Map,Ot.TERMINATOR=new Ot(pr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ot.NUMERIC=new Ot(pr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ot.ALPHANUMERIC=new Ot(pr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ot.STRUCTURED_APPEND=new Ot(pr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ot.BYTE=new Ot(pr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ot.ECI=new Ot(pr.ECI,"ECI",Int32Array.from([0,0,0]),7),Ot.KANJI=new Ot(pr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ot.FNC1_FIRST_POSITION=new Ot(pr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ot.FNC1_SECOND_POSITION=new Ot(pr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ot.HANZI=new Ot(pr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class pn{static decode(i,a,l,c){const u=new Ks(i);let d=new re;const x=new Array;let v=-1,C=-1;try{let B=null,V=!1,ee;do{if(u.available()<4)ee=Ot.TERMINATOR;else{const ge=u.readBits(4);ee=Ot.forBits(ge)}switch(ee){case Ot.TERMINATOR:break;case Ot.FNC1_FIRST_POSITION:case Ot.FNC1_SECOND_POSITION:V=!0;break;case Ot.STRUCTURED_APPEND:if(u.available()<16)throw new P;v=u.readBits(8),C=u.readBits(8);break;case Ot.ECI:const ge=pn.parseECIValue(u);if(B=M.getCharacterSetECIByValue(ge),B===null)throw new P;break;case Ot.HANZI:const ve=u.readBits(4),Ae=u.readBits(ee.getCharacterCountBits(a));ve===pn.GB2312_SUBSET&&pn.decodeHanziSegment(u,d,Ae);break;default:const Ie=u.readBits(ee.getCharacterCountBits(a));switch(ee){case Ot.NUMERIC:pn.decodeNumericSegment(u,d,Ie);break;case Ot.ALPHANUMERIC:pn.decodeAlphanumericSegment(u,d,Ie,V);break;case Ot.BYTE:pn.decodeByteSegment(u,d,Ie,B,x,c);break;case Ot.KANJI:pn.decodeKanjiSegment(u,d,Ie);break;default:throw new P}break}}while(ee!==Ot.TERMINATOR)}catch{throw new P}return new Ce(i,d.toString(),x.length===0?null:x,l===null?null:l.toString(),v,C)}static decodeHanziSegment(i,a,l){if(l*13>i.available())throw new P;const c=new Uint8Array(2*l);let u=0;for(;l>0;){const d=i.readBits(13);let x=d/96<<8&4294967295|d%96;x<959?x+=41377:x+=42657,c[u]=x>>8&255,c[u+1]=x&255,u+=2,l--}try{a.append(F.decode(c,L.GB2312))}catch(d){throw new P(d)}}static decodeKanjiSegment(i,a,l){if(l*13>i.available())throw new P;const c=new Uint8Array(2*l);let u=0;for(;l>0;){const d=i.readBits(13);let x=d/192<<8&4294967295|d%192;x<7936?x+=33088:x+=49472,c[u]=x>>8,c[u+1]=x,u+=2,l--}try{a.append(F.decode(c,L.SHIFT_JIS))}catch(d){throw new P(d)}}static decodeByteSegment(i,a,l,c,u,d){if(8*l>i.available())throw new P;const x=new Uint8Array(l);for(let C=0;C<l;C++)x[C]=i.readBits(8);let v;c===null?v=L.guessEncoding(x,d):v=c.getName();try{a.append(F.decode(x,v))}catch(C){throw new P(C)}u.push(x)}static toAlphaNumericChar(i){if(i>=pn.ALPHANUMERIC_CHARS.length)throw new P;return pn.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,a,l,c){const u=a.length();for(;l>1;){if(i.available()<11)throw new P;const d=i.readBits(11);a.append(pn.toAlphaNumericChar(Math.floor(d/45))),a.append(pn.toAlphaNumericChar(d%45)),l-=2}if(l===1){if(i.available()<6)throw new P;a.append(pn.toAlphaNumericChar(i.readBits(6)))}if(c)for(let d=u;d<a.length();d++)a.charAt(d)==="%"&&(d<a.length()-1&&a.charAt(d+1)==="%"?a.deleteCharAt(d+1):a.setCharAt(d,""))}static decodeNumericSegment(i,a,l){for(;l>=3;){if(i.available()<10)throw new P;const c=i.readBits(10);if(c>=1e3)throw new P;a.append(pn.toAlphaNumericChar(Math.floor(c/100))),a.append(pn.toAlphaNumericChar(Math.floor(c/10)%10)),a.append(pn.toAlphaNumericChar(c%10)),l-=3}if(l===2){if(i.available()<7)throw new P;const c=i.readBits(7);if(c>=100)throw new P;a.append(pn.toAlphaNumericChar(Math.floor(c/10))),a.append(pn.toAlphaNumericChar(c%10))}else if(l===1){if(i.available()<4)throw new P;const c=i.readBits(4);if(c>=10)throw new P;a.append(pn.toAlphaNumericChar(c))}}static parseECIValue(i){const a=i.readBits(8);if(!(a&128))return a&127;if((a&192)===128){const l=i.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=i.readBits(16);return(a&31)<<16&4294967295|l}throw new P}}pn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",pn.GB2312_SUBSET=1;class ws{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const a=i[0];i[0]=i[2],i[2]=a}}class $s{constructor(){this.rsDecoder=new me(qe.QR_CODE_FIELD_256)}decodeBooleanArray(i,a){return this.decodeBitMatrix(ce.parseFromBooleanArray(i),a)}decodeBitMatrix(i,a){const l=new tl(i);let c=null;try{return this.decodeBitMatrixParser(l,a)}catch(u){c=u}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const u=this.decodeBitMatrixParser(l,a);return u.setOther(new ws(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(i,a){const l=i.readVersion(),c=i.readFormatInformation().getErrorCorrectionLevel(),u=i.readCodewords(),d=nl.getDataBlocks(u,l,c);let x=0;for(const B of d)x+=B.getNumDataCodewords();const v=new Uint8Array(x);let C=0;for(const B of d){const V=B.getCodewords(),ee=B.getNumDataCodewords();this.correctErrors(V,ee);for(let ge=0;ge<ee;ge++)v[C++]=V[ge]}return pn.decode(v,l,c,a)}correctErrors(i,a){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-a)}catch{throw new A}for(let c=0;c<a;c++)i[c]=l[c]}}class eo extends Ue{constructor(i,a,l){super(i,a),this.estimatedModuleSize=l}aboutEquals(i,a,l){if(Math.abs(a-this.getY())<=i&&Math.abs(l-this.getX())<=i){const c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,a,l){const c=(this.getX()+a)/2,u=(this.getY()+i)/2,d=(this.estimatedModuleSize+l)/2;return new eo(c,u,d)}}class Ei{constructor(i,a,l,c,u,d,x){this.image=i,this.startX=a,this.startY=l,this.width=c,this.height=u,this.moduleSize=d,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,a=this.height,l=this.width,c=i+l,u=this.startY+a/2,d=new Int32Array(3),x=this.image;for(let v=0;v<a;v++){const C=u+(v&1?-Math.floor((v+1)/2):Math.floor((v+1)/2));d[0]=0,d[1]=0,d[2]=0;let B=i;for(;B<c&&!x.get(B,C);)B++;let V=0;for(;B<c;){if(x.get(B,C))if(V===1)d[1]++;else if(V===2){if(this.foundPatternCross(d)){const ee=this.handlePossibleCenter(d,C,B);if(ee!==null)return ee}d[0]=d[2],d[1]=1,d[2]=0,V=1}else d[++V]++;else V===1&&V++,d[V]++;B++}if(this.foundPatternCross(d)){const ee=this.handlePossibleCenter(d,C,c);if(ee!==null)return ee}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ne}static centerFromEnd(i,a){return a-i[2]-i[1]/2}foundPatternCross(i){const a=this.moduleSize,l=a/2;for(let c=0;c<3;c++)if(Math.abs(a-i[c])>=l)return!1;return!0}crossCheckVertical(i,a,l,c){const u=this.image,d=u.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let v=i;for(;v>=0&&u.get(a,v)&&x[1]<=l;)x[1]++,v--;if(v<0||x[1]>l)return NaN;for(;v>=0&&!u.get(a,v)&&x[0]<=l;)x[0]++,v--;if(x[0]>l)return NaN;for(v=i+1;v<d&&u.get(a,v)&&x[1]<=l;)x[1]++,v++;if(v===d||x[1]>l)return NaN;for(;v<d&&!u.get(a,v)&&x[2]<=l;)x[2]++,v++;if(x[2]>l)return NaN;const C=x[0]+x[1]+x[2];return 5*Math.abs(C-c)>=2*c?NaN:this.foundPatternCross(x)?Ei.centerFromEnd(x,v):NaN}handlePossibleCenter(i,a,l){const c=i[0]+i[1]+i[2],u=Ei.centerFromEnd(i,l),d=this.crossCheckVertical(a,u,2*i[1],c);if(!isNaN(d)){const x=(i[0]+i[1]+i[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(x,d,u))return C.combineEstimate(d,u,x);const v=new eo(u,d,x);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class il extends Ue{constructor(i,a,l,c){super(i,a),this.estimatedModuleSize=l,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,a,l){if(Math.abs(a-this.getY())<=i&&Math.abs(l-this.getX())<=i){const c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,a,l){const c=this.count+1,u=(this.count*this.getX()+a)/c,d=(this.count*this.getY()+i)/c,x=(this.count*this.estimatedModuleSize+l)/c;return new il(u,d,x,c)}}class Wl{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ct{constructor(i,a){this.image=i,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const a=i!=null&&i.get(K.TRY_HARDER)!==void 0,l=i!=null&&i.get(K.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),d=c.getWidth();let x=Math.floor(3*u/(4*Ct.MAX_MODULES));(x<Ct.MIN_SKIP||a)&&(x=Ct.MIN_SKIP);let v=!1;const C=new Int32Array(5);for(let V=x-1;V<u&&!v;V+=x){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let ee=0;for(let ge=0;ge<d;ge++)if(c.get(ge,V))(ee&1)===1&&ee++,C[ee]++;else if(ee&1)C[ee]++;else if(ee===4)if(Ct.foundPatternCross(C)){if(this.handlePossibleCenter(C,V,ge,l)===!0)if(x=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const Ae=this.findRowSkip();Ae>C[2]&&(V+=Ae-C[2]-x,ge=d-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,ee=3;continue}ee=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,ee=3;else C[++ee]++;Ct.foundPatternCross(C)&&this.handlePossibleCenter(C,V,d,l)===!0&&(x=C[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const B=this.selectBestPatterns();return Ue.orderBestPatterns(B),new Wl(B)}static centerFromEnd(i,a){return a-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let a=0;for(let u=0;u<5;u++){const d=i[u];if(d===0)return!1;a+=d}if(a<7)return!1;const l=a/7,c=l/2;return Math.abs(l-i[0])<c&&Math.abs(l-i[1])<c&&Math.abs(3*l-i[2])<3*c&&Math.abs(l-i[3])<c&&Math.abs(l-i[4])<c}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,a,l,c){const u=this.getCrossCheckStateCount();let d=0;const x=this.image;for(;i>=d&&a>=d&&x.get(a-d,i-d);)u[2]++,d++;if(i<d||a<d)return!1;for(;i>=d&&a>=d&&!x.get(a-d,i-d)&&u[1]<=l;)u[1]++,d++;if(i<d||a<d||u[1]>l)return!1;for(;i>=d&&a>=d&&x.get(a-d,i-d)&&u[0]<=l;)u[0]++,d++;if(u[0]>l)return!1;const v=x.getHeight(),C=x.getWidth();for(d=1;i+d<v&&a+d<C&&x.get(a+d,i+d);)u[2]++,d++;if(i+d>=v||a+d>=C)return!1;for(;i+d<v&&a+d<C&&!x.get(a+d,i+d)&&u[3]<l;)u[3]++,d++;if(i+d>=v||a+d>=C||u[3]>=l)return!1;for(;i+d<v&&a+d<C&&x.get(a+d,i+d)&&u[4]<l;)u[4]++,d++;if(u[4]>=l)return!1;const B=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(B-c)<2*c&&Ct.foundPatternCross(u)}crossCheckVertical(i,a,l,c){const u=this.image,d=u.getHeight(),x=this.getCrossCheckStateCount();let v=i;for(;v>=0&&u.get(a,v);)x[2]++,v--;if(v<0)return NaN;for(;v>=0&&!u.get(a,v)&&x[1]<=l;)x[1]++,v--;if(v<0||x[1]>l)return NaN;for(;v>=0&&u.get(a,v)&&x[0]<=l;)x[0]++,v--;if(x[0]>l)return NaN;for(v=i+1;v<d&&u.get(a,v);)x[2]++,v++;if(v===d)return NaN;for(;v<d&&!u.get(a,v)&&x[3]<l;)x[3]++,v++;if(v===d||x[3]>=l)return NaN;for(;v<d&&u.get(a,v)&&x[4]<l;)x[4]++,v++;if(x[4]>=l)return NaN;const C=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(C-c)>=2*c?NaN:Ct.foundPatternCross(x)?Ct.centerFromEnd(x,v):NaN}crossCheckHorizontal(i,a,l,c){const u=this.image,d=u.getWidth(),x=this.getCrossCheckStateCount();let v=i;for(;v>=0&&u.get(v,a);)x[2]++,v--;if(v<0)return NaN;for(;v>=0&&!u.get(v,a)&&x[1]<=l;)x[1]++,v--;if(v<0||x[1]>l)return NaN;for(;v>=0&&u.get(v,a)&&x[0]<=l;)x[0]++,v--;if(x[0]>l)return NaN;for(v=i+1;v<d&&u.get(v,a);)x[2]++,v++;if(v===d)return NaN;for(;v<d&&!u.get(v,a)&&x[3]<l;)x[3]++,v++;if(v===d||x[3]>=l)return NaN;for(;v<d&&u.get(v,a)&&x[4]<l;)x[4]++,v++;if(x[4]>=l)return NaN;const C=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(C-c)>=c?NaN:Ct.foundPatternCross(x)?Ct.centerFromEnd(x,v):NaN}handlePossibleCenter(i,a,l,c){const u=i[0]+i[1]+i[2]+i[3]+i[4];let d=Ct.centerFromEnd(i,l),x=this.crossCheckVertical(a,Math.floor(d),i[2],u);if(!isNaN(x)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(x),i[2],u),!isNaN(d)&&(!c||this.crossCheckDiagonal(Math.floor(x),Math.floor(d),i[2],u)))){const v=u/7;let C=!1;const B=this.possibleCenters;for(let V=0,ee=B.length;V<ee;V++){const ge=B[V];if(ge.aboutEquals(v,x,d)){B[V]=ge.combineEstimate(x,d,v),C=!0;break}}if(!C){const V=new il(d,x,v);B.push(V),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(V)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=Ct.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,a=0;const l=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Ct.CENTER_QUORUM&&(i++,a+=d.getEstimatedModuleSize());if(i<3)return!1;const c=a/l;let u=0;for(const d of this.possibleCenters)u+=Math.abs(d.getEstimatedModuleSize()-c);return u<=.05*a}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new ne;const a=this.possibleCenters;let l;if(i>3){let c=0,u=0;for(const v of this.possibleCenters){const C=v.getEstimatedModuleSize();c+=C,u+=C*C}l=c/i;let d=Math.sqrt(u/i-l*l);a.sort((v,C)=>{const B=Math.abs(C.getEstimatedModuleSize()-l),V=Math.abs(v.getEstimatedModuleSize()-l);return B<V?-1:B>V?1:0});const x=Math.max(.2*l,d);for(let v=0;v<a.length&&a.length>3;v++){const C=a[v];Math.abs(C.getEstimatedModuleSize()-l)>x&&(a.splice(v,1),v--)}}if(a.length>3){let c=0;for(const u of a)c+=u.getEstimatedModuleSize();l=c/a.length,a.sort((u,d)=>{if(d.getCount()===u.getCount()){const x=Math.abs(d.getEstimatedModuleSize()-l),v=Math.abs(u.getEstimatedModuleSize()-l);return x<v?1:x>v?-1:0}else return d.getCount()-u.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}Ct.CENTER_QUORUM=2,Ct.MIN_SKIP=3,Ct.MAX_MODULES=57;class As{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(K.NEED_RESULT_POINT_CALLBACK);const l=new Ct(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const a=i.getTopLeft(),l=i.getTopRight(),c=i.getBottomLeft(),u=this.calculateModuleSize(a,l,c);if(u<1)throw new ne("No pattern found in proccess finder.");const d=As.computeDimension(a,l,c,u),x=It.getProvisionalVersionForDimension(d),v=x.getDimensionForVersion()-7;let C=null;if(x.getAlignmentPatternCenters().length>0){const ge=l.getX()-a.getX()+c.getX(),ve=l.getY()-a.getY()+c.getY(),Ae=1-3/v,Ie=Math.floor(a.getX()+Ae*(ge-a.getX())),Fe=Math.floor(a.getY()+Ae*(ve-a.getY()));for(let nt=4;nt<=16;nt<<=1)try{C=this.findAlignmentInRegion(u,Ie,Fe,nt);break}catch(st){if(!(st instanceof ne))throw st}}const B=As.createTransform(a,l,c,C,d),V=As.sampleGrid(this.image,B,d);let ee;return C===null?ee=[c,a,l]:ee=[c,a,l,C],new Te(V,ee)}static createTransform(i,a,l,c,u){const d=u-3.5;let x,v,C,B;return c!==null?(x=c.getX(),v=c.getY(),C=d-3,B=C):(x=a.getX()-i.getX()+l.getX(),v=a.getY()-i.getY()+l.getY(),C=d,B=d),mt.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,C,B,3.5,d,i.getX(),i.getY(),a.getX(),a.getY(),x,v,l.getX(),l.getY())}static sampleGrid(i,a,l){return Lt.getInstance().sampleGridWithTransform(i,l,l,a)}static computeDimension(i,a,l,c){const u=Be.round(Ue.distance(i,a)/c),d=Be.round(Ue.distance(i,l)/c);let x=Math.floor((u+d)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new ne("Dimensions could be not found.")}return x}calculateModuleSize(i,a,l){return(this.calculateModuleSizeOneWay(i,a)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(a.getX()),Math.floor(a.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?c/7:isNaN(c)?l/7:(l+c)/14}sizeOfBlackWhiteBlackRunBothWays(i,a,l,c){let u=this.sizeOfBlackWhiteBlackRun(i,a,l,c),d=1,x=i-(l-i);x<0?(d=i/(i-x),x=0):x>=this.image.getWidth()&&(d=(this.image.getWidth()-1-i)/(x-i),x=this.image.getWidth()-1);let v=Math.floor(a-(c-a)*d);return d=1,v<0?(d=a/(a-v),v=0):v>=this.image.getHeight()&&(d=(this.image.getHeight()-1-a)/(v-a),v=this.image.getHeight()-1),x=Math.floor(i+(x-i)*d),u+=this.sizeOfBlackWhiteBlackRun(i,a,x,v),u-1}sizeOfBlackWhiteBlackRun(i,a,l,c){const u=Math.abs(c-a)>Math.abs(l-i);if(u){let ge=i;i=a,a=ge,ge=l,l=c,c=ge}const d=Math.abs(l-i),x=Math.abs(c-a);let v=-d/2;const C=i<l?1:-1,B=a<c?1:-1;let V=0;const ee=l+C;for(let ge=i,ve=a;ge!==ee;ge+=C){const Ae=u?ve:ge,Ie=u?ge:ve;if(V===1===this.image.get(Ae,Ie)){if(V===2)return Be.distance(ge,ve,i,a);V++}if(v+=x,v>0){if(ve===c)break;ve+=B,v-=d}}return V===2?Be.distance(l+C,c,i,a):NaN}findAlignmentInRegion(i,a,l,c){const u=Math.floor(c*i),d=Math.max(0,a-u),x=Math.min(this.image.getWidth()-1,a+u);if(x-d<i*3)throw new ne("Alignment top exceeds estimated module size.");const v=Math.max(0,l-u),C=Math.min(this.image.getHeight()-1,l+u);if(C-v<i*3)throw new ne("Alignment bottom exceeds estimated module size.");return new Ei(this.image,d,v,x-d,C-v,i,this.resultPointCallback).find()}}class xa{constructor(){this.decoder=new $s}getDecoder(){return this.decoder}decode(i,a){let l,c;if(a!=null&&a.get(K.PURE_BARCODE)!==void 0){const v=xa.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(v,a),c=xa.NO_POINTS}else{const v=new As(i.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(v.getBits(),a),c=v.getPoints()}l.getOther()instanceof ws&&l.getOther().applyMirroredCorrection(c);const u=new ie(l.getText(),l.getRawBytes(),void 0,c,se.QR_CODE,void 0),d=l.getByteSegments();d!==null&&u.putMetadata(be.BYTE_SEGMENTS,d);const x=l.getECLevel();return x!==null&&u.putMetadata(be.ERROR_CORRECTION_LEVEL,x),l.hasStructuredAppend()&&(u.putMetadata(be.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),u.putMetadata(be.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),u}reset(){}static extractPureBits(i){const a=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(a===null||l===null)throw new ne;const c=this.moduleSize(a,i);let u=a[1],d=l[1],x=a[0],v=l[0];if(x>=v||u>=d)throw new ne;if(d-u!==v-x&&(v=x+(d-u),v>=i.getWidth()))throw new ne;const C=Math.round((v-x+1)/c),B=Math.round((d-u+1)/c);if(C<=0||B<=0)throw new ne;if(B!==C)throw new ne;const V=Math.floor(c/2);u+=V,x+=V;const ee=x+Math.floor((C-1)*c)-v;if(ee>0){if(ee>V)throw new ne;x-=ee}const ge=u+Math.floor((B-1)*c)-d;if(ge>0){if(ge>V)throw new ne;u-=ge}const ve=new ce(C,B);for(let Ae=0;Ae<B;Ae++){const Ie=u+Math.floor(Ae*c);for(let Fe=0;Fe<C;Fe++)i.get(x+Math.floor(Fe*c),Ie)&&ve.set(Fe,Ae)}return ve}static moduleSize(i,a){const l=a.getHeight(),c=a.getWidth();let u=i[0],d=i[1],x=!0,v=0;for(;u<c&&d<l;){if(x!==a.get(u,d)){if(++v===5)break;x=!x}u++,d++}if(u===c||d===l)throw new ne;return(u-i[0])/7}}xa.NO_POINTS=new Array;class Dt{PDF417Common(){}static getBitCountSum(i){return Be.sum(i)}static toIntArray(i){if(i==null||!i.length)return Dt.EMPTY_INT_ARRAY;const a=new Int32Array(i.length);let l=0;for(const c of i)a[l++]=c;return a}static getCodeword(i){const a=T.binarySearch(Dt.SYMBOL_TABLE,i&262143);return a<0?-1:(Dt.CODEWORD_TABLE[a]-1)%Dt.NUMBER_OF_CODEWORDS}}Dt.NUMBER_OF_CODEWORDS=929,Dt.MAX_CODEWORDS_IN_BARCODE=Dt.NUMBER_OF_CODEWORDS-1,Dt.MIN_ROWS_IN_BARCODE=3,Dt.MAX_ROWS_IN_BARCODE=90,Dt.MODULES_IN_CODEWORD=17,Dt.MODULES_IN_STOP_PATTERN=18,Dt.BARS_IN_MODULE=8,Dt.EMPTY_INT_ARRAY=new Int32Array([]),Dt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Dt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Xl{constructor(i,a){this.bits=i,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Gt{static detectMultiple(i,a,l){let c=i.getBlackMatrix(),u=Gt.detect(l,c);return u.length||(c=c.clone(),c.rotate180(),u=Gt.detect(l,c)),new Xl(c,u)}static detect(i,a){const l=new Array;let c=0,u=0,d=!1;for(;c<a.getHeight();){const x=Gt.findVertices(a,c,u);if(x[0]==null&&x[3]==null){if(!d)break;d=!1,u=0;for(const v of l)v[1]!=null&&(c=Math.trunc(Math.max(c,v[1].getY()))),v[3]!=null&&(c=Math.max(c,Math.trunc(v[3].getY())));c+=Gt.ROW_STEP;continue}if(d=!0,l.push(x),!i)break;x[2]!=null?(u=Math.trunc(x[2].getX()),c=Math.trunc(x[2].getY())):(u=Math.trunc(x[4].getX()),c=Math.trunc(x[4].getY()))}return l}static findVertices(i,a,l){const c=i.getHeight(),u=i.getWidth(),d=new Array(8);return Gt.copyToResult(d,Gt.findRowsWithPattern(i,c,u,a,l,Gt.START_PATTERN),Gt.INDEXES_START_PATTERN),d[4]!=null&&(l=Math.trunc(d[4].getX()),a=Math.trunc(d[4].getY())),Gt.copyToResult(d,Gt.findRowsWithPattern(i,c,u,a,l,Gt.STOP_PATTERN),Gt.INDEXES_STOP_PATTERN),d}static copyToResult(i,a,l){for(let c=0;c<l.length;c++)i[l[c]]=a[c]}static findRowsWithPattern(i,a,l,c,u,d){const x=new Array(4);let v=!1;const C=new Int32Array(d.length);for(;c<a;c+=Gt.ROW_STEP){let V=Gt.findGuardPattern(i,u,c,l,!1,d,C);if(V!=null){for(;c>0;){const ee=Gt.findGuardPattern(i,u,--c,l,!1,d,C);if(ee!=null)V=ee;else{c++;break}}x[0]=new Ue(V[0],c),x[1]=new Ue(V[1],c),v=!0;break}}let B=c+1;if(v){let V=0,ee=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;B<a;B++){const ge=Gt.findGuardPattern(i,ee[0],B,l,!1,d,C);if(ge!=null&&Math.abs(ee[0]-ge[0])<Gt.MAX_PATTERN_DRIFT&&Math.abs(ee[1]-ge[1])<Gt.MAX_PATTERN_DRIFT)ee=ge,V=0;else{if(V>Gt.SKIPPED_ROW_COUNT_MAX)break;V++}}B-=V+1,x[2]=new Ue(ee[0],B),x[3]=new Ue(ee[1],B)}return B-c<Gt.BARCODE_MIN_HEIGHT&&T.fill(x,null),x}static findGuardPattern(i,a,l,c,u,d,x){T.fillWithin(x,0,x.length,0);let v=a,C=0;for(;i.get(v,l)&&v>0&&C++<Gt.MAX_PIXEL_DRIFT;)v--;let B=v,V=0,ee=d.length;for(let ge=u;B<c;B++)if(i.get(B,l)!==ge)x[V]++;else{if(V===ee-1){if(Gt.patternMatchVariance(x,d,Gt.MAX_INDIVIDUAL_VARIANCE)<Gt.MAX_AVG_VARIANCE)return new Int32Array([v,B]);v+=x[0]+x[1],O.arraycopy(x,2,x,0,V-1),x[V-1]=0,x[V]=0,V--}else V++;x[V]=1,ge=!ge}return V===ee-1&&Gt.patternMatchVariance(x,d,Gt.MAX_INDIVIDUAL_VARIANCE)<Gt.MAX_AVG_VARIANCE?new Int32Array([v,B-1]):null}static patternMatchVariance(i,a,l){let c=i.length,u=0,d=0;for(let C=0;C<c;C++)u+=i[C],d+=a[C];if(u<d)return 1/0;let x=u/d;l*=x;let v=0;for(let C=0;C<c;C++){let B=i[C],V=a[C]*x,ee=B>V?B-V:V-B;if(ee>l)return 1/0;v+=ee}return v/u}}Gt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Gt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Gt.MAX_AVG_VARIANCE=.42,Gt.MAX_INDIVIDUAL_VARIANCE=.8,Gt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Gt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Gt.MAX_PIXEL_DRIFT=3,Gt.MAX_PATTERN_DRIFT=5,Gt.SKIPPED_ROW_COUNT_MAX=25,Gt.ROW_STEP=5,Gt.BARCODE_MIN_HEIGHT=10;class ni{constructor(i,a){if(a.length===0)throw new w;this.field=i;let l=a.length;if(l>1&&a[0]===0){let c=1;for(;c<l&&a[c]===0;)c++;c===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-c),O.arraycopy(a,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let a=this.coefficients[0],l=this.coefficients.length;for(let c=1;c<l;c++)a=this.field.add(this.field.multiply(i,a),this.coefficients[c]);return a}add(i){if(!this.field.equals(i.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let a=this.coefficients,l=i.coefficients;if(a.length>l.length){let d=a;a=l,l=d}let c=new Int32Array(l.length),u=l.length-a.length;O.arraycopy(l,0,c,0,u);for(let d=u;d<l.length;d++)c[d]=this.field.add(a[d-u],l[d]);return new ni(this.field,c)}subtract(i){if(!this.field.equals(i.field))throw new w("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof ni?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new ni(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,c=i.coefficients,u=c.length,d=new Int32Array(l+u-1);for(let x=0;x<l;x++){let v=a[x];for(let C=0;C<u;C++)d[x+C]=this.field.add(d[x+C],this.field.multiply(v,c[C]))}return new ni(this.field,d)}negative(){let i=this.coefficients.length,a=new Int32Array(i);for(let l=0;l<i;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new ni(this.field,a)}multiplyScalar(i){if(i===0)return new ni(this.field,new Int32Array([0]));if(i===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let c=0;c<a;c++)l[c]=this.field.multiply(this.coefficients[c],i);return new ni(this.field,l)}multiplyByMonomial(i,a){if(i<0)throw new w;if(a===0)return new ni(this.field,new Int32Array([0]));let l=this.coefficients.length,c=new Int32Array(l+i);for(let u=0;u<l;u++)c[u]=this.field.multiply(this.coefficients[u],a);return new ni(this.field,c)}toString(){let i=new re;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(a===0||l!==1)&&i.append(l),a!==0&&(a===1?i.append("x"):(i.append("x^"),i.append(a))))}return i.toString()}}class rl{add(i,a){return(i+a)%this.modulus}subtract(i,a){return(this.modulus+i-a)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new w;return this.logTable[i]}inverse(i){if(i===0)throw new tt;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,a){return i===0||a===0?0:this.expTable[(this.logTable[i]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class al extends rl{constructor(i,a){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let c=0;c<i;c++)this.expTable[c]=l,l=l*a%i;for(let c=0;c<i-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new ni(this,new Int32Array([0])),this.one=new ni(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,a){if(i<0)throw new w;if(a===0)return this.zero;let l=new Int32Array(i+1);return l[0]=a,new ni(this,l)}}al.PDF417_GF=new al(Dt.NUMBER_OF_CODEWORDS,3);class Zl{constructor(){this.field=al.PDF417_GF}decode(i,a,l){let c=new ni(this.field,i),u=new Int32Array(a),d=!1;for(let ve=a;ve>0;ve--){let Ae=c.evaluateAt(this.field.exp(ve));u[a-ve]=Ae,Ae!==0&&(d=!0)}if(!d)return 0;let x=this.field.getOne();if(l!=null)for(const ve of l){let Ae=this.field.exp(i.length-1-ve),Ie=new ni(this.field,new Int32Array([this.field.subtract(0,Ae),1]));x=x.multiply(Ie)}let v=new ni(this.field,u),C=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),v,a),B=C[0],V=C[1],ee=this.findErrorLocations(B),ge=this.findErrorMagnitudes(V,B,ee);for(let ve=0;ve<ee.length;ve++){let Ae=i.length-1-this.field.log(ee[ve]);if(Ae<0)throw A.getChecksumInstance();i[Ae]=this.field.subtract(i[Ae],ge[ve])}return ee.length}runEuclideanAlgorithm(i,a,l){if(i.getDegree()<a.getDegree()){let ee=i;i=a,a=ee}let c=i,u=a,d=this.field.getZero(),x=this.field.getOne();for(;u.getDegree()>=Math.round(l/2);){let ee=c,ge=d;if(c=u,d=x,c.isZero())throw A.getChecksumInstance();u=ee;let ve=this.field.getZero(),Ae=c.getCoefficient(c.getDegree()),Ie=this.field.inverse(Ae);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let Fe=u.getDegree()-c.getDegree(),nt=this.field.multiply(u.getCoefficient(u.getDegree()),Ie);ve=ve.add(this.field.buildMonomial(Fe,nt)),u=u.subtract(c.multiplyByMonomial(Fe,nt))}x=ve.multiply(d).subtract(ge).negative()}let v=x.getCoefficient(0);if(v===0)throw A.getChecksumInstance();let C=this.field.inverse(v),B=x.multiply(C),V=u.multiply(C);return[B,V]}findErrorLocations(i){let a=i.getDegree(),l=new Int32Array(a),c=0;for(let u=1;u<this.field.getSize()&&c<a;u++)i.evaluateAt(u)===0&&(l[c]=this.field.inverse(u),c++);if(c!==a)throw A.getChecksumInstance();return l}findErrorMagnitudes(i,a,l){let c=a.getDegree(),u=new Int32Array(c);for(let C=1;C<=c;C++)u[c-C]=this.field.multiply(C,a.getCoefficient(C));let d=new ni(this.field,u),x=l.length,v=new Int32Array(x);for(let C=0;C<x;C++){let B=this.field.inverse(l[C]),V=this.field.subtract(0,i.evaluateAt(B)),ee=this.field.inverse(d.evaluateAt(B));v[C]=this.field.multiply(V,ee)}return v}}class Fa{constructor(i,a,l,c,u){i instanceof Fa?this.constructor_2(i):this.constructor_1(i,a,l,c,u)}constructor_1(i,a,l,c,u){const d=a==null||l==null,x=c==null||u==null;if(d&&x)throw new ne;d?(a=new Ue(0,c.getY()),l=new Ue(0,u.getY())):x&&(c=new Ue(i.getWidth()-1,a.getY()),u=new Ue(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=a,this.bottomLeft=l,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(a.getY(),c.getY())),this.maxY=Math.trunc(Math.max(l.getY(),u.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,a){return i==null?a:a==null?i:new Fa(i.image,i.topLeft,i.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(i,a,l){let c=this.topLeft,u=this.bottomLeft,d=this.topRight,x=this.bottomRight;if(i>0){let v=l?this.topLeft:this.topRight,C=Math.trunc(v.getY()-i);C<0&&(C=0);let B=new Ue(v.getX(),C);l?c=B:d=B}if(a>0){let v=l?this.bottomLeft:this.bottomRight,C=Math.trunc(v.getY()+a);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let B=new Ue(v.getX(),C);l?u=B:x=B}return new Fa(this.image,c,u,d,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class sl{constructor(i,a,l,c){this.columnCount=i,this.errorCorrectionLevel=c,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Qr{constructor(){this.buffer=""}static form(i,a){let l=-1;function c(d,x,v,C,B,V){if(d==="%%")return"%";if(a[++l]===void 0)return;d=C?parseInt(C.substr(1)):void 0;let ee=B?parseInt(B.substr(1)):void 0,ge;switch(V){case"s":ge=a[l];break;case"c":ge=a[l][0];break;case"f":ge=parseFloat(a[l]).toFixed(d);break;case"p":ge=parseFloat(a[l]).toPrecision(d);break;case"e":ge=parseFloat(a[l]).toExponential(d);break;case"x":ge=parseInt(a[l]).toString(ee||16);break;case"d":ge=parseFloat(parseInt(a[l],ee||10).toPrecision(d)).toFixed(0);break}ge=typeof ge=="object"?JSON.stringify(ge):(+ge).toString(ee);let ve=parseInt(v),Ae=v&&v[0]+""=="0"?"0":" ";for(;ge.length<ve;)ge=x!==void 0?ge+Ae:Ae+ge;return ge}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(u,c)}format(i,...a){this.buffer+=Qr.form(i,a)}toString(){return this.buffer}}class kr{constructor(i){this.boundingBox=new Fa(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let a=this.getCodeword(i);if(a!=null)return a;for(let l=1;l<kr.MAX_NEARBY_DISTANCE;l++){let c=this.imageRowToCodewordIndex(i)-l;if(c>=0&&(a=this.codewords[c],a!=null)||(c=this.imageRowToCodewordIndex(i)+l,c<this.codewords.length&&(a=this.codewords[c],a!=null)))return a}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,a){this.codewords[this.imageRowToCodewordIndex(i)]=a}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new Qr;let a=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",a++);continue}i.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return i.toString()}}kr.MAX_NEARBY_DISTANCE=5;class Ns{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let a=this.values.get(i);a==null&&(a=0),a++,this.values.set(i,a)}getValue(){let i=-1,a=new Array;for(const[l,c]of this.values.entries()){const u={getKey:()=>l,getValue:()=>c};u.getValue()>i?(i=u.getValue(),a=[],a.push(u.getKey())):u.getValue()===i&&a.push(u.getKey())}return Dt.toIntArray(a)}getConfidence(i){return this.values.get(i)}}class $a extends kr{constructor(i,a){super(i),this._isLeft=a}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,i);let l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),u=this._isLeft?l.getBottomLeft():l.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),x=this.imageRowToCodewordIndex(Math.trunc(u.getY())),v=-1,C=1,B=0;for(let V=d;V<x;V++){if(a[V]==null)continue;let ee=a[V],ge=ee.getRowNumber()-v;if(ge===0)B++;else if(ge===1)C=Math.max(C,B),B=1,v=ee.getRowNumber();else if(ge<0||ee.getRowNumber()>=i.getRowCount()||ge>V)a[V]=null;else{let ve;C>2?ve=(C-2)*ge:ve=ge;let Ae=ve>=V;for(let Ie=1;Ie<=ve&&!Ae;Ie++)Ae=a[V-Ie]!=null;Ae?a[V]=null:(v=ee.getRowNumber(),B=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let a=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let c=l.getRowNumber();if(c>=a.length)continue;a[c]++}return a}adjustIncompleteIndicatorColumnRowNumbers(i){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),c=this._isLeft?a.getBottomLeft():a.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),x=this.getCodewords(),v=-1;for(let C=u;C<d;C++){if(x[C]==null)continue;let B=x[C];B.setRowNumberAsRowIndicatorColumn();let V=B.getRowNumber()-v;V===0||(V===1?v=B.getRowNumber():B.getRowNumber()>=i.getRowCount()?x[C]=null:v=B.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),a=new Ns,l=new Ns,c=new Ns,u=new Ns;for(let x of i){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let v=x.getValue()%30,C=x.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:l.setValue(v*3+1);break;case 1:u.setValue(v/3),c.setValue(v%3);break;case 2:a.setValue(v+1);break}}if(a.getValue().length===0||l.getValue().length===0||c.getValue().length===0||u.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+c.getValue()[0]<Dt.MIN_ROWS_IN_BARCODE||l.getValue()[0]+c.getValue()[0]>Dt.MAX_ROWS_IN_BARCODE)return null;let d=new sl(a.getValue()[0],l.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,d),d}removeIncorrectCodewords(i,a){for(let l=0;l<i.length;l++){let c=i[l];if(i[l]==null)continue;let u=c.getValue()%30,d=c.getRowNumber();if(d>a.getRowCount()){i[l]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==a.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(u/3)!==a.getErrorCorrectionLevel()||u%3!==a.getRowCountLowerPart())&&(i[l]=null);break;case 2:u+1!==a.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ua{constructor(i,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=Dt.MAX_CODEWORDS_IN_BARCODE,a;do a=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let c=0;c<l.length;c++)l[c]!=null&&(l[c].hasValidRowNumber()||this.adjustRowNumbers(a,c,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&a[l]!=null&&i[l].getRowNumber()===a[l].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[l];u!=null&&(u.setRowNumber(i[l].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let c=a[l].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let x=this.detectionResultColumns[d].getCodewords()[l];x!=null&&(u=Ua.adjustRowNumberIfValid(c,u,x),x.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let c=a[l].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let x=this.detectionResultColumns[d].getCodewords()[l];x!=null&&(u=Ua.adjustRowNumberIfValid(c,u,x),x.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),a=0):++a),a}adjustRowNumbers(i,a,l){if(!this.detectionResultColumns[i-1])return;let c=l[a],u=this.detectionResultColumns[i-1].getCodewords(),d=u;this.detectionResultColumns[i+1]!=null&&(d=this.detectionResultColumns[i+1].getCodewords());let x=new Array(14);x[2]=u[a],x[3]=d[a],a>0&&(x[0]=l[a-1],x[4]=u[a-1],x[5]=d[a-1]),a>1&&(x[8]=l[a-2],x[10]=u[a-2],x[11]=d[a-2]),a<l.length-1&&(x[1]=l[a+1],x[6]=u[a+1],x[7]=d[a+1]),a<l.length-2&&(x[9]=l[a+2],x[12]=u[a+2],x[13]=d[a+2]);for(let v of x)if(Ua.adjustRowNumber(c,v))return}static adjustRowNumber(i,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===i.getBucket()?(i.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,a){this.detectionResultColumns[i]=a}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new Qr;for(let l=0;l<i.getCodewords().length;l++){a.format("CW %3d:",l);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){a.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[l];if(u==null){a.format("    |   ");continue}a.format(" %3d|%3d",u.getRowNumber(),u.getValue())}a.format("%n")}return a.toString()}}class ya{constructor(i,a,l,c){this.rowNumber=ya.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==ya.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}ya.BARCODE_ROW_UNKNOWN=-1;class Fi{static initialize(){for(let i=0;i<Dt.SYMBOL_TABLE.length;i++){let a=Dt.SYMBOL_TABLE[i],l=a&1;for(let c=0;c<Dt.BARS_IN_MODULE;c++){let u=0;for(;(a&1)===l;)u+=1,a>>=1;l=a&1,Fi.RATIOS_TABLE[i]||(Fi.RATIOS_TABLE[i]=new Array(Dt.BARS_IN_MODULE)),Fi.RATIOS_TABLE[i][Dt.BARS_IN_MODULE-c-1]=Math.fround(u/Dt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let a=Fi.getDecodedCodewordValue(Fi.sampleBitCounts(i));return a!==-1?a:Fi.getClosestDecodedValue(i)}static sampleBitCounts(i){let a=Be.sum(i),l=new Int32Array(Dt.BARS_IN_MODULE),c=0,u=0;for(let d=0;d<Dt.MODULES_IN_CODEWORD;d++){let x=a/(2*Dt.MODULES_IN_CODEWORD)+d*a/Dt.MODULES_IN_CODEWORD;u+i[c]<=x&&(u+=i[c],c++),l[c]++}return l}static getDecodedCodewordValue(i){let a=Fi.getBitValue(i);return Dt.getCodeword(a)===-1?-1:a}static getBitValue(i){let a=0;for(let l=0;l<i.length;l++)for(let c=0;c<i[l];c++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(i){let a=Be.sum(i),l=new Array(Dt.BARS_IN_MODULE);if(a>1)for(let d=0;d<l.length;d++)l[d]=Math.fround(i[d]/a);let c=lt.MAX_VALUE,u=-1;this.bSymbolTableReady||Fi.initialize();for(let d=0;d<Fi.RATIOS_TABLE.length;d++){let x=0,v=Fi.RATIOS_TABLE[d];for(let C=0;C<Dt.BARS_IN_MODULE;C++){let B=Math.fround(v[C]-l[C]);if(x+=Math.fround(B*B),x>=c)break}x<c&&(c=x,u=Dt.SYMBOL_TABLE[d])}return u}}Fi.bSymbolTableReady=!1,Fi.RATIOS_TABLE=new Array(Dt.SYMBOL_TABLE.length).map(Y=>new Array(Dt.BARS_IN_MODULE));class ol{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class ll{static parseLong(i,a=void 0){return parseInt(i,a)}}class cl extends y{}cl.kind="NullPointerException";class ba{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,a,l){if(i==null)throw new cl;if(a<0||a>i.length||l<0||a+l>i.length||a+l<0)throw new H;if(l===0)return;for(let c=0;c<l;c++)this.write(i[a+c])}flush(){}close(){}}class za extends y{}class Jc extends ba{constructor(i=32){if(super(),this.count=0,i<0)throw new w("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new za;l=D.MAX_VALUE}this.buf=T.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,a,l){if(a<0||a>i.length||l<0||a+l-i.length>0)throw new H;this.ensureCapacity(this.count+l),O.arraycopy(i,a,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return T.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var tn;(function(Y){Y[Y.ALPHA=0]="ALPHA",Y[Y.LOWER=1]="LOWER",Y[Y.MIXED=2]="MIXED",Y[Y.PUNCT=3]="PUNCT",Y[Y.ALPHA_SHIFT=4]="ALPHA_SHIFT",Y[Y.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(tn||(tn={}));function Br(){if(typeof window<"u")return window.BigInt||null;if(typeof Ms<"u")return Ms.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let es;function mr(Y){if(typeof es>"u"&&(es=Br()),es===null)throw new Error("BigInt is not supported!");return es(Y)}function $c(){let Y=[];Y[0]=mr(1);let i=mr(900);Y[1]=i;for(let a=2;a<16;a++)Y[a]=Y[a-1]*i;return Y}class Pe{static decode(i,a){let l=new re(""),c=M.ISO8859_1;l.enableDecoding(c);let u=1,d=i[u++],x=new ol;for(;u<i[0];){switch(d){case Pe.TEXT_COMPACTION_MODE_LATCH:u=Pe.textCompaction(i,u,l);break;case Pe.BYTE_COMPACTION_MODE_LATCH:case Pe.BYTE_COMPACTION_MODE_LATCH_6:u=Pe.byteCompaction(d,i,c,u,l);break;case Pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[u++]);break;case Pe.NUMERIC_COMPACTION_MODE_LATCH:u=Pe.numericCompaction(i,u,l);break;case Pe.ECI_CHARSET:M.getCharacterSetECIByValue(i[u++]);break;case Pe.ECI_GENERAL_PURPOSE:u+=2;break;case Pe.ECI_USER_DEFINED:u++;break;case Pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=Pe.decodeMacroBlock(i,u,x);break;case Pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Pe.MACRO_PDF417_TERMINATOR:throw new P;default:u--,u=Pe.textCompaction(i,u,l);break}if(u<i.length)d=i[u++];else throw P.getFormatInstance()}if(l.length()===0)throw P.getFormatInstance();let v=new Ce(null,l.toString(),null,a);return v.setOther(x),v}static decodeMacroBlock(i,a,l){if(a+Pe.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw P.getFormatInstance();let c=new Int32Array(Pe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<Pe.NUMBER_OF_SEQUENCE_CODEWORDS;x++,a++)c[x]=i[a];l.setSegmentIndex(D.parseInt(Pe.decodeBase900toBase10(c,Pe.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new re;a=Pe.textCompaction(i,a,u),l.setFileId(u.toString());let d=-1;for(i[a]===Pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=a+1);a<i[0];)switch(i[a]){case Pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,i[a]){case Pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new re;a=Pe.textCompaction(i,a+1,x),l.setFileName(x.toString());break;case Pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new re;a=Pe.textCompaction(i,a+1,v),l.setSender(v.toString());break;case Pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new re;a=Pe.textCompaction(i,a+1,C),l.setAddressee(C.toString());break;case Pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let B=new re;a=Pe.numericCompaction(i,a+1,B),l.setSegmentCount(D.parseInt(B.toString()));break;case Pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let V=new re;a=Pe.numericCompaction(i,a+1,V),l.setTimestamp(ll.parseLong(V.toString()));break;case Pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let ee=new re;a=Pe.numericCompaction(i,a+1,ee),l.setChecksum(D.parseInt(ee.toString()));break;case Pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ge=new re;a=Pe.numericCompaction(i,a+1,ge),l.setFileSize(ll.parseLong(ge.toString()));break;default:throw P.getFormatInstance()}break;case Pe.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw P.getFormatInstance()}if(d!==-1){let x=a-d;l.isLastSegment()&&x--,l.setOptionalData(T.copyOfRange(i,d,d+x))}return a}static textCompaction(i,a,l){let c=new Int32Array((i[0]-a)*2),u=new Int32Array((i[0]-a)*2),d=0,x=!1;for(;a<i[0]&&!x;){let v=i[a++];if(v<Pe.TEXT_COMPACTION_MODE_LATCH)c[d]=v/30,c[d+1]=v%30,d+=2;else switch(v){case Pe.TEXT_COMPACTION_MODE_LATCH:c[d++]=Pe.TEXT_COMPACTION_MODE_LATCH;break;case Pe.BYTE_COMPACTION_MODE_LATCH:case Pe.BYTE_COMPACTION_MODE_LATCH_6:case Pe.NUMERIC_COMPACTION_MODE_LATCH:case Pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Pe.MACRO_PDF417_TERMINATOR:a--,x=!0;break;case Pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=Pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=i[a++],u[d]=v,d++;break}}return Pe.decodeTextCompaction(c,u,d,l),a}static decodeTextCompaction(i,a,l,c){let u=tn.ALPHA,d=tn.ALPHA,x=0;for(;x<l;){let v=i[x],C="";switch(u){case tn.ALPHA:if(v<26)C=String.fromCharCode(65+v);else switch(v){case 26:C=" ";break;case Pe.LL:u=tn.LOWER;break;case Pe.ML:u=tn.MIXED;break;case Pe.PS:d=u,u=tn.PUNCT_SHIFT;break;case Pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[x]);break;case Pe.TEXT_COMPACTION_MODE_LATCH:u=tn.ALPHA;break}break;case tn.LOWER:if(v<26)C=String.fromCharCode(97+v);else switch(v){case 26:C=" ";break;case Pe.AS:d=u,u=tn.ALPHA_SHIFT;break;case Pe.ML:u=tn.MIXED;break;case Pe.PS:d=u,u=tn.PUNCT_SHIFT;break;case Pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[x]);break;case Pe.TEXT_COMPACTION_MODE_LATCH:u=tn.ALPHA;break}break;case tn.MIXED:if(v<Pe.PL)C=Pe.MIXED_CHARS[v];else switch(v){case Pe.PL:u=tn.PUNCT;break;case 26:C=" ";break;case Pe.LL:u=tn.LOWER;break;case Pe.AL:u=tn.ALPHA;break;case Pe.PS:d=u,u=tn.PUNCT_SHIFT;break;case Pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[x]);break;case Pe.TEXT_COMPACTION_MODE_LATCH:u=tn.ALPHA;break}break;case tn.PUNCT:if(v<Pe.PAL)C=Pe.PUNCT_CHARS[v];else switch(v){case Pe.PAL:u=tn.ALPHA;break;case Pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[x]);break;case Pe.TEXT_COMPACTION_MODE_LATCH:u=tn.ALPHA;break}break;case tn.ALPHA_SHIFT:if(u=d,v<26)C=String.fromCharCode(65+v);else switch(v){case 26:C=" ";break;case Pe.TEXT_COMPACTION_MODE_LATCH:u=tn.ALPHA;break}break;case tn.PUNCT_SHIFT:if(u=d,v<Pe.PAL)C=Pe.PUNCT_CHARS[v];else switch(v){case Pe.PAL:u=tn.ALPHA;break;case Pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[x]);break;case Pe.TEXT_COMPACTION_MODE_LATCH:u=tn.ALPHA;break}break}C!==""&&c.append(C),x++}}static byteCompaction(i,a,l,c,u){let d=new Jc,x=0,v=0,C=!1;switch(i){case Pe.BYTE_COMPACTION_MODE_LATCH:let B=new Int32Array(6),V=a[c++];for(;c<a[0]&&!C;)switch(B[x++]=V,v=900*v+V,V=a[c++],V){case Pe.TEXT_COMPACTION_MODE_LATCH:case Pe.BYTE_COMPACTION_MODE_LATCH:case Pe.NUMERIC_COMPACTION_MODE_LATCH:case Pe.BYTE_COMPACTION_MODE_LATCH_6:case Pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Pe.MACRO_PDF417_TERMINATOR:c--,C=!0;break;default:if(x%5===0&&x>0){for(let ee=0;ee<6;++ee)d.write(Number(mr(v)>>mr(8*(5-ee))));v=0,x=0}break}c===a[0]&&V<Pe.TEXT_COMPACTION_MODE_LATCH&&(B[x++]=V);for(let ee=0;ee<x;ee++)d.write(B[ee]);break;case Pe.BYTE_COMPACTION_MODE_LATCH_6:for(;c<a[0]&&!C;){let ee=a[c++];if(ee<Pe.TEXT_COMPACTION_MODE_LATCH)x++,v=900*v+ee;else switch(ee){case Pe.TEXT_COMPACTION_MODE_LATCH:case Pe.BYTE_COMPACTION_MODE_LATCH:case Pe.NUMERIC_COMPACTION_MODE_LATCH:case Pe.BYTE_COMPACTION_MODE_LATCH_6:case Pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Pe.MACRO_PDF417_TERMINATOR:c--,C=!0;break}if(x%5===0&&x>0){for(let ge=0;ge<6;++ge)d.write(Number(mr(v)>>mr(8*(5-ge))));v=0,x=0}}break}return u.append(F.decode(d.toByteArray(),l)),c}static numericCompaction(i,a,l){let c=0,u=!1,d=new Int32Array(Pe.MAX_NUMERIC_CODEWORDS);for(;a<i[0]&&!u;){let x=i[a++];if(a===i[0]&&(u=!0),x<Pe.TEXT_COMPACTION_MODE_LATCH)d[c]=x,c++;else switch(x){case Pe.TEXT_COMPACTION_MODE_LATCH:case Pe.BYTE_COMPACTION_MODE_LATCH:case Pe.BYTE_COMPACTION_MODE_LATCH_6:case Pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Pe.MACRO_PDF417_TERMINATOR:a--,u=!0;break}(c%Pe.MAX_NUMERIC_CODEWORDS===0||x===Pe.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(l.append(Pe.decodeBase900toBase10(d,c)),c=0)}return a}static decodeBase900toBase10(i,a){let l=mr(0);for(let u=0;u<a;u++)l+=Pe.EXP900[a-u-1]*mr(i[u]);let c=l.toString();if(c.charAt(0)!=="1")throw new P;return c.substring(1)}}Pe.TEXT_COMPACTION_MODE_LATCH=900,Pe.BYTE_COMPACTION_MODE_LATCH=901,Pe.NUMERIC_COMPACTION_MODE_LATCH=902,Pe.BYTE_COMPACTION_MODE_LATCH_6=924,Pe.ECI_USER_DEFINED=925,Pe.ECI_GENERAL_PURPOSE=926,Pe.ECI_CHARSET=927,Pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Pe.MACRO_PDF417_TERMINATOR=922,Pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Pe.MAX_NUMERIC_CODEWORDS=15,Pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Pe.PL=25,Pe.LL=27,Pe.AS=27,Pe.ML=28,Pe.AL=28,Pe.PS=29,Pe.PAL=29,Pe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Pe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Pe.EXP900=Br()?$c():[],Pe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Yt{constructor(){}static decode(i,a,l,c,u,d,x){let v=new Fa(i,a,l,c,u),C=null,B=null,V;for(let ve=!0;;ve=!1){if(a!=null&&(C=Yt.getRowIndicatorColumn(i,v,a,!0,d,x)),c!=null&&(B=Yt.getRowIndicatorColumn(i,v,c,!1,d,x)),V=Yt.merge(C,B),V==null)throw ne.getNotFoundInstance();let Ae=V.getBoundingBox();if(ve&&Ae!=null&&(Ae.getMinY()<v.getMinY()||Ae.getMaxY()>v.getMaxY()))v=Ae;else break}V.setBoundingBox(v);let ee=V.getBarcodeColumnCount()+1;V.setDetectionResultColumn(0,C),V.setDetectionResultColumn(ee,B);let ge=C!=null;for(let ve=1;ve<=ee;ve++){let Ae=ge?ve:ee-ve;if(V.getDetectionResultColumn(Ae)!==void 0)continue;let Ie;Ae===0||Ae===ee?Ie=new $a(v,Ae===0):Ie=new kr(v),V.setDetectionResultColumn(Ae,Ie);let Fe=-1,nt=Fe;for(let st=v.getMinY();st<=v.getMaxY();st++){if(Fe=Yt.getStartColumn(V,Ae,st,ge),Fe<0||Fe>v.getMaxX()){if(nt===-1)continue;Fe=nt}let it=Yt.detectCodeword(i,v.getMinX(),v.getMaxX(),ge,Fe,st,d,x);it!=null&&(Ie.setCodeword(st,it),nt=Fe,d=Math.min(d,it.getWidth()),x=Math.max(x,it.getWidth()))}}return Yt.createDecoderResult(V)}static merge(i,a){if(i==null&&a==null)return null;let l=Yt.getBarcodeMetadata(i,a);if(l==null)return null;let c=Fa.merge(Yt.adjustBoundingBox(i),Yt.adjustBoundingBox(a));return new Ua(l,c)}static adjustBoundingBox(i){if(i==null)return null;let a=i.getRowHeights();if(a==null)return null;let l=Yt.getMax(a),c=0;for(let x of a)if(c+=l-x,x>0)break;let u=i.getCodewords();for(let x=0;c>0&&u[x]==null;x++)c--;let d=0;for(let x=a.length-1;x>=0&&(d+=l-a[x],!(a[x]>0));x--);for(let x=u.length-1;d>0&&u[x]==null;x--)d--;return i.getBoundingBox().addMissingRows(c,d,i.isLeft())}static getMax(i){let a=-1;for(let l of i)a=Math.max(a,l);return a}static getBarcodeMetadata(i,a){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let c;return a==null||(c=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==c.getColumnCount()&&l.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&l.getRowCount()!==c.getRowCount()?null:l}static getRowIndicatorColumn(i,a,l,c,u,d){let x=new $a(a,c);for(let v=0;v<2;v++){let C=v===0?1:-1,B=Math.trunc(Math.trunc(l.getX()));for(let V=Math.trunc(Math.trunc(l.getY()));V<=a.getMaxY()&&V>=a.getMinY();V+=C){let ee=Yt.detectCodeword(i,0,i.getWidth(),c,B,V,u,d);ee!=null&&(x.setCodeword(V,ee),c?B=ee.getStartX():B=ee.getEndX())}}return x}static adjustCodewordCount(i,a){let l=a[0][1],c=l.getValue(),u=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-Yt.getNumberOfECCodeWords(i.getBarcodeECLevel());if(c.length===0){if(u<1||u>Dt.MAX_CODEWORDS_IN_BARCODE)throw ne.getNotFoundInstance();l.setValue(u)}else c[0]!==u&&l.setValue(u)}static createDecoderResult(i){let a=Yt.createBarcodeMatrix(i);Yt.adjustCodewordCount(i,a);let l=new Array,c=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),u=[],d=new Array;for(let v=0;v<i.getBarcodeRowCount();v++)for(let C=0;C<i.getBarcodeColumnCount();C++){let B=a[v][C+1].getValue(),V=v*i.getBarcodeColumnCount()+C;B.length===0?l.push(V):B.length===1?c[V]=B[0]:(d.push(V),u.push(B))}let x=new Array(u.length);for(let v=0;v<x.length;v++)x[v]=u[v];return Yt.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),c,Dt.toIntArray(l),Dt.toIntArray(d),x)}static createDecoderResultFromAmbiguousValues(i,a,l,c,u){let d=new Int32Array(c.length),x=100;for(;x-- >0;){for(let v=0;v<d.length;v++)a[c[v]]=u[v][d[v]];try{return Yt.decodeCodewords(a,i,l)}catch(v){if(!(v instanceof A))throw v}if(d.length===0)throw A.getChecksumInstance();for(let v=0;v<d.length;v++)if(d[v]<u[v].length-1){d[v]++;break}else if(d[v]=0,v===d.length-1)throw A.getChecksumInstance()}throw A.getChecksumInstance()}static createBarcodeMatrix(i){let a=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let c=0;c<a.length;c++)for(let u=0;u<a[c].length;u++)a[c][u]=new Ns;let l=0;for(let c of i.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=a.length)continue;a[d][l].setValue(u.getValue())}}}l++}return a}static isValidBarcodeColumn(i,a){return a>=0&&a<=i.getBarcodeColumnCount()+1}static getStartColumn(i,a,l,c){let u=c?1:-1,d=null;if(Yt.isValidBarcodeColumn(i,a-u)&&(d=i.getDetectionResultColumn(a-u).getCodeword(l)),d!=null)return c?d.getEndX():d.getStartX();if(d=i.getDetectionResultColumn(a).getCodewordNearby(l),d!=null)return c?d.getStartX():d.getEndX();if(Yt.isValidBarcodeColumn(i,a-u)&&(d=i.getDetectionResultColumn(a-u).getCodewordNearby(l)),d!=null)return c?d.getEndX():d.getStartX();let x=0;for(;Yt.isValidBarcodeColumn(i,a-u);){a-=u;for(let v of i.getDetectionResultColumn(a).getCodewords())if(v!=null)return(c?v.getEndX():v.getStartX())+u*x*(v.getEndX()-v.getStartX());x++}return c?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,a,l,c,u,d,x,v){u=Yt.adjustCodewordStartColumn(i,a,l,c,u,d);let C=Yt.getModuleBitCount(i,a,l,c,u,d);if(C==null)return null;let B,V=Be.sum(C);if(c)B=u+V;else{for(let ve=0;ve<C.length/2;ve++){let Ae=C[ve];C[ve]=C[C.length-1-ve],C[C.length-1-ve]=Ae}B=u,u=B-V}if(!Yt.checkCodewordSkew(V,x,v))return null;let ee=Fi.getDecodedValue(C),ge=Dt.getCodeword(ee);return ge===-1?null:new ya(u,B,Yt.getCodewordBucketNumber(ee),ge)}static getModuleBitCount(i,a,l,c,u,d){let x=u,v=new Int32Array(8),C=0,B=c?1:-1,V=c;for(;(c?x<l:x>=a)&&C<v.length;)i.get(x,d)===V?(v[C]++,x+=B):(C++,V=!V);return C===v.length||x===(c?l:a)&&C===v.length-1?v:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,a,l,c,u,d){let x=u,v=c?-1:1;for(let C=0;C<2;C++){for(;(c?x>=a:x<l)&&c===i.get(x,d);){if(Math.abs(u-x)>Yt.CODEWORD_SKEW_SIZE)return u;x+=v}v=-v,c=!c}return x}static checkCodewordSkew(i,a,l){return a-Yt.CODEWORD_SKEW_SIZE<=i&&i<=l+Yt.CODEWORD_SKEW_SIZE}static decodeCodewords(i,a,l){if(i.length===0)throw P.getFormatInstance();let c=1<<a+1,u=Yt.correctErrors(i,l,c);Yt.verifyCodewordCount(i,c);let d=Pe.decode(i,""+a);return d.setErrorsCorrected(u),d.setErasures(l.length),d}static correctErrors(i,a,l){if(a!=null&&a.length>l/2+Yt.MAX_ERRORS||l<0||l>Yt.MAX_EC_CODEWORDS)throw A.getChecksumInstance();return Yt.errorCorrection.decode(i,l,a)}static verifyCodewordCount(i,a){if(i.length<4)throw P.getFormatInstance();let l=i[0];if(l>i.length)throw P.getFormatInstance();if(l===0)if(a<i.length)i[0]=i.length-a;else throw P.getFormatInstance()}static getBitCountForCodeword(i){let a=new Int32Array(8),l=0,c=a.length-1;for(;!((i&1)!==l&&(l=i&1,c--,c<0));)a[c]++,i>>=1;return a}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return Yt.getCodewordBucketNumber(Yt.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let a=new Qr;for(let l=0;l<i.length;l++){a.format("Row %2d: ",l);for(let c=0;c<i[l].length;c++){let u=i[l][c];u.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}a.format("%n")}return a.toString()}}Yt.CODEWORD_SKEW_SIZE=2,Yt.MAX_ERRORS=3,Yt.MAX_EC_CODEWORDS=512,Yt.errorCorrection=new Zl;class fi{decode(i,a=null){let l=fi.decode(i,a,!1);if(l==null||l.length===0||l[0]==null)throw ne.getNotFoundInstance();return l[0]}decodeMultiple(i,a=null){try{return fi.decode(i,a,!0)}catch(l){throw l instanceof P||l instanceof A?ne.getNotFoundInstance():l}}static decode(i,a,l){const c=new Array,u=Gt.detectMultiple(i,a,l);for(const d of u.getPoints()){const x=Yt.decode(u.getBits(),d[4],d[5],d[6],d[7],fi.getMinCodewordWidth(d),fi.getMaxCodewordWidth(d)),v=new ie(x.getText(),x.getRawBytes(),void 0,d,se.PDF_417);v.putMetadata(be.ERROR_CORRECTION_LEVEL,x.getECLevel());const C=x.getOther();C!=null&&v.putMetadata(be.PDF417_EXTRA_METADATA,C),c.push(v)}return c.map(d=>d)}static getMaxWidth(i,a){return i==null||a==null?0:Math.trunc(Math.abs(i.getX()-a.getX()))}static getMinWidth(i,a){return i==null||a==null?D.MAX_VALUE:Math.trunc(Math.abs(i.getX()-a.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(fi.getMaxWidth(i[0],i[4]),fi.getMaxWidth(i[6],i[2])*Dt.MODULES_IN_CODEWORD/Dt.MODULES_IN_STOP_PATTERN),Math.max(fi.getMaxWidth(i[1],i[5]),fi.getMaxWidth(i[7],i[3])*Dt.MODULES_IN_CODEWORD/Dt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(fi.getMinWidth(i[0],i[4]),fi.getMinWidth(i[6],i[2])*Dt.MODULES_IN_CODEWORD/Dt.MODULES_IN_STOP_PATTERN),Math.min(fi.getMinWidth(i[1],i[5]),fi.getMinWidth(i[7],i[3])*Dt.MODULES_IN_CODEWORD/Dt.MODULES_IN_STOP_PATTERN)))}reset(){}}class ts extends y{}ts.kind="ReaderException";class ul{constructor(i,a){this.verbose=i===!0,a&&this.setHints(a)}decode(i,a){return a&&this.setHints(a),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const a=!r(i)&&i.get(K.TRY_HARDER)===!0,l=r(i)?null:i.get(K.POSSIBLE_FORMATS),c=new Array;if(!r(l)){const u=l.some(d=>d===se.UPC_A||d===se.UPC_E||d===se.EAN_13||d===se.EAN_8||d===se.CODABAR||d===se.CODE_39||d===se.CODE_93||d===se.CODE_128||d===se.ITF||d===se.RSS_14||d===se.RSS_EXPANDED);u&&!a&&c.push(new ma(i,this.verbose)),l.includes(se.QR_CODE)&&c.push(new xa),l.includes(se.DATA_MATRIX)&&c.push(new Mi),l.includes(se.AZTEC)&&c.push(new ft),l.includes(se.PDF_417)&&c.push(new fi),u&&a&&c.push(new ma(i,this.verbose))}c.length===0&&(a||c.push(new ma(i,this.verbose)),c.push(new xa),c.push(new Mi),c.push(new ft),c.push(new fi),a&&c.push(new ma(i,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new ts("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(i,this.hints)}catch(l){if(l instanceof ts)continue}throw new ne("No MultiFormat Readers were able to detect the code.")}}class to extends G{constructor(i=null,a=500){const l=new ul;l.setHints(i),super(l,a)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class fl extends G{constructor(i=500){super(new fi,i)}}class hl extends G{constructor(i=500){super(new xa,i)}}var no;(function(Y){Y[Y.ERROR_CORRECTION=0]="ERROR_CORRECTION",Y[Y.CHARACTER_SET=1]="CHARACTER_SET",Y[Y.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",Y[Y.MIN_SIZE=3]="MIN_SIZE",Y[Y.MAX_SIZE=4]="MAX_SIZE",Y[Y.MARGIN=5]="MARGIN",Y[Y.PDF417_COMPACT=6]="PDF417_COMPACT",Y[Y.PDF417_COMPACTION=7]="PDF417_COMPACTION",Y[Y.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",Y[Y.AZTEC_LAYERS=9]="AZTEC_LAYERS",Y[Y.QR_VERSION=10]="QR_VERSION"})(no||(no={}));var hi=no;class ns{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Oe(i,Int32Array.from([1])))}buildGenerator(i){const a=this.cachedGenerators;if(i>=a.length){let l=a[a.length-1];const c=this.field;for(let u=a.length;u<=i;u++){const d=l.multiply(new Oe(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));a.push(d),l=d}}return a[i]}encode(i,a){if(a===0)throw new w("No error correction bytes");const l=i.length-a;if(l<=0)throw new w("No data bytes provided");const c=this.buildGenerator(a),u=new Int32Array(l);O.arraycopy(i,0,u,0,l);let d=new Oe(this.field,u);d=d.multiplyByMonomial(a,1);const v=d.divide(c)[1].getCoefficients(),C=a-v.length;for(let B=0;B<C;B++)i[l+B]=0;O.arraycopy(v,0,i,l+C,v.length)}}class Cn{constructor(){}static applyMaskPenaltyRule1(i){return Cn.applyMaskPenaltyRule1Internal(i,!0)+Cn.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let a=0;const l=i.getArray(),c=i.getWidth(),u=i.getHeight();for(let d=0;d<u-1;d++){const x=l[d];for(let v=0;v<c-1;v++){const C=x[v];C===x[v+1]&&C===l[d+1][v]&&C===l[d+1][v+1]&&a++}}return Cn.N2*a}static applyMaskPenaltyRule3(i){let a=0;const l=i.getArray(),c=i.getWidth(),u=i.getHeight();for(let d=0;d<u;d++)for(let x=0;x<c;x++){const v=l[d];x+6<c&&v[x]===1&&v[x+1]===0&&v[x+2]===1&&v[x+3]===1&&v[x+4]===1&&v[x+5]===0&&v[x+6]===1&&(Cn.isWhiteHorizontal(v,x-4,x)||Cn.isWhiteHorizontal(v,x+7,x+11))&&a++,d+6<u&&l[d][x]===1&&l[d+1][x]===0&&l[d+2][x]===1&&l[d+3][x]===1&&l[d+4][x]===1&&l[d+5][x]===0&&l[d+6][x]===1&&(Cn.isWhiteVertical(l,x,d-4,d)||Cn.isWhiteVertical(l,x,d+7,d+11))&&a++}return a*Cn.N3}static isWhiteHorizontal(i,a,l){a=Math.max(a,0),l=Math.min(l,i.length);for(let c=a;c<l;c++)if(i[c]===1)return!1;return!0}static isWhiteVertical(i,a,l,c){l=Math.max(l,0),c=Math.min(c,i.length);for(let u=l;u<c;u++)if(i[u][a]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let a=0;const l=i.getArray(),c=i.getWidth(),u=i.getHeight();for(let v=0;v<u;v++){const C=l[v];for(let B=0;B<c;B++)C[B]===1&&a++}const d=i.getHeight()*i.getWidth();return Math.floor(Math.abs(a*2-d)*10/d)*Cn.N4}static getDataMaskBit(i,a,l){let c,u;switch(i){case 0:c=l+a&1;break;case 1:c=l&1;break;case 2:c=a%3;break;case 3:c=(l+a)%3;break;case 4:c=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:u=l*a,c=(u&1)+u%3;break;case 6:u=l*a,c=(u&1)+u%3&1;break;case 7:u=l*a,c=u%3+(l+a&1)&1;break;default:throw new w("Invalid mask pattern: "+i)}return c===0}static applyMaskPenaltyRule1Internal(i,a){let l=0;const c=a?i.getHeight():i.getWidth(),u=a?i.getWidth():i.getHeight(),d=i.getArray();for(let x=0;x<c;x++){let v=0,C=-1;for(let B=0;B<u;B++){const V=a?d[x][B]:d[B][x];V===C?v++:(v>=5&&(l+=Cn.N1+(v-5)),v=1,C=V)}v>=5&&(l+=Cn.N1+(v-5))}return l}}Cn.N1=3,Cn.N2=3,Cn.N3=40,Cn.N4=10;class is{constructor(i,a){this.width=i,this.height=a;const l=new Array(a);for(let c=0;c!==a;c++)l[c]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,a){return this.bytes[a][i]}getArray(){return this.bytes}setNumber(i,a,l){this.bytes[a][i]=l}setBoolean(i,a,l){this.bytes[a][i]=l?1:0}clear(i){for(const a of this.bytes)T.fill(a,i)}equals(i){if(!(i instanceof is))return!1;const a=i;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,c=this.height;l<c;++l){const u=this.bytes[l],d=a.bytes[l];for(let x=0,v=this.width;x<v;++x)if(u[x]!==d[x])return!1}return!0}toString(){const i=new re;for(let a=0,l=this.height;a<l;++a){const c=this.bytes[a];for(let u=0,d=this.width;u<d;++u)switch(c[u]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class xr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new re;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<xr.NUM_MASK_PATTERNS}}xr.NUM_MASK_PATTERNS=8;class mn extends y{}mn.kind="WriterException";class N{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,a,l,c,u){N.clearMatrix(u),N.embedBasicPatterns(l,u),N.embedTypeInfo(a,c,u),N.maybeEmbedVersionInfo(l,u),N.embedDataBits(i,c,u)}static embedBasicPatterns(i,a){N.embedPositionDetectionPatternsAndSeparators(a),N.embedDarkDotAtLeftBottomCorner(a),N.maybeEmbedPositionAdjustmentPatterns(i,a),N.embedTimingPatterns(a)}static embedTypeInfo(i,a,l){const c=new j;N.makeTypeInfoBits(i,a,c);for(let u=0,d=c.getSize();u<d;++u){const x=c.get(c.getSize()-1-u),v=N.TYPE_INFO_COORDINATES[u],C=v[0],B=v[1];if(l.setBoolean(C,B,x),u<8){const V=l.getWidth()-u-1;l.setBoolean(V,8,x)}else{const ee=l.getHeight()-7+(u-8);l.setBoolean(8,ee,x)}}}static maybeEmbedVersionInfo(i,a){if(i.getVersionNumber()<7)return;const l=new j;N.makeVersionInfoBits(i,l);let c=6*3-1;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const x=l.get(c);c--,a.setBoolean(u,a.getHeight()-11+d,x),a.setBoolean(a.getHeight()-11+d,u,x)}}static embedDataBits(i,a,l){let c=0,u=-1,d=l.getWidth()-1,x=l.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);x>=0&&x<l.getHeight();){for(let v=0;v<2;++v){const C=d-v;if(!N.isEmpty(l.get(C,x)))continue;let B;c<i.getSize()?(B=i.get(c),++c):B=!1,a!==255&&Cn.getDataMaskBit(a,C,x)&&(B=!B),l.setBoolean(C,x,B)}x+=u}u=-u,x+=u,d-=2}if(c!==i.getSize())throw new mn("Not all bits consumed: "+c+"/"+i.getSize())}static findMSBSet(i){return 32-D.numberOfLeadingZeros(i)}static calculateBCHCode(i,a){if(a===0)throw new w("0 polynomial");const l=N.findMSBSet(a);for(i<<=l-1;N.findMSBSet(i)>=l;)i^=a<<N.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,a,l){if(!xr.isValidMaskPattern(a))throw new mn("Invalid mask pattern");const c=i.getBits()<<3|a;l.appendBits(c,5);const u=N.calculateBCHCode(c,N.TYPE_INFO_POLY);l.appendBits(u,10);const d=new j;if(d.appendBits(N.TYPE_INFO_MASK_PATTERN,15),l.xor(d),l.getSize()!==15)throw new mn("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,a){a.appendBits(i.getVersionNumber(),6);const l=N.calculateBCHCode(i.getVersionNumber(),N.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new mn("should not happen but we got: "+a.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let a=8;a<i.getWidth()-8;++a){const l=(a+1)%2;N.isEmpty(i.get(a,6))&&i.setNumber(a,6,l),N.isEmpty(i.get(6,a))&&i.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new mn;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,a,l){for(let c=0;c<8;++c){if(!N.isEmpty(l.get(i+c,a)))throw new mn;l.setNumber(i+c,a,0)}}static embedVerticalSeparationPattern(i,a,l){for(let c=0;c<7;++c){if(!N.isEmpty(l.get(i,a+c)))throw new mn;l.setNumber(i,a+c,0)}}static embedPositionAdjustmentPattern(i,a,l){for(let c=0;c<5;++c){const u=N.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)l.setNumber(i+d,a+c,u[d])}}static embedPositionDetectionPattern(i,a,l){for(let c=0;c<7;++c){const u=N.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)l.setNumber(i+d,a+c,u[d])}}static embedPositionDetectionPatternsAndSeparators(i){const a=N.POSITION_DETECTION_PATTERN[0].length;N.embedPositionDetectionPattern(0,0,i),N.embedPositionDetectionPattern(i.getWidth()-a,0,i),N.embedPositionDetectionPattern(0,i.getWidth()-a,i);const l=8;N.embedHorizontalSeparationPattern(0,l-1,i),N.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),N.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const c=7;N.embedVerticalSeparationPattern(c,0,i),N.embedVerticalSeparationPattern(i.getHeight()-c-1,0,i),N.embedVerticalSeparationPattern(c,i.getHeight()-c,i)}static maybeEmbedPositionAdjustmentPatterns(i,a){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,c=N.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let u=0,d=c.length;u!==d;u++){const x=c[u];if(x>=0)for(let v=0;v!==d;v++){const C=c[v];C>=0&&N.isEmpty(a.get(C,x))&&N.embedPositionAdjustmentPattern(C-2,x-2,a)}}}}N.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),N.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),N.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),N.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),N.VERSION_INFO_POLY=7973,N.TYPE_INFO_POLY=1335,N.TYPE_INFO_MASK_PATTERN=21522;class Z{constructor(i,a){this.dataBytes=i,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class de{constructor(){}static calculateMaskPenalty(i){return Cn.applyMaskPenaltyRule1(i)+Cn.applyMaskPenaltyRule2(i)+Cn.applyMaskPenaltyRule3(i)+Cn.applyMaskPenaltyRule4(i)}static encode(i,a,l=null){let c=de.DEFAULT_BYTE_MODE_ENCODING;const u=l!==null&&l.get(hi.CHARACTER_SET)!==void 0;u&&(c=l.get(hi.CHARACTER_SET).toString());const d=this.chooseMode(i,c),x=new j;if(d===Ot.BYTE&&(u||de.DEFAULT_BYTE_MODE_ENCODING!==c)){const st=M.getCharacterSetECIByName(c);st!==void 0&&this.appendECI(st,x)}this.appendModeInfo(d,x);const v=new j;this.appendBytes(i,d,v,c);let C;if(l!==null&&l.get(hi.QR_VERSION)!==void 0){const st=Number.parseInt(l.get(hi.QR_VERSION).toString(),10);C=It.getVersionForNumber(st);const it=this.calculateBitsNeeded(d,x,v,C);if(!this.willFit(it,C,a))throw new mn("Data too big for requested version")}else C=this.recommendVersion(a,d,x,v);const B=new j;B.appendBitArray(x);const V=d===Ot.BYTE?v.getSizeInBytes():i.length;this.appendLengthInfo(V,C,d,B),B.appendBitArray(v);const ee=C.getECBlocksForLevel(a),ge=C.getTotalCodewords()-ee.getTotalECCodewords();this.terminateBits(ge,B);const ve=this.interleaveWithECBytes(B,C.getTotalCodewords(),ge,ee.getNumBlocks()),Ae=new xr;Ae.setECLevel(a),Ae.setMode(d),Ae.setVersion(C);const Ie=C.getDimensionForVersion(),Fe=new is(Ie,Ie),nt=this.chooseMaskPattern(ve,a,C,Fe);return Ae.setMaskPattern(nt),N.buildMatrix(ve,a,C,nt,Fe),Ae.setMatrix(Fe),Ae}static recommendVersion(i,a,l,c){const u=this.calculateBitsNeeded(a,l,c,It.getVersionForNumber(1)),d=this.chooseVersion(u,i),x=this.calculateBitsNeeded(a,l,c,d);return this.chooseVersion(x,i)}static calculateBitsNeeded(i,a,l,c){return a.getSize()+i.getCharacterCountBits(c)+l.getSize()}static getAlphanumericCode(i){return i<de.ALPHANUMERIC_TABLE.length?de.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,a=null){if(M.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(i))return Ot.KANJI;let l=!1,c=!1;for(let u=0,d=i.length;u<d;++u){const x=i.charAt(u);if(de.isDigit(x))l=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)c=!0;else return Ot.BYTE}return c?Ot.ALPHANUMERIC:l?Ot.NUMERIC:Ot.BYTE}static isOnlyDoubleByteKanji(i){let a;try{a=F.encode(i,M.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let c=0;c<l;c+=2){const u=a[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(i,a,l,c){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let x=0;x<xr.NUM_MASK_PATTERNS;x++){N.buildMatrix(i,a,l,x,c);let v=this.calculateMaskPenalty(c);v<u&&(u=v,d=x)}return d}static chooseVersion(i,a){for(let l=1;l<=40;l++){const c=It.getVersionForNumber(l);if(de.willFit(i,c,a))return c}throw new mn("Data too big")}static willFit(i,a,l){const c=a.getTotalCodewords(),d=a.getECBlocksForLevel(l).getTotalECCodewords(),x=c-d,v=(i+7)/8;return x>=v}static terminateBits(i,a){const l=i*8;if(a.getSize()>l)throw new mn("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let d=0;d<4&&a.getSize()<l;++d)a.appendBit(!1);const c=a.getSize()&7;if(c>0)for(let d=c;d<8;d++)a.appendBit(!1);const u=i-a.getSizeInBytes();for(let d=0;d<u;++d)a.appendBits(d&1?17:236,8);if(a.getSize()!==l)throw new mn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,a,l,c,u,d){if(c>=l)throw new mn("Block ID too large");const x=i%l,v=l-x,C=Math.floor(i/l),B=C+1,V=Math.floor(a/l),ee=V+1,ge=C-V,ve=B-ee;if(ge!==ve)throw new mn("EC bytes mismatch");if(l!==v+x)throw new mn("RS blocks mismatch");if(i!==(V+ge)*v+(ee+ve)*x)throw new mn("Total bytes mismatch");c<v?(u[0]=V,d[0]=ge):(u[0]=ee,d[0]=ve)}static interleaveWithECBytes(i,a,l,c){if(i.getSizeInBytes()!==l)throw new mn("Number of bits and data bytes does not match");let u=0,d=0,x=0;const v=new Array;for(let B=0;B<c;++B){const V=new Int32Array(1),ee=new Int32Array(1);de.getNumDataBytesAndNumECBytesForBlockID(a,l,c,B,V,ee);const ge=V[0],ve=new Uint8Array(ge);i.toBytes(8*u,ve,0,ge);const Ae=de.generateECBytes(ve,ee[0]);v.push(new Z(ve,Ae)),d=Math.max(d,ge),x=Math.max(x,Ae.length),u+=V[0]}if(l!==u)throw new mn("Data bytes does not match offset");const C=new j;for(let B=0;B<d;++B)for(const V of v){const ee=V.getDataBytes();B<ee.length&&C.appendBits(ee[B],8)}for(let B=0;B<x;++B)for(const V of v){const ee=V.getErrorCorrectionBytes();B<ee.length&&C.appendBits(ee[B],8)}if(a!==C.getSizeInBytes())throw new mn("Interleaving error: "+a+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(i,a){const l=i.length,c=new Int32Array(l+a);for(let d=0;d<l;d++)c[d]=i[d]&255;new ns(qe.QR_CODE_FIELD_256).encode(c,a);const u=new Uint8Array(a);for(let d=0;d<a;d++)u[d]=c[l+d];return u}static appendModeInfo(i,a){a.appendBits(i.getBits(),4)}static appendLengthInfo(i,a,l,c){const u=l.getCharacterCountBits(a);if(i>=1<<u)throw new mn(i+" is bigger than "+((1<<u)-1));c.appendBits(i,u)}static appendBytes(i,a,l,c){switch(a){case Ot.NUMERIC:de.appendNumericBytes(i,l);break;case Ot.ALPHANUMERIC:de.appendAlphanumericBytes(i,l);break;case Ot.BYTE:de.append8BitBytes(i,l,c);break;case Ot.KANJI:de.appendKanjiBytes(i,l);break;default:throw new mn("Invalid mode: "+a)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const a=de.getDigit(i);return a>=0&&a<=9}static appendNumericBytes(i,a){const l=i.length;let c=0;for(;c<l;){const u=de.getDigit(i.charAt(c));if(c+2<l){const d=de.getDigit(i.charAt(c+1)),x=de.getDigit(i.charAt(c+2));a.appendBits(u*100+d*10+x,10),c+=3}else if(c+1<l){const d=de.getDigit(i.charAt(c+1));a.appendBits(u*10+d,7),c+=2}else a.appendBits(u,4),c++}}static appendAlphanumericBytes(i,a){const l=i.length;let c=0;for(;c<l;){const u=de.getAlphanumericCode(i.charCodeAt(c));if(u===-1)throw new mn;if(c+1<l){const d=de.getAlphanumericCode(i.charCodeAt(c+1));if(d===-1)throw new mn;a.appendBits(u*45+d,11),c+=2}else a.appendBits(u,6),c++}}static append8BitBytes(i,a,l){let c;try{c=F.encode(i,l)}catch(u){throw new mn(u)}for(let u=0,d=c.length;u!==d;u++){const x=c[u];a.appendBits(x,8)}}static appendKanjiBytes(i,a){let l;try{l=F.encode(i,M.SJIS)}catch(u){throw new mn(u)}const c=l.length;for(let u=0;u<c;u+=2){const d=l[u]&255,x=l[u+1]&255,v=d<<8&4294967295|x;let C=-1;if(v>=33088&&v<=40956?C=v-33088:v>=57408&&v<=60351&&(C=v-49472),C===-1)throw new mn("Invalid byte sequence");const B=(C>>8)*192+(C&255);a.appendBits(B,13)}}static appendECI(i,a){a.appendBits(Ot.ECI.getBits(),4),a.appendBits(i.getValue(),8)}}de.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),de.DEFAULT_BYTE_MODE_ENCODING=M.UTF8.getName();class we{write(i,a,l,c=null){if(i.length===0)throw new w("Found empty contents");if(a<0||l<0)throw new w("Requested dimensions are too small: "+a+"x"+l);let u=yn.L,d=we.QUIET_ZONE_SIZE;c!==null&&(c.get(hi.ERROR_CORRECTION)!==void 0&&(u=yn.fromString(c.get(hi.ERROR_CORRECTION).toString())),c.get(hi.MARGIN)!==void 0&&(d=Number.parseInt(c.get(hi.MARGIN).toString(),10)));const x=de.encode(i,u,c);return this.renderResult(x,a,l,d)}writeToDom(i,a,l,c,u=null){typeof i=="string"&&(i=document.querySelector(i));const d=this.write(a,l,c,u);i&&i.appendChild(d)}renderResult(i,a,l,c){const u=i.getMatrix();if(u===null)throw new Le;const d=u.getWidth(),x=u.getHeight(),v=d+c*2,C=x+c*2,B=Math.max(a,v),V=Math.max(l,C),ee=Math.min(Math.floor(B/v),Math.floor(V/C)),ge=Math.floor((B-d*ee)/2),ve=Math.floor((V-x*ee)/2),Ae=this.createSVGElement(B,V);for(let Ie=0,Fe=ve;Ie<x;Ie++,Fe+=ee)for(let nt=0,st=ge;nt<d;nt++,st+=ee)if(u.get(nt,Ie)===1){const it=this.createSvgRectElement(st,Fe,ee,ee);Ae.appendChild(it)}return Ae}createSVGElement(i,a){const l=document.createElementNS(we.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(i,a,l,c){const u=document.createElementNS(we.SVG_NS,"rect");return u.setAttributeNS(null,"x",i.toString()),u.setAttributeNS(null,"y",a.toString()),u.setAttributeNS(null,"height",l.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}we.QUIET_ZONE_SIZE=4,we.SVG_NS="http://www.w3.org/2000/svg";class Re{encode(i,a,l,c,u){if(i.length===0)throw new w("Found empty contents");if(a!==se.QR_CODE)throw new w("Can only encode QR_CODE, but got "+a);if(l<0||c<0)throw new w(`Requested dimensions are too small: ${l}x${c}`);let d=yn.L,x=Re.QUIET_ZONE_SIZE;u!==null&&(u.get(hi.ERROR_CORRECTION)!==void 0&&(d=yn.fromString(u.get(hi.ERROR_CORRECTION).toString())),u.get(hi.MARGIN)!==void 0&&(x=Number.parseInt(u.get(hi.MARGIN).toString(),10)));const v=de.encode(i,d,u);return Re.renderResult(v,l,c,x)}static renderResult(i,a,l,c){const u=i.getMatrix();if(u===null)throw new Le;const d=u.getWidth(),x=u.getHeight(),v=d+c*2,C=x+c*2,B=Math.max(a,v),V=Math.max(l,C),ee=Math.min(Math.floor(B/v),Math.floor(V/C)),ge=Math.floor((B-d*ee)/2),ve=Math.floor((V-x*ee)/2),Ae=new ce(B,V);for(let Ie=0,Fe=ve;Ie<x;Ie++,Fe+=ee)for(let nt=0,st=ge;nt<d;nt++,st+=ee)u.get(nt,Ie)===1&&Ae.setRegion(st,Fe,ee,ee);return Ae}}Re.QUIET_ZONE_SIZE=4;class Ye{encode(i,a,l,c,u){let d;switch(a){case se.QR_CODE:d=new Re;break;default:throw new w("No encoder available for format "+a)}return d.encode(i,a,l,c,u)}}class $e extends ue{constructor(i,a,l,c,u,d,x,v){if(super(d,x),this.yuvData=i,this.dataWidth=a,this.dataHeight=l,this.left=c,this.top=u,c+d>a||u+x>l)throw new w("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(d,x)}getRow(i,a){if(i<0||i>=this.getHeight())throw new w("Requested row is outside the image: "+i);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const c=(i+this.top)*this.dataWidth+this.left;return O.arraycopy(this.yuvData,c,a,0,l),a}getMatrix(){const i=this.getWidth(),a=this.getHeight();if(i===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=i*a,c=new Uint8ClampedArray(l);let u=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return O.arraycopy(this.yuvData,u,c,0,l),c;for(let d=0;d<a;d++){const x=d*i;O.arraycopy(this.yuvData,u,c,x,i),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(i,a,l,c){return new $e(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+a,l,c,!1)}renderThumbnail(){const i=this.getWidth()/$e.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/$e.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*a),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let d=0;d<a;d++){const x=d*i;for(let v=0;v<i;v++){const C=c[u+v*$e.THUMBNAIL_SCALE_FACTOR]&255;l[x+v]=4278190080|C*65793}u+=this.dataWidth*$e.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/$e.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/$e.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,a){const l=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<a;c++,u+=this.dataWidth){const d=u+i/2;for(let x=u,v=u+i-1;x<d;x++,v--){const C=l[x];l[x]=l[v],l[v]=C}}}invert(){return new oe(this)}}$e.THUMBNAIL_SCALE_FACTOR=2;class yt extends ue{constructor(i,a,l,c,u,d,x){if(super(a,l),this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=x,i.BYTES_PER_ELEMENT===4){const v=a*l,C=new Uint8ClampedArray(v);for(let B=0;B<v;B++){const V=i[B],ee=V>>16&255,ge=V>>7&510,ve=V&255;C[B]=(ee+ge+ve)/4&255}this.luminances=C}else this.luminances=i;if(c===void 0&&(this.dataWidth=a),u===void 0&&(this.dataHeight=l),d===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new w("Crop rectangle does not fit within image data.")}getRow(i,a){if(i<0||i>=this.getHeight())throw new w("Requested row is outside the image: "+i);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const c=(i+this.top)*this.dataWidth+this.left;return O.arraycopy(this.luminances,c,a,0,l),a}getMatrix(){const i=this.getWidth(),a=this.getHeight();if(i===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=i*a,c=new Uint8ClampedArray(l);let u=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return O.arraycopy(this.luminances,u,c,0,l),c;for(let d=0;d<a;d++){const x=d*i;O.arraycopy(this.luminances,u,c,x,i),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(i,a,l,c){return new yt(this.luminances,l,c,this.dataWidth,this.dataHeight,this.left+i,this.top+a)}invert(){return new oe(this)}}class Rt extends M{static forName(i){return this.getCharacterSetECIByName(i)}}class zt{}zt.ISO_8859_1=M.ISO8859_1;class Ht{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class nn{static singletonList(i){return[i]}static min(i,a){return i.sort(a)[0]}}class Kn{constructor(i){this.previous=i}getPrevious(){return this.previous}}class En extends Kn{constructor(i,a,l){super(i),this.value=a,this.bitCount=l}appendTo(i,a){i.appendBits(this.value,this.bitCount)}add(i,a){return new En(this,i,a)}addBinaryShift(i,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new En(this,i,a)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+D.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class ii extends En{constructor(i,a,l){super(i,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(i,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(i,a){return new ii(this,i,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Qi(Y,i,a){return new ii(Y,i,a)}function ri(Y,i,a){return new En(Y,i,a)}const Kr=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],xi=0,Ir=1,lr=2,io=3,yr=4,ro=new En(null,0,0),Ss=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function dl(Y){for(let i of Y)T.fill(i,-1);return Y[xi][yr]=0,Y[Ir][yr]=0,Y[Ir][xi]=28,Y[io][yr]=0,Y[lr][yr]=0,Y[lr][xi]=15,Y}const Cs=dl(T.createInt32Array(6,6));class Mn{constructor(i,a,l,c){this.token=i,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,a){let l=this.bitCount,c=this.token;if(i!==this.mode){let d=Ss[this.mode][i];c=ri(c,d&65535,d>>16),l+=d>>16}let u=i===lr?4:5;return c=ri(c,a,u),new Mn(c,i,0,l+u)}shiftAndAppend(i,a){let l=this.token,c=this.mode===lr?4:5;return l=ri(l,Cs[this.mode][i],c),l=ri(l,a,5),new Mn(l,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(i){let a=this.token,l=this.mode,c=this.bitCount;if(this.mode===yr||this.mode===lr){let x=Ss[l][xi];a=ri(a,x&65535,x>>16),c+=x>>16,l=xi}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new Mn(a,l,this.binaryShiftByteCount+1,c+u);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(i+1)),d}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=Qi(a,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Mn(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let a=this.bitCount+(Ss[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?a+=Mn.calculateBinaryShiftCost(i)-Mn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(a+=10),a<=i.bitCount}toBitArray(i){let a=[];for(let c=this.endBinaryShift(i.length).token;c!==null;c=c.getPrevious())a.unshift(c);let l=new j;for(const c of a)c.appendTo(l,i);return l}toString(){return L.format("%s bits=%d bytes=%d",Kr[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Mn.INITIAL_STATE=new Mn(ro,xi,0,0);function ao(Y){const i=L.getCharCode(" "),a=L.getCharCode("."),l=L.getCharCode(",");Y[xi][i]=1;const c=L.getCharCode("Z"),u=L.getCharCode("A");for(let ee=u;ee<=c;ee++)Y[xi][ee]=ee-u+2;Y[Ir][i]=1;const d=L.getCharCode("z"),x=L.getCharCode("a");for(let ee=x;ee<=d;ee++)Y[Ir][ee]=ee-x+2;Y[lr][i]=1;const v=L.getCharCode("9"),C=L.getCharCode("0");for(let ee=C;ee<=v;ee++)Y[lr][ee]=ee-C+2;Y[lr][l]=12,Y[lr][a]=13;const B=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let ee=0;ee<B.length;ee++)Y[io][L.getCharCode(B[ee])]=ee;const V=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let ee=0;ee<V.length;ee++)L.getCharCode(V[ee])>0&&(Y[yr][L.getCharCode(V[ee])]=ee);return Y}const rs=ao(T.createInt32Array(5,256));class va{constructor(i){this.text=i}encode(){const i=L.getCharCode(" "),a=L.getCharCode(`
`);let l=nn.singletonList(Mn.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,x=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case L.getCharCode("\r"):d=x===a?2:0;break;case L.getCharCode("."):d=x===i?3:0;break;case L.getCharCode(","):d=x===i?4:0;break;case L.getCharCode(":"):d=x===i?5:0;break;default:d=0}d>0?(l=va.updateStateListForPair(l,u,d),u++):l=this.updateStateListForChar(l,u)}return nn.min(l,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,a){const l=[];for(let c of i)this.updateStateForChar(c,a,l);return va.simplifyStates(l)}updateStateForChar(i,a,l){let c=this.text[a]&255,u=rs[i.getMode()][c]>0,d=null;for(let x=0;x<=yr;x++){let v=rs[x][c];if(v>0){if(d==null&&(d=i.endBinaryShift(a)),!u||x===i.getMode()||x===lr){const C=d.latchAndAppend(x,v);l.push(C)}if(!u&&Cs[i.getMode()][x]>=0){const C=d.shiftAndAppend(x,v);l.push(C)}}}if(i.getBinaryShiftByteCount()>0||rs[i.getMode()][c]===0){let x=i.addBinaryShiftChar(a);l.push(x)}}static updateStateListForPair(i,a,l){const c=[];for(let u of i)this.updateStateForPair(u,a,l,c);return this.simplifyStates(c)}static updateStateForPair(i,a,l,c){let u=i.endBinaryShift(a);if(c.push(u.latchAndAppend(yr,l)),i.getMode()!==yr&&c.push(u.shiftAndAppend(yr,l)),l===3||l===4){let d=u.latchAndAppend(lr,16-l).latchAndAppend(lr,1);c.push(d)}if(i.getBinaryShiftByteCount()>0){let d=i.addBinaryShiftChar(a).addBinaryShiftChar(a+1);c.push(d)}}static simplifyStates(i){let a=[];for(const l of i){let c=!0;for(const u of a){if(u.isBetterThanOrEqualTo(l)){c=!1;break}l.isBetterThanOrEqualTo(u)&&(a=a.filter(d=>d!==u))}c&&a.push(l)}return a}}class $t{constructor(){}static encodeBytes(i){return $t.encode(i,$t.DEFAULT_EC_PERCENT,$t.DEFAULT_AZTEC_LAYERS)}static encode(i,a,l){let c=new va(i).encode(),u=D.truncDivision(c.getSize()*a,100)+11,d=c.getSize()+u,x,v,C,B,V;if(l!==$t.DEFAULT_AZTEC_LAYERS){if(x=l<0,v=Math.abs(l),v>(x?$t.MAX_NB_BITS_COMPACT:$t.MAX_NB_BITS))throw new w(L.format("Illegal value %s for layers",l));C=$t.totalBitsInLayer(v,x),B=$t.WORD_SIZE[v];let it=C-C%B;if(V=$t.stuffBits(c,B),V.getSize()+u>it)throw new w("Data to large for user specified layer");if(x&&V.getSize()>B*64)throw new w("Data to large for user specified layer")}else{B=0,V=null;for(let it=0;;it++){if(it>$t.MAX_NB_BITS)throw new w("Data too large for an Aztec code");if(x=it<=3,v=x?it+1:it,C=$t.totalBitsInLayer(v,x),d>C)continue;(V==null||B!==$t.WORD_SIZE[v])&&(B=$t.WORD_SIZE[v],V=$t.stuffBits(c,B));let Qt=C-C%B;if(!(x&&V.getSize()>B*64)&&V.getSize()+u<=Qt)break}}let ee=$t.generateCheckWords(V,C,B),ge=V.getSize()/B,ve=$t.generateModeMessage(x,v,ge),Ae=(x?11:14)+v*4,Ie=new Int32Array(Ae),Fe;if(x){Fe=Ae;for(let it=0;it<Ie.length;it++)Ie[it]=it}else{Fe=Ae+1+2*D.truncDivision(D.truncDivision(Ae,2)-1,15);let it=D.truncDivision(Ae,2),Qt=D.truncDivision(Fe,2);for(let Pt=0;Pt<it;Pt++){let yi=Pt+D.truncDivision(Pt,15);Ie[it-Pt-1]=Qt-yi-1,Ie[it+Pt]=Qt+yi+1}}let nt=new ce(Fe);for(let it=0,Qt=0;it<v;it++){let Pt=(v-it)*4+(x?9:12);for(let yi=0;yi<Pt;yi++){let zi=yi*2;for(let di=0;di<2;di++)ee.get(Qt+zi+di)&&nt.set(Ie[it*2+di],Ie[it*2+yi]),ee.get(Qt+Pt*2+zi+di)&&nt.set(Ie[it*2+yi],Ie[Ae-1-it*2-di]),ee.get(Qt+Pt*4+zi+di)&&nt.set(Ie[Ae-1-it*2-di],Ie[Ae-1-it*2-yi]),ee.get(Qt+Pt*6+zi+di)&&nt.set(Ie[Ae-1-it*2-yi],Ie[it*2+di])}Qt+=Pt*8}if($t.drawModeMessage(nt,x,Fe,ve),x)$t.drawBullsEye(nt,D.truncDivision(Fe,2),5);else{$t.drawBullsEye(nt,D.truncDivision(Fe,2),7);for(let it=0,Qt=0;it<D.truncDivision(Ae,2)-1;it+=15,Qt+=16)for(let Pt=D.truncDivision(Fe,2)&1;Pt<Fe;Pt+=2)nt.set(D.truncDivision(Fe,2)-Qt,Pt),nt.set(D.truncDivision(Fe,2)+Qt,Pt),nt.set(Pt,D.truncDivision(Fe,2)-Qt),nt.set(Pt,D.truncDivision(Fe,2)+Qt)}let st=new Ht;return st.setCompact(x),st.setSize(Fe),st.setLayers(v),st.setCodeWords(ge),st.setMatrix(nt),st}static drawBullsEye(i,a,l){for(let c=0;c<l;c+=2)for(let u=a-c;u<=a+c;u++)i.set(u,a-c),i.set(u,a+c),i.set(a-c,u),i.set(a+c,u);i.set(a-l,a-l),i.set(a-l+1,a-l),i.set(a-l,a-l+1),i.set(a+l,a-l),i.set(a+l,a-l+1),i.set(a+l,a+l-1)}static generateModeMessage(i,a,l){let c=new j;return i?(c.appendBits(a-1,2),c.appendBits(l-1,6),c=$t.generateCheckWords(c,28,4)):(c.appendBits(a-1,5),c.appendBits(l-1,11),c=$t.generateCheckWords(c,40,4)),c}static drawModeMessage(i,a,l,c){let u=D.truncDivision(l,2);if(a)for(let d=0;d<7;d++){let x=u-3+d;c.get(d)&&i.set(x,u-5),c.get(d+7)&&i.set(u+5,x),c.get(20-d)&&i.set(x,u+5),c.get(27-d)&&i.set(u-5,x)}else for(let d=0;d<10;d++){let x=u-5+d+D.truncDivision(d,5);c.get(d)&&i.set(x,u-7),c.get(d+10)&&i.set(u+7,x),c.get(29-d)&&i.set(x,u+7),c.get(39-d)&&i.set(u-7,x)}}static generateCheckWords(i,a,l){let c=i.getSize()/l,u=new ns($t.getGF(l)),d=D.truncDivision(a,l),x=$t.bitsToWords(i,l,d);u.encode(x,d-c);let v=a%l,C=new j;C.appendBits(0,v);for(const B of Array.from(x))C.appendBits(B,l);return C}static bitsToWords(i,a,l){let c=new Int32Array(l),u,d;for(u=0,d=i.getSize()/a;u<d;u++){let x=0;for(let v=0;v<a;v++)x|=i.get(u*a+v)?1<<a-v-1:0;c[u]=x}return c}static getGF(i){switch(i){case 4:return qe.AZTEC_PARAM;case 6:return qe.AZTEC_DATA_6;case 8:return qe.AZTEC_DATA_8;case 10:return qe.AZTEC_DATA_10;case 12:return qe.AZTEC_DATA_12;default:throw new w("Unsupported word size "+i)}}static stuffBits(i,a){let l=new j,c=i.getSize(),u=(1<<a)-2;for(let d=0;d<c;d+=a){let x=0;for(let v=0;v<a;v++)(d+v>=c||i.get(d+v))&&(x|=1<<a-1-v);(x&u)===u?(l.appendBits(x&u,a),d--):x&u?l.appendBits(x,a):(l.appendBits(x|1,a),d--)}return l}static totalBitsInLayer(i,a){return((a?88:112)+16*i)*i}}$t.DEFAULT_EC_PERCENT=33,$t.DEFAULT_AZTEC_LAYERS=0,$t.MAX_NB_BITS=32,$t.MAX_NB_BITS_COMPACT=4,$t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ui{encode(i,a,l,c){return this.encodeWithHints(i,a,l,c,null)}encodeWithHints(i,a,l,c,u){let d=zt.ISO_8859_1,x=$t.DEFAULT_EC_PERCENT,v=$t.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(hi.CHARACTER_SET)&&(d=Rt.forName(u.get(hi.CHARACTER_SET).toString())),u.has(hi.ERROR_CORRECTION)&&(x=D.parseInt(u.get(hi.ERROR_CORRECTION).toString())),u.has(hi.AZTEC_LAYERS)&&(v=D.parseInt(u.get(hi.AZTEC_LAYERS).toString()))),Ui.encodeLayers(i,a,l,c,d,x,v)}static encodeLayers(i,a,l,c,u,d,x){if(a!==se.AZTEC)throw new w("Can only encode AZTEC, but got "+a);let v=$t.encode(L.getBytes(i,u),d,x);return Ui.renderResult(v,l,c)}static renderResult(i,a,l){let c=i.getMatrix();if(c==null)throw new Le;let u=c.getWidth(),d=c.getHeight(),x=Math.max(a,u),v=Math.max(l,d),C=Math.min(x/u,v/d),B=(x-u*C)/2,V=(v-d*C)/2,ee=new ce(x,v);for(let ge=0,ve=V;ge<d;ge++,ve+=C)for(let Ae=0,Ie=B;Ae<u;Ae++,Ie+=C)c.get(Ae,ge)&&ee.setRegion(Ie,ve,C,C);return ee}}n.AbstractExpandedDecoder=Tr,n.ArgumentException=S,n.ArithmeticException=tt,n.AztecCode=Ht,n.AztecCodeReader=ft,n.AztecCodeWriter=Ui,n.AztecDecoder=Ve,n.AztecDetector=Mt,n.AztecDetectorResult=ze,n.AztecEncoder=$t,n.AztecHighLevelEncoder=va,n.AztecPoint=ct,n.BarcodeFormat=se,n.Binarizer=U,n.BinaryBitmap=E,n.BitArray=j,n.BitMatrix=ce,n.BitSource=Ks,n.BrowserAztecCodeReader=vn,n.BrowserBarcodeReader=Kc,n.BrowserCodeReader=G,n.BrowserDatamatrixCodeReader=Js,n.BrowserMultiFormatReader=to,n.BrowserPDF417Reader=fl,n.BrowserQRCodeReader=hl,n.BrowserQRCodeSvgWriter=we,n.CharacterSetECI=M,n.ChecksumException=A,n.Code128Reader=ot,n.Code39Reader=gt,n.DataMatrixDecodedBitStreamParser=Zr,n.DataMatrixReader=Mi,n.DecodeHintType=K,n.DecoderResult=Ce,n.DefaultGridSampler=_t,n.DetectorResult=Te,n.EAN13Reader=rr,n.EncodeHintType=hi,n.Exception=y,n.FormatException=P,n.GenericGF=qe,n.GenericGFPoly=Oe,n.GlobalHistogramBinarizer=Q,n.GridSampler=vt,n.GridSamplerInstance=Lt,n.HTMLCanvasElementLuminanceSource=ye,n.HybridBinarizer=W,n.ITFReader=wt,n.IllegalArgumentException=w,n.IllegalStateException=Le,n.InvertedLuminanceSource=oe,n.LuminanceSource=ue,n.MathUtils=Be,n.MultiFormatOneDReader=ma,n.MultiFormatReader=ul,n.MultiFormatWriter=Ye,n.NotFoundException=ne,n.OneDReader=Et,n.PDF417DecodedBitStreamParser=Pe,n.PDF417DecoderErrorCorrection=Zl,n.PDF417Reader=fi,n.PDF417ResultMetadata=ol,n.PerspectiveTransform=mt,n.PlanarYUVLuminanceSource=$e,n.QRCodeByteMatrix=is,n.QRCodeDataMask=gr,n.QRCodeDecodedBitStreamParser=pn,n.QRCodeDecoderErrorCorrectionLevel=yn,n.QRCodeDecoderFormatInformation=Ci,n.QRCodeEncoder=de,n.QRCodeEncoderQRCode=xr,n.QRCodeMaskUtil=Cn,n.QRCodeMatrixUtil=N,n.QRCodeMode=Ot,n.QRCodeReader=xa,n.QRCodeVersion=It,n.QRCodeWriter=Re,n.RGBLuminanceSource=yt,n.RSS14Reader=Gn,n.RSSExpandedReader=Ke,n.ReaderException=ts,n.ReedSolomonDecoder=me,n.ReedSolomonEncoder=ns,n.ReedSolomonException=ut,n.Result=ie,n.ResultMetadataType=be,n.ResultPoint=Ue,n.StringUtils=L,n.UnsupportedOperationException=J,n.VideoInputDevice=xe,n.WhiteRectangleDetector=Xe,n.WriterException=mn,n.ZXingArrays=T,n.ZXingCharset=Rt,n.ZXingInteger=D,n.ZXingStandardCharsets=zt,n.ZXingStringBuilder=re,n.ZXingStringEncoding=F,n.ZXingSystem=O,n.createAbstractExpandedDecoder=Ko,Object.defineProperty(n,"__esModule",{value:!0})})})(q1,q1.exports);var Jn=q1.exports;const N6=ih(Jn),S6=$y({__proto__:null,default:N6},[Jn]);var Tm=function(){function e(t,n,r){if(this.formatMap=new Map([[Nt.QR_CODE,Jn.BarcodeFormat.QR_CODE],[Nt.AZTEC,Jn.BarcodeFormat.AZTEC],[Nt.CODABAR,Jn.BarcodeFormat.CODABAR],[Nt.CODE_39,Jn.BarcodeFormat.CODE_39],[Nt.CODE_93,Jn.BarcodeFormat.CODE_93],[Nt.CODE_128,Jn.BarcodeFormat.CODE_128],[Nt.DATA_MATRIX,Jn.BarcodeFormat.DATA_MATRIX],[Nt.MAXICODE,Jn.BarcodeFormat.MAXICODE],[Nt.ITF,Jn.BarcodeFormat.ITF],[Nt.EAN_13,Jn.BarcodeFormat.EAN_13],[Nt.EAN_8,Jn.BarcodeFormat.EAN_8],[Nt.PDF_417,Jn.BarcodeFormat.PDF_417],[Nt.RSS_14,Jn.BarcodeFormat.RSS_14],[Nt.RSS_EXPANDED,Jn.BarcodeFormat.RSS_EXPANDED],[Nt.UPC_A,Jn.BarcodeFormat.UPC_A],[Nt.UPC_E,Jn.BarcodeFormat.UPC_E],[Nt.UPC_EAN_EXTENSION,Jn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!S6)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var s=this.createZXingFormats(t),o=new Map;o.set(Jn.DecodeHintType.POSSIBLE_FORMATS,s),o.set(Jn.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,s){try{r(n.decode(t))}catch(o){s(o)}})},e.prototype.decode=function(t){var n=new Jn.MultiFormatReader(this.verbose,this.hints),r=new Jn.HTMLCanvasElementLuminanceSource(t),s=new Jn.BinaryBitmap(new Jn.HybridBinarizer(r)),o=n.decode(s);return{text:o.text,format:ly.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,s){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,s=t;r<s.length;r++){var o=s[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),C6=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(f){f(o)})}return new(n||(n=Promise))(function(o,f){function p(S){try{y(r.next(S))}catch(w){f(w)}}function m(S){try{y(r.throw(S))}catch(w){f(w)}}function y(S){S.done?o(S.value):s(S.value).then(p,m)}y((r=r.apply(e,t||[])).next())})},E6=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(y){return function(S){return m([y,S])}}function m(y){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(r=1,s&&(o=y[0]&2?s.return:y[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,y[1])).done)return o;switch(s=0,o&&(y=[y[0]&2,o.value]),y[0]){case 0:case 1:o=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!o||y[1]>o[0]&&y[1]<o[3])){n.label=y[1];break}if(y[0]===6&&n.label<o[1]){n.label=o[1],o=y;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(y);break}o[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(S){y=[6,S],s=0}finally{r=o=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},_m=function(){function e(t,n,r){if(this.formatMap=new Map([[Nt.QR_CODE,"qr_code"],[Nt.AZTEC,"aztec"],[Nt.CODABAR,"codabar"],[Nt.CODE_39,"code_39"],[Nt.CODE_93,"code_93"],[Nt.CODE_128,"code_128"],[Nt.DATA_MATRIX,"data_matrix"],[Nt.ITF,"itf"],[Nt.EAN_13,"ean_13"],[Nt.EAN_8,"ean_8"],[Nt.PDF_417,"pdf417"],[Nt.UPC_A,"upc_a"],[Nt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var s=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return C6(this,void 0,void 0,function(){var n,r;return E6(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=s.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:ly.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,s=0,o=t;s<o.length;s++){var f=o[s],p=f.boundingBox.width*f.boundingBox.height;p>r&&(r=p,n=f)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,s=t;r<s.length;r++){var o=s[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,s){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Im=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(f){f(o)})}return new(n||(n=Promise))(function(o,f){function p(S){try{y(r.next(S))}catch(w){f(w)}}function m(S){try{y(r.throw(S))}catch(w){f(w)}}function y(S){S.done?o(S.value):s(S.value).then(p,m)}y((r=r.apply(e,t||[])).next())})},Dm=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(y){return function(S){return m([y,S])}}function m(y){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(r=1,s&&(o=y[0]&2?s.return:y[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,y[1])).done)return o;switch(s=0,o&&(y=[y[0]&2,o.value]),y[0]){case 0:case 1:o=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!o||y[1]>o[0]&&y[1]<o[3])){n.label=y[1];break}if(y[0]===6&&n.label<o[1]){n.label=o[1],o=y;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(y);break}o[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(S){y=[6,S],s=0}finally{r=o=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},T6=function(){function e(t,n,r,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&_m.isSupported()?(this.primaryDecoder=new _m(t,r,s),this.secondaryDecoder=new Tm(t,r,s)):this.primaryDecoder=new Tm(t,r,s)}return e.prototype.decodeAsync=function(t){return Im(this,void 0,void 0,function(){var n;return Dm(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return Im(this,void 0,void 0,function(){var n,r;return Dm(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,s.sent()];case 3:if(r=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var s=r[n];t+=s}var o=t/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Q2=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),th=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(f){f(o)})}return new(n||(n=Promise))(function(o,f){function p(S){try{y(r.next(S))}catch(w){f(w)}}function m(S){try{y(r.throw(S))}catch(w){f(w)}}function y(S){S.done?o(S.value):s(S.value).then(p,m)}y((r=r.apply(e,t||[])).next())})},nh=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(y){return function(S){return m([y,S])}}function m(y){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(r=1,s&&(o=y[0]&2?s.return:y[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,y[1])).done)return o;switch(s=0,o&&(y=[y[0]&2,o.value]),y[0]){case 0:case 1:o=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!o||y[1]>o[0]&&y[1]<o[3])){n.label=y[1];break}if(y[0]===6&&n.label<o[1]){n.label=o[1],o=y;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(y);break}o[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(S){y=[6,S],s=0}finally{r=o=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},hy=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),_6=function(e){Q2(t,e);function t(n,r){return e.call(this,n,r)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};r[this.name]=n;var s={advanced:[r]};return this.track.applyConstraints(s)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(hy),I6=function(e){Q2(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(_6),D6=function(e){Q2(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(hy),R6=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new I6(this.track)},e.prototype.torchFeature=function(){return new D6(this.track)},e}(),O6=function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=t.surface.clientWidth,s=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,s),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,s){return th(this,void 0,void 0,function(){var o,f;return nh(this,function(p){switch(p.label){case 0:return o=new e(t,n,s),r.aspectRatio?(f={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:p.sent(),p.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return th(this,void 0,void 0,function(){return nh(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var s=t.mediaStream.getVideoTracks(),o=s.length,f=0;t.mediaStream.getVideoTracks().forEach(function(p){t.mediaStream.removeTrack(p),p.stop(),++f,f>=o&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new R6(this.getFirstTrackOrFail())},e}(),L6=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return th(this,void 0,void 0,function(){return nh(this,function(s){return[2,O6.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return th(this,void 0,void 0,function(){var n,r;return nh(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=s.sent(),[2,new e(r)]}})})},e}(),Rm=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(f){f(o)})}return new(n||(n=Promise))(function(o,f){function p(S){try{y(r.next(S))}catch(w){f(w)}}function m(S){try{y(r.throw(S))}catch(w){f(w)}}function y(S){S.done?o(S.value):s(S.value).then(p,m)}y((r=r.apply(e,t||[])).next())})},Om=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(y){return function(S){return m([y,S])}}function m(y){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(r=1,s&&(o=y[0]&2?s.return:y[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,y[1])).done)return o;switch(s=0,o&&(y=[y[0]&2,o.value]),y[0]){case 0:case 1:o=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!o||y[1]>o[0]&&y[1]<o[3])){n.label=y[1];break}if(y[0]===6&&n.label<o[1]){n.label=o[1],o=y;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(y);break}o[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(S){y=[6,S],s=0}finally{r=o=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},M6=function(){function e(){}return e.failIfNotSupported=function(){return Rm(this,void 0,void 0,function(){return Om(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return Rm(this,void 0,void 0,function(){return Om(this,function(n){return[2,L6.create(t)]})})},e}(),j6=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(f){f(o)})}return new(n||(n=Promise))(function(o,f){function p(S){try{y(r.next(S))}catch(w){f(w)}}function m(S){try{y(r.throw(S))}catch(w){f(w)}}function y(S){S.done?o(S.value):s(S.value).then(p,m)}y((r=r.apply(e,t||[])).next())})},k6=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(y){return function(S){return m([y,S])}}function m(y){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(r=1,s&&(o=y[0]&2?s.return:y[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,y[1])).done)return o;switch(s=0,o&&(y=[y[0]&2,o.value]),y[0]){case 0:case 1:o=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!o||y[1]>o[0]&&y[1]<o[3])){n.label=y[1];break}if(y[0]===6&&n.label<o[1]){n.label=o[1],o=y;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(y);break}o[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(S){y=[6,S],s=0}finally{r=o=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},B6=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Sc.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Sc.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return j6(this,void 0,void 0,function(){var t,n,r,s,o,f,p;return k6(this,function(m){switch(m.label){case 0:return t=function(y){for(var S=y.getVideoTracks(),w=0,E=S;w<E.length;w++){var A=E[w];A.enabled=!1,A.stop(),y.removeTrack(A)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=m.sent(),s=[],o=0,f=r;o<f.length;o++)p=f[o],p.kind==="videoinput"&&s.push({id:p.deviceId,label:p.label});return t(n),[2,s]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(o){for(var f=[],p=0,m=o;p<m.length;p++){var y=m[p];y.kind==="video"&&f.push({id:y.id,label:y.label})}t(f)},s=MediaStreamTrack;s.getSources(r)})},e}(),pi;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(pi||(pi={}));var P6=function(){function e(){this.state=pi.NOT_STARTED,this.onGoingTransactionNewState=pi.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===pi.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=pi.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===pi.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=pi.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==pi.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case pi.UNKNOWN:throw"Transition from unknown is not allowed";case pi.NOT_STARTED:this.failIfNewStateIs(t,[pi.PAUSED]);break;case pi.SCANNING:break;case pi.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,s=n;r<s.length;r++){var o=s[r];if(t===o)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),F6=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===pi.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==pi.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===pi.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===pi.PAUSED},e}(),U6=function(){function e(){}return e.create=function(){return new F6(new P6)},e}(),z6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ia=function(e){z6(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Xa),H6=function(){function e(t,n){this.logger=n,this.fps=ia.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=ia.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?fy.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!ls(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),Lm=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new uy(this.verbose),this.qrcode=new T6(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=U6.create()}return e.prototype.start=function(t,n,r,s){var o=this;if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;s?f=s:f=this.verbose?this.logger.log:function(){};var p=H6.create(n,this.logger);this.clearElement();var m=!1;p.videoConstraints&&(p.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=m,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:ia.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var w=this,E=this.stateManagerProxy.startTransition(pi.SCANNING);return new Promise(function(A,U){var O=y?p.videoConstraints:w.createVideoConstraints(t);if(!O){E.cancel(),U("videoConstraints should be defined");return}var H={};(!y||p.aspectRatio)&&(H.aspectRatio=p.aspectRatio);var _={onRenderSurfaceReady:function(T,D){w.setupUi(T,D,p),w.isScanning=!0,w.foreverScan(p,r,f)}};M6.failIfNotSupported().then(function(T){T.create(O).then(function(D){return D.render(o.element,H,_).then(function(j){w.renderedCamera=j,E.execute(),A(null)}).catch(function(j){E.cancel(),U(j)})}).catch(function(D){E.cancel(),U(Sc.errorGettingUserMedia(D))})}).catch(function(T){E.cancel(),U(Sc.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(pi.PAUSED),this.showPausedState(),(ls(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(pi.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(pi.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var o=document.getElementById(ia.SHADED_REGION_ELEMENT_ID);o&&t.element.removeChild(o)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),r(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),n.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ls(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var f=new Image;f.onload=function(){var p=f.width,m=f.height,y=document.getElementById(r.elementId),S=y.clientWidth?y.clientWidth:ia.DEFAULT_WIDTH,w=Math.max(y.clientHeight?y.clientHeight:m,ia.FILE_SCAN_MIN_HEIGHT),E=r.computeCanvasDrawConfig(p,m,S,w);if(n){var A=r.createCanvasElement(S,w,"qr-canvas-visible");A.style.display="inline-block",y.appendChild(A);var U=A.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=S,U.canvas.height=w,U.drawImage(f,0,0,p,m,E.x,E.y,E.width,E.height)}var O=ia.FILE_SCAN_HIDDEN_CANVAS_PADDING,H=Math.max(f.width,E.width),_=Math.max(f.height,E.height),T=H+2*O,D=_+2*O,j=r.createCanvasElement(T,D);y.appendChild(j);var q=j.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=T,q.canvas.height=D,q.drawImage(f,0,0,p,m,O,O,H,_);try{r.qrcode.decodeRobustlyAsync(j).then(function(K){s(Cm.createFromQrcodeResult(K))}).catch(o)}catch(K){o("QR code parse error, error = ".concat(K))}},f.onerror=o,f.onabort=o,f.onstalled=o,f.onsuspend=o,f.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return B6.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!fy.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[Nt.QR_CODE,Nt.AZTEC,Nt.CODABAR,Nt.CODE_39,Nt.CODE_93,Nt.CODE_128,Nt.DATA_MATRIX,Nt.MAXICODE,Nt.ITF,Nt.EAN_13,Nt.EAN_8,Nt.PDF_417,Nt.RSS_14,Nt.RSS_EXPANDED,Nt.UPC_A,Nt.UPC_E,Nt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],s=0,o=t.formatsToSupport;s<o.length;s++){var f=o[s];w6(f)?r.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(ls(t))return!0;if(!ls(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(ls(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return ls(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,r){var s=this,o=r.qrbox;this.validateQrboxConfig(o);var f=this.toQrdimensions(t,n,o),p=function(y){if(y<ia.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ia.MIN_QR_BOX_SIZE,"px.")},m=function(y){return y>t&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=t),y};p(f.width),p(f.height),f.width=m(f.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var s=ls(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(s);var o=this.toQrdimensions(t,n,s);o.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=r.isShadedBoxEnabled()&&o.height<=n,p={x:0,y:0,width:t,height:n},m=f?this.getShadedRegionBounds(t,n,o):p,y=this.createCanvasElement(m.width,m.height),S={willReadFrequently:!0},w=y.getContext("2d",S);w.canvas.width=m.width,w.canvas.height=m.height,this.element.append(y),f&&this.possiblyInsertShadingElement(this.element,t,n,o),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=w,this.canvasElement=y},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Sc.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return t(s.text,Cm.createFromQrcodeResult(s)),r.possiblyUpdateShaders(!0),!0}).catch(function(s){r.possiblyUpdateShaders(!1);var o=Sc.codeParseError(s);return n(o,cy.createFrom(o)),!1})},e.prototype.foreverScan=function(t,n,r){var s=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),f=o.videoWidth/o.clientWidth,p=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*f,y=this.qrRegion.height*p,S=this.qrRegion.x*f,w=this.qrRegion.y*p;this.context.drawImage(o,S,w,m,y,0,0,this.qrRegion.width,this.qrRegion.height);var E=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(t,n,r)},s.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(A){!A&&t.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(n,r).finally(function(){E()})):E()}).catch(function(A){s.logger.logError("Error happend while scanning context",A),E()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",s={},o="exact",f=function(U){if(U in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(U,"'")},p=Object.keys(t);if(p.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(p.length," keys");var m=Object.keys(t)[0];if(m!==n&&m!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(m===n){var y=t.facingMode;if(typeof y=="string"){if(f(y))return{facingMode:y}}else if(typeof y=="object")if(o in y){if(f(y["".concat(o)]))return{facingMode:{exact:y["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var S=typeof y;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var w=t.deviceId;if(typeof w=="string")return{deviceId:w};if(typeof w=="object"){if(o in w)return{deviceId:{exact:w["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var E=typeof w;throw"Invalid type of 'deviceId' = ".concat(E)}}}var A=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(A)},e.prototype.computeCanvasDrawConfig=function(t,n,r,s){if(t<=r&&n<=s){var o=(r-t)/2,f=(s-n)/2;return{x:o,y:f,width:t,height:n}}else{var p=t,m=n;return t>r&&(n=r/t*n,t=r),n>s&&(t=s/n*t,n=s),this.logger.log("Image downsampled from "+"".concat(p,"X").concat(m)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,s)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?ia.BORDER_SHADER_MATCH_COLOR:ia.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var s=t,o=n,f=document.createElement("canvas");return f.style.width="".concat(s,"px"),f.style.height="".concat(o,"px"),f.style.display="none",f.id=ls(r)?"qr-canvas":r,f},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,s){if(!(n-s.width<1||r-s.height<1)){var o=document.createElement("div");o.style.position="absolute";var f=(n-s.width)/2,p=(r-s.height)/2;if(o.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(ia.SHADED_REGION_ELEMENT_ID),n-s.width<11||r-s.height<11)this.hasBorderShaders=!1;else{var m=5,y=40;this.insertShaderBorders(o,y,m,-m,null,0,!0),this.insertShaderBorders(o,y,m,-m,null,0,!1),this.insertShaderBorders(o,y,m,null,-m,0,!0),this.insertShaderBorders(o,y,m,null,-m,0,!1),this.insertShaderBorders(o,m,y+m,-m,null,-m,!0),this.insertShaderBorders(o,m,y+m,null,-m,-m,!0),this.insertShaderBorders(o,m,y+m,-m,null,-m,!1),this.insertShaderBorders(o,m,y+m,null,-m,-m,!1),this.hasBorderShaders=!0}t.append(o)}},e.prototype.insertShaderBorders=function(t,n,r,s,o,f,p){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=ia.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(n,"px"),m.style.height="".concat(r,"px"),s!==null&&(m.style.top="".concat(s,"px")),o!==null&&(m.style.bottom="".concat(o,"px")),p?m.style.left="".concat(f,"px"):m.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),t.appendChild(m)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),K2="data:image/svg+xml;base64,",G6=K2+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",q6=K2+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Mm=K2+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",V6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",jm=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),Y6=function(){function e(){this.data=jm.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=jm.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),W6=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Em.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),s=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(s);var o=document.createElement("a");o.innerText=Em.reportIssues(),o.href="https://github.com/mebjas/html5-qrcode/issues",o.target="new",o.style.color="white",this.infoDiv.appendChild(o),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),X6=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Mm,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=V6,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Mm,this.infoIcon.style.opacity="0.6")},e}(),Z6=function(){function e(){var t=this;this.infoDiv=new W6,this.infoIcon=new X6(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),Q6=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(f){f(o)})}return new(n||(n=Promise))(function(o,f){function p(S){try{y(r.next(S))}catch(w){f(w)}}function m(S){try{y(r.throw(S))}catch(w){f(w)}}function y(S){S.done?o(S.value):s(S.value).then(p,m)}y((r=r.apply(e,t||[])).next())})},K6=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(y){return function(S){return m([y,S])}}function m(y){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(r=1,s&&(o=y[0]&2?s.return:y[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,y[1])).done)return o;switch(s=0,o&&(y=[y[0]&2,o.value]),y[0]){case 0:case 1:o=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!o||y[1]>o[0]&&y[1]<o[3])){n.label=y[1];break}if(y[0]===6&&n.label<o[1]){n.label=o[1],o=y;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(y);break}o[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(S){y=[6,S],s=0}finally{r=o=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},km=function(){function e(){}return e.hasPermissions=function(){return Q6(this,void 0,void 0,function(){var t,n,r,s;return K6(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=o.sent(),n=0,r=t;n<r.length;n++)if(s=r[n],s.kind==="videoinput"&&s.label)return[2,!0];return[2,!1]}})})},e}(),yo=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(t){return t===Xo.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===Xo.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return Xa.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Xa.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,s=t;r<s.length;r++){var o=s[r];if(!Xa.DEFAULT_SUPPORTED_SCAN_TYPE.includes(o))throw"Unsupported scan type ".concat(o)}return t},e}(),la=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),zs=function(){function e(){}return e.createElement=function(t,n){var r=document.createElement(t);return r.id=n,r.classList.add(la.ALL_ELEMENT_CLASS),t==="button"&&r.setAttribute("type","button"),r},e}(),dy=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(f){f(o)})}return new(n||(n=Promise))(function(o,f){function p(S){try{y(r.next(S))}catch(w){f(w)}}function m(S){try{y(r.throw(S))}catch(w){f(w)}}function y(S){S.done?o(S.value):s(S.value).then(p,m)}y((r=r.apply(e,t||[])).next())})},gy=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(y){return function(S){return m([y,S])}}function m(y){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,y[0]&&(n=0)),n;)try{if(r=1,s&&(o=y[0]&2?s.return:y[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,y[1])).done)return o;switch(s=0,o&&(y=[y[0]&2,o.value]),y[0]){case 0:case 1:o=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!o||y[1]>o[0]&&y[1]<o[3])){n.label=y[1];break}if(y[0]===6&&n.label<o[1]){n.label=o[1],o=y;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(y);break}o[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(S){y=[6,S],s=0}finally{r=o=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Bm=function(){function e(t,n,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return dy(this,void 0,void 0,function(){var t,n;return gy(this,function(r){switch(r.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=r.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?Dn.torchOffButton():Dn.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var r=t?Dn.torchOnFailedMessage():Dn.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),J6=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=zs.createElement("button",la.TORCH_BUTTON_ID),this.torchController=new Bm(t,this,n)}return e.prototype.render=function(t,n){var r=this;this.torchButton.innerText=Dn.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var s=this;this.torchButton.addEventListener("click",function(o){return dy(r,void 0,void 0,function(){return gy(this,function(f){switch(f.label){case 0:return[4,s.torchController.flipState()];case 1:return f.sent(),s.torchController.isTorchEnabled()?(s.torchButton.classList.remove(la.TORCH_BUTTON_CLASS_TORCH_OFF),s.torchButton.classList.add(la.TORCH_BUTTON_CLASS_TORCH_ON)):(s.torchButton.classList.remove(la.TORCH_BUTTON_CLASS_TORCH_ON),s.torchButton.classList.add(la.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new Bm(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=Dn.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,s){var o=new e(n,s);return o.render(t,r),o},e}(),$6=function(){function e(t,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var s=document.createElement("label");s.setAttribute("for",this.getFileScanInputId()),s.style.display="inline-block",this.fileBasedScanRegion.appendChild(s),this.fileSelectionButton=zs.createElement("button",la.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(p){s.click()}),s.append(this.fileSelectionButton),this.fileScanInput=zs.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",s.appendChild(this.fileScanInput);var o=this;this.fileScanInput.addEventListener("change",function(p){if(!(p==null||p.target==null)){var m=p.target;if(!(m.files&&m.files.length===0)){var y=m.files,S=y[0],w=S.name;o.setImageNameToButton(w),r(S)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(p){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),p.stopPropagation(),p.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(p){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder(),p.stopPropagation(),p.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(p){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),p.stopPropagation(),p.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(p){p.stopPropagation(),p.preventDefault(),o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder();var m=p.dataTransfer;if(m){var y=m.files;if(!y||y.length===0)return;for(var S=!1,w=0;w<y.length;++w){var E=y.item(w);if(E){var A=/image.*/;if(E.type.match(A)){S=!0;var U=E.name;o.setImageNameToButton(U),r(E),f.innerText=Dn.dragAndDropMessage();break}}}S||(f.innerText=Dn.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=Dn.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var r=t.substring(0,8),s=t.length,o=t.substring(s-8,s);t="".concat(r,"....").concat(o)}var f=Dn.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=f},e.prototype.setInitialValueToButton=function(){var t=Dn.fileSelectionChooseImage()+" - "+Dn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){var s=new e(t,n,r);return s},e}(),eA=function(){function e(t){this.selectElement=zs.createElement("select",la.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var s=Dn.selectCamera();n.innerText="".concat(s," (").concat(this.cameras.length,")  ")}for(var o=1,f=0,p=this.cameras;f<p.length;f++){var m=p[f],y=m.id,S=m.label==null?y:m.label;(!S||S==="")&&(S=[Dn.anonymousCameraPrefix(),o++].join(" "));var w=document.createElement("option");w.value=y,w.innerText=S,this.options.push(w),this.selectElement.appendChild(w)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,r=this.options;n<r.length;n++){var s=r[n];if(s.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),tA=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=zs.createElement("input",la.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=Dn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var s=this;this.rangeInput.addEventListener("input",function(){return s.onValueChange()}),this.rangeInput.addEventListener("change",function(){return s.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=Dn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,r,s){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=s.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}(),ra;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(ra||(ra={}));function nA(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function iA(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var rA=function(){function e(t,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new yo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new uy(this.verbose),this.persistedDataManager=new Y6,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(o,f){if(t)t(o,f);else{if(r.lastMatchFound===o)return;r.lastMatchFound=o,r.setHeaderMessage(Dn.lastMatch(o),ra.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(o,f){n&&n(o,f)};var s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id=".concat(this.elementId," not found");s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new Lm(this.getScanRegionId(),iA(this.config,this.verbose))},e.prototype.pause=function(t){(ls(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var r=document.getElementById(t.elementId);r&&(r.innerHTML="",t.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,s){if(!t.html5Qrcode){r();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(o){if(!t.html5Qrcode){r();return}t.html5Qrcode.clear(),n(),r()}).catch(function(o){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",o),s(o)}):(t.html5Qrcode.clear(),n(),r())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=Xa.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!Xa.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=Xa.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=Xa.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:Xa.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Xa.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Xa.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),yo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var s=document.createElement("div"),o=this.getDashboardId();s.id=o,s.style.width="100%",t.appendChild(s),this.setupInitialDashboard(s)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var r=new Z6;r.renderInto(n);var s=document.createElement("div");s.id=this.getHeaderMessageContainerId(),s.style.display="none",s.style.textAlign="center",s.style.fontSize="14px",s.style.padding="2px 10px",s.style.margin="4px",s.style.borderTop="1px solid #f6f6f6",n.appendChild(s)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,r){var s=this;s.showHideScanTypeSwapLink(!1),s.setHeaderMessage(Dn.cameraPermissionRequesting());var o=function(){r||s.createPermissionButton(t,n)};Lm.getCameras().then(function(f){s.persistedDataManager.setHasPermission(!0),s.showHideScanTypeSwapLink(!0),s.resetHeaderMessage(),f&&f.length>0?(t.removeChild(n),s.renderCameraSelection(f)):(s.setHeaderMessage(Dn.noCameraFound(),ra.STATUS_WARNING),o())}).catch(function(f){s.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:o(),s.setHeaderMessage(f,ra.STATUS_WARNING),s.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var r=this,s=zs.createElement("button",this.getCameraPermissionButtonId());s.innerText=Dn.cameraPermissionTitle(),s.addEventListener("click",function(){s.disabled=!0,r.createCameraListUi(t,n,s)}),n.appendChild(s)},e.prototype.createPermissionsUi=function(t,n){var r=this;if(yo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){km.hasPermissions().then(function(s){s?r.createCameraListUi(t,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n))}).catch(function(s){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=yo.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var s=document.createElement("div");s.style.textAlign="center",r.appendChild(s),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,s),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=yo.isFileScanType(this.currentScanType),r=this,s=function(o){if(!r.html5Qrcode)throw"html5Qrcode not defined";yo.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(Dn.loadingImage()),r.html5Qrcode.scanFileV2(o,!0).then(function(f){r.resetHeaderMessage(),r.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){r.setHeaderMessage(f,ra.STATUS_WARNING),r.qrCodeErrorCallback(f,cy.createFrom(f))}))};this.fileSelectionUi=$6.create(t,n,s)},e.prototype.renderCameraSelection=function(t){var n=this,r=this,s=document.getElementById(this.getDashboardSectionCameraScanRegionId());s.style.textAlign="center";var o=tA.create(s,!1),f=function(O){var H=O.zoomFeature();if(H.isSupported()){o.setOnCameraZoomValueChangeCallback(function(T){H.apply(T)});var _=1;n.config.defaultZoomValueIfSupported&&(_=n.config.defaultZoomValueIfSupported),_=A6(_,H.min(),H.max()),o.setValues(H.min(),H.max(),_,H.step()),o.show()}},p=eA.create(s,t),m=document.createElement("span"),y=zs.createElement("button",la.CAMERA_START_BUTTON_ID);y.innerText=Dn.scanButtonStartScanningText(),m.appendChild(y);var S=zs.createElement("button",la.CAMERA_STOP_BUTTON_ID);S.innerText=Dn.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,m.appendChild(S);var w,E=function(O){if(!O.torchFeature().isSupported()){w&&w.hide();return}w?w.updateTorchCapability(O.torchFeature()):w=J6.create(m,O.torchFeature(),{display:"none",marginLeft:"5px"},function(H){r.setHeaderMessage(H,ra.STATUS_WARNING)}),w.show()};s.appendChild(m);var A=function(O){O||(y.style.display="none"),y.innerText=Dn.scanButtonStartScanningText(),y.style.opacity="1",y.disabled=!1,O&&(y.style.display="inline-block")};if(y.addEventListener("click",function(O){y.innerText=Dn.scanButtonScanningStarting(),p.disable(),y.disabled=!0,y.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var H=p.getValue();r.persistedDataManager.setLastUsedCameraId(H),r.html5Qrcode.start(H,nA(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(_){S.disabled=!1,S.style.display="inline-block",A(!1);var T=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&E(T),n.config.showZoomSliderIfSupported===!0&&f(T)}).catch(function(_){r.showHideScanTypeSwapLink(!0),p.enable(),A(!0),r.setHeaderMessage(_,ra.STATUS_WARNING)})}),p.hasSingleItem()&&y.click(),S.addEventListener("click",function(O){if(!r.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,r.html5Qrcode.stop().then(function(H){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),p.enable(),y.disabled=!1,S.style.display="none",y.style.display="inline-block",w&&(w.reset(),w.hide()),o.removeOnCameraZoomValueChangeCallback(),o.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(H){S.disabled=!1,r.setHeaderMessage(H,ra.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var U=r.persistedDataManager.getLastUsedCameraId();p.hasValue(U)?(p.setValue(U),y.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=Dn.textIfCameraScanSelected(),r=Dn.textIfFileScanSelected(),s=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");o.style.textAlign="center";var f=zs.createElement("span",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.style.cursor="pointer",f.innerText=yo.isCameraScanType(this.currentScanType)?n:r,f.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,yo.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),f.innerText=r,t.currentScanType=Xo.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),f.innerText=n,t.currentScanType=Xo.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),o.appendChild(f),s.appendChild(o)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){km.hasPermissions().then(function(r){if(r){var s=document.getElementById(n.getCameraPermissionButtonId());if(!s)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";s.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=ra.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",n){case ra.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case ra.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case ra.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=G6,this.cameraScanImage.alt=Dn.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=q6,this.fileScanImage.alt=Dn.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return la.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return la.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();const aA=({onScanSuccess:e})=>(He.useEffect(()=>{const t=new rA("reader",{fps:10,qrbox:{width:250,height:250}},!1),n=s=>{t.clear(),e(s)},r=s=>{};return t.render(n,r),()=>{t&&t.getState()!==pi.NOT_STARTED&&t.clear().catch(s=>{console.error("Failed to clear html5-qrcode-scanner.",s)})}},[e]),h.jsx("div",{id:"reader",className:"w-full"})),sA=({onSave:e})=>{const t=He.useRef(null),n=He.useRef(null),r=He.useRef(null),[s,o]=He.useState(null),[f,p]=He.useState(!1),[m,y]=He.useState(""),[S,w]=He.useState(""),E=He.useCallback(async()=>{try{w("");const T=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});t.current&&(t.current.srcObject=T,o(T),p(!0))}catch{w("Failed to access camera. Please allow camera permissions or upload a photo instead.")}},[]),A=He.useCallback(()=>{s&&(s.getTracks().forEach(T=>T.stop()),o(null),p(!1))},[s]),U=He.useCallback(()=>{if(t.current&&n.current){const T=t.current,D=n.current,j=D.getContext("2d");if(D.width=T.videoWidth,D.height=T.videoHeight,j){j.drawImage(T,0,0);const q=D.toDataURL("image/jpeg",.8);y(q),A()}}},[A]),O=He.useCallback(T=>{var j;const D=(j=T.target.files)==null?void 0:j[0];if(D&&D.type.startsWith("image/")){const q=new FileReader;q.onload=K=>{var R;const P=(R=K.target)==null?void 0:R.result;y(P)},q.readAsDataURL(D)}},[]),H=He.useCallback(()=>{y(""),E()},[E]),_=He.useCallback(()=>{m&&e(m)},[m,e]);return h.jsxs("div",{className:"space-y-4",children:[m?h.jsx(h.Fragment,{children:h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("img",{src:m,alt:"Captured delivery proof",className:"max-w-md mx-auto rounded-lg border border-slate-200"}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[h.jsx("button",{onClick:_,className:"px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:"Save Photo"}),h.jsx("button",{onClick:H,className:"px-6 py-3 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300 transition",children:"Retake Photo"})]})]})}):h.jsx(h.Fragment,{children:f?h.jsxs("div",{className:"relative",children:[h.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,className:"w-full max-w-md mx-auto rounded-lg bg-black"}),h.jsxs("div",{className:"flex justify-center gap-3 mt-4",children:[h.jsxs("button",{onClick:U,className:"px-6 py-3 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition flex items-center gap-2",children:[h.jsx($p,{className:"w-5 h-5"}),"Capture Photo"]}),h.jsx("button",{onClick:A,className:"px-4 py-3 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300 transition",children:h.jsx(F3,{className:"w-5 h-5"})})]})]}):h.jsxs("div",{className:"text-center space-y-4",children:[S&&h.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:S}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[h.jsxs("button",{onClick:E,className:"px-6 py-3 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition flex items-center gap-2 justify-center",children:[h.jsx($p,{className:"w-5 h-5"}),"Take Photo"]}),h.jsx("button",{onClick:()=>{var T;return(T=r.current)==null?void 0:T.click()},className:"px-6 py-3 bg-slate-600 text-white font-semibold rounded-lg hover:bg-slate-700 transition",children:"Upload Photo"})]}),h.jsx("input",{ref:r,type:"file",accept:"image/*",onChange:O,className:"hidden"})]})}),h.jsx("canvas",{ref:n,className:"hidden"})]})},Ma=({isOpen:e,onClose:t,title:n,children:r,size:s="2xl"})=>e?h.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-60 z-50 flex justify-center items-center p-4",children:h.jsxs("div",{className:`bg-white rounded-xl shadow-2xl w-full max-w-${s} max-h-[90vh] flex flex-col`,children:[h.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-slate-200",children:[h.jsx("h3",{className:"text-xl font-bold text-slate-800",children:n}),h.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 transition",children:h.jsx(Bl,{className:"w-7 h-7"})})]}),h.jsx("div",{className:"p-6 overflow-y-auto",children:r})]})}):null,oA=()=>{const{currentUser:e,shipments:t,updateShipmentStatus:n,addToast:r}=ci(),[s,o]=He.useState(null),[f,p]=He.useState(!1),[m,y]=He.useState(!1),[S,w]=He.useState(null),[E,A]=He.useState(!1),[U,O]=He.useState(null),[H,_]=He.useState(""),T=He.useRef({});if(!e)return null;const D=t.filter(xe=>xe.courierId===e.id&&[at.IN_TRANSIT,at.OUT_FOR_DELIVERY].includes(xe.status)),j=t.filter(xe=>xe.courierId===e.id&&xe.status===at.RETURN_IN_PROGRESS),q=t.filter(xe=>xe.courierId===e.id&&xe.status===at.DELIVERED),K=D.filter(xe=>xe.paymentMethod===Or.COD).reduce((xe,z)=>xe+z.price,0),P=q.reduce((xe,z)=>xe+(z.courierCommission||0),0),R=D.length,M={},J=new Date;for(let xe=29;xe>=0;xe--){const z=new Date(J);z.setDate(J.getDate()-xe);const G=z.toISOString().split("T")[0];M[G]=0}q.forEach(xe=>{if(xe.deliveryDate){const z=xe.deliveryDate.split("T")[0];M.hasOwnProperty(z)&&M[z]++}});const F=Object.entries(M).map(([xe,z])=>({date:new Date(xe).getDate().toString(),count:z})),L=Math.max(...F.map(xe=>xe.count),1),re=(xe,z)=>{n(xe,z)},ce=xe=>{o(xe),p(!0)},ne=xe=>{s&&n(s.id,at.DELIVERED,{deliveryPhoto:xe}),p(!1),o(null)},Q=xe=>{O(xe),_(""),A(!0)},W=()=>{U&&H.trim()&&(n(U.id,at.DELIVERY_FAILED,{failureReason:H.trim()}),A(!1),O(null),_(""))},ue=He.useCallback(xe=>{if(y(!1),[...D,...j].find(ie=>ie.id===xe)){r(`Scanned: ${xe}. Task is ready.`,"success");const ie=T.current[xe];ie&&(ie.scrollIntoView({behavior:"smooth",block:"center"}),w(xe),setTimeout(()=>w(null),3e3))}else r(`Scanned code ${xe} not found in your current tasks.`,"error")},[D,j,r]),oe={[at.ASSIGNED_TO_COURIER]:null,[at.PICKED_UP]:null,[at.IN_TRANSIT]:{label:"Mark Out for Delivery",nextStatus:at.OUT_FOR_DELIVERY},[at.OUT_FOR_DELIVERY]:null,[at.PENDING_ASSIGNMENT]:null,[at.DELIVERED]:null,[at.DELIVERY_FAILED]:null,[at.RETURN_REQUESTED]:null,[at.RETURN_IN_PROGRESS]:null,[at.RETURNED]:null},ye=({task:xe,isReturn:z=!1})=>h.jsxs("div",{className:`bg-white rounded-xl shadow-sm p-5 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 ${z?"border-l-4 border-orange-500":""}`,children:[h.jsxs("div",{children:[h.jsxs("p",{className:"font-mono text-sm text-slate-500 flex items-center gap-2",children:[z&&h.jsx(sf,{className:"w-4 h-4 text-orange-600"})," ",xe.id]}),h.jsx("p",{className:"text-lg font-bold text-slate-800",children:z?`Return from: ${xe.recipientName}`:`Deliver to: ${xe.recipientName}`}),h.jsxs("p",{className:"text-slate-600",children:[xe.toAddress.street,", ",xe.toAddress.zone]}),h.jsxs("p",{className:"text-sm font-semibold text-slate-700 mt-1",children:["Payment: ",xe.paymentMethod," (",xe.price," EGP)"]})]}),h.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3 w-full md:w-auto",children:[h.jsx("div",{className:"flex-grow",children:h.jsx(Eh,{status:xe.status})}),z?h.jsx("button",{onClick:()=>re(xe.id,at.RETURNED),className:"px-4 py-2 bg-orange-500 text-white font-semibold rounded-lg hover:bg-orange-600 transition w-full md:w-auto",children:"Confirm Return Pickup"}):h.jsxs(h.Fragment,{children:[oe[xe.status]&&h.jsx("button",{onClick:()=>re(xe.id,oe[xe.status].nextStatus),className:"px-4 py-2 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition w-full md:w-auto",children:oe[xe.status].label}),xe.status===at.OUT_FOR_DELIVERY&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>ce(xe),className:"px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition w-full md:w-auto",children:"Mark as Delivered"}),h.jsx("button",{onClick:()=>Q(xe),className:"px-4 py-2 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition w-full md:w-auto",children:"Delivery Failed"})]})]})]})]});return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"My Delivery Tasks"}),h.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition",children:[h.jsx(aw,{className:"w-5 h-5"}),"Scan Package"]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx(Kt,{title:"Cash to Collect",value:`${K.toFixed(2)} EGP`,icon:h.jsx(ps,{className:"w-7 h-7"}),color:"#f97316",subtitle:`${D.filter(xe=>xe.paymentMethod===Or.COD).length} COD packages`}),h.jsx(Kt,{title:"Commission Earned",value:`${P.toFixed(2)} EGP`,icon:h.jsx(Pu,{className:"w-7 h-7"}),color:"#16a34a",subtitle:`From ${q.length} deliveries`}),h.jsx(Kt,{title:"Pending Deliveries",value:R,icon:h.jsx(oa,{className:"w-7 h-7"}),color:"#3b82f6",subtitle:"Currently assigned"}),h.jsx(Kt,{title:"Total Deliveries",value:q.length,icon:h.jsx(ql,{className:"w-7 h-7"}),color:"#8b5cf6",subtitle:"All time completed"})]}),h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[h.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Performance Summary"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-3xl font-bold text-green-600",children:q.length}),h.jsx("div",{className:"text-sm text-slate-600",children:"Total Deliveries"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-3xl font-bold text-blue-600",children:R}),h.jsx("div",{className:"text-sm text-slate-600",children:"Pending Deliveries"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-3xl font-bold text-orange-600",children:D.filter(xe=>xe.paymentMethod===Or.COD).length}),h.jsx("div",{className:"text-sm text-slate-600",children:"COD Packages"})]})]})]}),h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[h.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Daily Deliveries (Last 30 Days)"}),h.jsx("div",{className:"h-64 flex items-end gap-2 border-l border-b border-slate-200 pl-4 pb-4",children:F.map(({date:xe,count:z})=>h.jsxs("div",{className:"flex-1 h-full flex flex-col justify-end items-center group",children:[h.jsx("div",{className:"w-full bg-primary-400 hover:bg-primary-500 transition-colors rounded-t-md relative",style:{height:`${z/L*100}%`},title:`Day ${xe}: ${z} deliveries`,children:z>0&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-xs font-bold",children:z})}),h.jsx("span",{className:"text-xs text-slate-500 mt-1",children:xe})]},xe))})]}),h.jsxs("div",{className:"space-y-4",children:[D.length===0&&h.jsx("p",{className:"text-slate-500 bg-white p-4 rounded-lg",children:"You have no active delivery tasks."}),D.map(xe=>h.jsx("div",{ref:z=>{T.current[xe.id]=z},className:`rounded-xl transition-all duration-500 ${S===xe.id?"ring-4 ring-primary-400 ring-offset-2":""}`,children:h.jsx(ye,{task:xe})},xe.id))]}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"My Return Tasks"}),h.jsxs("div",{className:"space-y-4 mt-4",children:[j.length===0&&h.jsx("p",{className:"text-slate-500 bg-white p-4 rounded-lg",children:"You have no active return tasks."}),j.map(xe=>h.jsx("div",{ref:z=>{T.current[xe.id]=z},className:`rounded-xl transition-all duration-500 ${S===xe.id?"ring-4 ring-primary-400 ring-offset-2":""}`,children:h.jsx(ye,{task:xe,isReturn:!0})},xe.id))]})]}),h.jsx(Ma,{isOpen:f,onClose:()=>p(!1),title:"Capture Photo for Proof of Delivery",children:s&&h.jsx(sA,{onSave:ne})}),h.jsx(Ma,{isOpen:m,onClose:()=>y(!1),title:"Scan Package Barcode",children:h.jsx("div",{className:"w-full h-96 flex justify-center items-center",children:m&&h.jsx(aA,{onScanSuccess:ue})})}),h.jsx(Ma,{isOpen:E,onClose:()=>A(!1),title:"Delivery Failed - Please Provide Reason",children:U&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[h.jsxs("p",{className:"font-semibold",children:["Shipment: ",U.id]}),h.jsxs("p",{className:"text-sm text-slate-600",children:["To: ",U.recipientName]}),h.jsxs("p",{className:"text-sm text-slate-600",children:[U.toAddress.street,", ",U.toAddress.zone]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Reason for delivery failure *"}),h.jsx("textarea",{value:H,onChange:xe=>_(xe.target.value),placeholder:"Please explain why the delivery could not be completed...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 resize-none",rows:3,required:!0})]}),h.jsxs("div",{className:"flex justify-end gap-3",children:[h.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300",children:"Cancel"}),h.jsx("button",{onClick:W,disabled:!H.trim(),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:bg-slate-400 disabled:cursor-not-allowed",children:"Mark as Failed"})]})]})})]})},lA=()=>{const{users:e,addUser:t,updateUser:n,removeUser:r,resetPassword:s,currentUser:o,canCreateUsers:f,updateClientTaxCard:p,getTaxCardNumber:m,addToast:y}=ci(),[S,w]=He.useState(null),[E,A]=He.useState(null),[U,O]=He.useState({}),[H,_]=He.useState(""),[T,D]=He.useState({[bn.STANDARD]:1,[bn.URGENT]:1.5,[bn.EXPRESS]:2});if(!o||!f(o))return h.jsx("div",{className:"flex items-center justify-center h-96",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Access Denied"}),h.jsx("p",{className:"text-slate-600",children:"Only administrators and super users can manage users."})]})});const q=(ne=>{if(o.role===ht.ADMIN)return Object.values(ht);if(o.role===ht.SUPER_USER){const Q=Object.values(ht).filter(W=>W!==ht.ADMIN);return ne&&ne.role===ht.ADMIN?[ht.ADMIN]:Q}return[]})(S==="edit"&&E||void 0),K=(ne,Q)=>{if((ne==="taxCard"||ne==="priorityPricing")&&(o==null?void 0:o.role)!==ht.ADMIN&&(o==null?void 0:o.role)!==ht.SUPER_USER){y("Only administrators and super users can manage client settings","error");return}if((ne==="edit"||ne==="delete")&&(Q==null?void 0:Q.role)===ht.ADMIN&&(o==null?void 0:o.role)===ht.SUPER_USER){y("Super users cannot modify administrator accounts","error");return}w(ne),A(Q||null),O(Q?{...Q}:{role:ht.CLIENT,zone:Ia.CAIRO_DOWNTOWN,flatRateFee:75,priorityMultipliers:{[bn.STANDARD]:1,[bn.URGENT]:1.5,[bn.EXPRESS]:2}}),ne==="taxCard"&&Q&&_(m(Q.id)||""),ne==="priorityPricing"&&Q&&D(Q.priorityMultipliers||{[bn.STANDARD]:1,[bn.URGENT]:1.5,[bn.EXPRESS]:2})},P=()=>{w(null),A(null),O({})},R=ne=>{const{name:Q,value:W}=ne.target;O(ue=>({...ue,[Q]:W}))},M=ne=>{if(ne.preventDefault(),S==="add")t(U);else if(S==="edit"&&E)n(E.id,U);else if(S==="reset"&&E&&U.password)s(E.id,U.password);else if(S==="taxCard"&&E){J();return}else if(S==="priorityPricing"&&E){F();return}P()},J=()=>{if(!E)return;if((o==null?void 0:o.role)!==ht.ADMIN&&(o==null?void 0:o.role)!==ht.SUPER_USER){y("Only administrators and super users can manage tax card numbers","error"),P();return}if(H&&!/^\d{3}-\d{3}-\d{3}$/.test(H)){y("Tax card number must be in format XXX-XXX-XXX","error");return}p(E.id,H),y(`Tax card number updated for ${E.name}`,"success"),P()},F=()=>{if(!E)return;if((o==null?void 0:o.role)!==ht.ADMIN&&(o==null?void 0:o.role)!==ht.SUPER_USER){y("Only administrators and super users can manage priority pricing","error"),P();return}const ne=T;if(ne[bn.STANDARD]<=0||ne[bn.URGENT]<=0||ne[bn.EXPRESS]<=0){y("All priority multipliers must be positive numbers","error");return}n(E.id,{priorityMultipliers:ne}),y(`Priority pricing updated for ${E.name}`,"success"),P()},L=()=>{E&&r(E.id),P()},re=()=>{const ne=["ID","Name","Email","Role","Zone","Wallet Balance (EGP)"],Q=e.map(W=>[W.id,W.name,W.email,W.role,W.zone||"N/A",W.walletBalance!=null?W.walletBalance.toFixed(2):"N/A"]);Wo(ne,Q,"User_List_Export")},ce=()=>{var ne;return S==="delete"&&E?h.jsxs("div",{children:[h.jsxs("p",{children:["Are you sure you want to delete the user ",h.jsx("strong",{children:E.name}),"? This action cannot be undone."]}),h.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[h.jsx("button",{onClick:P,className:"px-4 py-2 bg-slate-200 rounded-lg font-semibold",children:"Cancel"}),h.jsx("button",{onClick:L,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold",children:"Delete User"})]})]}):S==="priorityPricing"&&E?h.jsxs("form",{onSubmit:M,className:"space-y-4",children:[h.jsxs("p",{children:["Setting priority pricing multipliers for client ",h.jsx("strong",{children:E.name}),"."]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Standard Priority Multiplier"}),h.jsx("input",{type:"number",step:"0.1",min:"0.1",value:T[bn.STANDARD],onChange:Q=>D(W=>({...W,[bn.STANDARD]:parseFloat(Q.target.value)||1})),className:"w-full px-4 py-2 border border-slate-300 rounded-lg"}),h.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Base rate multiplier (typically 1.0 for standard delivery)"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Urgent Priority Multiplier"}),h.jsx("input",{type:"number",step:"0.1",min:"0.1",value:T[bn.URGENT],onChange:Q=>D(W=>({...W,[bn.URGENT]:parseFloat(Q.target.value)||1.5})),className:"w-full px-4 py-2 border border-slate-300 rounded-lg"}),h.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Multiplier for urgent deliveries (typically 1.5x base rate)"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Express Priority Multiplier"}),h.jsx("input",{type:"number",step:"0.1",min:"0.1",value:T[bn.EXPRESS],onChange:Q=>D(W=>({...W,[bn.EXPRESS]:parseFloat(Q.target.value)||2})),className:"w-full px-4 py-2 border border-slate-300 rounded-lg"}),h.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Multiplier for express deliveries (typically 2.0x base rate)"})]})]}),h.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[h.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Price Preview"}),h.jsxs("p",{className:"text-sm text-slate-600",children:["Base rate: ",((ne=E.flatRateFee)==null?void 0:ne.toFixed(2))||"0.00"," EGP"]}),h.jsxs("p",{className:"text-sm text-slate-600",children:["Standard: ",((E.flatRateFee||0)*T[bn.STANDARD]).toFixed(2)," EGP"]}),h.jsxs("p",{className:"text-sm text-slate-600",children:["Urgent: ",((E.flatRateFee||0)*T[bn.URGENT]).toFixed(2)," EGP"]}),h.jsxs("p",{className:"text-sm text-slate-600",children:["Express: ",((E.flatRateFee||0)*T[bn.EXPRESS]).toFixed(2)," EGP"]})]}),h.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 bg-slate-200 rounded-lg font-semibold",children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg font-semibold",children:"Update Priority Pricing"})]})]}):S==="taxCard"&&E?h.jsxs("form",{onSubmit:M,className:"space-y-4",children:[h.jsxs("p",{children:["Setting tax card number for client ",h.jsx("strong",{children:E.name}),"."]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tax Card Number (XXX-XXX-XXX format)"}),h.jsx("input",{type:"text",value:H,onChange:Q=>_(Q.target.value),placeholder:"123-456-789",pattern:"\\d{3}-\\d{3}-\\d{3}",className:"w-full px-4 py-2 border border-slate-300 rounded-lg font-mono"}),h.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Leave empty to remove the tax card number. Only administrators and super users can modify this value."})]}),h.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 bg-slate-200 rounded-lg font-semibold",children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold",children:"Update Tax Card"})]})]}):S==="reset"&&E?h.jsxs("form",{onSubmit:M,className:"space-y-4",children:[h.jsxs("p",{children:["Resetting password for ",h.jsx("strong",{children:E.name}),"."]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"New Password"}),h.jsx("input",{type:"password",name:"password",onChange:R,className:"w-full px-4 py-2 border border-slate-300 rounded-lg",required:!0})]}),h.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 bg-slate-200 rounded-lg font-semibold",children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-lg font-semibold",children:"Reset Password"})]})]}):S==="add"||S==="edit"?h.jsxs("form",{onSubmit:M,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Name"}),h.jsx("input",{type:"text",name:"name",value:U.name||"",onChange:R,className:"w-full px-4 py-2 border border-slate-300 rounded-lg",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),h.jsx("input",{type:"email",name:"email",value:U.email||"",onChange:R,className:"w-full px-4 py-2 border border-slate-300 rounded-lg",required:!0})]}),S==="add"&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),h.jsx("input",{type:"password",name:"password",onChange:R,className:"w-full px-4 py-2 border border-slate-300 rounded-lg",required:!0})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Role"}),h.jsx("select",{name:"role",value:U.role||"",onChange:R,className:"w-full px-4 py-2 border border-slate-300 rounded-lg",disabled:S==="edit"&&(E==null?void 0:E.role)===ht.ADMIN&&(o==null?void 0:o.role)===ht.SUPER_USER,children:q.map(Q=>h.jsx("option",{value:Q,children:Q},Q))}),S==="edit"&&(E==null?void 0:E.role)===ht.ADMIN&&(o==null?void 0:o.role)===ht.SUPER_USER&&h.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Super users cannot change admin roles."})]}),U.role===ht.COURIER&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Zone"}),h.jsx("select",{name:"zone",value:U.zone||"",onChange:R,className:"w-full px-4 py-2 border border-slate-300 rounded-lg",children:Object.values(Ia).map(Q=>h.jsx("option",{value:Q,children:Q},Q))})]}),U.role===ht.CLIENT&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Flat Rate Fee (EGP)"}),h.jsx("input",{type:"number",step:"0.01",min:"0",name:"flatRateFee",value:U.flatRateFee??"",onChange:Q=>O(W=>({...W,flatRateFee:parseFloat(Q.target.value)||0})),className:"w-full px-4 py-2 border border-slate-300 rounded-lg"})]})]}),h.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 bg-slate-200 rounded-lg font-semibold",children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-lg font-semibold",children:S==="add"?"Create User":"Save Changes"})]})]}):null};return h.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[h.jsxs("div",{className:"p-5 border-b border-slate-200 flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"User Management"}),h.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:"Add, edit, or remove users from the platform."})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{onClick:re,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[h.jsx(Pl,{className:"w-5 h-5"}),"Export as CSV"]}),h.jsxs("button",{onClick:()=>K("add"),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition",children:[h.jsx(q2,{className:"w-5 h-5"}),"Add User"]})]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{className:"bg-slate-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Name"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Email"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Role"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Zone"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Tax Card"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-200",children:e.map(ne=>h.jsxs("tr",{className:ne.role===ht.ADMIN&&(o==null?void 0:o.role)===ht.SUPER_USER?"bg-slate-50":"",children:[h.jsxs("td",{className:"px-6 py-4 font-semibold text-slate-800",children:[ne.name,ne.role===ht.ADMIN&&(o==null?void 0:o.role)===ht.SUPER_USER&&h.jsx("span",{className:"ml-2 text-xs text-slate-500",children:"(Protected)"})]}),h.jsx("td",{className:"px-6 py-4 text-slate-600",children:ne.email}),h.jsx("td",{className:"px-6 py-4 text-slate-600",children:ne.role}),h.jsx("td",{className:"px-6 py-4 text-slate-600",children:ne.zone||"N/A"}),h.jsx("td",{className:"px-6 py-4 text-slate-600",children:ne.role===ht.CLIENT?h.jsx("span",{className:"font-mono text-sm",children:m(ne.id)||h.jsx("span",{className:"text-slate-400",children:"Not Set"})}):h.jsx("span",{className:"text-slate-400",children:"N/A"})}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"flex items-center gap-1",children:[!(ne.role===ht.ADMIN&&(o==null?void 0:o.role)===ht.SUPER_USER)&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>K("edit",ne),title:"Edit",className:"p-2 text-slate-500 hover:text-primary-600 hover:bg-slate-100 rounded-md",children:h.jsx(Ah,{})}),h.jsx("button",{onClick:()=>K("reset",ne),title:"Reset Password",className:"p-2 text-slate-500 hover:text-orange-600 hover:bg-slate-100 rounded-md",children:h.jsx(B3,{})})]}),ne.role===ht.CLIENT&&((o==null?void 0:o.role)===ht.ADMIN||(o==null?void 0:o.role)===ht.SUPER_USER)&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>K("taxCard",ne),title:"Set Tax Card",className:"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"Tax Card"}),h.jsxs("button",{onClick:()=>K("priorityPricing",ne),title:"Priority Pricing",className:"px-2 py-1 text-xs bg-green-500 text-white rounded hover:bg-green-600 flex items-center gap-1",children:[h.jsx(ps,{className:"w-3 h-3"}),"Pricing"]})]}),!(ne.role===ht.ADMIN&&(o==null?void 0:o.role)===ht.SUPER_USER)&&h.jsx("button",{onClick:()=>K("delete",ne),title:"Delete",className:"p-2 text-slate-500 hover:text-red-600 hover:bg-slate-100 rounded-md",children:h.jsx(nw,{})})]})})]},ne.id))})]})}),h.jsx(Ma,{isOpen:!!S,onClose:P,title:S==="add"?"Add New User":S==="edit"?"Edit User":S==="reset"?"Reset Password":S==="taxCard"?"Set Tax Card Number":S==="priorityPricing"?"Priority Pricing Settings":"Confirm Deletion",children:ce()})]})},cA=()=>{const{shipments:e,users:t,assignReturn:n,canCourierReceiveAssignment:r}=ci(),s=e.filter(p=>p.status===at.RETURN_REQUESTED),o=t.filter(p=>p.role===ht.COURIER),f=(p,m)=>{m&&n(p,parseInt(m))};return h.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[h.jsxs("div",{className:"p-5 border-b border-slate-200",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Manage Return Requests"}),h.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:"Assign couriers to pick up returned items from customers."})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{className:"bg-slate-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Shipment ID"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Client"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Pickup Zone"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Assign To"})]})}),h.jsxs("tbody",{className:"divide-y divide-slate-200",children:[s.map(p=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-6 py-4 font-mono text-slate-600",children:p.id}),h.jsx("td",{className:"px-6 py-4 text-slate-800",children:p.clientName}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"px-2 py-1 bg-slate-200 text-slate-700 rounded text-sm font-medium",children:p.toAddress.zone})}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("select",{onChange:m=>f(p.id,m.target.value),defaultValue:"",className:"w-full max-w-xs px-3 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",children:[h.jsx("option",{value:"",disabled:!0,children:"Select an available courier..."}),o.filter(m=>m.zone===p.toAddress.zone&&r(m.id)).map(m=>h.jsxs("option",{value:m.id,children:[m.name," (",m.zone,")"]},m.id))]})})]},p.id)),s.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:4,className:"text-center py-8 text-slate-500",children:"No pending return requests."})})]})]})})]})},uA=()=>{const{currentUser:e,clientTransactions:t}=ci();if(!e)return null;const n=t.filter(r=>r.userId===e.id);return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"My Wallet"}),h.jsx("p",{className:"text-slate-500 mt-1",children:"Your wallet is credited with the value of your delivered packages. You can use this balance to pay for future shipping fees."})]}),h.jsx("div",{className:"max-w-md",children:h.jsx(Kt,{title:"Current Balance",value:`${(e.walletBalance??0).toFixed(2)} EGP`,icon:h.jsx(ps,{className:"w-7 h-7"}),color:"#22c55e"})}),h.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[h.jsx("div",{className:"p-5 border-b border-slate-200",children:h.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Transaction History"})}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{className:"bg-slate-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Description"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider text-right",children:"Amount"})]})}),h.jsxs("tbody",{className:"divide-y divide-slate-200",children:[n.sort((r,s)=>new Date(s.date).getTime()-new Date(r.date).getTime()).map(r=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-6 py-4 text-slate-600",children:new Date(r.date).toLocaleString()}),h.jsx("td",{className:"px-6 py-4 text-slate-800",children:r.description}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r.type===I1.DEPOSIT?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r.type})}),h.jsxs("td",{className:`px-6 py-4 font-semibold text-right ${r.type===I1.DEPOSIT?"text-green-600":"text-red-600"}`,children:[r.amount.toFixed(2)," EGP"]})]},r.id)),n.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:4,className:"text-center py-8 text-slate-500",children:"No transactions yet."})})]})]})})]})]})},fA=()=>{const{currentUser:e,shipments:t,getTaxCardNumber:n}=ci(),r=t.filter(O=>O.status===at.DELIVERED&&O.deliveryDate),s=(e==null?void 0:e.role)===ht.CLIENT?r.filter(O=>O.clientId===e.id):r,o=s.reduce((O,H)=>O+H.price,0),f=s.length,p=s.reduce((O,H)=>O+H.packageValue,0),m=s.filter(O=>O.paymentMethod===Or.COD).reduce((O,H)=>O+H.price,0),y=(e==null?void 0:e.role)===ht.CLIENT&&e.id?n(e.id):"",S={},w=new Date;for(let O=29;O>=0;O--){const H=new Date(w);H.setDate(w.getDate()-O);const _=H.toISOString().split("T")[0];S[_]=0}s.forEach(O=>{if(O.deliveryDate){const H=O.deliveryDate.split("T")[0];S.hasOwnProperty(H)&&(S[H]+=O.price)}});const E=Object.entries(S).map(([O,H])=>({date:new Date(O).getDate().toString(),revenue:H})),A=Math.max(...E.map(O=>O.revenue),1),U=()=>{const O=["Shipment ID","Delivery Date","Client","Payment Method","Revenue (EGP)"],H=s.sort((_,T)=>new Date(T.deliveryDate).getTime()-new Date(_.deliveryDate).getTime()).map(_=>[_.id,new Date(_.deliveryDate).toLocaleDateString(),_.clientName,_.paymentMethod,_.price.toFixed(2)]);Wo(O,H,"Financial_Report")};return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Financial Reports"}),h.jsx("p",{className:"text-slate-500 mt-1",children:(e==null?void 0:e.role)===ht.CLIENT?"Your order history and financial summary.":"An overview of the company's financial performance."})]}),h.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[h.jsx(Pl,{className:"w-5 h-5"}),"Export as CSV"]})]}),(e==null?void 0:e.role)===ht.CLIENT&&y&&h.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-xl",children:[h.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Tax Information"}),h.jsxs("p",{className:"text-blue-800",children:["Tax Card Number: ",h.jsx("span",{className:"font-mono font-bold",children:y})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx(Kt,{title:"Total Revenue",value:`${o.toFixed(2)} EGP`,icon:h.jsx(Ro,{className:"w-7 h-7"}),color:"#16a34a"}),h.jsx(Kt,{title:"Shipments Delivered",value:f,icon:h.jsx(ql,{className:"w-7 h-7"}),color:"#3b82f6"}),h.jsx(Kt,{title:"COD to Collect",value:`${m.toFixed(2)} EGP`,icon:h.jsx(ps,{className:"w-7 h-7"}),color:"#f97316"}),h.jsx(Kt,{title:"Net Profit",value:`${p.toFixed(2)} EGP`,icon:h.jsx(Pu,{className:"w-7 h-7"}),color:"#8b5cf6"})]}),h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Daily Revenue (Last 30 Days)"}),h.jsx("div",{className:"h-64 flex items-end gap-2 border-l border-b border-slate-200 pl-4 pb-4",children:E.map(({date:O,revenue:H})=>h.jsxs("div",{className:"flex-1 h-full flex flex-col justify-end items-center group",children:[h.jsx("div",{className:"w-full bg-primary-400 hover:bg-primary-500 transition-colors rounded-t-md",style:{height:`${H/A*100}%`},title:`Day ${O}: ${H.toFixed(2)} EGP`}),h.jsx("span",{className:"text-xs text-slate-500 mt-1",children:O})]},O))})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[h.jsx("div",{className:"p-5",children:h.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"All Transactions"})}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Shipment ID"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Delivery Date"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Client"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Payment Method"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider text-right",children:"Revenue"})]})}),h.jsxs("tbody",{className:"divide-y divide-slate-200",children:[s.sort((O,H)=>new Date(H.deliveryDate).getTime()-new Date(O.deliveryDate).getTime()).map(O=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-6 py-4 font-mono text-sm text-slate-600",children:O.id}),h.jsx("td",{className:"px-6 py-4 text-slate-800",children:new Date(O.deliveryDate).toLocaleDateString()}),h.jsx("td",{className:"px-6 py-4 text-slate-600",children:O.clientName}),h.jsx("td",{className:"px-6 py-4 text-slate-600",children:O.paymentMethod}),h.jsxs("td",{className:"px-6 py-4 font-semibold text-slate-800 text-right",children:[O.price.toFixed(2)," EGP"]})]},O.id)),s.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:5,className:"text-center py-8 text-slate-500",children:"No delivered shipments yet."})})]})]})})]})]})},hA=()=>{const{currentUser:e,getAdminFinancials:t,getClientFinancials:n,canAccessAdminFinancials:r,updateClientFlatRate:s}=ci(),[o,f]=He.useState(!1),[p,m]=He.useState(null),[y,S]=He.useState(0);if(!e||!r(e))return h.jsx("div",{className:"flex items-center justify-center h-96",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Access Denied"}),h.jsx("p",{className:"text-slate-600",children:"Only administrators can access financial data."})]})});const w=t(),E=n(),A=(_,T)=>{m(_),S(T),f(!0)},U=_=>{_.preventDefault(),p!==null&&y>=0&&(s(p,y),f(!1))},O=()=>{const _=["Metric","Value"],T=[["Total Collected Money (by Couriers)",`${w.totalCollectedMoney.toFixed(2)} EGP`],["Undelivered Packages Value",`${w.undeliveredPackagesValue.toFixed(2)} EGP`],["Failed Deliveries Value",`${w.failedDeliveriesValue.toFixed(2)} EGP`],["Total Potential Fees (If All Delivered)",`${w.totalFees.toFixed(2)} EGP`],["Total Revenue (Shipping Fees)",`${w.totalRevenue.toFixed(2)} EGP`],["Total Commission (Paid to Couriers)",`${w.totalCommission.toFixed(2)} EGP`],["Net Profit (Revenue - Commission)",`${w.netRevenue.toFixed(2)} EGP`],["Total Delivered Orders",w.totalOrders.toString()]];Wo(_,T,"Admin_Financial_Report")},H=()=>{const _=["Client Name","Total Orders","Order Sum (EGP)","Flat Rate Fee (EGP)"],T=E.map(D=>[D.clientName,D.totalOrders.toString(),D.orderSum.toFixed(2),D.flatRateFee.toFixed(2)]);Wo(_,T,"Client_Financial_Summary")};return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Admin Financial Dashboard"}),h.jsx("p",{className:"text-slate-500 mt-1",children:"Enhanced financial overview with detailed tracking metrics."})]}),h.jsx("div",{className:"flex gap-2",children:h.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[h.jsx(Pl,{className:"w-5 h-5"}),"Export Report"]})})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx(Kt,{title:"Total Collected Money",value:`${w.totalCollectedMoney.toFixed(2)} EGP`,icon:h.jsx(ps,{className:"w-7 h-7"}),color:"#16a34a",subtitle:"Money collected by couriers"}),h.jsx(Kt,{title:"Undelivered Packages",value:`${w.undeliveredPackagesValue.toFixed(2)} EGP`,icon:h.jsx(oa,{className:"w-7 h-7"}),color:"#f59e0b",subtitle:"Value of pending deliveries"}),h.jsx(Kt,{title:"Failed Deliveries",value:`${w.failedDeliveriesValue.toFixed(2)} EGP`,icon:h.jsx(Bl,{className:"w-7 h-7"}),color:"#ef4444",subtitle:"Value of failed/returned packages"}),h.jsx(Kt,{title:"Total Potential Fees",value:`${w.totalFees.toFixed(2)} EGP`,icon:h.jsx(ps,{className:"w-7 h-7"}),color:"#3b82f6",subtitle:"If all packages delivered"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsx(Kt,{title:"Total Revenue",value:`${w.totalRevenue.toFixed(2)} EGP`,icon:h.jsx(ps,{className:"w-7 h-7"}),color:"#16a34a",subtitle:"Shipping fees earned"}),h.jsx(Kt,{title:"Total Commission",value:`${w.totalCommission.toFixed(2)} EGP`,icon:h.jsx(Oa,{className:"w-7 h-7"}),color:"#f97316",subtitle:"Paid to couriers"}),h.jsx(Kt,{title:"Net Profit",value:`${w.netRevenue.toFixed(2)} EGP`,icon:h.jsx(ql,{className:"w-7 h-7"}),color:"#3b82f6",subtitle:"Revenue - Commission"})]}),h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-6",children:"Financial Performance Overview"}),h.jsxs("div",{className:"h-80 flex items-end gap-8 border-l border-b border-slate-200 pl-6 pb-6",children:[h.jsxs("div",{className:"flex-1 h-full flex flex-col justify-end items-center group",children:[h.jsxs("div",{className:"w-full flex flex-col gap-2",children:[h.jsx("div",{className:"w-full bg-green-500 hover:bg-green-600 transition-colors rounded-t-md relative min-h-[20px]",style:{height:`${Math.max(20,w.totalRevenue/Math.max(w.totalRevenue,w.totalCommission,w.totalFees)*100)}%`},title:`Total Revenue: ${w.totalRevenue.toFixed(2)} EGP`,children:h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-xs font-bold px-1",children:w.totalRevenue.toFixed(0)})}),h.jsx("div",{className:"w-full bg-orange-500 hover:bg-orange-600 transition-colors rounded-t-md relative min-h-[20px]",style:{height:`${Math.max(20,w.totalCommission/Math.max(w.totalRevenue,w.totalCommission,w.totalFees)*100)}%`},title:`Total Commission: ${w.totalCommission.toFixed(2)} EGP`,children:h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-xs font-bold px-1",children:w.totalCommission.toFixed(0)})})]}),h.jsx("span",{className:"text-xs text-slate-500 mt-3 text-center",children:"Revenue vs Commission"})]}),h.jsxs("div",{className:"flex-1 h-full flex flex-col justify-end items-center group",children:[h.jsxs("div",{className:"w-full flex flex-col gap-2",children:[h.jsx("div",{className:"w-full bg-blue-500 hover:bg-blue-600 transition-colors rounded-t-md relative min-h-[20px]",style:{height:`${Math.max(20,w.totalFees/Math.max(w.totalRevenue,w.totalCommission,w.totalFees)*100)}%`},title:`Total Potential Fees: ${w.totalFees.toFixed(2)} EGP`,children:h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-xs font-bold px-1",children:w.totalFees.toFixed(0)})}),h.jsx("div",{className:"w-full bg-green-400 hover:bg-green-500 transition-colors rounded-t-md relative min-h-[20px]",style:{height:`${Math.max(20,w.totalRevenue/Math.max(w.totalRevenue,w.totalCommission,w.totalFees)*100)}%`},title:`Actual Revenue: ${w.totalRevenue.toFixed(2)} EGP`,children:h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-xs font-bold px-1",children:w.totalRevenue.toFixed(0)})})]}),h.jsx("span",{className:"text-xs text-slate-500 mt-3 text-center",children:"Potential vs Actual"})]}),h.jsxs("div",{className:"flex-1 h-full flex flex-col justify-end items-center group",children:[h.jsx("div",{className:"w-full bg-purple-500 hover:bg-purple-600 transition-colors rounded-t-md relative min-h-[20px]",style:{height:`${Math.max(20,Math.max(0,w.netRevenue/Math.max(w.totalRevenue,w.totalCommission,w.totalFees)*100))}%`},title:`Net Profit: ${w.netRevenue.toFixed(2)} EGP`,children:h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-xs font-bold px-1",children:w.netRevenue.toFixed(0)})}),h.jsx("span",{className:"text-xs text-slate-500 mt-3 text-center",children:"Net Profit"})]}),h.jsxs("div",{className:"flex-1 h-full flex flex-col justify-end items-center group",children:[h.jsxs("div",{className:"w-full flex flex-col gap-2",children:[h.jsx("div",{className:"w-full bg-green-500 hover:bg-green-600 transition-colors rounded-t-md relative min-h-[20px]",style:{height:`${Math.max(20,w.totalCollectedMoney/Math.max(w.totalCollectedMoney,w.undeliveredPackagesValue,w.failedDeliveriesValue)*100)}%`},title:`Collected Money: ${w.totalCollectedMoney.toFixed(2)} EGP`,children:h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-xs font-bold px-1",children:w.totalCollectedMoney.toFixed(0)})}),h.jsx("div",{className:"w-full bg-yellow-500 hover:bg-yellow-600 transition-colors rounded-t-md relative min-h-[20px]",style:{height:`${Math.max(20,w.undeliveredPackagesValue/Math.max(w.totalCollectedMoney,w.undeliveredPackagesValue,w.failedDeliveriesValue)*100)}%`},title:`Undelivered Value: ${w.undeliveredPackagesValue.toFixed(2)} EGP`,children:h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-xs font-bold px-1",children:w.undeliveredPackagesValue.toFixed(0)})}),h.jsx("div",{className:"w-full bg-red-500 hover:bg-red-600 transition-colors rounded-t-md relative min-h-[20px]",style:{height:`${Math.max(20,w.failedDeliveriesValue/Math.max(w.totalCollectedMoney,w.undeliveredPackagesValue,w.failedDeliveriesValue)*100)}%`},title:`Failed Deliveries: ${w.failedDeliveriesValue.toFixed(2)} EGP`,children:h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-xs font-bold px-1",children:w.failedDeliveriesValue.toFixed(0)})})]}),h.jsx("span",{className:"text-xs text-slate-500 mt-3 text-center",children:"Delivery Status"})]})]}),h.jsxs("div",{className:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-6 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),h.jsx("span",{className:"font-medium",children:"Revenue"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),h.jsx("span",{className:"font-medium",children:"Commission"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),h.jsx("span",{className:"font-medium",children:"Potential Fees"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-4 h-4 bg-purple-500 rounded"}),h.jsx("span",{className:"font-medium",children:"Net Profit"})]})]})]}),h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Financial Summary"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[h.jsx("h3",{className:"text-sm font-semibold text-green-800 mb-1",children:"Total Revenue"}),h.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[w.totalRevenue.toFixed(2)," EGP"]}),h.jsx("p",{className:"text-xs text-green-600 mt-1",children:"From delivered packages"})]}),h.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[h.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-1",children:"Total Commission"}),h.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[w.totalCommission.toFixed(2)," EGP"]}),h.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Paid to couriers"})]}),h.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[h.jsx("h3",{className:"text-sm font-semibold text-blue-800 mb-1",children:"Potential Revenue"}),h.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[w.totalFees.toFixed(2)," EGP"]}),h.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"If all packages delivered"})]}),h.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[h.jsx("h3",{className:"text-sm font-semibold text-purple-800 mb-1",children:"Net Profit"}),h.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[w.netRevenue.toFixed(2)," EGP"]}),h.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Revenue - Commission"})]})]})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[h.jsxs("div",{className:"p-5 border-b border-slate-200 flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Client Financial Summary"}),h.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:"Revenue breakdown by client with adjustable flat rates."})]}),h.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[h.jsx(Pl,{className:"w-5 h-5"}),"Export CSV"]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Client"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Total Orders"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Order Sum"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Flat Rate Fee"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),h.jsxs("tbody",{className:"divide-y divide-slate-200",children:[E.map(_=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-6 py-4 font-semibold text-slate-800",children:_.clientName}),h.jsx("td",{className:"px-6 py-4 text-slate-600",children:_.totalOrders}),h.jsxs("td",{className:"px-6 py-4 text-slate-600",children:[_.orderSum.toFixed(2)," EGP"]}),h.jsxs("td",{className:"px-6 py-4 font-semibold text-orange-600",children:[_.flatRateFee.toFixed(2)," EGP"]}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("button",{onClick:()=>A(_.clientId,_.flatRateFee),className:"p-2 text-slate-500 hover:text-primary-600 hover:bg-slate-100 rounded-md",title:"Edit Flat Rate",children:h.jsx(Ah,{className:"w-4 h-4"})})})]},_.clientId)),E.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:5,className:"text-center py-8 text-slate-500",children:"No client financial data available."})})]})]})})]}),h.jsx(Ma,{isOpen:o,onClose:()=>f(!1),title:"Update Client Flat Rate",children:h.jsxs("form",{onSubmit:U,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Flat Rate Fee (EGP)"}),h.jsx("input",{type:"number",step:"0.01",min:"0",value:y,onChange:_=>S(parseFloat(_.target.value)||0),className:"w-full px-4 py-2 border border-slate-300 rounded-lg",required:!0}),h.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"This fee is charged per package but not visible to the client."})]}),h.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 bg-slate-200 rounded-lg font-semibold",children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-lg font-semibold",children:"Update Rate"})]})]})})]})},dA=()=>{const{notifications:e,notificationStatus:t,resendNotification:n}=ci(),r={sending:{text:"Sending...",color:"bg-yellow-100 text-yellow-800"},sent:{text:"Sent",color:"bg-green-100 text-green-800"},failed:{text:"Failed",color:"bg-red-100 text-red-800"}};return h.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[h.jsxs("div",{className:"p-5 border-b border-slate-200",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Notifications Log"}),h.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:"A log of all automated email notifications and their delivery status."})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{className:"bg-slate-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Recipient"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Subject"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Shipment ID"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Action"})]})}),h.jsxs("tbody",{className:"divide-y divide-slate-200",children:[e.sort((s,o)=>new Date(o.date).getTime()-new Date(s.date).getTime()).map(s=>{const o=t[s.id]||(s.sent?"sent":"failed");return h.jsxs("tr",{children:[h.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:new Date(s.date).toLocaleString()}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r[o].color}`,children:r[o].text})}),h.jsx("td",{className:"px-6 py-4 text-sm",children:s.recipient}),h.jsx("td",{className:"px-6 py-4 text-sm",children:s.message.split(`

`)[0]}),h.jsx("td",{className:"px-6 py-4 font-mono text-sm",children:s.shipmentId}),h.jsx("td",{className:"px-6 py-4",children:o==="failed"&&h.jsxs("button",{onClick:()=>n(s.id),className:"flex items-center gap-2 px-3 py-1 bg-primary-500 text-white text-xs font-semibold rounded-lg hover:bg-primary-600 transition",children:[h.jsx(sf,{className:"w-4 h-4 transform -scale-x-100"}),"Resend"]})})]},s.id)}),e.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:6,className:"text-center py-8 text-slate-500",children:"No notifications have been generated yet."})})]})]})})]})},gA=()=>{var S,w,E,A,U;const{currentUser:e,updateUser:t}=ci(),[n,r]=He.useState(!1),[s,o]=He.useState({});if(He.useEffect(()=>{e&&o({name:e.name,phone:e.phone||"",address:e.address||{street:"",city:"Cairo",zone:Ia.CAIRO_DOWNTOWN,details:""}})},[e]),!e)return null;const f=O=>{const{name:H,value:_}=O.target;if(H.startsWith("address.")){const T=H.split(".")[1];let D={...s.address,[T]:_};if(T==="city"){const j=_,q=Object.values(Ia).find(K=>K.toLowerCase().startsWith(j.toLowerCase()));D.zone=q||D.zone}o(j=>({...j,address:D}))}else o(T=>({...T,[H]:_}))},p=()=>{t(e.id,s),r(!1)},y=(O=>Object.values(Ia).filter(H=>H.startsWith(O)))(((S=s.address)==null?void 0:S.city)||"Cairo");return h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"My Profile"}),h.jsx("p",{className:"text-slate-500 mt-1",children:"View and edit your personal information and default address."})]}),n?h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300 font-semibold",children:"Cancel"}),h.jsx("button",{onClick:p,className:"px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700",children:"Save Changes"})]}):h.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition",children:[h.jsx(Ah,{className:"w-5 h-5"}),"Edit Profile"]})]}),h.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm space-y-8",children:[h.jsxs("div",{className:"border-b border-slate-200 pb-8",children:[h.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4",children:"Personal Information"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Name"}),n?h.jsx("input",{type:"text",name:"name",value:s.name||"",onChange:f,className:"w-full px-4 py-2 border border-slate-300 rounded-lg"}):h.jsx("p",{className:"text-lg text-slate-800 p-2",children:e.name})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email Address"}),h.jsx("p",{className:"text-lg text-slate-500 p-2 bg-slate-50 rounded-lg",children:e.email})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Phone Number"}),n?h.jsx("input",{type:"tel",name:"phone",value:s.phone||"",onChange:f,className:"w-full px-4 py-2 border border-slate-300 rounded-lg"}):h.jsx("p",{className:"text-lg text-slate-800 p-2",children:e.phone||"Not set"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Role"}),h.jsx("p",{className:"text-lg text-slate-500 p-2 bg-slate-50 rounded-lg",children:e.role})]})]})]}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4",children:"Default Pickup Address"}),n?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Street Address"}),h.jsx("input",{type:"text",name:"address.street",value:((w=s.address)==null?void 0:w.street)||"",onChange:f,className:"w-full px-4 py-2 border border-slate-300 rounded-lg"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"City"}),h.jsxs("select",{name:"address.city",value:((E=s.address)==null?void 0:E.city)||"Cairo",onChange:f,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",children:[h.jsx("option",{value:"Cairo",children:"Cairo"}),h.jsx("option",{value:"Giza",children:"Giza"}),h.jsx("option",{value:"Alexandria",children:"Alexandria"}),h.jsx("option",{value:"Other",children:"Other Governorates"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Zone"}),h.jsx("select",{name:"address.zone",value:((A=s.address)==null?void 0:A.zone)||"",onChange:f,className:"w-full px-4 py-2 border border-slate-300 rounded-lg",children:y.map(O=>h.jsx("option",{value:O,children:O},O))})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Apartment, Suite, etc."}),h.jsx("input",{type:"text",name:"address.details",value:((U=s.address)==null?void 0:U.details)||"",onChange:f,className:"w-full px-4 py-2 border border-slate-300 rounded-lg"})]})]}):e.address?h.jsxs("div",{className:"text-lg text-slate-800 p-4 bg-slate-50 rounded-lg",children:[h.jsx("p",{className:"font-semibold",children:e.address.street}),h.jsx("p",{children:e.address.details}),h.jsxs("p",{children:[e.address.city,", ",e.address.zone]})]}):h.jsx("p",{className:"text-slate-500",children:"Please set your default address."})]})]})]})},pA=()=>{const{users:e}=ci(),t=He.useRef(null),[n,r]=He.useState(!1),s=e.filter(o=>o.role===ht.COURIER&&o.location);return He.useEffect(()=>{const o=()=>{window.google&&window.google.maps?r(!0):setTimeout(o,100)};o()},[]),He.useEffect(()=>{if(!n||!t.current)return;const o=new window.google.maps.Map(t.current,{center:{lat:30.0444,lng:31.2357},zoom:11,mapTypeControl:!1,streetViewControl:!1}),f=new window.google.maps.InfoWindow;s.forEach(p=>{if(!p.location)return;const m=new window.google.maps.Marker({position:p.location,map:o,title:p.name,animation:window.google.maps.Animation.DROP});m.addListener("click",()=>{f.setContent(`
                    <div class="font-sans">
                        <div class="font-bold text-md">${p.name}</div>
                        <div class="text-sm text-slate-600">Zone: ${p.zone}</div>
                    </div>
                `),f.open(o,m)})})},[n,s]),h.jsxs("div",{className:"bg-white rounded-xl shadow-sm h-full w-full flex flex-col overflow-hidden",children:[h.jsxs("div",{className:"p-5 border-b border-slate-200",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Live Courier Tracking"}),h.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:"Real-time locations of all active couriers."})]}),h.jsx("div",{className:"flex-1 bg-slate-200",children:n?h.jsx("div",{ref:t,className:"w-full h-full"}):h.jsxs("div",{className:"w-full h-full flex items-center justify-center flex-col gap-4",children:[h.jsx("p",{className:"text-slate-600 font-semibold",children:"Loading Map..."}),h.jsx("p",{className:"text-xs text-slate-500 max-w-sm text-center",children:`If the map doesn't load, please ensure the Google Maps API key is set correctly in your environment and has the "Maps JavaScript API" enabled.`})]})})]})},mA=({onSelectShipment:e})=>{const{users:t,shipments:n}=ci(),[r,s]=He.useState("asc"),[o,f]=He.useState(null),[p,m]=He.useState(""),[y,S]=He.useState(""),[w,E]=He.useState("all"),A=He.useMemo(()=>t.filter(K=>K.role===ht.CLIENT).map(K=>({id:K.id,name:K.name,shipmentCount:n.filter(P=>P.clientId===K.id).length,flatRateFee:K.flatRateFee||0})).sort((K,P)=>r==="asc"?K.shipmentCount-P.shipmentCount:P.shipmentCount-K.shipmentCount),[t,n,r]),U=He.useMemo(()=>{if(!o)return[];let j=n.filter(q=>q.clientId===o.id);return p&&(j=j.filter(q=>q.creationDate.startsWith(p))),y.trim()!==""&&(j=j.filter(q=>q.id.toLowerCase().includes(y.trim().toLowerCase()))),w!=="all"&&(j=j.filter(q=>q.status===w)),j.sort((q,K)=>new Date(K.creationDate).getTime()-new Date(q.creationDate).getTime())},[o,n,p,y,w]),O=()=>{f(null),S(""),E("all"),m("")},H=j=>{e(j),O()},_=j=>{const q=t.find(K=>K.id===j.id);q&&f(q)},T=()=>{s(j=>j==="asc"?"desc":"asc")},D=()=>{const j=["Client Name","Number of Shipments","Flat Rate Fee (EGP)"],q=A.map(K=>[K.name,K.shipmentCount,K.flatRateFee.toFixed(2)]);Wo(j,q,"Client_Shipment_Analytics")};return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[h.jsxs("div",{className:"p-5 border-b border-slate-200 flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Client Shipment Analytics"}),h.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:"A summary of shipment volumes per client."})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[h.jsx(Pl,{className:"w-5 h-5"}),"Export as CSV"]}),h.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 font-semibold rounded-lg hover:bg-slate-200 transition","aria-label":`Sort by ${r==="asc"?"highest first":"lowest first"}`,children:[h.jsx(iw,{className:`w-5 h-5 transition-transform duration-300 ${r==="desc"?"rotate-180":""}`}),h.jsxs("span",{children:["Sort by ",r==="asc"?"Highest":"Lowest"]})]})]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{className:"bg-slate-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Client Name"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider text-right",children:"Number of Shipments"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider text-right",children:"Flat Rate Fee (EGP)"})]})}),h.jsxs("tbody",{className:"divide-y divide-slate-200",children:[A.map(j=>h.jsxs("tr",{className:"hover:bg-slate-50 cursor-pointer",onClick:()=>_(j),children:[h.jsxs("td",{className:"px-6 py-4 font-semibold text-slate-800 flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-100 text-primary-600 flex items-center justify-center font-bold text-sm flex-shrink-0",children:j.name.charAt(0)}),j.name]}),h.jsx("td",{className:"px-6 py-4 font-semibold text-slate-800 text-right font-mono text-lg",children:j.shipmentCount}),h.jsx("td",{className:"px-6 py-4 font-semibold text-orange-600 text-right font-mono text-lg",children:j.flatRateFee.toFixed(2)})]},j.id)),A.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:3,className:"text-center py-8 text-slate-500",children:"No client data available."})})]})]})})]}),o&&h.jsx(Ma,{isOpen:!!o,onClose:O,title:`Client Details: ${o.name}`,size:"4xl",children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"p-6 bg-slate-50 rounded-xl",children:[h.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Contact Information"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(V2,{className:"w-6 h-6 text-slate-500 mt-1 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Name"}),h.jsx("p",{className:"font-semibold text-slate-800",children:o.name})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(P3,{className:"w-6 h-6 text-slate-500 mt-1 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Email"}),h.jsx("p",{className:"font-semibold text-slate-800",children:o.email})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(k3,{className:"w-6 h-6 text-slate-500 mt-1 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Phone"}),h.jsx("p",{className:"font-semibold text-slate-800",children:o.phone||"N/A"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(j3,{className:"w-6 h-6 text-slate-500 mt-1 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Address"}),o.address?h.jsx("p",{className:"font-semibold text-slate-800",children:`${o.address.street}, ${o.address.city}`}):h.jsx("p",{className:"font-semibold text-slate-800",children:"N/A"})]})]})]})]}),h.jsxs("div",{children:[h.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:["Shipment History (",U.length,")"]}),h.jsxs("div",{className:"mb-4 bg-slate-100 p-3 rounded-lg flex flex-col sm:flex-row gap-3 items-center",children:[h.jsx("input",{type:"text",placeholder:"Search by Shipment ID...",value:y,onChange:j=>S(j.target.value),className:"w-full sm:w-auto flex-grow px-3 py-1.5 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 text-sm"}),h.jsxs("select",{value:w,onChange:j=>E(j.target.value),className:"w-full sm:w-auto px-3 py-1.5 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 bg-white text-sm",children:[h.jsx("option",{value:"all",children:"All Statuses"}),Object.values(at).map(j=>h.jsx("option",{value:j,children:j},j))]}),h.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[h.jsx("input",{type:"date",value:p,onChange:j=>m(j.target.value),className:"w-full sm:w-auto px-3 py-1.5 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 bg-white text-sm","aria-label":"Filter by date"}),p&&h.jsx("button",{onClick:()=>m(""),className:"px-3 py-1.5 text-sm font-semibold text-slate-600 rounded-lg hover:bg-slate-200 transition","aria-label":"Clear date filter",children:"Clear"})]})]}),h.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-slate-200",children:h.jsx("div",{className:"max-h-96 overflow-y-auto",children:h.jsx(Z2,{shipments:U,onSelect:H})})})]})]})})]})},xA=({courierStats:e})=>{const t=e.deliveriesCompleted+e.deliveriesFailed>0?e.deliveriesCompleted/(e.deliveriesCompleted+e.deliveriesFailed)*100:100,n=e.deliveriesCompleted>0?e.totalEarnings/e.deliveriesCompleted:0;return h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-slate-500",children:"Total Earnings"}),h.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[e.totalEarnings.toFixed(2)," EGP"]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-slate-500",children:"Current Balance"}),h.jsxs("div",{className:"text-2xl font-bold text-slate-800",children:[e.currentBalance.toFixed(2)," EGP"]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-slate-500",children:"Pending Earnings"}),h.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[e.pendingEarnings.toFixed(2)," EGP"]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-slate-500",children:"Avg. Per Delivery"}),h.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[n.toFixed(2)," EGP"]})]})]}),h.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("span",{className:"text-sm text-gray-600",children:"Performance:"}),h.jsxs("div",{className:"flex items-center",title:`Rating: ${e.performanceRating}`,children:[[...Array(5)].map((r,s)=>h.jsx("span",{className:`text-xl ${s<Math.floor(e.performanceRating)?"text-yellow-400":"text-gray-300"}`,children:""},s)),h.jsxs("span",{className:"ml-1 text-sm font-medium",children:["(",e.performanceRating,"/5.0)"]})]})]}),h.jsxs("div",{className:"text-sm text-gray-600",children:["Success Rate: ",h.jsxs("span",{className:"font-bold",children:[t.toFixed(1),"%"]})]}),e.isRestricted&&h.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium",children:" Restricted"})]})]})},yA=({transactions:e})=>{const t={[qs.PENDING]:"bg-yellow-100 text-yellow-800",[qs.PROCESSED]:"bg-green-100 text-green-800",[qs.FAILED]:"bg-red-100 text-red-800"};return h.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[h.jsx("div",{className:"p-5 border-b border-slate-200",children:h.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Transaction History"})}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{className:"bg-slate-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase",children:"Date"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase",children:"Description"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase",children:"Type"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase text-right",children:"Amount (EGP)"})]})}),h.jsxs("tbody",{className:"divide-y divide-slate-200",children:[e.map(n=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 whitespace-nowrap",children:new Date(n.timestamp).toLocaleDateString()}),h.jsx("td",{className:"px-6 py-4 text-sm text-slate-800",children:n.description}),h.jsxs("td",{className:"px-6 py-4 text-sm",children:[h.jsx("span",{className:`px-2 py-1 font-semibold text-xs rounded-full ${n.amount>=0?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:n.type}),n.type===_l.WITHDRAWAL_REQUEST&&h.jsx("span",{className:`ml-2 px-2 py-1 font-semibold text-xs rounded-full ${t[n.status]}`,children:n.status})]}),h.jsx("td",{className:`px-6 py-4 text-right font-bold ${n.amount>=0?"text-green-600":"text-red-600"}`,children:n.amount.toFixed(2)})]},n.id)),e.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:4,className:"text-center py-8 text-slate-500",children:"No transactions recorded."})})]})]})})]})},bA=()=>{const{currentUser:e,courierStats:t,courierTransactions:n,requestCourierPayout:r}=ci(),[s,o]=He.useState(!1);if(!e)return null;const f=t.find(y=>y.courierId===e.id),p=n.filter(y=>y.courierId===e.id).sort((y,S)=>new Date(S.timestamp).getTime()-new Date(y.timestamp).getTime()),m=()=>{!f||f.pendingEarnings<=0||(r(e.id,f.pendingEarnings),o(!1))};return f?h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"My Earnings"}),h.jsx("p",{className:"text-slate-500 mt-1",children:"Your performance and financial summary."})]}),h.jsxs("button",{onClick:()=>o(!0),disabled:f.pendingEarnings<=0,className:"px-6 py-3 bg-green-600 text-white font-semibold rounded-lg shadow-sm hover:bg-green-700 transition disabled:bg-slate-400 disabled:cursor-not-allowed",children:["Request Payout (",f.pendingEarnings.toFixed(2)," EGP)"]})]}),h.jsx(xA,{courierStats:f}),h.jsx(yA,{transactions:p}),h.jsx(Ma,{isOpen:s,onClose:()=>o(!1),title:"Confirm Payout Request",children:h.jsxs("div",{children:[h.jsxs("p",{className:"text-lg",children:["You are about to request a payout for all your pending earnings of ",h.jsxs("strong",{className:"text-green-600",children:[f.pendingEarnings.toFixed(2)," EGP"]}),"."]}),h.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Once confirmed, an administrator will process your request. The funds will then be deducted from your pending balance and transferred to you."}),h.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[h.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-slate-200 rounded-lg font-semibold",children:"Cancel"}),h.jsx("button",{onClick:m,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-semibold",children:"Confirm Request"})]})]})})]}):h.jsx("div",{className:"text-center p-8 bg-white rounded-lg",children:"Could not load your financial data."})},vA=({onSelectShipment:e})=>{const{users:t,shipments:n,courierStats:r,courierTransactions:s,updateCourierSettings:o,applyManualPenalty:f,processCourierPayout:p}=ci(),[m,y]=He.useState(null),[S,w]=He.useState(!1),[E,A]=He.useState(null),[U,O]=He.useState(""),H=q=>{const K=r.find(P=>P.courierId===q);K&&(y(K),w(!0))},_=()=>{w(!1),y(null)},T=(q,K,P)=>{let R=[];P==="delivered"?(R=n.filter(M=>M.courierId===q&&(M.status===at.DELIVERED||M.status===at.RETURNED)),O(`Delivered Shipments for ${K}`)):(R=n.filter(M=>M.courierId===q&&[at.IN_TRANSIT,at.OUT_FOR_DELIVERY,at.RETURN_IN_PROGRESS].includes(M.status)),O(`Pending Shipments for ${K}`)),A(R)},D=q=>{e(q),A(null)},j=t.filter(q=>q.role==="Courier").map(q=>{const K=r.find(L=>L.courierId===q.id),P=s.filter(L=>L.courierId===q.id&&L.type===_l.WITHDRAWAL_REQUEST&&L.status===qs.PENDING),R=n.filter(L=>L.courierId===q.id&&[at.IN_TRANSIT,at.OUT_FOR_DELIVERY,at.RETURN_IN_PROGRESS].includes(L.status)).length,M=n.filter(L=>L.courierId===q.id).length,J=n.filter(L=>L.courierId===q.id&&(L.status===at.DELIVERED||L.status===at.RETURNED)).length,F=n.filter(L=>L.courierId===q.id&&L.status===at.DELIVERY_FAILED).length;return{user:q,stats:K,pendingPayouts:P,pendingCount:R,totalAssigned:M,totalCompleted:J,totalFailed:F}});return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Courier Performance"}),h.jsx("p",{className:"text-slate-500 mt-1",children:"Manage courier financials, restrictions, and view performance metrics."})]}),h.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{className:"bg-slate-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"p-4 text-xs font-medium text-slate-500 uppercase",children:"Courier"}),h.jsx("th",{className:"p-4 text-xs font-medium text-slate-500 uppercase text-center",children:"Total Assigned"}),h.jsx("th",{className:"p-4 text-xs font-medium text-slate-500 uppercase text-center",children:"Completed"}),h.jsx("th",{className:"p-4 text-xs font-medium text-slate-500 uppercase text-center",children:"Failed"}),h.jsx("th",{className:"p-4 text-xs font-medium text-slate-500 uppercase text-center",children:"Pending"}),h.jsx("th",{className:"p-4 text-xs font-medium text-slate-500 uppercase",children:"Earnings (Total / Balance)"}),h.jsx("th",{className:"p-4 text-xs font-medium text-slate-500 uppercase",children:"Commission"}),h.jsx("th",{className:"p-4 text-xs font-medium text-slate-500 uppercase",children:"Status"}),h.jsx("th",{className:"p-4 text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-200",children:j.map(({user:q,stats:K,pendingPayouts:P,pendingCount:R,totalAssigned:M,totalCompleted:J,totalFailed:F})=>h.jsxs("tr",{children:[h.jsx("td",{className:"p-4 font-semibold",children:q.name}),h.jsx("td",{className:"p-4 font-mono text-center text-slate-600",children:M}),h.jsx("td",{className:"p-4 font-mono text-center",children:h.jsx("button",{onClick:()=>T(q.id,q.name,"delivered"),className:"font-mono text-green-600 hover:underline disabled:text-slate-400 disabled:no-underline",disabled:J===0,children:J})}),h.jsx("td",{className:"p-4 font-mono text-center text-red-600",children:F}),h.jsx("td",{className:"p-4 font-mono text-center",children:h.jsx("button",{onClick:()=>T(q.id,q.name,"pending"),className:"font-mono text-blue-600 hover:underline disabled:text-slate-400 disabled:no-underline",disabled:R===0,children:R})}),h.jsx("td",{className:"p-4 font-mono",children:K?`${K.totalEarnings.toFixed(2)} / ${K.currentBalance.toFixed(2)}`:"N/A"}),h.jsx("td",{className:"p-4 text-sm",children:(K==null?void 0:K.commissionType)==="flat"?`${K.commissionValue} EGP`:`${K==null?void 0:K.commissionValue}%`}),h.jsxs("td",{className:"p-4",children:[K!=null&&K.isRestricted?h.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Restricted"}):h.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Active"}),P.length>0&&h.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Payout Pending"})]}),h.jsx("td",{className:"p-4",children:h.jsx("button",{onClick:()=>H(q.id),className:"px-3 py-1.5 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 text-sm",children:"Manage"})})]},q.id))})]})})}),m&&S&&h.jsx(wA,{isOpen:S,onClose:_,courierStats:m,courierUser:t.find(q=>q.id===m.courierId),payoutRequests:s.filter(q=>q.courierId===m.courierId&&q.type===_l.WITHDRAWAL_REQUEST&&q.status===qs.PENDING),onUpdateSettings:o,onApplyPenalty:f,onProcessPayout:p}),h.jsx(Ma,{isOpen:!!E,onClose:()=>A(null),title:U,size:"4xl",children:E&&h.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:h.jsx(Z2,{shipments:E,onSelect:D})})})]})},wA=({isOpen:e,onClose:t,courierStats:n,courierUser:r,payoutRequests:s,onUpdateSettings:o,onApplyPenalty:f,onProcessPayout:p})=>{var P;const{shipments:m}=ci(),[y,S]=He.useState({commissionType:n.commissionType,commissionValue:n.commissionValue}),[w,E]=He.useState(0),[A,U]=He.useState(""),[O,H]=He.useState(""),[_,T]=He.useState(""),D=m.filter(R=>R.courierId===r.id&&R.status===at.DELIVERY_FAILED);He.useEffect(()=>{S({commissionType:n.commissionType,commissionValue:n.commissionValue})},[n]);const j=()=>{o(r.id,y),t()},q=()=>{w>0&&A&&(f(r.id,w,A),E(0),U(""),t())},K=()=>{if(O){const R=D.find(M=>M.id===O);R&&(f(r.id,R.packageValue,_||`Failed delivery penalty for ${R.id} - Package value: ${R.packageValue} EGP`),H(""),T(""),t())}};return h.jsx(Ma,{isOpen:e,onClose:t,title:`Manage ${r.name}`,size:"4xl",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"space-y-6 p-6 bg-slate-50 rounded-lg",children:[h.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Financial Settings"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Commission Type"}),h.jsxs("select",{value:y.commissionType,onChange:R=>S(M=>({...M,commissionType:R.target.value})),className:"w-full mt-1 p-2 border border-slate-300 rounded-md",children:[h.jsx("option",{value:$0.FLAT,children:"Flat Rate (EGP)"}),h.jsx("option",{value:$0.PERCENTAGE,children:"Percentage (%)"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Commission Value"}),h.jsx("input",{type:"number",value:y.commissionValue,onChange:R=>S(M=>({...M,commissionValue:Number(R.target.value)})),className:"w-full mt-1 p-2 border border-slate-300 rounded-md"})]}),h.jsx("button",{onClick:j,className:"w-full bg-primary-600 text-white font-semibold py-2 rounded-lg",children:"Save Settings"})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"space-y-4 p-6 bg-red-50 rounded-lg",children:[h.jsx("h3",{className:"font-bold text-lg text-red-800",children:"Apply Manual Penalty"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Penalty Amount (EGP)"}),h.jsx("input",{type:"number",value:w,onChange:R=>E(Number(R.target.value)),className:"w-full mt-1 p-2 border border-slate-300 rounded-md"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Reason"}),h.jsx("input",{type:"text",placeholder:"e.g., Damaged item, Stolen item",value:A,onChange:R=>U(R.target.value),className:"w-full mt-1 p-2 border border-slate-300 rounded-md"})]}),h.jsx("button",{onClick:q,disabled:w<=0||!A,className:"w-full bg-red-600 text-white font-semibold py-2 rounded-lg disabled:bg-red-300",children:"Apply Penalty"})]}),D.length>0&&h.jsxs("div",{className:"space-y-4 p-6 bg-orange-50 rounded-lg",children:[h.jsx("h3",{className:"font-bold text-lg text-orange-800",children:"Failed Delivery Penalties"}),h.jsx("p",{className:"text-sm text-orange-700",children:"Apply penalty equal to package value for failed deliveries"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Select Failed Shipment"}),h.jsxs("select",{value:O,onChange:R=>H(R.target.value),className:"w-full mt-1 p-2 border border-slate-300 rounded-md",children:[h.jsx("option",{value:"",children:"Choose a failed shipment..."}),D.map(R=>h.jsxs("option",{value:R.id,children:[R.id," - ",R.recipientName," (Value: ",R.packageValue," EGP)"]},R.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Reason (Optional)"}),h.jsx("input",{type:"text",placeholder:"e.g., Package lost, Damaged beyond repair",value:_,onChange:R=>T(R.target.value),className:"w-full mt-1 p-2 border border-slate-300 rounded-md"})]}),O&&h.jsx("div",{className:"bg-orange-100 p-3 rounded-md",children:h.jsxs("p",{className:"text-sm text-orange-800",children:[h.jsx("strong",{children:"Penalty Amount:"})," ",(P=D.find(R=>R.id===O))==null?void 0:P.packageValue," EGP"]})}),h.jsx("button",{onClick:K,disabled:!O,className:"w-full bg-orange-600 text-white font-semibold py-2 rounded-lg disabled:bg-orange-300",children:"Apply Failed Delivery Penalty"})]}),h.jsxs("div",{className:"space-y-4 p-6 bg-green-50 rounded-lg",children:[h.jsx("h3",{className:"font-bold text-lg text-green-800",children:"Process Payouts"}),s.length>0?s.map(R=>h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("p",{children:["Request for ",-R.amount," EGP"]}),h.jsx("button",{onClick:()=>{p(R.id),t()},className:"bg-green-600 text-white px-3 py-1 rounded-md text-sm",children:"Process"})]},R.id)):h.jsx("p",{className:"text-slate-600 text-sm text-center",children:"No pending payout requests."})]})]})]})})},AA=()=>{const{currentUser:e,shipments:t}=ci();if((e==null?void 0:e.role)!==ht.SUPER_USER&&(e==null?void 0:e.role)!==ht.ADMIN)return h.jsx("div",{className:"text-center py-8",children:"Access denied. Super User or Admin access required."});const n=t.length,r=t.filter(O=>O.status===at.DELIVERED),s=t.filter(O=>O.status===at.IN_TRANSIT),o=t.filter(O=>O.status===at.PENDING_ASSIGNMENT),f=t.filter(O=>O.status===at.DELIVERY_FAILED||O.status===at.RETURNED),p=t.filter(O=>O.status===at.RETURN_REQUESTED),m=n>0?r.length/n*100:0,y=r.filter(O=>O.deliveryDate&&O.creationDate),S=y.reduce((O,H)=>{const _=new Date(H.creationDate),T=new Date(H.deliveryDate);return O+(T.getTime()-_.getTime())},0),w=y.length>0?S/(y.length*1e3*60*60):0,E=[{status:"Delivered",count:r.length,color:"#16a34a"},{status:"In Transit",count:s.length,color:"#3b82f6"},{status:"Pending",count:o.length,color:"#f59e0b"},{status:"Failed/Returned",count:f.length,color:"#ef4444"},{status:"Return Requested",count:p.length,color:"#8b5cf6"}],A=Math.max(...E.map(O=>O.count),1),U=()=>{const O=["Shipment ID","Status","Client","Courier","Creation Date","Delivery Date","Package Value","Shipping Fee"],H=t.sort((_,T)=>new Date(T.creationDate).getTime()-new Date(_.creationDate).getTime()).map(_=>[_.id,_.status,_.clientName,_.courierId?`Courier ${_.courierId}`:"Unassigned",new Date(_.creationDate).toLocaleDateString(),_.deliveryDate?new Date(_.deliveryDate).toLocaleDateString():"N/A",_.packageValue.toFixed(2),(_.clientFlatRateFee||0).toFixed(2)]);Wo(O,H,"Total_Shipments_Report")};return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Total Shipments Overview"}),h.jsx("p",{className:"text-slate-500 mt-1",children:"Comprehensive view of all shipments across the platform"})]}),h.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[h.jsx(Pl,{className:"w-5 h-5"}),"Export as CSV"]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx(Kt,{title:"Total Shipments",value:n,icon:h.jsx(oa,{className:"w-7 h-7"}),color:"#3b82f6"}),h.jsx(Kt,{title:"Delivered",value:r.length,icon:h.jsx(ql,{className:"w-7 h-7"}),color:"#16a34a",subtitle:`${m.toFixed(1)}% success rate`}),h.jsx(Kt,{title:"In Transit",value:s.length,icon:h.jsx(Oa,{className:"w-7 h-7"}),color:"#f59e0b"}),h.jsx(Kt,{title:"Pending",value:o.length,icon:h.jsx(Jp,{className:"w-7 h-7"}),color:"#8b5cf6"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsx(Kt,{title:"Failed/Returned",value:f.length,icon:h.jsx(Bl,{className:"w-7 h-7"}),color:"#ef4444"}),h.jsx(Kt,{title:"Return Requested",value:p.length,icon:h.jsx(Bl,{className:"w-7 h-7"}),color:"#dc2626"}),h.jsx(Kt,{title:"Avg Delivery Time",value:`${w.toFixed(1)}h`,icon:h.jsx(Jp,{className:"w-7 h-7"}),color:"#059669",subtitle:"For delivered shipments"})]}),h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Shipments by Status"}),h.jsx("div",{className:"h-64 flex items-end gap-4 border-l border-b border-slate-200 pl-4 pb-4",children:E.map(({status:O,count:H,color:_})=>h.jsxs("div",{className:"flex-1 h-full flex flex-col justify-end items-center group",children:[h.jsx("div",{className:"w-full transition-colors rounded-t-md",style:{height:`${H/A*100}%`,backgroundColor:_},title:`${O}: ${H} shipments`}),h.jsx("span",{className:"text-xs text-slate-500 mt-1 text-center",children:O}),h.jsx("span",{className:"text-xs font-semibold text-slate-700",children:H})]},O))})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[h.jsx("div",{className:"p-5",children:h.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Recent Shipments"})}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Shipment ID"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Client"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Courier"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Created"}),h.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase tracking-wider text-right",children:"Value"})]})}),h.jsxs("tbody",{className:"divide-y divide-slate-200",children:[t.sort((O,H)=>new Date(H.creationDate).getTime()-new Date(O.creationDate).getTime()).slice(0,10).map(O=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-6 py-4 font-mono text-sm text-slate-600",children:O.id}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${O.status===at.DELIVERED?"bg-green-100 text-green-800":O.status===at.IN_TRANSIT?"bg-blue-100 text-blue-800":O.status===at.PENDING_ASSIGNMENT?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:O.status})}),h.jsx("td",{className:"px-6 py-4 text-slate-600",children:O.clientName}),h.jsx("td",{className:"px-6 py-4 text-slate-600",children:O.courierId?`Courier ${O.courierId}`:"Unassigned"}),h.jsx("td",{className:"px-6 py-4 text-slate-800",children:new Date(O.creationDate).toLocaleDateString()}),h.jsxs("td",{className:"px-6 py-4 font-semibold text-slate-800 text-right",children:[O.packageValue.toFixed(2)," EGP"]})]},O.id)),t.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:6,className:"text-center py-8 text-slate-500",children:"No shipments found."})})]})]})})]})]})},NA=({shipment:e})=>{const t=()=>h.jsxs("svg",{x:"0px",y:"0px",viewBox:"0 0 200 60",className:"w-full h-12",children:[h.jsx("rect",{x:"0",y:"0",width:"4",height:"50",fill:"#000000"}),h.jsx("rect",{x:"7",y:"0",width:"2",height:"50",fill:"#000000"}),h.jsx("rect",{x:"15",y:"0",width:"2",height:"50",fill:"#000000"}),h.jsx("rect",{x:"18",y:"0",width:"5",height:"50",fill:"#000000"}),h.jsx("rect",{x:"26",y:"0",width:"1",height:"50",fill:"#000000"}),h.jsx("rect",{x:"30",y:"0",width:"3",height:"50",fill:"#000000"}),h.jsx("rect",{x:"36",y:"0",width:"3",height:"50",fill:"#000000"}),h.jsx("rect",{x:"42",y:"0",width:"2",height:"50",fill:"#000000"}),h.jsx("rect",{x:"47",y:"0",width:"1",height:"50",fill:"#000000"}),h.jsx("rect",{x:"51",y:"0",width:"5",height:"50",fill:"#000000"}),h.jsx("rect",{x:"59",y:"0",width:"2",height:"50",fill:"#000000"}),h.jsx("rect",{x:"64",y:"0",width:"4",height:"50",fill:"#000000"}),h.jsx("rect",{x:"71",y:"0",width:"1",height:"50",fill:"#000000"}),h.jsx("rect",{x:"75",y:"0",width:"2",height:"50",fill:"#000000"}),h.jsx("rect",{x:"80",y:"0",width:"4",height:"50",fill:"#000000"}),h.jsx("rect",{x:"87",y:"0",width:"2",height:"50",fill:"#000000"}),h.jsx("rect",{x:"92",y:"0",width:"3",height:"50",fill:"#000000"}),h.jsx("rect",{x:"98",y:"0",width:"3",height:"50",fill:"#000000"}),h.jsx("rect",{x:"104",y:"0",width:"2",height:"50",fill:"#000000"}),h.jsx("rect",{x:"109",y:"0",width:"1",height:"50",fill:"#000000"}),h.jsx("rect",{x:"113",y:"0",width:"5",height:"50",fill:"#000000"}),h.jsx("rect",{x:"121",y:"0",width:"2",height:"50",fill:"#000000"}),h.jsx("rect",{x:"126",y:"0",width:"4",height:"50",fill:"#000000"}),h.jsx("rect",{x:"133",y:"0",width:"1",height:"50",fill:"#000000"}),h.jsx("rect",{x:"137",y:"0",width:"2",height:"50",fill:"#000000"}),h.jsx("rect",{x:"142",y:"0",width:"4",height:"50",fill:"#000000"}),h.jsx("rect",{x:"149",y:"0",width:"2",height:"50",fill:"#000000"}),h.jsx("rect",{x:"154",y:"0",width:"3",height:"50",fill:"#000000"}),h.jsx("rect",{x:"160",y:"0",width:"3",height:"50",fill:"#000000"}),h.jsx("rect",{x:"166",y:"0",width:"2",height:"50",fill:"#000000"}),h.jsx("rect",{x:"171",y:"0",width:"1",height:"50",fill:"#000000"}),h.jsx("rect",{x:"175",y:"0",width:"5",height:"50",fill:"#000000"}),h.jsx("rect",{x:"183",y:"0",width:"2",height:"50",fill:"#000000"}),h.jsx("rect",{x:"188",y:"0",width:"4",height:"50",fill:"#000000"}),h.jsx("rect",{x:"195",y:"0",width:"1",height:"50",fill:"#000000"})]});return h.jsx("div",{className:"bg-white p-8 border-4 border-dashed border-slate-300 w-full printable-label-container",children:h.jsxs("div",{className:"printable-label",style:{fontFamily:"sans-serif",color:"black"},children:[h.jsxs("header",{className:"flex justify-between items-center pb-4 border-b-2 border-black",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(af,{className:"w-12 h-12"}),h.jsx("div",{children:h.jsx("h1",{className:"text-2xl font-extrabold text-black",children:"Flash Express"})})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("p",{className:"text-sm",children:["Date: ",new Date(e.creationDate).toLocaleDateString()]}),h.jsx("p",{className:"text-sm",children:"Shipment ID:"}),h.jsx("p",{className:"font-bold font-mono text-lg",children:e.id})]})]}),h.jsxs("main",{className:"grid grid-cols-2 gap-8 my-8",children:[h.jsxs("div",{className:"pr-8 border-r-2 border-dashed border-slate-400",children:[h.jsx("h2",{className:"text-xs font-bold uppercase text-slate-600 mb-2",children:"FROM"}),h.jsx("p",{className:"font-bold text-lg",children:e.clientName}),h.jsxs("p",{children:[e.fromAddress.street,", ",e.fromAddress.details]}),h.jsxs("p",{children:[e.fromAddress.city,", ",e.fromAddress.zone]})]}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-xs font-bold uppercase text-slate-600 mb-2",children:"TO"}),h.jsx("p",{className:"font-bold text-xl",children:e.recipientName}),h.jsxs("p",{className:"text-lg",children:[e.toAddress.street,", ",e.toAddress.details]}),h.jsxs("p",{className:"text-lg",children:[e.toAddress.city,", ",e.toAddress.zone]}),h.jsxs("p",{className:"font-bold text-lg mt-2",children:["Phone: ",e.recipientPhone]})]})]}),h.jsx("footer",{className:"border-t-2 border-black pt-4",children:h.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-xs uppercase font-bold text-slate-600",children:"Payment Details"}),h.jsx("p",{className:"text-2xl font-bold",children:e.paymentMethod}),e.paymentMethod===Or.COD&&h.jsxs("p",{className:"text-3xl font-extrabold text-green-600",children:[e.price.toFixed(2)," EGP"]}),h.jsx("p",{className:"text-xs uppercase font-bold text-slate-600 mt-4",children:"Package"}),h.jsxs("p",{children:[e.packageDescription,e.isLargeOrder&&" (Large Order)"]})]}),h.jsxs("div",{className:"text-center",children:[h.jsx(t,{}),h.jsx("p",{className:"font-mono tracking-widest text-sm",children:e.id})]})]})})]})})},SA=()=>{const{currentUser:e,logout:t,users:n,updateShipmentStatus:r,reassignCourier:s,getCourierName:o}=ci(),[f,p]=He.useState("dashboard"),[m,y]=He.useState(null),[S,w]=He.useState(null),[E,A]=He.useState(null),[U,O]=He.useState(!1),[H,_]=He.useState(null),T=()=>{y(null),O(!1),_(null)},D=()=>{m&&H&&(s(m.id,H),T())};if(He.useEffect(()=>(S?document.body.classList.add("printing-label"):document.body.classList.remove("printing-label"),()=>document.body.classList.remove("printing-label")),[S]),!e)return null;const j=()=>{window.print()},q=()=>{E&&r(E.id,at.RETURN_REQUESTED),A(null)},K=()=>{switch(f){case"dashboard":return h.jsx(em,{setActiveView:p});case"shipments":return h.jsx(x6,{onSelectShipment:y});case"create":return h.jsx(b6,{});case"assign":return h.jsx(v6,{});case"tasks":return h.jsx(oA,{});case"users":return h.jsx(lA,{});case"returns":return h.jsx(cA,{});case"wallet":return h.jsx(uA,{});case"financials":return h.jsx(fA,{});case"admin-financials":return h.jsx(hA,{});case"client-analytics":return h.jsx(mA,{onSelectShipment:y});case"notifications":return h.jsx(dA,{});case"profile":return h.jsx(gA,{});case"map":return h.jsx(pA,{});case"courier-financials":return h.jsx(bA,{});case"courier-performance":return h.jsx(vA,{onSelectShipment:y});case"total-shipments":return h.jsx(AA,{});default:return h.jsx(em,{setActiveView:p})}};return h.jsxs("div",{className:"flex h-screen bg-slate-100",children:[h.jsx(fw,{role:e.role,activeView:f,setActiveView:p}),h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[h.jsx(hw,{onLogout:t,user:e,onNavigate:p}),h.jsx("main",{className:"flex-1 overflow-y-auto p-6 lg:p-8",children:K()})]}),h.jsx(Ma,{isOpen:!!m,onClose:T,title:`Shipment Details: ${m==null?void 0:m.id}`,children:m&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-between items-start gap-4",children:[h.jsxs("div",{children:[h.jsxs("p",{className:"mb-1",children:[h.jsx("strong",{children:"Status:"})," ",h.jsx(Eh,{status:m.status})]}),h.jsxs("p",{className:"text-sm text-slate-600",children:[h.jsx("strong",{children:"From:"})," ",m.fromAddress.street,", ",m.fromAddress.city]}),h.jsxs("p",{className:"text-sm text-slate-600",children:[h.jsx("strong",{children:"To:"})," ",m.toAddress.street,", ",m.toAddress.city]}),h.jsxs("p",{className:"text-sm text-slate-600",children:[h.jsx("strong",{children:"Courier:"})," ",o(m.courierId)]})]}),h.jsxs("div",{className:"flex flex-col gap-2 items-end flex-shrink-0",children:[(e.role===ht.ADMIN||e.role===ht.CLIENT)&&h.jsxs("button",{onClick:()=>w(m),className:"flex items-center gap-2 px-3 py-2 bg-slate-100 text-slate-700 font-semibold rounded-lg hover:bg-slate-200 transition w-full justify-center text-sm",children:[h.jsx(Qp,{className:"w-5 h-5"}),"Print Label"]}),e.role===ht.CLIENT&&m.status===at.DELIVERED&&h.jsxs("button",{onClick:()=>A(m),className:"flex items-center gap-2 px-3 py-2 bg-orange-100 text-orange-800 font-semibold rounded-lg hover:bg-orange-200 transition w-full justify-center text-sm",children:[h.jsx(sf,{className:"w-5 h-5"}),"Request Return"]})]})]}),m.deliveryPhoto&&h.jsxs("div",{children:[h.jsx("strong",{children:"Delivery Photo:"}),h.jsx("img",{src:m.deliveryPhoto,alt:"Delivery Proof",className:"border rounded-lg mt-2 max-w-sm"})]}),m.failureReason&&h.jsxs("div",{children:[h.jsx("strong",{children:"Failure Reason:"}),h.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg mt-2",children:m.failureReason})]}),e.role===ht.ADMIN&&m.courierId&&![at.DELIVERED,at.RETURNED,at.DELIVERY_FAILED].includes(m.status)&&h.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200",children:U?h.jsxs("div",{className:"space-y-3 p-4 bg-slate-50 rounded-lg",children:[h.jsx("h4",{className:"font-semibold text-slate-700",children:"Select new courier:"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("select",{onChange:P=>_(parseInt(P.target.value)),defaultValue:"",className:"flex-grow px-3 py-2 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",children:[h.jsx("option",{value:"",disabled:!0,children:"Available Couriers..."}),n.filter(P=>P.role===ht.COURIER).map(P=>h.jsxs("option",{value:P.id,children:[P.name," (",P.zone,")"]},P.id))]}),h.jsx("button",{onClick:D,disabled:!H,className:"px-4 py-2 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition disabled:bg-slate-400",children:"Save"}),h.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300",children:"Cancel"})]})]}):h.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-2 px-3 py-2 bg-yellow-100 text-yellow-800 font-semibold rounded-lg hover:bg-yellow-200 transition text-sm",children:[h.jsx(rw,{className:"w-5 h-5"}),"Re-assign Courier"]})})]})}),h.jsx(Ma,{isOpen:!!S,onClose:()=>w(null),title:"Print Shipment Label",size:"4xl",children:S&&h.jsxs("div",{className:"flex flex-col gap-6",children:[h.jsx(NA,{shipment:S}),h.jsxs("div",{className:"flex justify-end gap-4 p-4 -mb-6 -mx-6 bg-slate-50 rounded-b-xl",children:[h.jsx("button",{onClick:()=>w(null),className:"px-6 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300 font-semibold",children:"Close"}),h.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-6 py-2 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition",children:[h.jsx(Qp,{className:"w-5 h-5"}),"Print"]})]})]})}),h.jsx(Ma,{isOpen:!!E,onClose:()=>A(null),title:"Confirm Return Request",size:"md",children:E&&h.jsxs("div",{children:[h.jsxs("p",{children:["Are you sure you want to request a return for shipment ",h.jsx("strong",{children:E.id}),"? A courier will be assigned to pick up the item from ",h.jsx("strong",{children:E.recipientName}),"."]}),h.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[h.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-slate-200 rounded-lg font-semibold",children:"Cancel"}),h.jsx("button",{onClick:q,className:"px-4 py-2 bg-orange-500 text-white rounded-lg font-semibold",children:"Confirm Request"})]})]})})]})},CA=[at.PENDING_ASSIGNMENT,at.ASSIGNED_TO_COURIER,at.PICKED_UP,at.IN_TRANSIT,at.OUT_FOR_DELIVERY,at.DELIVERED],EA=[{status:at.PENDING_ASSIGNMENT,icon:h.jsx(Nc,{}),title:"Shipment Created",description:"The shipment request has been received."},{status:at.ASSIGNED_TO_COURIER,icon:h.jsx(V2,{}),title:"Courier Assigned",description:"A courier is on their way to pick up the package."},{status:at.PICKED_UP,icon:h.jsx(Oa,{}),title:"Picked Up",description:"The courier has collected the package."},{status:at.IN_TRANSIT,icon:h.jsx(Oa,{}),title:"In Transit",description:"The package is on its way to the destination city."},{status:at.OUT_FOR_DELIVERY,icon:h.jsx(j3,{}),title:"Out for Delivery",description:"The package is on its final leg of the journey."},{status:at.DELIVERED,icon:h.jsx(ql,{}),title:"Delivered",description:"The package has been successfully delivered."}],TA=({shipment:e})=>{const t=CA.indexOf(e.status),n=e.status===at.DELIVERY_FAILED;return h.jsxs("div",{className:"relative pl-8",children:[h.jsx("div",{className:"absolute left-4 top-4 bottom-4 w-0.5 bg-slate-200"}),h.jsxs("div",{className:"space-y-8",children:[EA.map((r,s)=>{const o=t>=s,f=t===s;return h.jsxs("div",{className:"relative flex items-start gap-4",children:[h.jsx("div",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1/2 flex items-center justify-center w-8 h-8 rounded-full z-10 ${o?"bg-primary-600 text-white":"bg-slate-200 text-slate-500"}`,children:Fl.cloneElement(r.icon,{className:"w-5 h-5"})}),h.jsxs("div",{className:"pt-1",children:[h.jsx("p",{className:`font-bold ${o?"text-slate-800":"text-slate-500"}`,children:r.title}),h.jsx("p",{className:"text-sm text-slate-600",children:r.description}),f&&e.deliveryDate&&r.status===at.DELIVERED&&h.jsx("p",{className:"text-xs text-green-600 font-medium mt-1",children:new Date(e.deliveryDate).toLocaleString()})]})]},r.status)}),n&&h.jsxs("div",{className:"relative flex items-start gap-4",children:[h.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1/2 flex items-center justify-center w-8 h-8 rounded-full z-10 bg-red-600 text-white",children:h.jsx(Bl,{className:"w-5 h-5"})}),h.jsxs("div",{className:"pt-1",children:[h.jsx("p",{className:"font-bold text-red-800",children:"Delivery Attempt Failed"}),h.jsx("p",{className:"text-sm text-slate-600",children:"The courier was unable to deliver the package. They will try again."})]})]})]})]})},_A=({onBackToApp:e})=>{const[t,n]=He.useState(""),[r,s]=He.useState(""),[o,f]=He.useState(null),[p,m]=He.useState(!1),[y,S]=He.useState(null),w=async E=>{if(E.preventDefault(),f(null),S(null),!t.trim()||!r.trim()){S("Please enter both a tracking ID and phone number.");return}m(!0);try{const A=await $i("/api/track",{method:"POST",body:JSON.stringify({trackingId:t,phone:r})});f(A)}catch(A){S(A.message)}finally{m(!1)}};return h.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[h.jsx("header",{className:"p-4 border-b border-slate-200 bg-white",children:h.jsxs("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(af,{className:"w-9 h-9"}),h.jsx("h1",{className:"text-xl font-bold text-slate-800",children:"Flash Express Tracking"})]}),h.jsx("button",{onClick:e,className:"text-sm font-semibold text-primary-600 hover:text-primary-800",children:"Back to Portal"})]})}),h.jsx("main",{className:"flex-grow flex items-center justify-center p-4",children:h.jsx("div",{className:"w-full max-w-6xl mx-auto",children:o?h.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg animate-fade-in-up",children:[h.jsxs("div",{className:"flex justify-between items-start mb-6 pb-6 border-b border-slate-200",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Shipment Details"}),h.jsx("p",{className:"font-mono text-slate-600",children:o.id})]}),h.jsx(Eh,{status:o.status})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase",children:"From"}),h.jsx("p",{className:"text-lg font-medium text-slate-800",children:o.clientName}),h.jsxs("p",{className:"text-slate-600",children:[o.fromAddress.street,", ",o.fromAddress.city]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase",children:"To"}),h.jsx("p",{className:"text-lg font-medium text-slate-800",children:o.recipientName}),h.jsxs("p",{className:"text-slate-600",children:[o.toAddress.street,", ",o.toAddress.city]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase",children:"Last Updated"}),h.jsx("p",{className:"text-lg font-medium text-slate-800",children:new Date(o.creationDate).toLocaleString()})]})]}),h.jsxs("div",{className:"lg:col-span-2",children:[h.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Tracking History"}),h.jsx(TA,{shipment:o})]})]})]}):h.jsxs("div",{className:"w-full max-w-lg mx-auto bg-white p-8 rounded-xl shadow-lg",children:[h.jsx("h2",{className:"text-3xl font-bold text-slate-800 text-center",children:"Track Your Shipment"}),h.jsx("p",{className:"text-slate-600 text-center mt-2 mb-8",children:"Enter the shipment ID and your phone number to see its status."}),y&&h.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md relative mb-6",role:"alert",children:[h.jsx("strong",{className:"font-bold",children:"Tracking Failed: "}),h.jsx("span",{className:"block sm:inline",children:y})]}),h.jsxs("form",{onSubmit:w,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"trackingId",className:"block text-sm font-medium text-slate-700",children:"Shipment ID"}),h.jsxs("div",{className:"relative mt-1",children:[h.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:h.jsx("svg",{className:"h-5 w-5 text-slate-400",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-4V3a1 1 0 00-1-1H9zm-1 4a1 1 0 100 2 1 1 0 000-2zM8 9a1 1 0 112 0 1 1 0 01-2 0z",clipRule:"evenodd"})})}),h.jsx("input",{id:"trackingId",type:"text",value:t,onChange:E=>n(E.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., FLS123456",required:!0})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-slate-700",children:"Phone Number (Sender or Recipient)"}),h.jsxs("div",{className:"relative mt-1",children:[h.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:h.jsx(k3,{className:"h-5 w-5 text-slate-400"})}),h.jsx("input",{id:"phoneNumber",type:"tel",value:r,onChange:E=>s(E.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 rounded-lg focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., 01012345678",required:!0})]})]}),h.jsx("button",{type:"submit",disabled:p,className:"w-full flex justify-center bg-primary-600 text-white font-semibold py-3 px-4 rounded-lg shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition duration-300 disabled:bg-slate-400",children:p?"Searching...":"Track Now"})]})]})})})]})},IA=()=>{const{currentUser:e,isLoading:t}=ci(),[n,r]=He.useState(!1);return n?h.jsx(_A,{onBackToApp:()=>r(!1)}):t?h.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-100",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-primary-600 mx-auto"}),h.jsx("h2",{className:"text-2xl font-bold text-slate-800 mt-4",children:"Loading Data..."}),h.jsx("p",{className:"text-slate-600",children:"Please wait while we fetch your information."})]})}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"transition-opacity duration-500 opacity-100",children:e?h.jsx(SA,{}):h.jsx(uw,{onTrackPackageClick:()=>r(!0)})}),h.jsx(cw,{})]})},DA=()=>h.jsx($4,{children:h.jsx(IA,{})}),py=document.getElementById("root");if(!py)throw new Error("Could not find root element to mount to");const RA=K4.createRoot(py);RA.render(h.jsx(Fl.StrictMode,{children:h.jsx(DA,{})}));export{On as _,Ms as c,ih as g};
